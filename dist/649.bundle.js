/*! For license information please see 649.bundle.js.LICENSE.txt */
var t={41(t,e,n){let r=n(82189),i=n(4809).uniqueId;t.exports={run:function(t){("greedy"===t.graph().acyclicer?r(t,function(t){return e=>t.edge(e).weight}(t)):function(t){let e=[],n={},r={};return t.nodes().forEach(function i(o){r.hasOwnProperty(o)||(r[o]=!0,n[o]=!0,t.outEdges(o).forEach(t=>{n.hasOwnProperty(t.w)?e.push(t):i(t.w)}),delete n[o])}),e}(t)).forEach(e=>{let n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,i("rev"))})},undo:function(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.reversed){t.removeEdge(e);let r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},659(t,e,n){var r=n(51873),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},1882(t,e,n){var r=n(72552),i=n(23805);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},2523(t){t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},2543(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",u=32,c=128,l=1/0,h=9007199254740991,f=NaN,d=4294967295,p=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",v="[object Array]",m="[object Boolean]",y="[object Date]",b="[object Error]",x="[object Function]",w="[object GeneratorFunction]",_="[object Map]",E="[object Number]",A="[object Object]",k="[object Promise]",S="[object RegExp]",T="[object Set]",P="[object String]",C="[object Symbol]",N="[object WeakMap]",L="[object ArrayBuffer]",O="[object DataView]",M="[object Float32Array]",I="[object Float64Array]",R="[object Int8Array]",j="[object Int16Array]",D="[object Int32Array]",B="[object Uint8Array]",V="[object Uint8ClampedArray]",F="[object Uint16Array]",z="[object Uint32Array]",G=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,H=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,W=RegExp(H.source),X=RegExp($.source),Y=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,dt=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,mt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",At="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+wt+"]",Ct="["+Tt+"]",Nt="["+_t+"]",Lt="\\d+",Ot="["+Et+"]",Mt="["+At+"]",It="[^"+wt+Tt+Lt+Et+At+kt+"]",Rt="\\ud83c[\\udffb-\\udfff]",jt="[^"+wt+"]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+kt+"]",Ft="\\u200d",zt="(?:"+Mt+"|"+It+")",Gt="(?:"+Vt+"|"+It+")",Ut="(?:['’](?:d|ll|m|re|s|t|ve))?",qt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ht="(?:"+Nt+"|"+Rt+")?",$t="["+St+"]?",Wt=$t+Ht+"(?:"+Ft+"(?:"+[jt,Dt,Bt].join("|")+")"+$t+Ht+")*",Xt="(?:"+[Ot,Dt,Bt].join("|")+")"+Wt,Yt="(?:"+[jt+Nt+"?",Nt,Dt,Bt,Pt].join("|")+")",Zt=RegExp("['’]","g"),Jt=RegExp(Nt,"g"),Kt=RegExp(Rt+"(?="+Rt+")|"+Yt+Wt,"g"),Qt=RegExp([Vt+"?"+Mt+"+"+Ut+"(?="+[Ct,Vt,"$"].join("|")+")",Gt+"+"+qt+"(?="+[Ct,Vt+zt,"$"].join("|")+")",Vt+"?"+zt+"+"+Ut,Vt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lt,Xt].join("|"),"g"),te=RegExp("["+Ft+wt+_t+St+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[M]=ie[I]=ie[R]=ie[j]=ie[D]=ie[B]=ie[V]=ie[F]=ie[z]=!0,ie[g]=ie[v]=ie[L]=ie[m]=ie[O]=ie[y]=ie[b]=ie[x]=ie[_]=ie[E]=ie[A]=ie[S]=ie[T]=ie[P]=ie[N]=!1;var oe={};oe[g]=oe[v]=oe[L]=oe[O]=oe[m]=oe[y]=oe[M]=oe[I]=oe[R]=oe[j]=oe[D]=oe[_]=oe[E]=oe[A]=oe[S]=oe[T]=oe[P]=oe[C]=oe[B]=oe[V]=oe[F]=oe[z]=!0,oe[b]=oe[x]=oe[N]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,ue=parseInt,ce="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,le="object"==typeof self&&self&&self.Object===Object&&self,he=ce||le||Function("return this")(),fe=e&&!e.nodeType&&e,de=fe&&t&&!t.nodeType&&t,pe=de&&de.exports===fe,ge=pe&&ce.process,ve=function(){try{return de&&de.require&&de.require("util").types||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),me=ve&&ve.isArrayBuffer,ye=ve&&ve.isDate,be=ve&&ve.isMap,xe=ve&&ve.isRegExp,we=ve&&ve.isSet,_e=ve&&ve.isTypedArray;function Ee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ae(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Se(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ce(t,e){return!(null==t||!t.length)&&Ve(t,e,0)>-1}function Ne(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Le(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Oe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ie(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Re(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var je=Ue("length");function De(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function Be(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Be(t,ze,n)}function Fe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function ze(t){return t!=t}function Ge(t,e){var n=null==t?0:t.length;return n?$e(t,e)/n:f}function Ue(t){return function(e){return null==e?i:e[t]}}function qe(t){return function(e){return null==t?i:t[e]}}function He(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function $e(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function We(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Xe(t){return t?t.slice(0,fn(t)+1).replace(rt,""):t}function Ye(t){return function(e){return t(e)}}function Ze(t,e){return Le(e,function(e){return t[e]})}function Je(t,e){return t.has(e)}function Ke(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function Qe(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var tn=qe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+se[t]}function rn(t){return te.test(t)}function on(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function sn(t,e){return function(n){return t(e(n))}}function an(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function un(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function ln(t){return rn(t)?function(t){for(var e=Kt.lastIndex=0;Kt.test(t);)++e;return e}(t):je(t)}function hn(t){return rn(t)?function(t){return t.match(Kt)||[]}(t):function(t){return t.split("")}(t)}function fn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var dn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?he:pn.defaults(he.Object(),e,pn.pick(he,ne))).Array,it=e.Date,wt=e.Error,_t=e.Function,Et=e.Math,At=e.Object,kt=e.RegExp,St=e.String,Tt=e.TypeError,Pt=r.prototype,Ct=_t.prototype,Nt=At.prototype,Lt=e["__core-js_shared__"],Ot=Ct.toString,Mt=Nt.hasOwnProperty,It=0,Rt=(n=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",jt=Nt.toString,Dt=Ot.call(At),Bt=he._,Vt=kt("^"+Ot.call(Mt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ft=pe?e.Buffer:i,zt=e.Symbol,Gt=e.Uint8Array,Ut=Ft?Ft.allocUnsafe:i,qt=sn(At.getPrototypeOf,At),Ht=At.create,$t=Nt.propertyIsEnumerable,Wt=Pt.splice,Xt=zt?zt.isConcatSpreadable:i,Yt=zt?zt.iterator:i,Kt=zt?zt.toStringTag:i,te=function(){try{var t=uo(At,"defineProperty");return t({},"",{}),t}catch(t){}}(),se=e.clearTimeout!==he.clearTimeout&&e.clearTimeout,ce=it&&it.now!==he.Date.now&&it.now,le=e.setTimeout!==he.setTimeout&&e.setTimeout,fe=Et.ceil,de=Et.floor,ge=At.getOwnPropertySymbols,ve=Ft?Ft.isBuffer:i,je=e.isFinite,qe=Pt.join,gn=sn(At.keys,At),vn=Et.max,mn=Et.min,yn=it.now,bn=e.parseInt,xn=Et.random,wn=Pt.reverse,_n=uo(e,"DataView"),En=uo(e,"Map"),An=uo(e,"Promise"),kn=uo(e,"Set"),Sn=uo(e,"WeakMap"),Tn=uo(At,"create"),Pn=Sn&&new Sn,Cn={},Nn=Ro(_n),Ln=Ro(En),On=Ro(An),Mn=Ro(kn),In=Ro(Sn),Rn=zt?zt.prototype:i,jn=Rn?Rn.valueOf:i,Dn=Rn?Rn.toString:i;function Bn(t){if(Ks(t)&&!zs(t)&&!(t instanceof Gn)){if(t instanceof zn)return t;if(Mt.call(t,"__wrapped__"))return jo(t)}return new zn(t)}var Vn=function(){function t(){}return function(e){if(!Js(e))return{};if(Ht)return Ht(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Fn(){}function zn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Gn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Wn(t){var e=this.__data__=new qn(t);this.size=e.size}function Xn(t,e){var n=zs(t),r=!n&&Fs(t),i=!n&&!r&&Hs(t),o=!n&&!r&&!i&&sa(t),s=n||r||i||o,a=s?We(t.length,St):[],u=a.length;for(var c in t)!e&&!Mt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vo(c,u))||a.push(c);return a}function Yn(t){var e=t.length;return e?t[Hr(0,e-1)]:i}function Zn(t,e){return Oo(Si(t),or(e,0,t.length))}function Jn(t){return Oo(Si(t))}function Kn(t,e,n){(n!==i&&!Ds(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Qn(t,e,n){var r=t[e];Mt.call(t,e)&&Ds(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Ds(t[n][0],e))return n;return-1}function er(t,e,n,r){return lr(t,function(t,i,o){e(r,t,n(t),o)}),r}function nr(t,e){return t&&Ti(e,Pa(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Ea(t,e[n]);return s}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function sr(t,e,n,r,o,s){var a,u=1&e,c=2&e,l=4&e;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!Js(t))return t;var h=zs(t);if(h){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Si(t,a)}else{var f=ho(t),d=f==x||f==w;if(Hs(t))return xi(t,u);if(f==A||f==g||d&&!o){if(a=c||d?{}:po(t),!u)return c?function(t,e){return Ti(t,lo(t),e)}(t,function(t,e){return t&&Ti(e,Ca(e),t)}(a,t)):function(t,e){return Ti(t,co(t),e)}(t,nr(a,t))}else{if(!oe[f])return o?t:{};a=function(t,e,n){var r,i=t.constructor;switch(e){case L:return wi(t);case m:case y:return new i(+t);case O:return function(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case M:case I:case R:case j:case D:case B:case V:case F:case z:return _i(t,n);case _:return new i;case E:case P:return new i(t);case S:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new i;case C:return r=t,jn?At(jn.call(r)):{}}}(t,f,u)}}s||(s=new Wn);var p=s.get(t);if(p)return p;s.set(t,a),ra(t)?t.forEach(function(r){a.add(sr(r,e,n,r,t,s))}):Qs(t)&&t.forEach(function(r,i){a.set(i,sr(r,e,n,i,t,s))});var v=h?i:(l?c?eo:to:c?Ca:Pa)(t);return ke(v||t,function(r,i){v&&(r=t[i=r]),Qn(a,i,sr(r,e,n,i,t,s))}),a}function ar(t,e,n){var r=n.length;if(null==t)return!r;for(t=At(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Tt(o);return Po(function(){t.apply(i,n)},e)}function cr(t,e,n,r){var i=-1,o=Ce,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Le(e,Ye(n))),r?(o=Ne,s=!1):e.length>=200&&(o=Je,s=!1,e=new $n(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Bn.templateSettings={escape:Y,evaluate:Z,interpolate:J,variable:"",imports:{_:Bn}},Bn.prototype=Fn.prototype,Bn.prototype.constructor=Bn,zn.prototype=Vn(Fn.prototype),zn.prototype.constructor=zn,Gn.prototype=Vn(Fn.prototype),Gn.prototype.constructor=Gn,Un.prototype.clear=function(){this.__data__=Tn?Tn(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(t){var e=this.__data__;if(Tn){var n=e[t];return n===s?i:n}return Mt.call(e,t)?e[t]:i},Un.prototype.has=function(t){var e=this.__data__;return Tn?e[t]!==i:Mt.call(e,t)},Un.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Tn&&e===i?s:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Wt.call(e,n,1),--this.size,0))},qn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},qn.prototype.has=function(t){return tr(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(En||qn),string:new Un}},Hn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return so(this,t).get(t)},Hn.prototype.has=function(t){return so(this,t).has(t)},Hn.prototype.set=function(t,e){var n=so(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},$n.prototype.add=$n.prototype.push=function(t){return this.__data__.set(t,s),this},$n.prototype.has=function(t){return this.__data__.has(t)},Wn.prototype.clear=function(){this.__data__=new qn,this.size=0},Wn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Wn.prototype.get=function(t){return this.__data__.get(t)},Wn.prototype.has=function(t){return this.__data__.has(t)},Wn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(r)}return n.set(t,e),this.size=n.size,this};var lr=Ni(yr),hr=Ni(br,!0);function fr(t,e){var n=!0;return lr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function dr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!oa(a):n(a,u)))var u=a,c=s}return c}function pr(t,e){var n=[];return lr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function gr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=go),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?gr(a,e-1,n,r,i):Oe(i,a):r||(i[i.length]=a)}return i}var vr=Li(),mr=Li(!0);function yr(t,e){return t&&vr(t,e,Pa)}function br(t,e){return t&&mr(t,e,Pa)}function xr(t,e){return Pe(e,function(e){return Xs(t[e])})}function wr(t,e){for(var n=0,r=(e=vi(e,t)).length;null!=t&&n<r;)t=t[Io(e[n++])];return n&&n==r?t:i}function _r(t,e,n){var r=e(t);return zs(t)?r:Oe(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":Kt&&Kt in At(t)?function(t){var e=Mt.call(t,Kt),n=t[Kt];try{t[Kt]=i;var r=!0}catch(t){}var o=jt.call(t);return r&&(e?t[Kt]=n:delete t[Kt]),o}(t):function(t){return jt.call(t)}(t)}function Ar(t,e){return t>e}function kr(t,e){return null!=t&&Mt.call(t,e)}function Sr(t,e){return null!=t&&e in At(t)}function Tr(t,e,n){for(var o=n?Ne:Ce,s=t[0].length,a=t.length,u=a,c=r(a),l=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Le(f,Ye(e))),l=mn(f.length,l),c[u]=!n&&(e||s>=120&&f.length>=120)?new $n(u&&f):i}f=t[0];var d=-1,p=c[0];t:for(;++d<s&&h.length<l;){var g=f[d],v=e?e(g):g;if(g=n||0!==g?g:0,!(p?Je(p,v):o(h,v,n))){for(u=a;--u;){var m=c[u];if(!(m?Je(m,v):o(t[u],v,n)))continue t}p&&p.push(v),h.push(g)}}return h}function Pr(t,e,n){var r=null==(t=ko(t,e=vi(e,t)))?t:t[Io(Wo(e))];return null==r?i:Ee(r,t,n)}function Cr(t){return Ks(t)&&Er(t)==g}function Nr(t,e,n,r,o){return t===e||(null==t||null==e||!Ks(t)&&!Ks(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=zs(t),u=zs(e),c=a?v:ho(t),l=u?v:ho(e),h=(c=c==g?A:c)==A,f=(l=l==g?A:l)==A,d=c==l;if(d&&Hs(t)){if(!Hs(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Wn),a||sa(t)?Ki(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case L:return!(t.byteLength!=e.byteLength||!o(new Gt(t),new Gt(e)));case m:case y:case E:return Ds(+t,+e);case b:return t.name==e.name&&t.message==e.message;case S:case P:return t==e+"";case _:var a=on;case T:var u=1&r;if(a||(a=un),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Ki(a(t),a(e),r,i,o,s);return s.delete(t),l;case C:if(jn)return jn.call(t)==jn.call(e)}return!1}(t,e,c,n,r,o,s);if(!(1&n)){var p=h&&Mt.call(t,"__wrapped__"),x=f&&Mt.call(e,"__wrapped__");if(p||x){var w=p?t.value():t,k=x?e.value():e;return s||(s=new Wn),o(w,k,n,r,s)}}return!!d&&(s||(s=new Wn),function(t,e,n,r,o,s){var a=1&n,u=to(t),c=u.length;if(c!=to(e).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:Mt.call(e,h)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=a;++l<c;){var v=t[h=u[l]],m=e[h];if(r)var y=a?r(m,v,h,e,t,s):r(v,m,h,t,e,s);if(!(y===i?v===m||o(v,m,n,r,s):y)){p=!1;break}g||(g="constructor"==h)}if(p&&!g){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,r,o,s))}(t,e,n,r,Nr,o))}function Lr(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=At(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],l=t[c],h=u[1];if(a&&u[2]){if(l===i&&!(c in t))return!1}else{var f=new Wn;if(r)var d=r(l,h,c,t,e,f);if(!(d===i?Nr(h,l,3,r,f):d))return!1}}return!0}function Or(t){return!(!Js(t)||(e=t,Rt&&Rt in e))&&(Xs(t)?Vt:gt).test(Ro(t));var e}function Mr(t){return"function"==typeof t?t:null==t?tu:"object"==typeof t?zs(t)?Br(t[0],t[1]):Dr(t):cu(t)}function Ir(t){if(!wo(t))return gn(t);var e=[];for(var n in At(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rr(t,e){return t<e}function jr(t,e){var n=-1,i=Us(t)?r(t.length):[];return lr(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Dr(t){var e=ao(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Br(t,e){return yo(t)&&_o(e)?Eo(Io(t),e):function(n){var r=Ea(n,t);return r===i&&r===e?Aa(n,t):Nr(e,r,3)}}function Vr(t,e,n,r,o){t!==e&&vr(e,function(s,a){if(o||(o=new Wn),Js(s))!function(t,e,n,r,o,s,a){var u=So(t,n),c=So(e,n),l=a.get(c);if(l)Kn(t,n,l);else{var h=s?s(u,c,n+"",t,e,a):i,f=h===i;if(f){var d=zs(c),p=!d&&Hs(c),g=!d&&!p&&sa(c);h=c,d||p||g?zs(u)?h=u:qs(u)?h=Si(u):p?(f=!1,h=xi(c,!0)):g?(f=!1,h=_i(c,!0)):h=[]:ea(c)||Fs(c)?(h=u,Fs(u)?h=pa(u):Js(u)&&!Xs(u)||(h=po(c))):f=!1}f&&(a.set(c,h),o(h,c,r,s,a),a.delete(c)),Kn(t,n,h)}}(t,e,a,n,Vr,r,o);else{var u=r?r(So(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Kn(t,a,u)}},Ca)}function Fr(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:i}function zr(t,e,n){e=e.length?Le(e,function(t){return zs(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t}):[tu];var r=-1;e=Le(e,Ye(oo()));var i=jr(t,function(t,n,i){var o=Le(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return function(t){var e=t.length;for(t.sort(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Ei(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)});e--;)t[e]=t[e].value;return t}(i)}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=wr(t,s);n(a,s)&&Zr(o,vi(s,t),a)}return o}function Ur(t,e,n,r){var i=r?Fe:Ve,o=-1,s=e.length,a=t;for(t===e&&(e=Si(e)),n&&(a=Le(t,Ye(n)));++o<s;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(a,l,u,r))>-1;)a!==t&&Wt.call(a,u,1),Wt.call(t,u,1);return t}function qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;vo(i)?Wt.call(t,i,1):ui(t,i)}}return t}function Hr(t,e){return t+de(xn()*(e-t+1))}function $r(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=de(e/2))&&(t+=t)}while(e);return n}function Wr(t,e){return Co(Ao(t,e,tu),t+"")}function Xr(t){return Yn(Da(t))}function Yr(t,e){var n=Da(t);return Oo(n,or(e,0,n.length))}function Zr(t,e,n,r){if(!Js(t))return t;for(var o=-1,s=(e=vi(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=Io(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=a){var h=u[c];(l=r?r(h,c,u):i)===i&&(l=Js(h)?h:vo(e[o+1])?[]:{})}Qn(u,c,l),u=u[c]}return t}var Jr=Pn?function(t,e){return Pn.set(t,e),t}:tu,Kr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Ja(e),writable:!0})}:tu;function Qr(t){return Oo(Da(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ei(t,e){var n;return lr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!oa(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return ri(t,e,tu,n)}function ri(t,e,n,r){var o=0,s=null==t?0:t.length;if(0===s)return 0;for(var a=(e=n(e))!=e,u=null===e,c=oa(e),l=e===i;o<s;){var h=de((o+s)/2),f=n(t[h]),d=f!==i,p=null===f,g=f==f,v=oa(f);if(a)var m=r||g;else m=l?g&&(r||d):u?g&&d&&(r||!p):c?g&&d&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);m?o=h+1:s=h}return mn(s,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!Ds(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function oi(t){return"number"==typeof t?t:oa(t)?f:+t}function si(t){if("string"==typeof t)return t;if(zs(t))return Le(t,si)+"";if(oa(t))return Dn?Dn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ai(t,e,n){var r=-1,i=Ce,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Ne;else if(o>=200){var c=e?null:$i(t);if(c)return un(c);s=!1,i=Je,u=new $n}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a}function ui(t,e){return null==(t=ko(t,e=vi(e,t)))||delete t[Io(Wo(e))]}function ci(t,e,n,r){return Zr(t,e,n(wr(t,e)),r)}function li(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof Gn&&(n=n.value()),Me(e,function(t,e){return e.func.apply(e.thisArg,Oe([t],e.args))},n)}function fi(t,e,n){var i=t.length;if(i<2)return i?ai(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=cr(s[o]||a,t[u],e,n));return ai(gr(s,1),e,n)}function di(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function pi(t){return qs(t)?t:[]}function gi(t){return"function"==typeof t?t:tu}function vi(t,e){return zs(t)?t:yo(t,e)?[t]:Mo(ga(t))}var mi=Wr;function yi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var bi=se||function(t){return he.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Ut?Ut(n):new t.constructor(n);return t.copy(r),r}function wi(t){var e=new t.constructor(t.byteLength);return new Gt(e).set(new Gt(t)),e}function _i(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=oa(t),a=e!==i,u=null===e,c=e==e,l=oa(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!l&&t<e||l&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function Ai(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,l=vn(s-a,0),h=r(c+l),f=!i;++u<c;)h[u]=e[u];for(;++o<a;)(f||o<s)&&(h[n[o]]=t[o]);for(;l--;)h[u++]=t[o++];return h}function ki(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,l=e.length,h=vn(s-u,0),f=r(h+l),d=!i;++o<h;)f[o]=t[o];for(var p=o;++c<l;)f[p+c]=e[c];for(;++a<u;)(d||o<s)&&(f[p+n[a]]=t[o++]);return f}function Si(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Ti(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?rr(n,u,c):Qn(n,u,c)}return n}function Pi(t,e){return function(n,r){var i=zs(n)?Ae:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ci(t){return Wr(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&mo(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=At(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e})}function Ni(t,e){return function(n,r){if(null==n)return n;if(!Us(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=At(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Li(t){return function(e,n,r){for(var i=-1,o=At(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function Oi(t){return function(e){var n=rn(e=ga(e))?hn(e):i,r=n?n[0]:e.charAt(0),o=n?yi(n,1).join(""):e.slice(1);return r[t]()+o}}function Mi(t){return function(e){return Me(Xa(Fa(e).replace(Zt,"")),t,"")}}function Ii(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Vn(t.prototype),r=t.apply(n,e);return Js(r)?r:n}}function Ri(t){return function(e,n,r){var o=At(e);if(!Us(e)){var s=oo(n,3);e=Pa(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function ji(t){return Qi(function(e){var n=e.length,r=n,s=zn.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Tt(o);if(s&&!u&&"wrapper"==ro(a))var u=new zn([],!0)}for(r=u?r:n;++r<n;){var c=ro(a=e[r]),l="wrapper"==c?no(a):i;u=l&&bo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[ro(l[0])].apply(u,l[3]):1==a.length&&bo(a)?u[c]():u.thru(a)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&zs(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Di(t,e,n,o,s,a,u,l,h,f){var d=e&c,p=1&e,g=2&e,v=24&e,m=512&e,y=g?i:Ii(t);return function c(){for(var b=arguments.length,x=r(b),w=b;w--;)x[w]=arguments[w];if(v)var _=io(c),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(x,_);if(o&&(x=Ai(x,o,s,v)),a&&(x=ki(x,a,u,v)),b-=E,v&&b<f){var A=an(x,_);return qi(t,e,Di,c.placeholder,n,x,A,l,h,f-b)}var k=p?n:this,S=g?k[t]:t;return b=x.length,l?x=function(t,e){for(var n=t.length,r=mn(e.length,n),o=Si(t);r--;){var s=e[r];t[r]=vo(s,n)?o[s]:i}return t}(x,l):m&&b>1&&x.reverse(),d&&h<b&&(x.length=h),this&&this!==he&&this instanceof c&&(S=y||Ii(S)),S.apply(k,x)}}function Bi(t,e){return function(n,r){return function(t,e,n,r){return yr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function Vi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=si(n),r=si(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Fi(t){return Qi(function(e){return e=Le(e,Ye(oo())),Wr(function(n){var r=this;return t(e,function(t){return Ee(t,r,n)})})})}function zi(t,e){var n=(e=e===i?" ":si(e)).length;if(n<2)return n?$r(e,t):e;var r=$r(e,fe(t/ln(e)));return rn(e)?yi(hn(r),0,t).join(""):r.slice(0,t)}function Gi(t){return function(e,n,o){return o&&"number"!=typeof o&&mo(e,n,o)&&(n=o=i),e=la(e),n===i?(n=e,e=0):n=la(n),function(t,e,n,i){for(var o=-1,s=vn(fe((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:la(o),t)}}function Ui(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=da(e),n=da(n)),t(e,n)}}function qi(t,e,n,r,o,s,a,c,l,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var d=[t,e,o,f?s:i,f?a:i,f?i:s,f?i:a,c,l,h],p=n.apply(i,d);return bo(t)&&To(p,d),p.placeholder=r,No(p,t,e)}function Hi(t){var e=Et[t];return function(t,n){if(t=da(t),(n=null==n?0:mn(ha(n),292))&&je(t)){var r=(ga(t)+"e").split("e");return+((r=(ga(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var $i=kn&&1/un(new kn([,-0]))[1]==l?function(t){return new kn(t)}:ou;function Wi(t){return function(e){var n=ho(e);return n==_?on(e):n==T?cn(e):function(t,e){return Le(e,function(e){return[e,t[e]]})}(e,t(e))}}function Xi(t,e,n,s,l,h,f,d){var p=2&e;if(!p&&"function"!=typeof t)throw new Tt(o);var g=s?s.length:0;if(g||(e&=-97,s=l=i),f=f===i?f:vn(ha(f),0),d=d===i?d:ha(d),g-=l?l.length:0,64&e){var v=s,m=l;s=l=i}var y=p?i:no(t),b=[t,e,n,s,l,v,m,h,f,d];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?Ai(l,u,e[4]):u,t[4]=l?an(t[3],a):e[4]}(u=e[5])&&(l=t[5],t[5]=l?ki(l,u,e[6]):u,t[6]=l?an(t[5],a):e[6]),(u=e[7])&&(t[7]=u),r&c&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],s=b[3],l=b[4],!(d=b[9]=b[9]===i?p?0:t.length:vn(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var o=Ii(t);return function s(){for(var a=arguments.length,u=r(a),c=a,l=io(s);c--;)u[c]=arguments[c];var h=a<3&&u[0]!==l&&u[a-1]!==l?[]:an(u,l);return(a-=h.length)<n?qi(t,e,Di,s.placeholder,i,u,h,i,i,n-a):Ee(this&&this!==he&&this instanceof s?o:t,this,u)}}(t,e,d):e!=u&&33!=e||l.length?Di.apply(i,b):function(t,e,n,i){var o=1&e,s=Ii(t);return function e(){for(var a=-1,u=arguments.length,c=-1,l=i.length,h=r(l+u),f=this&&this!==he&&this instanceof e?s:t;++c<l;)h[c]=i[c];for(;u--;)h[c++]=arguments[++a];return Ee(f,o?n:this,h)}}(t,e,n,s);else var x=function(t,e,n){var r=1&e,i=Ii(t);return function e(){return(this&&this!==he&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return No((y?Jr:To)(x,b),t,e)}function Yi(t,e,n,r){return t===i||Ds(t,Nt[n])&&!Mt.call(r,n)?e:t}function Zi(t,e,n,r,o,s){return Js(t)&&Js(e)&&(s.set(e,t),Vr(t,e,i,Zi,s),s.delete(e)),t}function Ji(t){return ea(t)?i:t}function Ki(t,e,n,r,o,s){var a=1&n,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,p=2&n?new $n:i;for(s.set(t,e),s.set(e,t);++f<u;){var g=t[f],v=e[f];if(r)var m=a?r(v,g,f,e,t,s):r(g,v,f,t,e,s);if(m!==i){if(m)continue;d=!1;break}if(p){if(!Re(e,function(t,e){if(!Je(p,e)&&(g===t||o(g,t,n,r,s)))return p.push(e)})){d=!1;break}}else if(g!==v&&!o(g,v,n,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d}function Qi(t){return Co(Ao(t,i,Go),t+"")}function to(t){return _r(t,Pa,co)}function eo(t){return _r(t,Ca,lo)}var no=Pn?function(t){return Pn.get(t)}:ou;function ro(t){for(var e=t.name+"",n=Cn[e],r=Mt.call(Cn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Mt.call(Bn,"placeholder")?Bn:t).placeholder}function oo(){var t=Bn.iteratee||eu;return t=t===eu?Mr:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function ao(t){for(var e=Pa(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,_o(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Or(n)?n:i}var co=ge?function(t){return null==t?[]:(t=At(t),Pe(ge(t),function(e){return $t.call(t,e)}))}:fu,lo=ge?function(t){for(var e=[];t;)Oe(e,co(t)),t=qt(t);return e}:fu,ho=Er;function fo(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,o=!1;++r<i;){var s=Io(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Zs(i)&&vo(s,i)&&(zs(t)||Fs(t))}function po(t){return"function"!=typeof t.constructor||wo(t)?{}:Vn(qt(t))}function go(t){return zs(t)||Fs(t)||!!(Xt&&t&&t[Xt])}function vo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&mt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,n){if(!Js(n))return!1;var r=typeof e;return!!("number"==r?Us(n)&&vo(e,n.length):"string"==r&&e in n)&&Ds(n[e],t)}function yo(t,e){if(zs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!oa(t))||Q.test(t)||!K.test(t)||null!=e&&t in At(e)}function bo(t){var e=ro(t),n=Bn[e];if("function"!=typeof n||!(e in Gn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(_n&&ho(new _n(new ArrayBuffer(1)))!=O||En&&ho(new En)!=_||An&&ho(An.resolve())!=k||kn&&ho(new kn)!=T||Sn&&ho(new Sn)!=N)&&(ho=function(t){var e=Er(t),n=e==A?t.constructor:i,r=n?Ro(n):"";if(r)switch(r){case Nn:return O;case Ln:return _;case On:return k;case Mn:return T;case In:return N}return e});var xo=Lt?Xs:du;function wo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Nt)}function _o(t){return t==t&&!Js(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in At(n))}}function Ao(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=vn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),Ee(t,this,u)}}function ko(t,e){return e.length<2?t:wr(t,ti(e,0,-1))}function So(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var To=Lo(Jr),Po=le||function(t,e){return he.setTimeout(t,e)},Co=Lo(Kr);function No(t,e,n){var r=e+"";return Co(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ke(p,function(n){var r="_."+n[0];e&n[1]&&!Ce(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(at):[]}(r),n)))}function Lo(t){var e=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Oo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=Hr(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var Mo=function(){var t=Ls(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,function(t,n,r,i){e.push(r?i.replace(lt,"$1"):n||t)}),e},function(t){return 500===e.size&&e.clear(),t}),e=t.cache;return t}();function Io(t){if("string"==typeof t||oa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ro(t){if(null!=t){try{return Ot.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function jo(t){if(t instanceof Gn)return t.clone();var e=new zn(t.__wrapped__,t.__chain__);return e.__actions__=Si(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Do=Wr(function(t,e){return qs(t)?cr(t,gr(e,1,qs,!0)):[]}),Bo=Wr(function(t,e){var n=Wo(e);return qs(n)&&(n=i),qs(t)?cr(t,gr(e,1,qs,!0),oo(n,2)):[]}),Vo=Wr(function(t,e){var n=Wo(e);return qs(n)&&(n=i),qs(t)?cr(t,gr(e,1,qs,!0),i,n):[]});function Fo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ha(n);return i<0&&(i=vn(r+i,0)),Be(t,oo(e,3),i)}function zo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ha(n),o=n<0?vn(r+o,0):mn(o,r-1)),Be(t,oo(e,3),o,!0)}function Go(t){return null!=t&&t.length?gr(t,1):[]}function Uo(t){return t&&t.length?t[0]:i}var qo=Wr(function(t){var e=Le(t,pi);return e.length&&e[0]===t[0]?Tr(e):[]}),Ho=Wr(function(t){var e=Wo(t),n=Le(t,pi);return e===Wo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Tr(n,oo(e,2)):[]}),$o=Wr(function(t){var e=Wo(t),n=Le(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Tr(n,i,e):[]});function Wo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Xo=Wr(Yo);function Yo(t,e){return t&&t.length&&e&&e.length?Ur(t,e):t}var Zo=Qi(function(t,e){var n=null==t?0:t.length,r=ir(t,e);return qr(t,Le(e,function(t){return vo(t,n)?+t:t}).sort(Ei)),r});function Jo(t){return null==t?t:wn.call(t)}var Ko=Wr(function(t){return ai(gr(t,1,qs,!0))}),Qo=Wr(function(t){var e=Wo(t);return qs(e)&&(e=i),ai(gr(t,1,qs,!0),oo(e,2))}),ts=Wr(function(t){var e=Wo(t);return e="function"==typeof e?e:i,ai(gr(t,1,qs,!0),i,e)});function es(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,function(t){if(qs(t))return e=vn(t.length,e),!0}),We(e,function(e){return Le(t,Ue(e))})}function ns(t,e){if(!t||!t.length)return[];var n=es(t);return null==e?n:Le(n,function(t){return Ee(e,i,t)})}var rs=Wr(function(t,e){return qs(t)?cr(t,e):[]}),is=Wr(function(t){return fi(Pe(t,qs))}),os=Wr(function(t){var e=Wo(t);return qs(e)&&(e=i),fi(Pe(t,qs),oo(e,2))}),ss=Wr(function(t){var e=Wo(t);return e="function"==typeof e?e:i,fi(Pe(t,qs),i,e)}),as=Wr(es),us=Wr(function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ns(t,n)});function cs(t){var e=Bn(t);return e.__chain__=!0,e}function ls(t,e){return e(t)}var hs=Qi(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gn&&vo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:ls,args:[o],thisArg:i}),new zn(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(i),t})):this.thru(o)}),fs=Pi(function(t,e,n){Mt.call(t,n)?++t[n]:rr(t,n,1)}),ds=Ri(Fo),ps=Ri(zo);function gs(t,e){return(zs(t)?ke:lr)(t,oo(e,3))}function vs(t,e){return(zs(t)?Se:hr)(t,oo(e,3))}var ms=Pi(function(t,e,n){Mt.call(t,n)?t[n].push(e):rr(t,n,[e])}),ys=Wr(function(t,e,n){var i=-1,o="function"==typeof e,s=Us(t)?r(t.length):[];return lr(t,function(t){s[++i]=o?Ee(e,t,n):Pr(t,e,n)}),s}),bs=Pi(function(t,e,n){rr(t,n,e)});function xs(t,e){return(zs(t)?Le:jr)(t,oo(e,3))}var ws=Pi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),_s=Wr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&mo(t,e[0],e[1])?e=[]:n>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,gr(e,1),[])}),Es=ce||function(){return he.Date.now()};function As(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Xi(t,c,i,i,i,i,e)}function ks(t,e){var n;if("function"!=typeof e)throw new Tt(o);return t=ha(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Ss=Wr(function(t,e,n){var r=1;if(n.length){var i=an(n,io(Ss));r|=u}return Xi(t,r,e,n,i)}),Ts=Wr(function(t,e,n){var r=3;if(n.length){var i=an(n,io(Ts));r|=u}return Xi(e,r,t,n,i)});function Ps(t,e,n){var r,s,a,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new Tt(o);function g(e){var n=r,o=s;return r=s=i,h=e,u=t.apply(o,n)}function v(t){var n=t-l;return l===i||n>=e||n<0||d&&t-h>=a}function m(){var t=Es();if(v(t))return y(t);c=Po(m,function(t){var n=e-(t-l);return d?mn(n,a-(t-h)):n}(t))}function y(t){return c=i,p&&r?g(t):(r=s=i,u)}function b(){var t=Es(),n=v(t);if(r=arguments,s=this,l=t,n){if(c===i)return function(t){return h=t,c=Po(m,e),f?g(t):u}(l);if(d)return bi(c),c=Po(m,e),g(l)}return c===i&&(c=Po(m,e)),u}return e=da(e)||0,Js(n)&&(f=!!n.leading,a=(d="maxWait"in n)?vn(da(n.maxWait)||0,e):a,p="trailing"in n?!!n.trailing:p),b.cancel=function(){c!==i&&bi(c),h=0,r=l=s=c=i},b.flush=function(){return c===i?u:y(Es())},b}var Cs=Wr(function(t,e){return ur(t,1,e)}),Ns=Wr(function(t,e,n){return ur(t,da(e)||0,n)});function Ls(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ls.Cache||Hn),n}function Os(t){if("function"!=typeof t)throw new Tt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ls.Cache=Hn;var Ms=mi(function(t,e){var n=(e=1==e.length&&zs(e[0])?Le(e[0],Ye(oo())):Le(gr(e,1),Ye(oo()))).length;return Wr(function(r){for(var i=-1,o=mn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ee(t,this,r)})}),Is=Wr(function(t,e){var n=an(e,io(Is));return Xi(t,u,i,e,n)}),Rs=Wr(function(t,e){var n=an(e,io(Rs));return Xi(t,64,i,e,n)}),js=Qi(function(t,e){return Xi(t,256,i,i,i,e)});function Ds(t,e){return t===e||t!=t&&e!=e}var Bs=Ui(Ar),Vs=Ui(function(t,e){return t>=e}),Fs=Cr(function(){return arguments}())?Cr:function(t){return Ks(t)&&Mt.call(t,"callee")&&!$t.call(t,"callee")},zs=r.isArray,Gs=me?Ye(me):function(t){return Ks(t)&&Er(t)==L};function Us(t){return null!=t&&Zs(t.length)&&!Xs(t)}function qs(t){return Ks(t)&&Us(t)}var Hs=ve||du,$s=ye?Ye(ye):function(t){return Ks(t)&&Er(t)==y};function Ws(t){if(!Ks(t))return!1;var e=Er(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ea(t)}function Xs(t){if(!Js(t))return!1;var e=Er(t);return e==x||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ys(t){return"number"==typeof t&&t==ha(t)}function Zs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function Js(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ks(t){return null!=t&&"object"==typeof t}var Qs=be?Ye(be):function(t){return Ks(t)&&ho(t)==_};function ta(t){return"number"==typeof t||Ks(t)&&Er(t)==E}function ea(t){if(!Ks(t)||Er(t)!=A)return!1;var e=qt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ot.call(n)==Dt}var na=xe?Ye(xe):function(t){return Ks(t)&&Er(t)==S},ra=we?Ye(we):function(t){return Ks(t)&&ho(t)==T};function ia(t){return"string"==typeof t||!zs(t)&&Ks(t)&&Er(t)==P}function oa(t){return"symbol"==typeof t||Ks(t)&&Er(t)==C}var sa=_e?Ye(_e):function(t){return Ks(t)&&Zs(t.length)&&!!ie[Er(t)]},aa=Ui(Rr),ua=Ui(function(t,e){return t<=e});function ca(t){if(!t)return[];if(Us(t))return ia(t)?hn(t):Si(t);if(Yt&&t[Yt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Yt]());var e=ho(t);return(e==_?on:e==T?un:Da)(t)}function la(t){return t?(t=da(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ha(t){var e=la(t),n=e%1;return e==e?n?e-n:e:0}function fa(t){return t?or(ha(t),0,d):0}function da(t){if("number"==typeof t)return t;if(oa(t))return f;if(Js(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Js(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Xe(t);var n=pt.test(t);return n||vt.test(t)?ue(t.slice(2),n?2:8):dt.test(t)?f:+t}function pa(t){return Ti(t,Ca(t))}function ga(t){return null==t?"":si(t)}var va=Ci(function(t,e){if(wo(e)||Us(e))Ti(e,Pa(e),t);else for(var n in e)Mt.call(e,n)&&Qn(t,n,e[n])}),ma=Ci(function(t,e){Ti(e,Ca(e),t)}),ya=Ci(function(t,e,n,r){Ti(e,Ca(e),t,r)}),ba=Ci(function(t,e,n,r){Ti(e,Pa(e),t,r)}),xa=Qi(ir),wa=Wr(function(t,e){t=At(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&mo(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=Ca(s),u=-1,c=a.length;++u<c;){var l=a[u],h=t[l];(h===i||Ds(h,Nt[l])&&!Mt.call(t,l))&&(t[l]=s[l])}return t}),_a=Wr(function(t){return t.push(i,Zi),Ee(La,i,t)});function Ea(t,e,n){var r=null==t?i:wr(t,e);return r===i?n:r}function Aa(t,e){return null!=t&&fo(t,e,Sr)}var ka=Bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),t[e]=n},Ja(tu)),Sa=Bi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=jt.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]},oo),Ta=Wr(Pr);function Pa(t){return Us(t)?Xn(t):Ir(t)}function Ca(t){return Us(t)?Xn(t,!0):function(t){if(!Js(t))return function(t){var e=[];if(null!=t)for(var n in At(t))e.push(n);return e}(t);var e=wo(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}(t)}var Na=Ci(function(t,e,n){Vr(t,e,n)}),La=Ci(function(t,e,n,r){Vr(t,e,n,r)}),Oa=Qi(function(t,e){var n={};if(null==t)return n;var r=!1;e=Le(e,function(e){return e=vi(e,t),r||(r=e.length>1),e}),Ti(t,eo(t),n),r&&(n=sr(n,7,Ji));for(var i=e.length;i--;)ui(n,e[i]);return n}),Ma=Qi(function(t,e){return null==t?{}:function(t,e){return Gr(t,e,function(e,n){return Aa(t,n)})}(t,e)});function Ia(t,e){if(null==t)return{};var n=Le(eo(t),function(t){return[t]});return e=oo(e),Gr(t,n,function(t,n){return e(t,n[0])})}var Ra=Wi(Pa),ja=Wi(Ca);function Da(t){return null==t?[]:Ze(t,Pa(t))}var Ba=Mi(function(t,e,n){return e=e.toLowerCase(),t+(n?Va(e):e)});function Va(t){return Wa(ga(t).toLowerCase())}function Fa(t){return(t=ga(t))&&t.replace(yt,tn).replace(Jt,"")}var za=Mi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ga=Mi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Ua=Oi("toLowerCase"),qa=Mi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ha=Mi(function(t,e,n){return t+(n?" ":"")+Wa(e)}),$a=Mi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Wa=Oi("toUpperCase");function Xa(t,e,n){return t=ga(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Ya=Wr(function(t,e){try{return Ee(t,i,e)}catch(t){return Ws(t)?t:new wt(t)}}),Za=Qi(function(t,e){return ke(e,function(e){e=Io(e),rr(t,e,Ss(t[e],t))}),t});function Ja(t){return function(){return t}}var Ka=ji(),Qa=ji(!0);function tu(t){return t}function eu(t){return Mr("function"==typeof t?t:sr(t,1))}var nu=Wr(function(t,e){return function(n){return Pr(n,t,e)}}),ru=Wr(function(t,e){return function(n){return Pr(t,n,e)}});function iu(t,e,n){var r=Pa(e),i=xr(e,r);null!=n||Js(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Pa(e)));var o=!(Js(n)&&"chain"in n&&!n.chain),s=Xs(t);return ke(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Si(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Oe([this.value()],arguments))})}),t}function ou(){}var su=Fi(Le),au=Fi(Te),uu=Fi(Re);function cu(t){return yo(t)?Ue(Io(t)):function(t){return function(e){return wr(e,t)}}(t)}var lu=Gi(),hu=Gi(!0);function fu(){return[]}function du(){return!1}var pu,gu=Vi(function(t,e){return t+e},0),vu=Hi("ceil"),mu=Vi(function(t,e){return t/e},1),yu=Hi("floor"),bu=Vi(function(t,e){return t*e},1),xu=Hi("round"),wu=Vi(function(t,e){return t-e},0);return Bn.after=function(t,e){if("function"!=typeof e)throw new Tt(o);return t=ha(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=As,Bn.assign=va,Bn.assignIn=ma,Bn.assignInWith=ya,Bn.assignWith=ba,Bn.at=xa,Bn.before=ks,Bn.bind=Ss,Bn.bindAll=Za,Bn.bindKey=Ts,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return zs(t)?t:[t]},Bn.chain=cs,Bn.chunk=function(t,e,n){e=(n?mo(t,e,n):e===i)?1:vn(ha(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(fe(o/e));s<o;)u[a++]=ti(t,s,s+=e);return u},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Oe(zs(n)?Si(n):[n],gr(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?Le(t,function(t){if("function"!=typeof t[1])throw new Tt(o);return[n(t[0]),t[1]]}):[],Wr(function(n){for(var r=-1;++r<e;){var i=t[r];if(Ee(i[0],this,n))return Ee(i[1],this,n)}})},Bn.conforms=function(t){return function(t){var e=Pa(t);return function(n){return ar(n,t,e)}}(sr(t,1))},Bn.constant=Ja,Bn.countBy=fs,Bn.create=function(t,e){var n=Vn(t);return null==e?n:nr(n,e)},Bn.curry=function t(e,n,r){var o=Xi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Bn.curryRight=function t(e,n,r){var o=Xi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},Bn.debounce=Ps,Bn.defaults=wa,Bn.defaultsDeep=_a,Bn.defer=Cs,Bn.delay=Ns,Bn.difference=Do,Bn.differenceBy=Bo,Bn.differenceWith=Vo,Bn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ha(e))<0?0:e,r):[]},Bn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ha(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!0):[]},Bn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&mo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ha(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ha(r))<0&&(r+=o),r=n>r?0:fa(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Bn.filter=function(t,e){return(zs(t)?Pe:pr)(t,oo(e,3))},Bn.flatMap=function(t,e){return gr(xs(t,e),1)},Bn.flatMapDeep=function(t,e){return gr(xs(t,e),l)},Bn.flatMapDepth=function(t,e,n){return n=n===i?1:ha(n),gr(xs(t,e),n)},Bn.flatten=Go,Bn.flattenDeep=function(t){return null!=t&&t.length?gr(t,l):[]},Bn.flattenDepth=function(t,e){return null!=t&&t.length?gr(t,e=e===i?1:ha(e)):[]},Bn.flip=function(t){return Xi(t,512)},Bn.flow=Ka,Bn.flowRight=Qa,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Bn.functions=function(t){return null==t?[]:xr(t,Pa(t))},Bn.functionsIn=function(t){return null==t?[]:xr(t,Ca(t))},Bn.groupBy=ms,Bn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Bn.intersection=qo,Bn.intersectionBy=Ho,Bn.intersectionWith=$o,Bn.invert=ka,Bn.invertBy=Sa,Bn.invokeMap=ys,Bn.iteratee=eu,Bn.keyBy=bs,Bn.keys=Pa,Bn.keysIn=Ca,Bn.map=xs,Bn.mapKeys=function(t,e){var n={};return e=oo(e,3),yr(t,function(t,r,i){rr(n,e(t,r,i),t)}),n},Bn.mapValues=function(t,e){var n={};return e=oo(e,3),yr(t,function(t,r,i){rr(n,r,e(t,r,i))}),n},Bn.matches=function(t){return Dr(sr(t,1))},Bn.matchesProperty=function(t,e){return Br(t,sr(e,1))},Bn.memoize=Ls,Bn.merge=Na,Bn.mergeWith=La,Bn.method=nu,Bn.methodOf=ru,Bn.mixin=iu,Bn.negate=Os,Bn.nthArg=function(t){return t=ha(t),Wr(function(e){return Fr(e,t)})},Bn.omit=Oa,Bn.omitBy=function(t,e){return Ia(t,Os(oo(e)))},Bn.once=function(t){return ks(2,t)},Bn.orderBy=function(t,e,n,r){return null==t?[]:(zs(e)||(e=null==e?[]:[e]),zs(n=r?i:n)||(n=null==n?[]:[n]),zr(t,e,n))},Bn.over=su,Bn.overArgs=Ms,Bn.overEvery=au,Bn.overSome=uu,Bn.partial=Is,Bn.partialRight=Rs,Bn.partition=ws,Bn.pick=Ma,Bn.pickBy=Ia,Bn.property=cu,Bn.propertyOf=function(t){return function(e){return null==t?i:wr(t,e)}},Bn.pull=Xo,Bn.pullAll=Yo,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,oo(n,2)):t},Bn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ur(t,e,i,n):t},Bn.pullAt=Zo,Bn.range=lu,Bn.rangeRight=hu,Bn.rearg=js,Bn.reject=function(t,e){return(zs(t)?Pe:pr)(t,Os(oo(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return qr(t,i),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new Tt(o);return Wr(t,e=e===i?e:ha(e))},Bn.reverse=Jo,Bn.sampleSize=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:ha(e),(zs(t)?Zn:Yr)(t,e)},Bn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},Bn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Zr(t,e,n,r)},Bn.shuffle=function(t){return(zs(t)?Jn:Qr)(t)},Bn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&mo(t,e,n)?(e=0,n=r):(e=null==e?0:ha(e),n=n===i?r:ha(n)),ti(t,e,n)):[]},Bn.sortBy=_s,Bn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},Bn.split=function(t,e,n){return n&&"number"!=typeof n&&mo(t,e,n)&&(e=n=i),(n=n===i?d:n>>>0)?(t=ga(t))&&("string"==typeof e||null!=e&&!na(e))&&!(e=si(e))&&rn(t)?yi(hn(t),0,n):t.split(e,n):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new Tt(o);return e=null==e?0:vn(ha(e),0),Wr(function(n){var r=n[e],i=yi(n,0,e);return r&&Oe(i,r),Ee(t,this,i)})},Bn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Bn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ha(e))<0?0:e):[]},Bn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ha(e)))<0?0:e,r):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?li(t,oo(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?li(t,oo(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Tt(o);return Js(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ps(t,e,{leading:r,maxWait:e,trailing:i})},Bn.thru=ls,Bn.toArray=ca,Bn.toPairs=Ra,Bn.toPairsIn=ja,Bn.toPath=function(t){return zs(t)?Le(t,Io):oa(t)?[t]:Si(Mo(ga(t)))},Bn.toPlainObject=pa,Bn.transform=function(t,e,n){var r=zs(t),i=r||Hs(t)||sa(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Js(t)&&Xs(o)?Vn(qt(t)):{}}return(i?ke:yr)(t,function(t,r,i){return e(n,t,r,i)}),n},Bn.unary=function(t){return As(t,1)},Bn.union=Ko,Bn.unionBy=Qo,Bn.unionWith=ts,Bn.uniq=function(t){return t&&t.length?ai(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?ai(t,oo(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?ai(t,i,e):[]},Bn.unset=function(t,e){return null==t||ui(t,e)},Bn.unzip=es,Bn.unzipWith=ns,Bn.update=function(t,e,n){return null==t?t:ci(t,e,gi(n))},Bn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:ci(t,e,gi(n),r)},Bn.values=Da,Bn.valuesIn=function(t){return null==t?[]:Ze(t,Ca(t))},Bn.without=rs,Bn.words=Xa,Bn.wrap=function(t,e){return Is(gi(e),t)},Bn.xor=is,Bn.xorBy=os,Bn.xorWith=ss,Bn.zip=as,Bn.zipObject=function(t,e){return di(t||[],e||[],Qn)},Bn.zipObjectDeep=function(t,e){return di(t||[],e||[],Zr)},Bn.zipWith=us,Bn.entries=Ra,Bn.entriesIn=ja,Bn.extend=ma,Bn.extendWith=ya,iu(Bn,Bn),Bn.add=gu,Bn.attempt=Ya,Bn.camelCase=Ba,Bn.capitalize=Va,Bn.ceil=vu,Bn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=da(n))==n?n:0),e!==i&&(e=(e=da(e))==e?e:0),or(da(t),e,n)},Bn.clone=function(t){return sr(t,4)},Bn.cloneDeep=function(t){return sr(t,5)},Bn.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:i)},Bn.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:i)},Bn.conformsTo=function(t,e){return null==e||ar(t,e,Pa(e))},Bn.deburr=Fa,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=mu,Bn.endsWith=function(t,e,n){t=ga(t),e=si(e);var r=t.length,o=n=n===i?r:or(ha(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},Bn.eq=Ds,Bn.escape=function(t){return(t=ga(t))&&X.test(t)?t.replace($,en):t},Bn.escapeRegExp=function(t){return(t=ga(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Bn.every=function(t,e,n){var r=zs(t)?Te:fr;return n&&mo(t,e,n)&&(e=i),r(t,oo(e,3))},Bn.find=ds,Bn.findIndex=Fo,Bn.findKey=function(t,e){return De(t,oo(e,3),yr)},Bn.findLast=ps,Bn.findLastIndex=zo,Bn.findLastKey=function(t,e){return De(t,oo(e,3),br)},Bn.floor=yu,Bn.forEach=gs,Bn.forEachRight=vs,Bn.forIn=function(t,e){return null==t?t:vr(t,oo(e,3),Ca)},Bn.forInRight=function(t,e){return null==t?t:mr(t,oo(e,3),Ca)},Bn.forOwn=function(t,e){return t&&yr(t,oo(e,3))},Bn.forOwnRight=function(t,e){return t&&br(t,oo(e,3))},Bn.get=Ea,Bn.gt=Bs,Bn.gte=Vs,Bn.has=function(t,e){return null!=t&&fo(t,e,kr)},Bn.hasIn=Aa,Bn.head=Uo,Bn.identity=tu,Bn.includes=function(t,e,n,r){t=Us(t)?t:Da(t),n=n&&!r?ha(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),ia(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ve(t,e,n)>-1},Bn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ha(n);return i<0&&(i=vn(r+i,0)),Ve(t,e,i)},Bn.inRange=function(t,e,n){return e=la(e),n===i?(n=e,e=0):n=la(n),function(t,e,n){return t>=mn(e,n)&&t<vn(e,n)}(t=da(t),e,n)},Bn.invoke=Ta,Bn.isArguments=Fs,Bn.isArray=zs,Bn.isArrayBuffer=Gs,Bn.isArrayLike=Us,Bn.isArrayLikeObject=qs,Bn.isBoolean=function(t){return!0===t||!1===t||Ks(t)&&Er(t)==m},Bn.isBuffer=Hs,Bn.isDate=$s,Bn.isElement=function(t){return Ks(t)&&1===t.nodeType&&!ea(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Us(t)&&(zs(t)||"string"==typeof t||"function"==typeof t.splice||Hs(t)||sa(t)||Fs(t)))return!t.length;var e=ho(t);if(e==_||e==T)return!t.size;if(wo(t))return!Ir(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Nr(t,e)},Bn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Nr(t,e,i,n):!!r},Bn.isError=Ws,Bn.isFinite=function(t){return"number"==typeof t&&je(t)},Bn.isFunction=Xs,Bn.isInteger=Ys,Bn.isLength=Zs,Bn.isMap=Qs,Bn.isMatch=function(t,e){return t===e||Lr(t,e,ao(e))},Bn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Lr(t,e,ao(e),n)},Bn.isNaN=function(t){return ta(t)&&t!=+t},Bn.isNative=function(t){if(xo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=ta,Bn.isObject=Js,Bn.isObjectLike=Ks,Bn.isPlainObject=ea,Bn.isRegExp=na,Bn.isSafeInteger=function(t){return Ys(t)&&t>=-9007199254740991&&t<=h},Bn.isSet=ra,Bn.isString=ia,Bn.isSymbol=oa,Bn.isTypedArray=sa,Bn.isUndefined=function(t){return t===i},Bn.isWeakMap=function(t){return Ks(t)&&ho(t)==N},Bn.isWeakSet=function(t){return Ks(t)&&"[object WeakSet]"==Er(t)},Bn.join=function(t,e){return null==t?"":qe.call(t,e)},Bn.kebabCase=za,Bn.last=Wo,Bn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ha(n))<0?vn(r+o,0):mn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Be(t,ze,o,!0)},Bn.lowerCase=Ga,Bn.lowerFirst=Ua,Bn.lt=aa,Bn.lte=ua,Bn.max=function(t){return t&&t.length?dr(t,tu,Ar):i},Bn.maxBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Ar):i},Bn.mean=function(t){return Ge(t,tu)},Bn.meanBy=function(t,e){return Ge(t,oo(e,2))},Bn.min=function(t){return t&&t.length?dr(t,tu,Rr):i},Bn.minBy=function(t,e){return t&&t.length?dr(t,oo(e,2),Rr):i},Bn.stubArray=fu,Bn.stubFalse=du,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=bu,Bn.nth=function(t,e){return t&&t.length?Fr(t,ha(e)):i},Bn.noConflict=function(){return he._===this&&(he._=Bt),this},Bn.noop=ou,Bn.now=Es,Bn.pad=function(t,e,n){t=ga(t);var r=(e=ha(e))?ln(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return zi(de(i),n)+t+zi(fe(i),n)},Bn.padEnd=function(t,e,n){t=ga(t);var r=(e=ha(e))?ln(t):0;return e&&r<e?t+zi(e-r,n):t},Bn.padStart=function(t,e,n){t=ga(t);var r=(e=ha(e))?ln(t):0;return e&&r<e?zi(e-r,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ga(t).replace(rt,""),e||0)},Bn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&mo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=la(t),e===i?(e=t,t=0):e=la(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=xn();return mn(t+o*(e-t+ae("1e-"+((o+"").length-1))),e)}return Hr(t,e)},Bn.reduce=function(t,e,n){var r=zs(t)?Me:He,i=arguments.length<3;return r(t,oo(e,4),n,i,lr)},Bn.reduceRight=function(t,e,n){var r=zs(t)?Ie:He,i=arguments.length<3;return r(t,oo(e,4),n,i,hr)},Bn.repeat=function(t,e,n){return e=(n?mo(t,e,n):e===i)?1:ha(e),$r(ga(t),e)},Bn.replace=function(){var t=arguments,e=ga(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,n){var r=-1,o=(e=vi(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[Io(e[r])];s===i&&(r=o,s=n),t=Xs(s)?s.call(t):s}return t},Bn.round=xu,Bn.runInContext=t,Bn.sample=function(t){return(zs(t)?Yn:Xr)(t)},Bn.size=function(t){if(null==t)return 0;if(Us(t))return ia(t)?ln(t):t.length;var e=ho(t);return e==_||e==T?t.size:Ir(t).length},Bn.snakeCase=qa,Bn.some=function(t,e,n){var r=zs(t)?Re:ei;return n&&mo(t,e,n)&&(e=i),r(t,oo(e,3))},Bn.sortedIndex=function(t,e){return ni(t,e)},Bn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Ds(t[r],e))return r}return-1},Bn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Ds(t[n],e))return n}return-1},Bn.startCase=Ha,Bn.startsWith=function(t,e,n){return t=ga(t),n=null==n?0:or(ha(n),0,t.length),e=si(e),t.slice(n,n+e.length)==e},Bn.subtract=wu,Bn.sum=function(t){return t&&t.length?$e(t,tu):0},Bn.sumBy=function(t,e){return t&&t.length?$e(t,oo(e,2)):0},Bn.template=function(t,e,n){var r=Bn.templateSettings;n&&mo(t,e,n)&&(e=i),t=ga(t),e=ya({},e,r,Yi);var o,s,a=ya({},e.imports,r.imports,Yi),u=Pa(a),c=Ze(a,u),l=0,h=e.interpolate||bt,f="__p += '",d=kt((e.escape||bt).source+"|"+h.source+"|"+(h===J?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(d,function(e,n,r,i,a,u){return r||(r=i),f+=t.slice(l,u).replace(xt,nn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var g=Mt.call(e,"variable")&&e.variable;if(g){if(ct.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(G,""):f).replace(U,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Ya(function(){return _t(u,p+"return "+f).apply(i,c)});if(v.source=f,Ws(v))throw v;return v},Bn.times=function(t,e){if((t=ha(t))<1||t>h)return[];var n=d,r=mn(t,d);e=oo(e),t-=d;for(var i=We(r,e);++n<t;)e(n);return i},Bn.toFinite=la,Bn.toInteger=ha,Bn.toLength=fa,Bn.toLower=function(t){return ga(t).toLowerCase()},Bn.toNumber=da,Bn.toSafeInteger=function(t){return t?or(ha(t),-9007199254740991,h):0===t?t:0},Bn.toString=ga,Bn.toUpper=function(t){return ga(t).toUpperCase()},Bn.trim=function(t,e,n){if((t=ga(t))&&(n||e===i))return Xe(t);if(!t||!(e=si(e)))return t;var r=hn(t),o=hn(e);return yi(r,Ke(r,o),Qe(r,o)+1).join("")},Bn.trimEnd=function(t,e,n){if((t=ga(t))&&(n||e===i))return t.slice(0,fn(t)+1);if(!t||!(e=si(e)))return t;var r=hn(t);return yi(r,0,Qe(r,hn(e))+1).join("")},Bn.trimStart=function(t,e,n){if((t=ga(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=si(e)))return t;var r=hn(t);return yi(r,Ke(r,hn(e))).join("")},Bn.truncate=function(t,e){var n=30,r="...";if(Js(e)){var o="separator"in e?e.separator:o;n="length"in e?ha(e.length):n,r="omission"in e?si(e.omission):r}var s=(t=ga(t)).length;if(rn(t)){var a=hn(t);s=a.length}if(n>=s)return t;var u=n-ln(r);if(u<1)return r;var c=a?yi(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),na(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=kt(o.source,ga(ft.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===i?u:f)}}else if(t.indexOf(si(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+r},Bn.unescape=function(t){return(t=ga(t))&&W.test(t)?t.replace(H,dn):t},Bn.uniqueId=function(t){var e=++It;return ga(t)+e},Bn.upperCase=$a,Bn.upperFirst=Wa,Bn.each=gs,Bn.eachRight=vs,Bn.first=Uo,iu(Bn,(pu={},yr(Bn,function(t,e){Mt.call(Bn.prototype,e)||(pu[e]=t)}),pu),{chain:!1}),Bn.VERSION="4.17.21",ke(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Bn[t].placeholder=Bn}),ke(["drop","take"],function(t,e){Gn.prototype[t]=function(n){n=n===i?1:vn(ha(n),0);var r=this.__filtered__&&!e?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=mn(n,r.__takeCount__):r.__views__.push({size:mn(n,d),type:t+(r.__dir__<0?"Right":"")}),r},Gn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ke(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Gn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),ke(["head","last"],function(t,e){var n="take"+(e?"Right":"");Gn.prototype[t]=function(){return this[n](1).value()[0]}}),ke(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Gn.prototype[t]=function(){return this.__filtered__?new Gn(this):this[n](1)}}),Gn.prototype.compact=function(){return this.filter(tu)},Gn.prototype.find=function(t){return this.filter(t).head()},Gn.prototype.findLast=function(t){return this.reverse().find(t)},Gn.prototype.invokeMap=Wr(function(t,e){return"function"==typeof t?new Gn(this):this.map(function(n){return Pr(n,t,e)})}),Gn.prototype.reject=function(t){return this.filter(Os(oo(t)))},Gn.prototype.slice=function(t,e){t=ha(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Gn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ha(e))<0?n.dropRight(-e):n.take(e-t)),n)},Gn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gn.prototype.toArray=function(){return this.take(d)},yr(Gn.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=Bn[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(Bn.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof Gn,c=a[0],l=u||zs(e),h=function(t){var e=o.apply(Bn,Oe([t],a));return r&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,g=u&&!d;if(!s&&l){e=g?e:new Gn(this);var v=t.apply(e,a);return v.__actions__.push({func:ls,args:[h],thisArg:i}),new zn(v,f)}return p&&g?t.apply(this,a):(v=this.thru(h),p?r?v.value()[0]:v.value():v)})}),ke(["pop","push","shift","sort","splice","unshift"],function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(zs(i)?i:[],t)}return this[n](function(n){return e.apply(zs(n)?n:[],t)})}}),yr(Gn.prototype,function(t,e){var n=Bn[e];if(n){var r=n.name+"";Mt.call(Cn,r)||(Cn[r]=[]),Cn[r].push({name:e,func:n})}}),Cn[Di(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var t=new Gn(this.__wrapped__);return t.__actions__=Si(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Si(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Si(this.__views__),t},Gn.prototype.reverse=function(){if(this.__filtered__){var t=new Gn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=zs(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=mn(e,t+s);break;case"takeRight":t=vn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=mn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return hi(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,v=t[c+=e];++g<h;){var m=l[g],y=m.iteratee,b=m.type,x=y(v);if(2==b)v=x;else if(!x){if(1==b)continue t;break t}}p[f++]=v}return p},Bn.prototype.at=hs,Bn.prototype.chain=function(){return cs(this)},Bn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=ca(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,n=this;n instanceof Fn;){var r=jo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gn){var e=t;return this.__actions__.length&&(e=new Gn(this)),(e=e.reverse()).__actions__.push({func:ls,args:[Jo],thisArg:i}),new zn(e,this.__chain__)}return this.thru(Jo)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Yt&&(Bn.prototype[Yt]=function(){return this}),Bn}();he._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},3335(t){t.exports=function(t,e){return t>e}},3650(t,e,n){var r=n(74335)(Object.keys,Object);t.exports=r},3656(t,e,n){t=n.nmd(t);var r=n(9325),i=n(89935),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;t.exports=u},3988(t,e,n){var r=n(56857),i=n(68191).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,u=t.width/2,c=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*u>Math.abs(s)*c?(a<0&&(c=-c),n=c*s/a,r=c):(s<0&&(u=-u),n=u,r=u*a/s),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(s(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!==0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},4509(t,e,n){var r=n(12651);t.exports=function(t){return r(this,t).has(t)}},4664(t,e,n){var r=n(79770),i=n(63345),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return o.call(t,e)}))}:i;t.exports=a},4809(t,e,n){let r=n(96743).Graph;function i(t,e,n,r){let i;do{i=a(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function o(t){return Math.max(...t.nodes().map(e=>{let n=t.node(e).rank;return void 0===n?Number.MIN_VALUE:n}))}t.exports={addBorderNode:function(t,e,n,r){let o={width:0,height:0};return arguments.length>=4&&(o.rank=n,o.order=r),i(t,"border",o,e)},addDummyNode:i,asNonCompoundGraph:function(t){let e=new r({multigraph:t.isMultigraph()}).setGraph(t.graph());return t.nodes().forEach(n=>{t.children(n).length||e.setNode(n,t.node(n))}),t.edges().forEach(n=>{e.setEdge(n,t.edge(n))}),e},buildLayerMatrix:function(t){let e=u(o(t)+1).map(()=>[]);return t.nodes().forEach(n=>{let r=t.node(n),i=r.rank;void 0!==i&&(e[i][r.order]=n)}),e},intersectRect:function(t,e){let n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,u=t.width/2,c=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*u>Math.abs(s)*c?(a<0&&(c=-c),n=c*s/a,r=c):(s<0&&(u=-u),n=u,r=u*a/s),{x:i+n,y:o+r}},mapValues:function(t,e){let n=e;return"string"==typeof e&&(n=t=>t[e]),Object.entries(t).reduce((t,[e,r])=>(t[e]=n(r,e),t),{})},maxRank:o,normalizeRanks:function(t){let e=Math.min(...t.nodes().map(e=>{let n=t.node(e).rank;return void 0===n?Number.MAX_VALUE:n}));t.nodes().forEach(n=>{let r=t.node(n);r.hasOwnProperty("rank")&&(r.rank-=e)})},notime:function(t,e){return e()},partition:function(t,e){let n={lhs:[],rhs:[]};return t.forEach(t=>{e(t)?n.lhs.push(t):n.rhs.push(t)}),n},pick:function(t,e){const n={};for(const r of e)void 0!==t[r]&&(n[r]=t[r]);return n},predecessorWeights:function(t){let e=t.nodes().map(e=>{let n={};return t.inEdges(e).forEach(e=>{n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return c(t.nodes(),e)},range:u,removeEmptyRanks:function(t){let e=Math.min(...t.nodes().map(e=>t.node(e).rank)),n=[];t.nodes().forEach(r=>{let i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});let r=0,i=t.graph().nodeRankFactor;Array.from(n).forEach((e,n)=>{void 0===e&&n%i!==0?--r:void 0!==e&&r&&e.forEach(e=>t.node(e).rank+=r)})},simplify:function(t){let e=(new r).setGraph(t.graph());return t.nodes().forEach(n=>e.setNode(n,t.node(n))),t.edges().forEach(n=>{let r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},successorWeights:function(t){let e=t.nodes().map(e=>{let n={};return t.outEdges(e).forEach(e=>{n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return c(t.nodes(),e)},time:function(t,e){let n=Date.now();try{return e()}finally{console.log(t+" time: "+(Date.now()-n)+"ms")}},uniqueId:a,zipObject:c};let s=0;function a(t){var e=++s;return toString(t)+e}function u(t,e,n=1){null==e&&(e=t,t=0);let r=t=>t<e;n<0&&(r=t=>e<t);const i=[];for(let e=t;r(e);e+=n)i.push(e);return i}function c(t,e){return t.reduce((t,n,r)=>(t[n]=e[r],t),{})}},4850(t,e,n){var r=n(56857);function i(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"y")&&s(n)})}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)})}(t),i(t))}}},4901(t,e,n){var r=n(72552),i=n(30294),o=n(40346),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},5128(t,e,n){var r=n(80909),i=n(64894);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},5861(t,e,n){var r=n(55580),i=n(68223),o=n(32804),s=n(76545),a=n(28303),u=n(72552),c=n(47473),l="[object Map]",h="[object Promise]",f="[object Set]",d="[object WeakMap]",p="[object DataView]",g=c(r),v=c(i),m=c(o),y=c(s),b=c(a),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=l||o&&x(o.resolve())!=h||s&&x(new s)!=f||a&&x(new a)!=d)&&(x=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return p;case v:return l;case m:return h;case y:return f;case b:return d}return e}),t.exports=x},6361(t){t.exports=function(t,e=[]){return e.map(e=>{let n=t.inEdges(e);if(n.length){let r=n.reduce((e,n)=>{let r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})}},7309(t,e,n){var r=n(62006)(n(24713));t.exports=r},7681(t,e,n){var r=n(99441);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},9325(t,e,n){var r=n(34840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},9999(t,e,n){var r=n(37217),i=n(83729),o=n(16547),s=n(74733),a=n(43838),u=n(93290),c=n(23007),l=n(92271),h=n(48948),f=n(50002),d=n(83349),p=n(5861),g=n(76189),v=n(77199),m=n(35529),y=n(56449),b=n(3656),x=n(87730),w=n(23805),_=n(38440),E=n(95950),A=n(37241),k="[object Arguments]",S="[object Function]",T="[object Object]",P={};P[k]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[T]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[S]=P["[object WeakMap]"]=!1,t.exports=function t(e,n,C,N,L,O){var M,I=1&n,R=2&n,j=4&n;if(C&&(M=L?C(e,N,L,O):C(e)),void 0!==M)return M;if(!w(e))return e;var D=y(e);if(D){if(M=g(e),!I)return c(e,M)}else{var B=p(e),V=B==S||"[object GeneratorFunction]"==B;if(b(e))return u(e,I);if(B==T||B==k||V&&!L){if(M=R||V?{}:m(e),!I)return R?h(e,a(M,e)):l(e,s(M,e))}else{if(!P[B])return L?e:{};M=v(e,B,I)}}O||(O=new r);var F=O.get(e);if(F)return F;O.set(e,M),_(e)?e.forEach(function(r){M.add(t(r,n,C,r,e,O))}):x(e)&&e.forEach(function(r,i){M.set(i,t(r,n,C,i,e,O))});var z=D?void 0:(j?R?d:f:R?A:E)(e);return i(z||e,function(r,i){z&&(r=e[i=r]),o(M,i,t(r,n,C,i,e,O))}),M}},10117(t,e,n){var r;try{r={clone:n(32629),constant:n(37334),each:n(76135),filter:n(87612),has:n(61448),isArray:n(56449),isEmpty:n(62193),isFunction:n(1882),isUndefined:n(62216),keys:n(95950),map:n(55378),reduce:n(40860),size:n(47091),transform:n(69752),union:n(80299),values:n(35880)}}catch(t){}r||(r=window._),t.exports=r},10124(t,e,n){var r=n(9325);t.exports=function(){return r.Date.now()}},10392(t){t.exports=function(t,e){return null==t?void 0:t[e]}},10776(t,e,n){var r=n(30756),i=n(95950);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}},11331(t,e,n){var r=n(72552),i=n(28879),o=n(40346),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},12651(t,e,n){var r=n(74218);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},12749(t,e,n){var r=n(81042),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},13222(t,e,n){var r=n(77556);t.exports=function(t){return null==t?"":r(t)}},13535(t,e,n){let r=n(6361),i=n(73900),o=n(37204);t.exports=function t(e,n,s,a){let u=e.children(n),c=e.node(n),l=c?c.borderLeft:void 0,h=c?c.borderRight:void 0,f={};l&&(u=u.filter(t=>t!==l&&t!==h));let d=r(e,u);d.forEach(n=>{if(e.children(n.v).length){let o=t(e,n.v,s,a);f[n.v]=o,o.hasOwnProperty("barycenter")&&(i=o,void 0!==(r=n).barycenter?(r.barycenter=(r.barycenter*r.weight+i.barycenter*i.weight)/(r.weight+i.weight),r.weight+=i.weight):(r.barycenter=i.barycenter,r.weight=i.weight))}var r,i});let p=i(d,s);!function(t,e){t.forEach(t=>{t.vs=t.vs.flatMap(t=>e[t]?e[t].vs:t)})}(p,f);let g=o(p,a);if(l&&(g.vs=[l,g.vs,h].flat(!0),e.predecessors(l).length)){let t=e.node(e.predecessors(l)[0]),n=e.node(e.predecessors(h)[0]);g.hasOwnProperty("barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+t.order+n.order)/(g.weight+2),g.weight+=2}return g}},14248(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},14520(t,e,n){var r=n(56857),i=n(33860),o=n(44959),s=n(35169);t.exports=function t(e,n,a,u){var c=e.children(n),l=e.node(n),h=l?l.borderLeft:void 0,f=l?l.borderRight:void 0,d={};h&&(c=r.filter(c,function(t){return t!==h&&t!==f}));var p=i(e,c);r.forEach(p,function(n){if(e.children(n.v).length){var i=t(e,n.v,a,u);d[n.v]=i,r.has(i,"barycenter")&&(o=n,s=i,r.isUndefined(o.barycenter)?(o.barycenter=s.barycenter,o.weight=s.weight):(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight))}var o,s});var g=o(p,a);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(g,d);var v=s(g,u);if(h&&(v.vs=r.flatten([h,v.vs,f],!0),e.predecessors(h).length)){var m=e.node(e.predecessors(h)[0]),y=e.node(e.predecessors(f)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+m.order+y.order)/(v.weight+2),v.weight+=2}return v}},14528(t){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},14529(t){t.exports="1.0.4"},14974(t){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},15325(t,e,n){var r=n(96131);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},15389(t,e,n){var r=n(93663),i=n(87978),o=n(83488),s=n(56449),a=n(50583);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}},15456(t,e,n){var r=n(46239),i=n(36316);t.exports=function(t,e){var n,o=new r,s={},a=new i;function u(t){var r=t.v===n?t.w:t.v,i=a.priority(r);if(void 0!==i){var o=e(t);o<i&&(s[r]=n,a.decrease(r,o))}}if(0===t.nodeCount())return o;t.nodes().forEach(function(t){a.add(t,Number.POSITIVE_INFINITY),o.setNode(t)}),a.decrease(t.nodes()[0],0);for(var c=!1;a.size()>0;){if(n=a.removeMin(),s.hasOwnProperty(n))o.setEdge(n,s[n]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(n).forEach(u)}return o}},16038(t,e,n){var r=n(5861),i=n(40346);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},16291(t,e,n){var r=n(10117);t.exports=function(t){var e=0,n=[],i={},o=[];function s(a){var u=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(s(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))}),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(a!==c);o.push(l)}}return t.nodes().forEach(function(t){r.has(i,t)||s(t)}),o}},16547(t,e,n){var r=n(43360),i=n(75288),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},16574(t,e,n){var r=n(80909);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},16678(t,e,n){var r=n(10117),i=n(16291);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},17255(t,e,n){var r=n(47422);t.exports=function(t){return function(e){return r(e,t)}}},17400(t,e,n){var r=n(99374),i=1/0;t.exports=function(t){return t?(t=r(t))===i||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},17670(t,e,n){var r=n(12651);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},18209(t,e,n){var r=n(56857),i=n(3988);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,o,s=e.v,a=t.node(s).rank,u=e.w,c=t.node(u).rank,l=e.name,h=t.edge(e),f=h.labelRank;if(c!==a+1){for(t.removeEdge(e),o=0,++a;a<c;++o,++a)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=i.addDummyNode(t,"edge",r,"_d"),a===f&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(s,n,{weight:h.weight},l),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,u,{weight:h.weight},l)}}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}}},19207(t){t.exports="2.1.13"},19219(t){t.exports=function(t,e){return t.has(e)}},19570(t,e,n){var r=n(37334),i=n(93243),o=n(83488),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},20258(t,e,n){let r=n(4809);t.exports={run:function(t){t.graph().dummyChains=[],t.edges().forEach(e=>function(t,e){let n,i,o,s=e.v,a=t.node(s).rank,u=e.w,c=t.node(u).rank,l=e.name,h=t.edge(e),f=h.labelRank;if(c!==a+1){for(t.removeEdge(e),o=0,++a;a<c;++o,++a)h.points=[],i={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=r.addDummyNode(t,"edge",i,"_d"),a===f&&(i.width=h.width,i.height=h.height,i.dummy="edge-label",i.labelpos=h.labelpos),t.setEdge(s,n,{weight:h.weight},l),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,u,{weight:h.weight},l)}}(t,e))},undo:function(t){t.graph().dummyChains.forEach(e=>{let n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}}},20317(t){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},20426(t){var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},20999(t,e,n){var r=n(69302),i=n(36800);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e})}},21549(t,e,n){var r=n(22032),i=n(63862),o=n(66721),s=n(12749),a=n(35749);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},21791(t,e,n){var r=n(16547),i=n(43360);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=o?o(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),s?i(n,c,l):r(n,c,l)}return n}},21986(t,e,n){var r=n(51873),i=n(37828),o=n(75288),s=n(25911),a=n(20317),u=n(84247),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=a;case"[object Set]":var p=1&r;if(d||(d=u),t.size!=e.size&&!p)return!1;var g=f.get(t);if(g)return g==e;r|=2,f.set(t,e);var v=s(d(t),d(e),r,c,h,f);return f.delete(t),v;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},22031(t,e,n){var r=n(56857),i=n(68191).Graph,o=n(39859);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t),o=r+i;n.setEdge(t.v,t.w,o),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w).in+=i)});var c=r.range(a+s+3).map(function(){return new o}),l=s+1;return r.forEach(n.nodes(),function(t){u(c,l,n.node(t))}),{graph:n,buckets:c,zeroIdx:l}}(t,e||s),c=function(t,e,n){for(var r,i=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,function(e){return t.outEdges(e.v,e.w)}),!0)};var s=r.constant(1);function a(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,u(e,n,a)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=r.w,s=t.node(o);s.in-=i,u(e,n,s)}),t.removeNode(i.v),s}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},22032(t,e,n){var r=n(81042);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},22313(t,e){var n,r=this&&this.__classPrivateFieldSet||function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n},i=this&&this.__classPrivateFieldGet||function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)};function o(t,e,n){return e.map((e,r)=>t(e,n[r]))}function s(t,e,n,r,i){return e.map((e,o)=>t(e,n[o],r[o],i[o]))}function a(t,e,n,r){if(0==e.length)return 1==r?1:0;let i=e[e.length-1];1==r?i|=~n:i&=n;for(let n=0;n<e.length-1;n++)i=t(i,e[n]);return i=t(i,i>>>16),i=t(i,i>>>8),i=t(i,i>>>4),i=t(i,i>>>2),i=t(i,i>>>1),1&i}function u(t){return 31&t}function c(t,e,n,r,i){const o=t>0&&!(r[e]&1<<t-1)&&i[e]&1<<t-1;o&&u(t)&&(i[e]|=-1<<t),o&&e+1<n&&i.fill(-1,e+1)}function l(t,e){const n={};return function r(i,o){if(n[i]=o,!(i.length*t>=e)){for(let e=0;e<1<<t;e+=1)r(i+e.toString(1<<t),o<<t|e|e<<16);r(i+"x",o<<t|(1<<t)-1)}}("",0),Object.seal(n),n}Object.defineProperty(e,"__esModule",{value:!0}),e.Display3vl=e.Display3vlOct=e.Display3vlBin=e.Display3vlHex=e.Display3vlWithRegex=e.Mem3vl=e.Vector3vl=e.Error3vl=void 0;const h=l(1,8),f=l(3,3),d=l(4,8);function p(t,e,n,r){const i=[];let o=0,s=t;for(;o<e;){const t="00000000"+n[s].toString(16),a=n[s]^r[s];s++;for(let n=0;n<8&&o<e;n++,o+=4)a&15<<4*n?i.push("x"):i.push(t[t.length-1-n])}return i.reverse().join("")}function g(t,e,n,r){const i=[];let o=0,s=t;for(;o<e;){const t="00000000000000000000000000000000"+n[s].toString(2),a=n[s]^r[s];s++;for(let n=0;n<32&&o<e;n++,o++)a&1<<n?i.push("x"):i.push(t[t.length-1-n])}return i.reverse().join("")}function v(t,e,n,r,i){const o=n+31>>>5;let s=0,a=-1+e;for(let e=t.length;e>0;){const n=t.slice(Math.max(0,e-2),e);e-=n.length;const o=d[n];0==u(s)&&a++;const c=(1<<4*n.length)-1;r[a]|=(o>>>16&c)<<s,i[a]|=(o&c)<<s,s+=4*n.length}s<n&&c(s,a,o,r,i)}function m(t,e,n,r,i){const o=n+31>>>5;let s=0,a=-1+e;for(let e=t.length;e>0;){const n=t.slice(Math.max(0,e-8),e);e-=n.length;const o=h[n];0==u(s)&&a++;const c=(1<<1*n.length)-1;r[a]|=(o>>>16&c)<<s,i[a]|=(o&c)<<s,s+=1*n.length}s<n&&c(s,a,o,r,i)}class y extends Error{constructor(t){super(t),Object.setPrototypeOf(this,y.prototype)}}function b(t,e){if(!t)throw new y("Assertion failed: "+e)}e.Error3vl=y;class x{constructor(t,e,n){this._bits=t,this._avec=e,this._bvec=n}static make(t,e){let n,r;switch(t|=0,e){case!0:case"1":case 1:n=r=-1;break;case!1:case"0":case-1:case void 0:n=r=0;break;case"x":case 0:n=0,r=-1;break;default:b(!1,"Vector3vl.make() called with invalid initializer")}const i=(t+31)/32|0;return new x(t,new Uint32Array(i).fill(n),new Uint32Array(i).fill(r))}static zeros(t){return x.make(t,-1)}static ones(t){return x.make(t,1)}static xes(t){return x.make(t,0)}static fromBool(t,e=1){return x.make(e,t?1:-1)}static concat(...t){const e=t.reduce((t,e)=>e.bits+t,0)+31>>>5;let n=0,r=-1,i=new Uint32Array(e),o=new Uint32Array(e);for(const s of t)if(s.normalize(),0==u(n))i.set(s._avec,r+1),o.set(s._bvec,r+1),n+=s._bits,r+=s._bits+31>>>5;else{for(const t in s._avec){if(i[r]|=s._avec[t]<<n,o[r]|=s._bvec[t]<<n,r++,r==e)break;i[r]=s._avec[t]>>>-n,o[r]=s._bvec[t]>>>-n}n+=s._bits,r+1>n+31>>>5&&r--}return new x(n,i,o)}static fromIterator(t,e,n){return e&e-1?x.fromIteratorAnySkip(t,e,n):x.fromIteratorPow2(t,e,n)}static fromIteratorAnySkip(t,e,n){const r=n+31>>>5;let i=0,o=-1,s=new Uint32Array(r),a=new Uint32Array(r);const l=(1<<e)-1;for(const n of t)0==u(i)&&o++,s[o]|=(n>>>e&l)<<i,a[o]|=(n&l)<<i,l<<i>>>i!=l&&(o++,s[o]=(n>>>e&l)>>>-i,a[o]=(n&l)>>>-i),i+=e;return i<n&&c(i,o,r,s,a),new x(n,s,a)}static fromIteratorPow2(t,e,n){const r=n+31>>>5;let i=0,o=-1,s=new Uint32Array(r),a=new Uint32Array(r);const l=(1<<e)-1;for(const n of t)0==u(i)&&o++,s[o]|=(n>>>e&l)<<i,a[o]|=(n&l)<<i,i+=e;return i<n&&c(i,o,r,s,a),new x(n,s,a)}static fromArray(t){const e=t.length,n=e+31>>>5;let r=0,i=-1,o=new Uint32Array(n),s=new Uint32Array(n);for(const e of t){const t=e+1+Number(e>0);0==u(r)&&i++,o[i]|=(t>>>1&1)<<r,s[i]|=(1&t)<<r,r+=1}return r<e&&c(r,i,n,o,s),new x(e,o,s)}static fromBin(t,e){void 0===e&&(e=t.length);const n=e+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);return m(t,0,e,r,i),new x(e,r,i)}static fromOct(t,e){void 0===e&&(e=3*t.length);const n=e+31>>>5;let r=0,i=-1,o=new Uint32Array(n),s=new Uint32Array(n);for(let e=t.length-1;e>=0;e--){const n=f[t[e]];0==u(r)&&i++,o[i]|=(n>>>16&7)<<r,s[i]|=(7&n)<<r,7<<r>>>r!=7&&(i++,o[i]=(n>>>16&7)>>>-r,s[i]=(7&n)>>>-r),r+=3}return r<e&&c(r,i,n,o,s),new x(e,o,s)}static fromHex(t,e){void 0===e&&(e=4*t.length);const n=e+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);return v(t,0,e,r,i),new x(e,r,i)}static fromString(t){const e=/^([0-9]*)'?(b[01x]*|o[0-7x]*|h[0-9a-fx]*|d[0-9]*)$/.exec(t);b(null!=e,"Vector3vl.fromString() Invalid string");const n=e[1].length?Number(e[1]):void 0,r=e[2].slice(1);switch(e[2][0]){case"b":return x.fromBin(r,n);case"o":return x.fromOct(r,n);case"h":return x.fromHex(r,n);case"d":return x.fromNumber(BigInt(r),n)}}static fromClonable(t){return new x(t._bits,t._avec,t._bvec)}static fromNumber(t,e){const n=void 0===e?0:e,r=BigInt(t);if(r>=BigInt(0)){let t=r.toString(2);return x.fromBin("0".repeat(Math.max(0,n-t.length))+t,e)}{const t=(-r).toString(2).length;let i=(r+(BigInt(1)<<BigInt(t))).toString(2);return x.fromBin("1".repeat(Math.max(1,n-t))+"0".repeat(t-i.length)+i,e)}}get bits(){return this._bits}get msb(){return this.get(this._bits-1)}get lsb(){return this.get(0)}get(t){const e=u(t),n=function(t){return t>>5}(t);return(this._avec[n]>>>e&1)+(this._bvec[n]>>>e&1)-1}get isHigh(){if(0==this._bits)return!0;const t=this._lastmask,e=e=>e.slice(0,e.length-1).every(t=>0==~t)&&(e[e.length-1]&t)==t;return e(this._avec)&&e(this._bvec)}get isLow(){if(0==this._bits)return!0;const t=this._lastmask,e=e=>e.slice(0,e.length-1).every(t=>0==t)&&0==(e[e.length-1]&t);return e(this._avec)&&e(this._bvec)}get isDefined(){if(0==this._bits)return!1;const t=o((t,e)=>t^e,this._avec,this._bvec);return t[t.length-1]|=~this._lastmask,!t.every(t=>0==~t)}get isFullyDefined(){if(0==this._bits)return!0;const t=o((t,e)=>t^e,this._avec,this._bvec);return t[t.length-1]&=this._lastmask,!t.some(t=>Boolean(t))}and(t){return b(t._bits==this._bits,"Vector3vl.and() called with vectors of different sizes"),new x(this._bits,o((t,e)=>t&e,t._avec,this._avec),o((t,e)=>t&e,t._bvec,this._bvec))}or(t){return b(t._bits==this._bits,"Vector3vl.or() called with vectors of different sizes"),new x(this._bits,o((t,e)=>t|e,t._avec,this._avec),o((t,e)=>t|e,t._bvec,this._bvec))}xor(t){return b(t._bits==this._bits,"Vector3vl.xor() called with vectors of different sizes"),new x(this._bits,s((t,e,n,r)=>(t|n)&(e^r),t._avec,t._bvec,this._avec,this._bvec),s((t,e,n,r)=>t&n^(e|r),t._avec,t._bvec,this._avec,this._bvec))}nand(t){return b(t._bits==this._bits,"Vector3vl.nand() called with vectors of different sizes"),new x(this._bits,o((t,e)=>~(t&e),t._bvec,this._bvec),o((t,e)=>~(t&e),t._avec,this._avec))}nor(t){return b(t._bits==this._bits,"Vector3vl.nor() called with vectors of different sizes"),new x(this._bits,o((t,e)=>~(t|e),t._bvec,this._bvec),o((t,e)=>~(t|e),t._avec,this._avec))}xnor(t){return b(t._bits==this._bits,"Vector3vl.xnor() called with vectors of different sizes"),new x(this._bits,s((t,e,n,r)=>t&n^~(e|r),t._avec,t._bvec,this._avec,this._bvec),s((t,e,n,r)=>~((t|n)&(e^r)),t._avec,t._bvec,this._avec,this._bvec))}not(){return new x(this._bits,this._bvec.map(t=>~t),this._avec.map(t=>~t))}xmask(){const t=o((t,e)=>t^e,this._avec,this._bvec);return new x(this._bits,t,t)}reduceAnd(){return new x(1,Uint32Array.of(a((t,e)=>t&e,this._avec,this._lastmask,1)),Uint32Array.of(a((t,e)=>t&e,this._bvec,this._lastmask,1)))}reduceOr(){return new x(1,Uint32Array.of(a((t,e)=>t|e,this._avec,this._lastmask,0)),Uint32Array.of(a((t,e)=>t|e,this._bvec,this._lastmask,0)))}reduceNand(){return new x(1,Uint32Array.of(~a((t,e)=>t&e,this._bvec,this._lastmask,1)),Uint32Array.of(~a((t,e)=>t&e,this._avec,this._lastmask,1)))}reduceNor(){return new x(1,Uint32Array.of(~a((t,e)=>t|e,this._bvec,this._lastmask,0)),Uint32Array.of(~a((t,e)=>t|e,this._avec,this._lastmask,0)))}reduceXor(){const t=a((t,e)=>t|e,o((t,e)=>~t&e,this._avec,this._bvec),this._lastmask,0),e=a((t,e)=>t^e,this._avec,this._lastmask,0);return new x(1,Uint32Array.of(e&~t),Uint32Array.of(e|t))}reduceXnor(){return this.reduceXor().not()}concat(...t){return x.concat(this,...t)}slice(t,e){if(void 0===t&&(t=0),void 0===e&&(e=this._bits),e>this.bits&&(e=this.bits),t>e&&(e=t),0==u(t)){const n=this._avec.slice(t>>>5,e+31>>>5),r=this._bvec.slice(t>>>5,e+31>>>5);return new x(e-t,n,r)}{const n=e-t+31>>>5,r=new Uint32Array(n),i=new Uint32Array(n);let o=0;r[o]=this._avec[t>>5]>>>t,i[o]=this._bvec[t>>5]>>>t;for(let s=1+(t>>5);s<=e>>>5&&(r[o]|=this._avec[s]<<-t,i[o]|=this._bvec[s]<<-t,o++,o!=n);s++)r[o]=this._avec[s]>>>t,i[o]=this._bvec[s]>>>t;return new x(e-t,r,i)}}toIterator(t){return t&t-1?this.toIteratorAnySkip(t):this.toIteratorPow2(t)}*toIteratorAnySkip(t){this.normalize();const e=(1<<t)-1;let n=0,r=0,i=e;for(;n<this._bits;){let o=(this._avec[r]&i)>>>n,s=(this._bvec[r]&i)>>>n;if(i>>>n!=e&&r+1!=this._avec.length){const t=e>>-n;o|=(this._avec[r+1]&t)<<-n,s|=(this._bvec[r+1]&t)<<-n}yield o<<t|s,i<<=t,n+=t,0==i&&(r++,i=e<<n)}}*toIteratorPow2(t){this.normalize();const e=(1<<t)-1;let n=0,r=0,i=e;for(;n<this._bits;){const o=(this._avec[r]&i)>>>n,s=(this._bvec[r]&i)>>>n;yield o<<t|s,i<<=t,n+=t,0==i&&(r++,i=e)}}toArray(){this.normalize();let t=0,e=0,n=1,r=[];for(;t<this._bits;){const i=(this._avec[e]&n)>>>t<<1|(this._bvec[e]&n)>>>t;r.push(i-1-Number(i>1)),n<<=1,t+=1,0==n&&(e++,n=1)}return r}toBin(){return g(0,this._bits,this._avec,this._bvec)}toOct(){this.normalize();let t=0,e=0,n=7,r=[];for(;t<this._bits;){let i=(this._avec[e]&n)>>>t,o=(this._bvec[e]&n)>>>t;if(n>>>t!=7&&e+1!=this._avec.length){const n=7>>-t;i|=(this._avec[e+1]&n)<<-t,o|=(this._bvec[e+1]&n)<<-t}const s=i<<3|o;7&s&~(s>>3)?r.push("x"):r.push((s>>3).toString()),n<<=3,t+=3,0==n&&(e++,n=7<<t)}return r.reverse().join("")}toHex(){return this.normalize(),p(0,this._bits,this._avec,this._bvec)}toString(){return"Vector3vl "+this.toBin()}toClonable(){return{_bits:this._bits,_avec:this._avec,_bvec:this._bvec}}toNumber(t=!1){return t?this.toNumberSigned():(b(this.isFullyDefined,"Vector3vl.toNumber() called on a not fully defined vector"),b(this._bits<32,"Vector3vl.toNumber() called on a too wide vector"),0==this._bits?0:Number.parseInt(this.toHex(),16))}toNumberSigned(){return b(this.isFullyDefined,"Vector3vl.toNumberSigned() called on a not fully defined vector"),b(this._bits<32,"Vector3vl.toNumberSigned() called on a too wide vector"),b(this._bits>0,"Vector3vl.toNumberSigned() called on an empty vector"),1==this.msb?Number.parseInt(this.toHex(),16)-(1<<this._bits):Number.parseInt(this.toHex(),16)}toBigInt(t=!1){return t?this.toBigIntSigned():(b(this.isFullyDefined,"Vector3vl.toBigInt() called on a not fully defined vector"),0==this._bits?BigInt(0):BigInt("0x"+this.toHex()))}toBigIntSigned(){return b(this.isFullyDefined,"Vector3vl.toBigIntSigned() called on a not fully defined vector"),b(this._bits>0,"Vector3vl.toBigIntSigned() called on an empty vector"),1==this.msb?BigInt("0x"+this.toHex())-(BigInt(1)<<BigInt(this._bits)):BigInt("0x"+this.toHex())}eq(t){if(t._bits!=this._bits)return!1;this.normalize(),t.normalize();for(const e in this._avec){if(this._avec[e]!=t._avec[e])return!1;if(this._bvec[e]!=t._bvec[e])return!1}return!0}normalize(){const t=this._lastmask;this._avec[this._avec.length-1]&=t,this._bvec[this._bvec.length-1]&=t}get _lastmask(){return-1>>>-this.bits}}e.Vector3vl=x,x.empty=x.zeros(0),x.one=x.ones(1),x.zero=x.zeros(1),x.x=x.xes(1);class w{constructor(t,e,n){void 0===n&&(n=0),this._bits=0|t,this._size=0|e,this._wpc=(t+31)/32|0,this._avec=new Uint32Array(e*this._wpc).fill(n>0?-1:0),this._bvec=new Uint32Array(e*this._wpc).fill(n>=0?-1:0),this._size&&this.set(this._size-1,this.get(this._size-1))}static fromData(t){if(0==t.length)return new w(0,0);const e=new w(t[0].bits,t.length);for(const n in t){t[n].normalize(),b(t[n].bits==e._bits,"Mem3vl.fromData() called with vectors of different sizes");for(let r=0;r<e._wpc;r++){const i=Number(n)*e._wpc+r;e._avec[i]=t[n]._avec[r],e._bvec[i]=t[n]._bvec[r]}}return e}get bits(){return this._bits}get words(){return this._size}get(t){const e=this._wpc*t;return new x(this._bits,this._avec.slice(e,e+this._wpc),this._bvec.slice(e,e+this._wpc))}set(t,e){b(e.bits==this._bits,"Mem3vl.set() called with a vector with different bit width than the memory"),e.normalize();for(let n=0;n<this._wpc;n++)this._avec[t*this._wpc+n]=e._avec[n],this._bvec[t*this._wpc+n]=e._bvec[n]}toJSON(){const t=[];let e,n=[],r=0;const i=()=>{if(0!=n.length){if(n.reduce((t,e)=>t+e.length,0)==this._bits){const e=n.pop();n.length>0&&t.push(n.join("")),t.push(e)}else t.push(n.join(""));n=[]}},o=()=>{0!=r&&(1==r?e.length==this._bits?(i(),t.push(e)):n.push(e):(i(),t.push(r),t.push(e)),e=void 0,r=0)},s=t=>{e==t?r++:(o(),e=t,r=1)};for(let t=0;t<this._size;t++){const e=()=>{for(let e=0;e<this._wpc;e++){const n=this._avec[t*this._wpc+e]^this._bvec[t*this._wpc+e];for(let t=0;t<4;t++){const e=255<<16*t,r=n&e;if(r!=e||0!=r)return!1}}return!0};this._bits>0&&e()?s(p(t*this._wpc,this._bits,this._avec,this._bvec)):s(g(t*this._wpc,this._bits,this._avec,this._bvec))}return o(),i(),t}static fromJSON(t,e){const n=Math.ceil(t/4);let r=0;const i=e=>e.length==t||e.length==n?1:e.length/n;for(let t=0;t<e.length;t++)"string"==typeof e[t]?r+=i(e[t]):"number"==typeof e[t]&&(r+=e[t]*i(e[t+1]),t++);const o=new w(t,r,-1);let s=0;const a=e=>{if(e.length==t)m(e,s,t,o._avec,o._bvec),s+=o._wpc;else if(e.length==n)v(e,s,t,o._avec,o._bvec),s+=o._wpc;else for(let r=0;r<e.length/n;r++)v(e.slice(r*n,(r+1)*n),s,t,o._avec,o._bvec),s+=o._wpc};for(let t=0;t<e.length;t++)if("string"==typeof e[t])a(e[t]);else if("number"==typeof e[t]){for(const n of Array(e[t]).keys())a(e[t+1]);t++}return o}toArray(){return Array(this._size).fill(0).map((t,e)=>this.get(e))}toHex(){return this.toArray().map(t=>t.toHex())}eq(t){if(t._bits!=this._bits||t._size!=this._size)return!1;for(let e=0;e<this._size;e++)if(!t.get(e).eq(this.get(e)))return!1;return!0}}e.Mem3vl=w;class _{constructor(t){n.set(this,void 0),this.pattern=t,r(this,n,RegExp("^(?:"+this.pattern+")$"),"f")}validate(t,e){return i(this,n,"f").test(t)}}e.Display3vlWithRegex=_,n=new WeakMap;class E extends _{constructor(){super("[0-9a-fx]*"),this.name="hex",this.sort=0}can(t,e){return!0}read(t,e){return x.fromHex(t,e)}show(t){return t.toHex()}size(t){return Math.ceil(t/4)}}e.Display3vlHex=E;class A extends _{constructor(){super("[01x]*"),this.name="bin",this.sort=0}can(t,e){return!0}read(t,e){return x.fromBin(t,e)}show(t){return t.toBin()}size(t){return t}}e.Display3vlBin=A;class k extends _{constructor(){super("[0-7x]*"),this.name="oct",this.sort=0}can(t,e){return!0}read(t,e){return x.fromOct(t,e)}show(t){return t.toOct()}size(t){return Math.ceil(t/3)}}e.Display3vlOct=k;class S extends _{constructor(){super("[0-9]*|x")}get name(){return"dec"}get sort(){return 0}can(t,e){return!0}read(t,e){return"x"==t?x.xes(e):x.fromNumber(BigInt(t),e)}show(t){return t.isFullyDefined?t.toBigInt().toString():"x"}size(t){return Math.max(1,Math.ceil(t/Math.log2(10)))}}class T extends _{constructor(){super("-?[0-9]*|x")}get name(){return"dec2c"}get sort(){return 0}can(t,e){return e>0}read(t,e){return"x"==t?x.xes(e):x.fromNumber(BigInt(t),e)}show(t){return t.isFullyDefined?t.toBigIntSigned().toString():"x"}size(t){return 1+Math.ceil(t/Math.log2(10))}}e.Display3vl=class{constructor(){this.displays={},this.addDisplay(new E),this.addDisplay(new A),this.addDisplay(new k),this.addDisplay(new S),this.addDisplay(new T)}addDisplay(t){this.displays[t.name]=t}usableDisplays(t,e){const n=[];for(let r of Object.values(this.displays))r.can(t,e)&&n.push(r);return n.sort((t,e)=>t.sort-e.sort?t.sort-e.sort:t.name.localeCompare(e.name)).map(t=>t.name)}show(t,e){return this.displays[t].show(e)}read(t,e,n){return this.displays[t].read(e,n)}pattern(t){return this.displays[t].pattern}validate(t,e,n){return this.displays[t].validate(e,n)}size(t,e){return this.displays[t].size(e)}}},23007(t){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},23181(t,e,n){var r=n(85508)();t.exports=r},23805(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},24066(t,e,n){var r=n(83488);t.exports=function(t){return"function"==typeof t?t:r}},24423(t,e,n){var r=n(10117),i=n(66454),o=n(71737);t.exports=function(t,e){var n,s=new i,a={},u=new o;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,u.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(n=u.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return s}},24713(t,e,n){var r=n(2523),i=n(15389),o=n(61489),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var u=null==n?0:o(n);return u<0&&(u=s(a+u,0)),r(t,i(e,3),u)}},24739(t,e,n){var r=n(26025);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},25911(t,e,n){var r=n(38859),i=n(14248),o=n(19219);t.exports=function(t,e,n,s,a,u){var c=1&n,l=t.length,h=e.length;if(l!=h&&!(c&&h>l))return!1;var f=u.get(t),d=u.get(e);if(f&&d)return f==e&&d==t;var p=-1,g=!0,v=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<l;){var m=t[p],y=e[p];if(s)var b=c?s(y,m,p,e,t,u):s(m,y,p,t,e,u);if(void 0!==b){if(b)continue;g=!1;break}if(v){if(!i(e,function(t,e){if(!o(v,e)&&(m===t||a(m,t,n,s,u)))return v.push(e)})){g=!1;break}}else if(m!==y&&!a(m,y,n,s,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},26025(t,e,n){var r=n(75288);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},27301(t){t.exports=function(t){return function(e){return t(e)}}},27534(t,e,n){var r=n(72552),i=n(40346);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},28057(t,e,n){t.exports={graphlib:n(96743),layout:n(79507),debug:n(30334),util:{time:n(4809).time,notime:n(4809).notime},version:n(14529)}},28077(t){t.exports=function(t,e){return null!=t&&e in Object(t)}},28303(t,e,n){var r=n(56110)(n(9325),"WeakMap");t.exports=r},28586(t,e,n){var r=n(56449),i=n(44394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},28879(t,e,n){var r=n(74335)(Object.getPrototypeOf,Object);t.exports=r},28905(t,e,n){var r=n(10117),i=n(71737);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,s,a={},u=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),c=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)});u.size()>0&&(o=u.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return a}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},29172(t,e,n){var r=n(5861),i=n(40346);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},29276(t,e,n){var r=n(10117);function i(t,e,n,o,s,a){r.has(o,e)||(o[e]=!0,n||a.push(e),r.each(s(e),function(e){i(t,e,n,o,s,a)}),n&&a.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,o,s)}),s}},29817(t){t.exports=function(t){return this.__data__.has(t)}},29888(t,e,n){var r=n(10117);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))}),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},29905(t){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},30294(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},30334(t,e,n){let r=n(4809),i=n(96743).Graph;t.exports={debugOrdering:function(t){let e=r.buildLayerMatrix(t),n=new i({compound:!0,multigraph:!0}).setGraph({});return t.nodes().forEach(e=>{n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),t.edges().forEach(t=>n.setEdge(t.v,t.w,{},t.name)),e.forEach((t,e)=>{let r="layer"+e;n.setNode(r,{rank:"same"}),t.reduce((t,e)=>(n.setEdge(t,e,{style:"invis"}),e))}),n}}},30361(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},30514(t,e,n){var r=n(34932);t.exports=function(t,e){return r(e,function(e){return t[e]})}},30641(t,e,n){var r=n(86649),i=n(95950);t.exports=function(t,e){return t&&r(t,e,i)}},30756(t,e,n){var r=n(23805);t.exports=function(t){return t==t&&!r(t)}},31045(t,e,n){var r=n(29276);t.exports=function(t,e){return r(t,e,"post")}},31166(t,e,n){t.exports={Graph:n(66454),version:n(44458)}},31175(t,e,n){var r=n(26025);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},31380(t){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},31667(t,e,n){t.exports={components:n(33619),dijkstra:n(28905),dijkstraAll:n(34919),findCycles:n(16678),floydWarshall:n(73590),isAcyclic:n(60498),postorder:n(31045),preorder:n(46016),prim:n(24423),tarjan:n(16291),topsort:n(29888)}},31684(t,e,n){var r=n(93599),i=n(56176),o=n(83488);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},31769(t,e,n){var r=n(56449),i=n(28586),o=n(61802),s=n(13222);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},31800(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},32377(t,e,n){var r=n(46239);function i(t){return t.nodes().map(function(e){var n=t.node(e),r=t.parent(e),i={v:e};return void 0!==n&&(i.value=n),void 0!==r&&(i.parent=r),i})}function o(t){return t.edges().map(function(e){var n=t.edge(e),r={v:e.v,w:e.w};return void 0!==e.name&&(r.name=e.name),void 0!==n&&(r.value=n),r})}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:o(t)};return void 0!==t.graph()&&(e.value=structuredClone(t.graph())),e},read:function(t){var e=new r(t.options).setGraph(t.value);return t.nodes.forEach(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),t.edges.forEach(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},32629(t,e,n){var r=n(9999);t.exports=function(t){return r(t,4)}},32804(t,e,n){var r=n(56110)(n(9325),"Promise");t.exports=r},32865(t,e,n){var r=n(19570),i=n(51811)(r);t.exports=i},33031(t,e,n){var r=n(83120),i=n(46155),o=n(69302),s=n(36800),a=o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=a},33619(t,e,n){var r=n(10117);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}},33860(t,e,n){var r=n(56857);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},34160(t,e,n){t.exports=function(){if("object"==typeof globalThis)return globalThis;var t;try{t=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return t}()},34168(t){t.exports=function(t){var e=0,n=[],r={},i=[];function o(s){var a=r[s]={onStack:!0,lowlink:e,index:e++};if(n.push(s),t.successors(s).forEach(function(t){r.hasOwnProperty(t)?r[t].onStack&&(a.lowlink=Math.min(a.lowlink,r[t].index)):(o(t),a.lowlink=Math.min(a.lowlink,r[t].lowlink))}),a.lowlink===a.index){var u,c=[];do{u=n.pop(),r[u].onStack=!1,c.push(u)}while(s!==u);i.push(c)}}return t.nodes().forEach(function(t){r.hasOwnProperty(t)||o(t)}),i}},34318(t,e,n){var r=n(36316);t.exports=function(t,e,n,o){return function(t,e,n,i){var o,s,a={},u=new r,c=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),c=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,u.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)});u.size()>0&&(o=u.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)i(o).forEach(c);return a}(t,String(e),n||i,o||function(e){return t.outEdges(e)})};var i=()=>1},34822(t,e,n){let r=n(52667),i=n(37764),o=n(13535),s=n(43843),a=n(80477),u=n(96743).Graph,c=n(4809);function l(t,e,n){return e.map(function(e){return s(t,e,n)})}function h(t,e){let n=new u;t.forEach(function(t){let r=t.graph().root,i=o(t,r,n,e);i.vs.forEach((e,n)=>t.node(e).order=n),a(t,n,i.vs)})}function f(t,e){Object.values(e).forEach(e=>e.forEach((e,n)=>t.node(e).order=n))}t.exports=function(t){let e=c.maxRank(t),n=l(t,c.range(1,e+1),"inEdges"),o=l(t,c.range(e-1,-1,-1),"outEdges"),s=r(t);f(t,s);let a,u=Number.POSITIVE_INFINITY;for(let e=0,r=0;r<4;++e,++r){h(e%2?n:o,e%4>=2),s=c.buildLayerMatrix(t);let l=i(t,s);l<u&&(r=0,a=Object.assign({},s),u=l)}f(t,a)}},34840(t,e,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},34867(t){t.exports=function(t){let e=function(t){let e={},n=0;return t.children().forEach(function r(i){let o=n;t.children(i).forEach(r),e[i]={low:o,lim:n++}}),e}(t);t.graph().dummyChains.forEach(n=>{let r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){let i,o,s=[],a=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,u=0,c=s[u],l=!0;for(;n!==i.w;){if(r=t.node(n),l){for(;(c=s[u])!==a&&t.node(c).maxRank<r.rank;)u++;c===a&&(l=!1)}if(!l){for(;u<s.length-1&&t.node(c=s[u+1]).minRank<=r.rank;)u++;c=s[u]}t.setParent(n,c),n=t.successors(n)[0]}})}},34919(t,e,n){var r=n(28905),i=n(10117);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}},34932(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},35169(t,e,n){var r=n(56857),i=n(3988);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,s=i.partition(t,function(t){return r.has(t,"barycenter")}),a=s.lhs,u=r.sortBy(s.rhs,function(t){return-t.i}),c=[],l=0,h=0,f=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),f=o(c,u,f),r.forEach(a,function(t){f+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,f=o(c,u,f)});var d={vs:r.flatten(c,!0)};return h&&(d.barycenter=l/h,d.weight=h),d}},35529(t,e,n){var r=n(39344),i=n(28879),o=n(55527);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},35749(t,e,n){var r=n(81042);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},35880(t,e,n){var r=n(30514),i=n(95950);t.exports=function(t){return null==t?[]:r(t,i(t))}},35970(t,e,n){var r=n(83120);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},36316(t){t.exports=class{#t=[];#e={};size(){return this.#t.length}keys(){return this.#t.map(function(t){return t.key})}has(t){return this.#e.hasOwnProperty(t)}priority(t){var e=this.#e[t];if(void 0!==e)return this.#t[e].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this.#t[0].key}add(t,e){var n=this.#e;if(t=String(t),!n.hasOwnProperty(t)){var r=this.#t,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this.#n(i),!0}return!1}removeMin(){this.#r(0,this.#t.length-1);var t=this.#t.pop();return delete this.#e[t.key],this.#i(0),t.key}decrease(t,e){var n=this.#e[t];if(e>this.#t[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this.#t[n].priority+" New: "+e);this.#t[n].priority=e,this.#n(n)}#i(t){var e=this.#t,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this.#r(t,i),this.#i(i)))}#n(t){for(var e,n=this.#t,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this.#r(t,e),t=e}#r(t,e){var n=this.#t,r=this.#e,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}}},36533(t,e,n){var r=n(93599),i=n(15389),o=n(56176);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},36554(t,e,n){let r=n(4809);function i(t,e,n,o,s,a,u){let c=t.children(u);if(!c.length)return void(u!==e&&t.setEdge(e,u,{weight:0,minlen:n}));let l=r.addBorderNode(t,"_bt"),h=r.addBorderNode(t,"_bb"),f=t.node(u);t.setParent(l,u),f.borderTop=l,t.setParent(h,u),f.borderBottom=h,c.forEach(r=>{i(t,e,n,o,s,a,r);let c=t.node(r),f=c.borderTop?c.borderTop:r,d=c.borderBottom?c.borderBottom:r,p=c.borderTop?o:2*o,g=f!==d?1:s-a[u]+1;t.setEdge(l,f,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,h,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(u)||t.setEdge(e,l,{weight:0,minlen:s+a[u]})}t.exports={run:function(t){let e=r.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(r,i){var o=t.children(r);o&&o.length&&o.forEach(t=>n(t,i+1)),e[r]=i}return t.children().forEach(t=>n(t,1)),e}(t),o=Math.max(...Object.values(n))-1,s=2*o+1;t.graph().nestingRoot=e,t.edges().forEach(e=>t.edge(e).minlen*=s);let a=function(t){return t.edges().reduce((e,n)=>e+t.edge(n).weight,0)}(t)+1;t.children().forEach(r=>i(t,e,s,a,o,n,r)),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,t.edges().forEach(e=>{t.edge(e).nestingEdge&&t.removeEdge(e)})}}},36639(t,e,n){var r=n(56857);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.sortBy(r.map(t.outEdges(e),function(e){return{pos:i[e.w],weight:t.edge(e).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var u=r.map(new Array(a),function(){return 0}),c=0;return r.forEach(o.forEach(function(t){var e=t.pos+s;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n})),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},36800(t,e,n){var r=n(75288),i=n(64894),o=n(30361),s=n(23805);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},36860(t,e,n){var r=n(56857),i=n(38481),o=n(68073).slack,s=n(68073).longestPath,a=n(68191).alg.preorder,u=n(68191).alg.postorder,c=n(3988).simplify;function l(t){t=c(t),s(t);var e,n=i(t);for(d(n),h(n,t);e=g(n);)m(n,t,e,v(n,t,e))}function h(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=f(t,e,n)}(t,e,n)})}function f(t,e,n){var i=t.node(n).parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,r.forEach(e.nodeEdges(n),function(r){var s,u,c=r.v===n,l=c?r.w:r.v;if(l!==i){var h=c===o,f=e.edge(r).weight;if(a+=h?f:-f,s=n,u=l,t.hasEdge(s,u)){var d=t.edge(n,l).cutvalue;a+=h?-d:d}}}),a}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,o){var s=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),function(o){r.has(e,o)||(n=p(t,e,n,o,i))}),a.low=s,a.lim=n++,o?a.parent=o:delete a.parent,n}function g(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function v(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),u=t.node(s),c=a,l=!1;a.lim>u.lim&&(c=u,l=!0);var h=r.filter(e.edges(),function(e){return l===y(0,t.node(e.v),c)&&l!==y(0,t.node(e.w),c)});return r.minBy(h,function(t){return o(e,t)})}function m(t,e,n,i){var o=n.v,s=n.w;t.removeEdge(o,s),t.setEdge(i.v,i.w,{}),d(t),h(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=a(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function y(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=d,l.initCutValues=h,l.calcCutValue=f,l.leaveEdge=g,l.enterEdge=v,l.exchangeEdges=m},37167(t,e,n){var r=n(4901),i=n(27301),o=n(86009),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},37204(t,e,n){let r=n(4809);function i(t,e,n){let r;for(;e.length&&(r=e[e.length-1]).i<=n;)e.pop(),t.push(r.vs),n++;return n}t.exports=function(t,e){let n=r.partition(t,t=>t.hasOwnProperty("barycenter")),o=n.lhs,s=n.rhs.sort((t,e)=>e.i-t.i),a=[],u=0,c=0,l=0;var h;o.sort((h=!!e,(t,e)=>t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:h?e.i-t.i:t.i-e.i)),l=i(a,s,l),o.forEach(t=>{l+=t.vs.length,a.push(t.vs),u+=t.barycenter*t.weight,c+=t.weight,l=i(a,s,l)});let f={vs:a.flat(!0)};return c&&(f.barycenter=u/c,f.weight=c),f}},37217(t,e,n){var r=n(80079),i=n(51420),o=n(90938),s=n(63605),a=n(29817),u=n(80945);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,t.exports=c},37241(t,e,n){var r=n(70695),i=n(72903),o=n(64894);t.exports=function(t){return o(t)?r(t,!0):i(t)}},37277(t,e,n){let r=n(4809),i=n(52806).positionX;t.exports=function(t){(function(t){let e=r.buildLayerMatrix(t),n=t.graph().ranksep,i=0;e.forEach(e=>{const r=e.reduce((e,n)=>{const r=t.node(n).height;return e>r?e:r},0);e.forEach(e=>t.node(e).y=i+r/2),i+=r+n})})(t=r.asNonCompoundGraph(t)),Object.entries(i(t)).forEach(([e,n])=>t.node(e).x=n)}},37334(t){t.exports=function(t){return function(){return t}}},37764(t,e,n){let r=n(4809).zipObject;function i(t,e,n){let i=r(n,n.map((t,e)=>e)),o=e.flatMap(e=>t.outEdges(e).map(e=>({pos:i[e.w],weight:t.edge(e).weight})).sort((t,e)=>t.pos-e.pos)),s=1;for(;s<n.length;)s<<=1;let a=2*s-1;s-=1;let u=new Array(a).fill(0),c=0;return o.forEach(t=>{let e=t.pos+s;u[e]+=t.weight;let n=0;for(;e>0;)e%2&&(n+=u[e+1]),e=e-1>>1,u[e]+=t.weight;c+=t.weight*n}),c}t.exports=function(t,e){let n=0;for(let r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},37828(t,e,n){var r=n(9325).Uint8Array;t.exports=r},38329(t,e,n){var r=n(64894);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},38362(t,e,n){var r=n(31166);t.exports={Graph:r.Graph,json:n(57494),alg:n(31667),version:r.version}},38440(t,e,n){var r=n(16038),i=n(27301),o=n(86009),s=o&&o.isSet,a=s?i(s):r;t.exports=a},38481(t,e,n){var r=n(56857),i=n(68191).Graph,o=n(68073).slack;function s(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))})}),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function u(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(r.setNode(c,{});s(r,t)<l;)e=a(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),u(r,t,n);return r}},38816(t,e,n){var r=n(35970),i=n(56757),o=n(32865);t.exports=function(t){return o(i(t,void 0,r),t+"")}},38859(t,e,n){var r=n(53661),i=n(31380),o=n(51459);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},39344(t,e,n){var r=n(23805),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},39552(t,e,n){var r=n(34318);t.exports=function(t,e,n){return t.nodes().reduce(function(i,o){return i[o]=r(t,o,e,n),i},{})}},39741(t,e,n){var r=n(56857),i=n(68191).Graph,o=n(3988);function s(t,e){var n={};return r.reduce(e,function(e,i){var o=0,s=0,a=e.length,c=r.last(i);return r.forEach(i,function(e,l){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),f=h?t.node(h).order:a;(h||e===c)&&(r.forEach(i.slice(s,l+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),s=i.order;!(s<o||f<s)||i.dummy&&t.node(e).dummy||u(n,r,e)})}),s=l+1,o=f)}),i}),n}function a(t,e){var n={};function i(e,i,o,s,a){var c;r.forEach(r.range(i,o),function(i){c=e[i],t.node(c).dummy&&r.forEach(t.predecessors(c),function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&u(n,e,c)})})}return r.reduce(e,function(e,n){var o,s=-1,a=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,a,u,s,o),a=u,s=o)}i(n,a,n.length,o,e.length)}),n}),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function l(t,e,n,i){var o={},s={},a={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,s[t]=t,a[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=i(t);if(u.length){u=r.sortBy(u,function(t){return a[t]});for(var l=(u.length-1)/2,h=Math.floor(l),f=Math.ceil(l);h<=f;++h){var d=u[h];s[t]===t&&e<a[d]&&!c(n,t,d)&&(s[d]=t,s[t]=o[t]=o[d],e=a[d])}}})}),{root:o,align:s}}function h(t,e,n,o,s){var a={},u=function(t,e,n,o){var s=new i,a=t.graph(),u=function(t,e,n){return function(i,o,s){var a,u=i.node(o),c=i.node(s),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(l+=n?a:-a),a=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=c.width/2;break;case"r":a=-c.width/2}return a&&(l+=n?a:-a),a=0,l}}(a.nodesep,a.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(u(t,e,i),a||0))}i=e})}),s}(t,e,n,s),c=s?"borderLeft":"borderRight";function l(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l(function(t){a[t]=u.inEdges(t).reduce(function(t,e){return Math.max(t,a[e.v]+u.edge(e))},0)},u.predecessors.bind(u)),l(function(e){var n=u.outEdges(e).reduce(function(t,e){return Math.min(t,a[e.w]-u.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(a[e]=Math.max(a[e],n))},u.successors.bind(u)),r.forEach(o,function(t){a[t]=a[n[t]]}),a}function f(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function d(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(s){var a,u=n+s,c=t[u];if(c!==e){var l=r.values(c);(a="l"===s?i-r.min(l):o-r.max(l))&&(t[u]=r.mapValues(c,function(t){return t+a}))}})})}function p(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),u={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var s=("u"===o?t.predecessors:t.successors).bind(t),a=l(0,e,i,s),c=h(t,e,a.root,a.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(t){return-t})),u[o+n]=c})});var c=f(t,u);return d(u,c),p(u,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:h,alignCoordinates:d,findSmallestWidthAlignment:f,balance:p}},39754(t,e,n){var r=n(83729),i=n(80909),o=n(24066),s=n(56449);t.exports=function(t,e){return(s(t)?r:i)(t,o(e))}},39859(t){function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},40135(t,e,n){var r=n(56857),i=n(3988);function o(t,e,n,r,o,s){var a={width:0,height:0,rank:s,borderType:e},u=o[e][s-1],c=i.addDummyNode(t,"border",a,n);o[e][s]=c,t.setParent(c,r),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),s=t.node(n);if(i.length&&r.forEach(i,e),r.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,u=s.maxRank+1;a<u;++a)o(t,"borderLeft","_bl",n,s,a),o(t,"borderRight","_br",n,s,a)}})}},40346(t){t.exports=function(t){return null!=t&&"object"==typeof t}},40860(t,e,n){var r=n(40882),i=n(80909),o=n(15389),s=n(85558),a=n(56449);t.exports=function(t,e,n){var u=a(t)?r:s,c=arguments.length<3;return u(t,o(e,4),n,c,i)}},40882(t){t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},41236(t,e,n){let r=n(4809);function i(t,e,n,i,o,s){let a={width:0,height:0,rank:s,borderType:e},u=o[e][s-1],c=r.addDummyNode(t,"border",a,n);o[e][s]=c,t.setParent(c,i),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){t.children().forEach(function e(n){let r=t.children(n),o=t.node(n);if(r.length&&r.forEach(e),o.hasOwnProperty("minRank")){o.borderLeft=[],o.borderRight=[];for(let e=o.minRank,r=o.maxRank+1;e<r;++e)i(t,"borderLeft","_bl",n,o,e),i(t,"borderRight","_br",n,o,e)}})}},41799(t,e,n){var r=n(37217),i=n(60270);t.exports=function(t,e,n,o){var s=n.length,a=s,u=!o;if(null==t)return!a;for(t=Object(t);s--;){var c=n[s];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<a;){var l=(c=n[s])[0],h=t[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in t))return!1}else{var d=new r;if(o)var p=o(h,f,l,t,e,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},42824(t,e,n){var r=n(87805),i=n(93290),o=n(71961),s=n(23007),a=n(35529),u=n(72428),c=n(56449),l=n(83693),h=n(3656),f=n(1882),d=n(23805),p=n(11331),g=n(37167),v=n(14974),m=n(69884);t.exports=function(t,e,n,y,b,x,w){var _=v(t,n),E=v(e,n),A=w.get(E);if(A)r(t,n,A);else{var k=x?x(_,E,n+"",t,e,w):void 0,S=void 0===k;if(S){var T=c(E),P=!T&&h(E),C=!T&&!P&&g(E);k=E,T||P||C?c(_)?k=_:l(_)?k=s(_):P?(S=!1,k=i(E,!0)):C?(S=!1,k=o(E,!0)):k=[]:p(E)||u(E)?(k=_,u(_)?k=m(_):d(_)&&!f(_)||(k=a(E))):S=!1}S&&(w.set(E,k),b(k,E,y,x,w),w.delete(E)),r(t,n,k)}}},43061(t,e,n){var r=n(51395),i=n(89294).slack,o=n(89294).longestPath,s=n(96743).alg.preorder,a=n(96743).alg.postorder,u=n(4809).simplify;function c(t){t=u(t),o(t);var e,n=r(t);for(f(n),l(n,t);e=p(n);)v(n,t,e,g(n,t,e))}function l(t,e){var n=a(t,t.nodes());(n=n.slice(0,n.length-1)).forEach(n=>function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=h(t,e,n)}(t,e,n))}function h(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),s=0;return o||(i=!1,o=e.edge(r,n)),s=o.weight,e.nodeEdges(n).forEach(o=>{var a,u,c=o.v===n,l=c?o.w:o.v;if(l!==r){var h=c===i,f=e.edge(o).weight;if(s+=h?f:-f,a=n,u=l,t.hasEdge(a,u)){var d=t.edge(n,l).cutvalue;s+=h?-d:d}}}),s}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),d(t,{},1,e)}function d(t,e,n,r,i){var o=n,s=t.node(r);return e[r]=!0,t.neighbors(r).forEach(i=>{e.hasOwnProperty(i)||(n=d(t,e,n,i,r))}),s.low=o,s.lim=n++,i?s.parent=i:delete s.parent,n}function p(t){return t.edges().find(e=>t.edge(e).cutvalue<0)}function g(t,e,n){var r=n.v,o=n.w;e.hasEdge(r,o)||(r=n.w,o=n.v);var s=t.node(r),a=t.node(o),u=s,c=!1;s.lim>a.lim&&(u=a,c=!0);var l=e.edges().filter(e=>c===m(0,t.node(e.v),u)&&c!==m(0,t.node(e.w),u));return l.reduce((t,n)=>i(e,n)<i(e,t)?n:t)}function v(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),f(t),l(t,e),function(t,e){var n=t.nodes().find(t=>!e.node(t).parent),r=s(t,n);(r=r.slice(1)).forEach(n=>{var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function m(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=c,c.initLowLimValues=f,c.initCutValues=l,c.calcCutValue=h,c.leaveEdge=p,c.enterEdge=g,c.exchangeEdges=v},43360(t,e,n){var r=n(93243);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},43714(t,e,n){var r=n(53730);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++i<a;){var c=r(o[i],s[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},43838(t,e,n){var r=n(21791),i=n(37241);t.exports=function(t,e){return t&&r(e,i(e),t)}},43843(t,e,n){let r=n(96743).Graph,i=n(4809);t.exports=function(t,e,n){let o=function(t){for(var e;t.hasNode(e=i.uniqueId("_root")););return e}(t),s=new r({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(e=>t.node(e));return t.nodes().forEach(r=>{let i=t.node(r),a=t.parent(r);(i.rank===e||i.minRank<=e&&e<=i.maxRank)&&(s.setNode(r),s.setParent(r,a||o),t[n](r).forEach(e=>{let n=e.v===r?e.w:e.v,i=s.edge(n,r),o=void 0!==i?i.weight:0;s.setEdge(n,r,{weight:t.edge(e).weight+o})}),i.hasOwnProperty("minRank")&&s.setNode(r,{borderLeft:i.borderLeft[e],borderRight:i.borderRight[e]}))}),s}},44383(t,e,n){var r=n(76001),i=n(38816)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},44394(t,e,n){var r=n(72552),i=n(40346);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},44458(t){t.exports="2.1.8"},44517(t,e,n){var r=n(76545),i=n(63950),o=n(84247),s=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=s},44959(t,e,n){var r=n(56857);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,i,o,s;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(i=e,o=0,s=0,(n=t).weight&&(o+=n.barycenter*n.weight,s+=n.weight),i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0===--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,function(t){return!t.merged}),function(t){return r.pick(t,["vs","i","barycenter","weight"])})}(r.filter(n,function(t){return!t.indegree}))}},45083(t,e,n){var r=n(1882),i=n(87296),o=n(23805),s=n(47473),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:a).test(s(t))}},45891(t,e,n){var r=n(51873),i=n(72428),o=n(56449),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},45944(t){t.exports=function(t){var e,n={},r=[];function i(r){n.hasOwnProperty(r)||(n[r]=!0,e.push(r),t.successors(r).forEach(i),t.predecessors(r).forEach(i))}return t.nodes().forEach(function(t){e=[],i(t),e.length&&r.push(e)}),r}},46016(t,e,n){var r=n(29276);t.exports=function(t,e){return r(t,e,"pre")}},46155(t,e,n){var r=n(34932),i=n(47422),o=n(15389),s=n(5128),a=n(73937),u=n(27301),c=n(43714),l=n(83488),h=n(56449);t.exports=function(t,e,n){e=e.length?r(e,function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t}):[l];var f=-1;e=r(e,u(o));var d=s(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++f,value:t}});return a(d,function(t,e){return c(t,e,n)})}},46239(t){var e="\0";function n(t,e){t[e]?t[e]++:t[e]=1}function r(t,e){--t[e]||delete t[e]}function i(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}return i+""+o+""+(void 0===r?"\0":r)}function o(t,e){return i(t,e.v,e.w,e.name)}t.exports=class{#o=!0;#s=!1;#a=!1;#u;#c=()=>{};#l=()=>{};#h={};#f={};#d={};#p={};#g={};#v={};#m={};#y=0;#b=0;#x;#w;constructor(t){t&&(this.#o=!t.hasOwnProperty("directed")||t.directed,this.#s=!!t.hasOwnProperty("multigraph")&&t.multigraph,this.#a=!!t.hasOwnProperty("compound")&&t.compound),this.#a&&(this.#x={},this.#w={},this.#w[e]={})}isDirected(){return this.#o}isMultigraph(){return this.#s}isCompound(){return this.#a}setGraph(t){return this.#u=t,this}graph(){return this.#u}setDefaultNodeLabel(t){return this.#c=t,"function"!=typeof t&&(this.#c=()=>t),this}nodeCount(){return this.#y}nodes(){return Object.keys(this.#h)}sources(){var t=this;return this.nodes().filter(e=>0===Object.keys(t.#f[e]).length)}sinks(){var t=this;return this.nodes().filter(e=>0===Object.keys(t.#p[e]).length)}setNodes(t,e){var n=arguments,r=this;return t.forEach(function(t){n.length>1?r.setNode(t,e):r.setNode(t)}),this}setNode(t,n){return this.#h.hasOwnProperty(t)?(arguments.length>1&&(this.#h[t]=n),this):(this.#h[t]=arguments.length>1?n:this.#c(t),this.#a&&(this.#x[t]=e,this.#w[t]={},this.#w[e][t]=!0),this.#f[t]={},this.#d[t]={},this.#p[t]={},this.#g[t]={},++this.#y,this)}node(t){return this.#h[t]}hasNode(t){return this.#h.hasOwnProperty(t)}removeNode(t){var e=this;if(this.#h.hasOwnProperty(t)){var n=t=>e.removeEdge(e.#v[t]);delete this.#h[t],this.#a&&(this.#_(t),delete this.#x[t],this.children(t).forEach(function(t){e.setParent(t)}),delete this.#w[t]),Object.keys(this.#f[t]).forEach(n),delete this.#f[t],delete this.#d[t],Object.keys(this.#p[t]).forEach(n),delete this.#p[t],delete this.#g[t],--this.#y}return this}setParent(t,n){if(!this.#a)throw new Error("Cannot set parent in a non-compound graph");if(void 0===n)n=e;else{for(var r=n+="";void 0!==r;r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this.#_(t),this.#x[t]=n,this.#w[n][t]=!0,this}#_(t){delete this.#w[this.#x[t]][t]}parent(t){if(this.#a){var n=this.#x[t];if(n!==e)return n}}children(t=e){if(this.#a){var n=this.#w[t];if(n)return Object.keys(n)}else{if(t===e)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var e=this.#d[t];if(e)return Object.keys(e)}successors(t){var e=this.#g[t];if(e)return Object.keys(e)}neighbors(t){var e=this.predecessors(t);if(e){const r=new Set(e);for(var n of this.successors(t))r.add(n);return Array.from(r.values())}}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this.#o,multigraph:this.#s,compound:this.#a});e.setGraph(this.graph());var n=this;Object.entries(this.#h).forEach(function([n,r]){t(n)&&e.setNode(n,r)}),Object.values(this.#v).forEach(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var r={};function i(t){var o=n.parent(t);return void 0===o||e.hasNode(o)?(r[t]=o,o):o in r?r[o]:i(o)}return this.#a&&e.nodes().forEach(t=>e.setParent(t,i(t))),e}setDefaultEdgeLabel(t){return this.#l=t,"function"!=typeof t&&(this.#l=()=>t),this}edgeCount(){return this.#b}edges(){return Object.values(this.#v)}setPath(t,e){var n=this,r=arguments;return t.reduce(function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this}setEdge(){var t,e,r,o,s=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,r=a.name,2===arguments.length&&(o=arguments[1],s=!0)):(t=a,e=arguments[1],r=arguments[3],arguments.length>2&&(o=arguments[2],s=!0)),t=""+t,e=""+e,void 0!==r&&(r=""+r);var u=i(this.#o,t,e,r);if(this.#m.hasOwnProperty(u))return s&&(this.#m[u]=o),this;if(void 0!==r&&!this.#s)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this.#m[u]=s?o:this.#l(t,e,r);var c=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}(this.#o,t,e,r);return t=c.v,e=c.w,Object.freeze(c),this.#v[u]=c,n(this.#d[e],t),n(this.#g[t],e),this.#f[e][u]=c,this.#p[t][u]=c,this.#b++,this}edge(t,e,n){var r=1===arguments.length?o(this.#o,arguments[0]):i(this.#o,t,e,n);return this.#m[r]}edgeAsObj(){const t=this.edge(...arguments);return"object"!=typeof t?{label:t}:t}hasEdge(t,e,n){var r=1===arguments.length?o(this.#o,arguments[0]):i(this.#o,t,e,n);return this.#m.hasOwnProperty(r)}removeEdge(t,e,n){var s=1===arguments.length?o(this.#o,arguments[0]):i(this.#o,t,e,n),a=this.#v[s];return a&&(t=a.v,e=a.w,delete this.#m[s],delete this.#v[s],r(this.#d[e],t),r(this.#g[t],e),delete this.#f[e][s],delete this.#p[t][s],this.#b--),this}inEdges(t,e){var n=this.#f[t];if(n){var r=Object.values(n);return e?r.filter(t=>t.v===e):r}}outEdges(t,e){var n=this.#p[t];if(n){var r=Object.values(n);return e?r.filter(t=>t.w===e):r}}nodeEdges(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}}},47091(t,e,n){var r=n(88984),i=n(5861),o=n(64894),s=n(85015),a=n(81993);t.exports=function(t){if(null==t)return 0;if(o(t))return s(t)?a(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},47237(t){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},47248(t,e,n){var r=n(16547),i=n(51234);t.exports=function(t,e){return i(t||[],e||[],r)}},47422(t,e,n){var r=n(31769),i=n(77797);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},47473(t){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},48655(t,e,n){var r=n(26025);t.exports=function(t){return r(this.__data__,t)>-1}},48948(t,e,n){var r=n(21791),i=n(86375);t.exports=function(t,e){return r(t,i(t),e)}},49326(t,e,n){var r=n(31769),i=n(72428),o=n(56449),s=n(30361),a=n(30294),u=n(77797);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,h=!1;++c<l;){var f=u(e[c]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&a(l)&&s(f,l)&&(o(t)||i(t))}},49653(t,e,n){var r=n(37828);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},49698(t){var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},50002(t,e,n){var r=n(82199),i=n(4664),o=n(95950);t.exports=function(t){return r(t,o,i)}},50104(t,e,n){var r=n(53661);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},50583(t,e,n){var r=n(47237),i=n(17255),o=n(28586),s=n(77797);t.exports=function(t){return o(t)?r(s(t)):i(t)}},50689(t,e,n){var r=n(50002),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var h=l;h--;){var f=c[h];if(!(u?f in e:i.call(e,f)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=u;++h<l;){var m=t[f=c[h]],y=e[f];if(o)var b=u?o(y,m,f,e,t,a):o(m,y,f,t,e,a);if(!(void 0===b?m===y||s(m,y,n,o,a):b)){g=!1;break}v||(v="constructor"==f)}if(g&&!v){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},51234(t){t.exports=function(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:void 0;n(s,t[r],a)}return s}},51395(t,e,n){var r=n(96743).Graph,i=n(89294).slack;function o(t,e){return t.nodes().forEach(function n(r){e.nodeEdges(r).forEach(o=>{var s=o.v,a=r===s?o.w:s;t.hasNode(a)||i(e,o)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}),t.nodeCount()}function s(t,e){return e.edges().reduce((n,r)=>{let o=Number.POSITIVE_INFINITY;return t.hasNode(r.v)!==t.hasNode(r.w)&&(o=i(e,r)),o<n[0]?[o,r]:n},[Number.POSITIVE_INFINITY,null])[1]}function a(t,e,n){t.nodes().forEach(t=>e.node(t).rank+=n)}t.exports=function(t){var e,n,u=new r({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(u.setNode(c,{});o(u,t)<l;)e=s(u,t),n=u.hasNode(e.v)?i(t,e):-i(t,e),a(u,t,n);return u}},51420(t,e,n){var r=n(80079);t.exports=function(){this.__data__=new r,this.size=0}},51453(t,e,n){var r=n(56857),i=n(98918),o=n(36639),s=n(14520),a=n(97860),u=n(94384),c=n(68191).Graph,l=n(3988);function h(t,e,n){return r.map(e,function(e){return a(t,e,n)})}function f(t,e){var n=new c;r.forEach(t,function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),u(t,n,o.vs)})}function d(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=function(t){var e=l.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),s=h(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);d(t,a);for(var u,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){f(p%2?n:s,p%4>=2),a=l.buildLayerMatrix(t);var v=o(t,a);v<c&&(g=0,u=r.cloneDeep(a),c=v)}d(t,u)}},51459(t){t.exports=function(t){return this.__data__.has(t)}},51811(t){var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},51873(t,e,n){var r=n(9325).Symbol;t.exports=r},52420(t,e,n){var r=n(86649),i=n(24066),o=n(37241);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},52667(t,e,n){let r=n(4809);t.exports=function(t){let e={},n=t.nodes().filter(e=>!t.children(e).length),i=Math.max(...n.map(e=>t.node(e).rank)),o=r.range(i+1).map(()=>[]);return n.sort((e,n)=>t.node(e).rank-t.node(n).rank).forEach(function n(r){if(e[r])return;e[r]=!0;let i=t.node(r);o[i.rank].push(r),t.successors(r).forEach(n)}),o}},52806(t,e,n){let r=n(96743).Graph,i=n(4809);function o(t,e){let n={};return e.reduce(function(e,r){let i=0,o=0,s=e.length,u=r[r.length-1];return r.forEach((e,c)=>{let l=function(t,e){if(t.node(e).dummy)return t.predecessors(e).find(e=>t.node(e).dummy)}(t,e),h=l?t.node(l).order:s;(l||e===u)&&(r.slice(o,c+1).forEach(e=>{t.predecessors(e).forEach(r=>{let o=t.node(r),s=o.order;!(s<i||h<s)||o.dummy&&t.node(e).dummy||a(n,r,e)})}),o=c+1,i=h)}),r}),n}function s(t,e){let n={};function r(e,r,o,s,u){let c;i.range(r,o).forEach(r=>{c=e[r],t.node(c).dummy&&t.predecessors(c).forEach(e=>{let r=t.node(e);r.dummy&&(r.order<s||r.order>u)&&a(n,e,c)})})}return e.reduce(function(e,n){let i,o=-1,s=0;return n.forEach((a,u)=>{if("border"===t.node(a).dummy){let e=t.predecessors(a);e.length&&(i=t.node(e[0]).order,r(n,s,u,o,i),s=u,o=i)}r(n,s,n.length,i,e.length)}),n}),n}function a(t,e,n){if(e>n){let t=e;e=n,n=t}let r=t[e];r||(t[e]=r={}),r[n]=!0}function u(t,e,n){if(e>n){let t=e;e=n,n=t}return!!t[e]&&t[e].hasOwnProperty(n)}function c(t,e,n,r){let i={},o={},s={};return e.forEach(t=>{t.forEach((t,e)=>{i[t]=t,o[t]=t,s[t]=e})}),e.forEach(t=>{let e=-1;t.forEach(t=>{let a=r(t);if(a.length){a=a.sort((t,e)=>s[t]-s[e]);let r=(a.length-1)/2;for(let c=Math.floor(r),l=Math.ceil(r);c<=l;++c){let r=a[c];o[t]===t&&e<s[r]&&!u(n,t,r)&&(o[r]=t,o[t]=i[t]=i[r],e=s[r])}}})}),{root:i,align:o}}function l(t,e,n,i,o){let s={},a=function(t,e,n,i){let o=new r,s=t.graph(),a=function(t,e,n){return(r,i,o)=>{let s,a=r.node(i),u=r.node(o),c=0;if(c+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":s=-a.width/2;break;case"r":s=a.width/2}if(s&&(c+=n?s:-s),s=0,c+=(a.dummy?e:t)/2,c+=(u.dummy?e:t)/2,c+=u.width/2,u.hasOwnProperty("labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=u.width/2;break;case"r":s=-u.width/2}return s&&(c+=n?s:-s),s=0,c}}(s.nodesep,s.edgesep,i);return e.forEach(e=>{let r;e.forEach(e=>{let i=n[e];if(o.setNode(i),r){var s=n[r],u=o.edge(s,i);o.setEdge(s,i,Math.max(a(t,e,r),u||0))}r=e})}),o}(t,e,n,o),u=o?"borderLeft":"borderRight";function c(t,e){let n=a.nodes(),r=n.pop(),i={};for(;r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return c(function(t){s[t]=a.inEdges(t).reduce((t,e)=>Math.max(t,s[e.v]+a.edge(e)),0)},a.predecessors.bind(a)),c(function(e){let n=a.outEdges(e).reduce((t,e)=>Math.min(t,s[e.w]-a.edge(e)),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(s[e]=Math.max(s[e],n))},a.successors.bind(a)),Object.keys(i).forEach(t=>s[t]=s[n[t]]),s}function h(t,e){return Object.values(e).reduce((e,n)=>{let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(n).forEach(([e,n])=>{let o=function(t,e){return t.node(e).width}(t,e)/2;r=Math.max(n+o,r),i=Math.min(n-o,i)});const o=r-i;return o<e[0]&&(e=[o,n]),e},[Number.POSITIVE_INFINITY,null])[1]}function f(t,e){let n=Object.values(e),r=Math.min(...n),o=Math.max(...n);["u","d"].forEach(n=>{["l","r"].forEach(s=>{let a=n+s,u=t[a];if(u===e)return;let c=Object.values(u),l=r-Math.min(...c);"l"!==s&&(l=o-Math.max(...c)),l&&(t[a]=i.mapValues(u,t=>t+l))})})}function d(t,e){return i.mapValues(t.ul,(n,r)=>{if(e)return t[e.toLowerCase()][r];{let e=Object.values(t).map(t=>t[r]).sort((t,e)=>t-e);return(e[1]+e[2])/2}})}t.exports={positionX:function(t){let e,n=i.buildLayerMatrix(t),r=Object.assign(o(t,n),s(t,n)),a={};["u","d"].forEach(o=>{e="u"===o?n:Object.values(n).reverse(),["l","r"].forEach(n=>{"r"===n&&(e=e.map(t=>Object.values(t).reverse()));let s=("u"===o?t.predecessors:t.successors).bind(t),u=c(0,e,r,s),h=l(t,e,u.root,u.align,"r"===n);"r"===n&&(h=i.mapValues(h,t=>-t)),a[o+n]=h})});let u=h(t,a);return f(a,u),d(a,t.graph().align)},findType1Conflicts:o,findType2Conflicts:s,addConflict:a,hasConflict:u,verticalAlignment:c,horizontalCompaction:l,alignCoordinates:f,findSmallestWidthAlignment:h,balance:d}},52839(t,e,n){var r=n(34168);t.exports=function(t){return r(t).filter(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},53661(t,e,n){var r=n(63040),i=n(17670),o=n(90289),s=n(4509),a=n(72949);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},53730(t,e,n){var r=n(44394);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,s=r(t),a=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!s&&t>e||s&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!l&&t<e||l&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}},53933(t){function e(t,e,n,i){for(var o=[[t,!1]];o.length>0;){var s=o.pop();s[1]?i.push(s[0]):n.hasOwnProperty(s[0])||(n[s[0]]=!0,o.push([s[0],!0]),r(e(s[0]),t=>o.push([t,!1])))}}function n(t,e,n,i){for(var o=[t];o.length>0;){var s=o.pop();n.hasOwnProperty(s)||(n[s]=!0,i.push(s),r(e(s),t=>o.push(t)))}}function r(t,e){for(var n=t.length;n--;)e(t[n],n,t);return t}t.exports=function(t,r,i){Array.isArray(r)||(r=[r]);var o=t.isDirected()?e=>t.successors(e):e=>t.neighbors(e),s="post"===i?e:n,a=[],u={};return r.forEach(e=>{if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);s(e,o,u,a)}),a}},54128(t,e,n){var r=n(31800),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},55364(t,e,n){var r=n(85250),i=n(20999)(function(t,e,n){r(t,e,n)});t.exports=i},55378(t,e,n){var r=n(34932),i=n(15389),o=n(5128),s=n(56449);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},55481(t,e,n){var r=n(9325)["__core-js_shared__"];t.exports=r},55527(t){var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},55580(t,e,n){var r=n(56110)(n(9325),"DataView");t.exports=r},55765(t,e,n){var r=n(38859),i=n(15325),o=n(29905),s=n(19219),a=n(44517),u=n(84247);t.exports=function(t,e,n){var c=-1,l=i,h=t.length,f=!0,d=[],p=d;if(n)f=!1,l=o;else if(h>=200){var g=e?null:a(t);if(g)return u(g);f=!1,l=s,p=new r}else p=e?[]:d;t:for(;++c<h;){var v=t[c],m=e?e(v):v;if(v=n||0!==v?v:0,f&&m==m){for(var y=p.length;y--;)if(p[y]===m)continue t;e&&p.push(m),d.push(v)}else l(p,m,n)||(p!==d&&p.push(m),d.push(v))}return d}},56110(t,e,n){var r=n(45083),i=n(10392);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},56176(t){t.exports=function(t,e){return t<e}},56353(t,e,n){var r=n(56857),i=n(3988);function o(t,e,n,s,a,u,c){var l=t.children(c);if(l.length){var h=i.addBorderNode(t,"_bt"),f=i.addBorderNode(t,"_bb"),d=t.node(c);t.setParent(h,c),d.borderTop=h,t.setParent(f,c),d.borderBottom=f,r.forEach(l,function(r){o(t,e,n,s,a,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,d=i.borderBottom?i.borderBottom:r,p=i.borderTop?s:2*s,g=l!==d?1:a-u[c]+1;t.setEdge(h,l,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,f,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(c)||t.setEdge(e,h,{weight:0,minlen:a+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,function(t){n(t,o+1)}),e[i]=o}return r.forEach(t.children(),function(t){n(t,1)}),e}(t),s=r.max(r.values(n))-1,a=2*s+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=a});var u=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(r){o(t,e,a,u,s,n,r)}),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}},56449(t){var e=Array.isArray;t.exports=e},56757(t,e,n){var r=n(91033),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),u=Array(a);++s<a;)u[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(u),r(t,this,c)}}},56796(t){function e(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function n(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return e(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&e(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],e=this._sentinel,r=e._prev;for(;r!==e;)t.push(JSON.stringify(r,n)),r=r._prev;return"["+t.join(", ")+"]"}}},56857(t,e,n){var r;try{r={cloneDeep:n(88055),constant:n(37334),defaults:n(84684),each:n(76135),filter:n(87612),find:n(7309),flatten:n(35970),forEach:n(39754),forIn:n(52420),has:n(61448),isUndefined:n(62216),last:n(68090),map:n(55378),mapValues:n(73916),max:n(94506),merge:n(55364),min:n(31684),minBy:n(36533),now:n(10124),pick:n(44383),range:n(23181),reduce:n(40860),sortBy:n(33031),uniqueId:n(97200),values:n(35880),zipObject:n(47248)}}catch(t){}r||(r=window._),t.exports=r},57494(t,e,n){var r=n(10117),i=n(66454);function o(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}function s(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:s(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},58156(t,e,n){var r=n(47422);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},59350(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},60270(t,e,n){var r=n(87068),i=n(40346);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,s,t,a))}},60498(t,e,n){var r=n(29888);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},61448(t,e,n){var r=n(20426),i=n(49326);t.exports=function(t,e){return null!=t&&i(t,e,r)}},61489(t,e,n){var r=n(17400);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},61802(t,e,n){var r=n(62224),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=s},62006(t,e,n){var r=n(15389),i=n(64894),o=n(95950);t.exports=function(t){return function(e,n,s){var a=Object(e);if(!i(e)){var u=r(n,3);e=o(e),n=function(t){return u(a[t],t,a)}}var c=t(e,n,s);return c>-1?a[u?e[c]:c]:void 0}}},62193(t,e,n){var r=n(88984),i=n(5861),o=n(72428),s=n(56449),a=n(64894),u=n(3656),c=n(55527),l=n(37167),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},62216(t){t.exports=function(t){return void 0===t}},62224(t,e,n){var r=n(50104);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},62948(t,e,n){var r=n(56857);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,s=[],a=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,u=0,c=s[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=s[u])!==a&&t.node(c).maxRank<r.rank;)u++;c===a&&(l=!1)}if(!l){for(;u<s.length-1&&t.node(c=s[u+1]).minRank<=r.rank;)u++;c=s[u]}t.setParent(n,c),n=t.successors(n)[0]}})}},63040(t,e,n){var r=n(21549),i=n(80079),o=n(68223);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},63345(t){t.exports=function(){return[]}},63605(t){t.exports=function(t){return this.__data__.get(t)}},63702(t){t.exports=function(){this.__data__=[],this.size=0}},63862(t){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},63950(t){t.exports=function(){}},64894(t,e,n){var r=n(1882),i=n(30294);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},66454(t,e,n){var r=n(10117);t.exports=o;var i="\0";function o(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[i]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function u(t,e,n,i){var o=""+e,s=""+n;if(!t&&o>s){var a=o;o=s,s=a}return o+""+s+""+(r.isUndefined(i)?"\0":i)}function c(t,e){return u(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},o.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children[i][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,o(t))}),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},o.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var c=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[c]=o?i:this._defaultEdgeLabelFn(t,e,n);var l=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}(this._isDirected,t,e,n);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[c]=l,s(this._preds[e],t),s(this._sucs[t],e),this._in[e][c]=l,this._out[t][c]=l,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?c(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},66721(t,e,n){var r=n(81042),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},67174(t,e,n){t.exports={components:n(45944),dijkstra:n(34318),dijkstraAll:n(39552),findCycles:n(52839),floydWarshall:n(88929),isAcyclic:n(7681),postorder:n(67448),preorder:n(79439),prim:n(15456),tarjan:n(34168),topsort:n(99441)}},67197(t){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},67448(t,e,n){var r=n(53933);t.exports=function(t,e){return r(t,e,"post")}},68073(t,e,n){var r=n(56857);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.min(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},68090(t){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},68191(t,e,n){var r;try{r=n(38362)}catch(t){}r||(r=window.graphlib),t.exports=r},68223(t,e,n){var r=n(56110)(n(9325),"Map");t.exports=r},69302(t,e,n){var r=n(83488),i=n(56757),o=n(32865);t.exports=function(t,e){return o(i(t,e,r),t+"")}},69752(t,e,n){var r=n(83729),i=n(39344),o=n(30641),s=n(15389),a=n(28879),u=n(56449),c=n(3656),l=n(1882),h=n(23805),f=n(37167);t.exports=function(t,e,n){var d=u(t),p=d||c(t)||f(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=p?d?new g:[]:h(t)&&l(g)?i(a(t)):{}}return(p?r:o)(t,function(t,r,i){return e(n,t,r,i)}),n}},69884(t,e,n){var r=n(21791),i=n(37241);t.exports=function(t){return r(t,i(t))}},70080(t,e,n){var r=n(26025),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},70695(t,e,n){var r=n(78096),i=n(72428),o=n(56449),s=n(3656),a=n(30361),u=n(37167),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),l=!n&&i(t),h=!n&&!l&&s(t),f=!n&&!l&&!h&&u(t),d=n||l||h||f,p=d?r(t.length,String):[],g=p.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||p.push(v);return p}},71451(t){var e=function(t,e){return t<e};function n(t){if(!(this instanceof n))return new n(t);this.array=[],this.size=0,this.compare=t||e}n.prototype.clone=function(){var t=new n(this.compare);return t.size=this.size,t.array=this.array.slice(0,this.size),t},n.prototype.add=function(t){var e,n,r=this.size;for(this.array[this.size]=t,this.size+=1;r>0&&(e=r-1>>1,n=this.array[e],this.compare(t,n));)this.array[r]=n,r=e;this.array[r]=t},n.prototype.heapify=function(t){var e;for(this.array=t,this.size=t.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},n.prototype._percolateUp=function(t,e){for(var n,r,i=this.array[t];t>0&&(n=t-1>>1,r=this.array[n],e||this.compare(i,r));)this.array[t]=r,t=n;this.array[t]=i},n.prototype._percolateDown=function(t){for(var e,n,r,i=this.size,o=this.size>>>1,s=this.array[t];t<o&&(n=1+(e=1+(t<<1)),r=this.array[e],n<i&&this.compare(this.array[n],r)&&(e=n,r=this.array[n]),this.compare(r,s));)this.array[t]=r,t=e;this.array[t]=s},n.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},n.prototype.remove=function(t){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],t)&&!this.compare(t,this.array[e]))return this._removeAt(e),!0;return!1},n.prototype.removeOne=function(t){if("function"==typeof t)for(var e=0;e<this.size;e++)if(t(this.array[e]))return this._removeAt(e)},n.prototype.removeMany=function(t,e){if("function"!=typeof t||this.size<1)return[];e=e?Math.min(e,this.size):this.size;for(var n=0,r=new Array(e),i=0,o=new Array(this.size);n<e&&!this.isEmpty();){var s=this.poll();t(s)?r[n++]=s:o[i++]=s}r.length=n;for(var a=0;a<i;)this.add(o[a++]);return r},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},n.prototype.replaceTop=function(t){if(0!=this.size){var e=this.array[0];return this.array[0]=t,this._percolateDown(0),e}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},n.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var e=0,n=this.clone();!n.isEmpty();)t(n.poll(),e++)},n.prototype.kSmallest=function(t){if(0==this.size||t<=0)return[];t=Math.min(this.size,t);const e=Math.min(this.size,2**(t-1)+1);if(e<2)return[this.peek()];const r=new n(this.compare);r.size=e,r.array=this.array.slice(0,e);const i=new Array(t);for(let e=0;e<t;e++)i[e]=r.poll();return i},t.exports=n},71737(t,e,n){var r=n(10117);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},71961(t,e,n){var r=n(49653);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},72428(t,e,n){var r=n(27534),i=n(40346),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},72552(t,e,n){var r=n(51873),i=n(659),o=n(59350),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},72903(t,e,n){var r=n(23805),i=n(55527),o=n(90181),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},72949(t,e,n){var r=n(12651);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},73170(t,e,n){var r=n(16547),i=n(31769),o=n(30361),s=n(23805),a=n(77797);t.exports=function(t,e,n,u){if(!s(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,f=t;null!=f&&++c<l;){var d=a(e[c]),p=n;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=h){var g=f[d];void 0===(p=u?u(g,d,f):void 0)&&(p=s(g)?g:o(e[c+1])?[]:{})}r(f,d,p),f=f[d]}return t}},73201(t){var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},73590(t,e,n){var r=n(10117);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},73776(t,e,n){var r=n(56857),i=n(3988),o=n(39741).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),function(e,n){t.node(n).x=e})}},73900(t,e,n){let r=n(4809);t.exports=function(t,e){let n={};return t.forEach((t,e)=>{let r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};void 0!==t.barycenter&&(r.barycenter=t.barycenter,r.weight=t.weight)}),e.edges().forEach(t=>{let e=n[t.v],r=n[t.w];void 0!==e&&void 0!==r&&(r.indegree++,e.out.push(n[t.w]))}),function(t){let e=[];function n(t){return e=>{e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&function(t,e){let n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function i(e){return n=>{n.in.push(e),0===--n.indegree&&t.push(n)}}for(;t.length;){let r=t.pop();e.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(i(r))}return e.filter(t=>!t.merged).map(t=>r.pick(t,["vs","i","barycenter","weight"]))}(Object.values(n).filter(t=>!t.indegree))}},73916(t,e,n){var r=n(43360),i=n(30641),o=n(15389);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,i,e(t,i,o))}),n}},73937(t){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},74218(t){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},74335(t){t.exports=function(t,e){return function(n){return t(e(n))}}},74692(t,e){var n,r,i;r="undefined"!=typeof window?window:this,i=function(r,i){var o=[],s=Object.getPrototypeOf,a=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},c=o.push,l=o.indexOf,h={},f=h.toString,d=h.hasOwnProperty,p=d.toString,g=p.call(Object),v={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in x)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function _(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[f.call(t)]||"object":typeof t}var E="3.7.1",A=/HTML$/i,k=function(t,e){return new k.fn.init(t,e)};function S(t){var e=!!t&&"length"in t&&t.length,n=_(t);return!m(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}k.fn=k.prototype={jquery:E,constructor:k,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=k.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return k.each(this,t)},map:function(t){return this.pushStack(k.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(k.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||m(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(c&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,s[e]=k.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},k.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=s(t))&&("function"!=typeof(n=d.call(e,"constructor")&&e.constructor)||p.call(n)!==g))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(S(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},text:function(t){var e,n="",r=0,i=t.nodeType;if(!i)for(;e=t[r++];)n+=k.text(e);return 1===i||11===i?t.textContent:9===i?t.documentElement.textContent:3===i||4===i?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(S(Object(t))?k.merge(n,"string"==typeof t?[t]:t):c.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!A.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!==s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(S(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return u(s)},guid:1,support:v}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){h["[object "+e+"]"]=e.toLowerCase()});var P=o.pop,C=o.sort,N=o.splice,L="[\\x20\\t\\r\\n\\f]",O=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g");k.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var M=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function I(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}k.escapeSelector=function(t){return(t+"").replace(M,I)};var R=b,j=c;!function(){var t,e,n,i,s,u,c,h,f,p,g=j,m=k.expando,y=0,b=0,x=tt(),w=tt(),_=tt(),E=tt(),A=function(t,e){return t===e&&(s=!0),0},S="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="(?:\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",I="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",D=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",B=new RegExp(L+"+","g"),V=new RegExp("^"+L+"*,"+L+"*"),F=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),z=new RegExp(L+"|>"),G=new RegExp(D),U=new RegExp("^"+M+"$"),q={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+D),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+S+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},H=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+L+"?|\\\\([^\\r\\n\\f])","g"),Z=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){ut()},K=ft(function(t){return!0===t.disabled&&T(t,"fieldset")},{dir:"parentNode",next:"legend"});try{g.apply(o=a.call(R.childNodes),R.childNodes),o[R.childNodes.length].nodeType}catch(t){g={apply:function(t,e){j.apply(t,a.call(e))},call:function(t){j.apply(t,a.call(arguments,1))}}}function Q(t,e,n,r){var i,o,s,a,c,l,d,p=e&&e.ownerDocument,y=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return n;if(!r&&(ut(e),e=e||u,h)){if(11!==y&&(c=W.exec(t)))if(i=c[1]){if(9===y){if(!(s=e.getElementById(i)))return n;if(s.id===i)return g.call(n,s),n}else if(p&&(s=p.getElementById(i))&&Q.contains(e,s)&&s.id===i)return g.call(n,s),n}else{if(c[2])return g.apply(n,e.getElementsByTagName(t)),n;if((i=c[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(i)),n}if(!(E[t+" "]||f&&f.test(t))){if(d=t,p=e,1===y&&(z.test(t)||F.test(t))){for((p=X.test(t)&&at(e.parentNode)||e)==e&&v.scope||((a=e.getAttribute("id"))?a=k.escapeSelector(a):e.setAttribute("id",a=m)),o=(l=lt(t)).length;o--;)l[o]=(a?"#"+a:":scope")+" "+ht(l[o]);d=l.join(",")}try{return g.apply(n,p.querySelectorAll(d)),n}catch(e){E(t,!0)}finally{a===m&&e.removeAttribute("id")}}}return yt(t.replace(O,"$1"),e,n,r)}function tt(){var t=[];return function n(r,i){return t.push(r+" ")>e.cacheLength&&delete n[t.shift()],n[r+" "]=i}}function et(t){return t[m]=!0,t}function nt(t){var e=u.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function rt(t){return function(e){return T(e,"input")&&e.type===t}}function it(t){return function(e){return(T(e,"input")||T(e,"button"))&&e.type===t}}function ot(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&K(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function st(t){return et(function(e){return e=+e,et(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function ut(t){var n,r=t?t.ownerDocument||t:R;return r!=u&&9===r.nodeType&&r.documentElement?(c=(u=r).documentElement,h=!k.isXMLDoc(u),p=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&R!=u&&(n=u.defaultView)&&n.top!==n&&n.addEventListener("unload",J),v.getById=nt(function(t){return c.appendChild(t).id=k.expando,!u.getElementsByName||!u.getElementsByName(k.expando).length}),v.disconnectedMatch=nt(function(t){return p.call(t,"*")}),v.scope=nt(function(){return u.querySelectorAll(":scope")}),v.cssHas=nt(function(){try{return u.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}}),v.getById?(e.filter.ID=function(t){var e=t.replace(Y,Z);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Y,Z);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&h){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&h)return e.getElementsByClassName(t)},f=[],nt(function(t){var e;c.appendChild(t).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||f.push("\\["+L+"*(?:value|"+S+")"),t.querySelectorAll("[id~="+m+"-]").length||f.push("~="),t.querySelectorAll("a#"+m+"+*").length||f.push(".#.+[+~]"),t.querySelectorAll(":checked").length||f.push(":checked"),(e=u.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),c.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),(e=u.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||f.push("\\["+L+"*name"+L+"*="+L+"*(?:''|\"\")")}),v.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),A=function(t,e){if(t===e)return s=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!v.sortDetached&&e.compareDocumentPosition(t)===n?t===u||t.ownerDocument==R&&Q.contains(R,t)?-1:e===u||e.ownerDocument==R&&Q.contains(R,e)?1:i?l.call(i,t)-l.call(i,e):0:4&n?-1:1)},u):u}for(t in Q.matches=function(t,e){return Q(t,null,null,e)},Q.matchesSelector=function(t,e){if(ut(t),h&&!E[e+" "]&&(!f||!f.test(e)))try{var n=p.call(t,e);if(n||v.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){E(e,!0)}return Q(e,u,null,[t]).length>0},Q.contains=function(t,e){return(t.ownerDocument||t)!=u&&ut(t),k.contains(t,e)},Q.attr=function(t,n){(t.ownerDocument||t)!=u&&ut(t);var r=e.attrHandle[n.toLowerCase()],i=r&&d.call(e.attrHandle,n.toLowerCase())?r(t,n,!h):void 0;return void 0!==i?i:t.getAttribute(n)},Q.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},k.uniqueSort=function(t){var e,n=[],r=0,o=0;if(s=!v.sortStable,i=!v.sortStable&&a.call(t,0),C.call(t,A),s){for(;e=t[o++];)e===t[o]&&(r=n.push(o));for(;r--;)N.call(t,n[r],1)}return i=null,t},k.fn.uniqueSort=function(){return this.pushStack(k.uniqueSort(a.apply(this)))},e=k.expr={cacheLength:50,createPseudo:et,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Y,Z),t[3]=(t[3]||t[4]||t[5]||"").replace(Y,Z),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Q.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Q.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return q.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=lt(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Y,Z).toLowerCase();return"*"===t?function(){return!0}:function(t){return T(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+L+")"+t+"("+L+"|$)"))&&x(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=Q.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(B," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,d,p=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),b=!u&&!a,x=!1;if(g){if(o){for(;p;){for(h=e;h=h[p];)if(a?T(h,v):1===h.nodeType)return!1;d=p="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&b){for(x=(f=(c=(l=g[m]||(g[m]={}))[t]||[])[0]===y&&c[1])&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[p]||(x=f=0)||d.pop();)if(1===h.nodeType&&++x&&h===e){l[t]=[y,f,x];break}}else if(b&&(x=f=(c=(l=e[m]||(e[m]={}))[t]||[])[0]===y&&c[1]),!1===x)for(;(h=++f&&h&&h[p]||(x=f=0)||d.pop())&&(!(a?T(h,v):1===h.nodeType)||!++x||(b&&((l=h[m]||(h[m]={}))[t]=[y,x]),h!==e)););return(x-=i)===r||x%r===0&&x/r>=0}}},PSEUDO:function(t,n){var r,i=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Q.error("unsupported pseudo: "+t);return i[m]?i(n):i.length>1?(r=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et(function(t,e){for(var r,o=i(t,n),s=o.length;s--;)t[r=l.call(t,o[s])]=!(e[r]=o[s])}):function(t){return i(t,0,r)}):i}},pseudos:{not:et(function(t){var e=[],n=[],r=mt(t.replace(O,"$1"));return r[m]?et(function(t,e,n,i){for(var o,s=r(t,null,i,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:et(function(t){return function(e){return Q(t,e).length>0}}),contains:et(function(t){return t=t.replace(Y,Z),function(e){return(e.textContent||k.text(e)).indexOf(t)>-1}}),lang:et(function(t){return U.test(t||"")||Q.error("unsupported lang: "+t),t=t.replace(Y,Z).toLowerCase(),function(e){var n;do{if(n=h?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(t){var e=r.location&&r.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===c},focus:function(t){return t===function(){try{return u.activeElement}catch(t){}}()&&u.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:ot(!1),disabled:ot(!0),checked:function(t){return T(t,"input")&&!!t.checked||T(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return H.test(t.nodeName)},button:function(t){return T(t,"input")&&"button"===t.type||T(t,"button")},text:function(t){var e;return T(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:st(function(){return[0]}),last:st(function(t,e){return[e-1]}),eq:st(function(t,e,n){return[n<0?n+e:n]}),even:st(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:st(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:st(function(t,e,n){var r;for(r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t}),gt:st(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=rt(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=it(t);function ct(){}function lt(t,n){var r,i,o,s,a,u,c,l=w[t+" "];if(l)return n?0:l.slice(0);for(a=t,u=[],c=e.preFilter;a;){for(s in r&&!(i=V.exec(a))||(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=F.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(O," ")}),a=a.slice(r.length)),e.filter)!(i=q[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?Q.error(t):w(t,u).slice(0)}function ht(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function ft(t,e,n){var r=e.dir,i=e.next,o=i||r,s=n&&"parentNode"===o,a=b++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,i);return!1}:function(e,n,u){var c,l,h=[y,a];if(u){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(l=e[m]||(e[m]={}),i&&T(e,i))e=e[r]||e;else{if((c=l[o])&&c[0]===y&&c[1]===a)return h[2]=c[2];if(l[o]=h,h[2]=t(e,n,u))return!0}return!1}}function dt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function pt(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),c&&e.push(a)));return s}function gt(t,e,n,r,i,o){return r&&!r[m]&&(r=gt(r)),i&&!i[m]&&(i=gt(i,o)),et(function(o,s,a,u){var c,h,f,d,p=[],v=[],m=s.length,y=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)Q(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),b=!t||!o&&e?y:pt(y,p,t,a,u);if(n?n(b,d=i||(o?t:m||r)?[]:s,a,u):d=b,r)for(c=pt(d,v),r(c,[],a,u),h=c.length;h--;)(f=c[h])&&(d[v[h]]=!(b[v[h]]=f));if(o){if(i||t){if(i){for(c=[],h=d.length;h--;)(f=d[h])&&c.push(b[h]=f);i(null,d=[],c,u)}for(h=d.length;h--;)(f=d[h])&&(c=i?l.call(o,f):p[h])>-1&&(o[c]=!(s[c]=f))}}else d=pt(d===s?d.splice(m,d.length):d),i?i(null,s,d,u):g.apply(s,d)})}function vt(t){for(var r,i,o,s=t.length,a=e.relative[t[0].type],u=a||e.relative[" "],c=a?1:0,h=ft(function(t){return t===r},u,!0),f=ft(function(t){return l.call(r,t)>-1},u,!0),d=[function(t,e,i){var o=!a&&(i||e!=n)||((r=e).nodeType?h(t,e,i):f(t,e,i));return r=null,o}];c<s;c++)if(i=e.relative[t[c].type])d=[ft(dt(d),i)];else{if((i=e.filter[t[c].type].apply(null,t[c].matches))[m]){for(o=++c;o<s&&!e.relative[t[o].type];o++);return gt(c>1&&dt(d),c>1&&ht(t.slice(0,c-1).concat({value:" "===t[c-2].type?"*":""})).replace(O,"$1"),i,c<o&&vt(t.slice(c,o)),o<s&&vt(t=t.slice(o)),o<s&&ht(t))}d.push(i)}return dt(d)}function mt(t,r){var i,o=[],s=[],a=_[t+" "];if(!a){for(r||(r=lt(t)),i=r.length;i--;)(a=vt(r[i]))[m]?o.push(a):s.push(a);a=_(t,function(t,r){var i=r.length>0,o=t.length>0,s=function(s,a,c,l,f){var d,p,v,m=0,b="0",x=s&&[],w=[],_=n,E=s||o&&e.find.TAG("*",f),A=y+=null==_?1:Math.random()||.1,S=E.length;for(f&&(n=a==u||a||f);b!==S&&null!=(d=E[b]);b++){if(o&&d){for(p=0,a||d.ownerDocument==u||(ut(d),c=!h);v=t[p++];)if(v(d,a||u,c)){g.call(l,d);break}f&&(y=A)}i&&((d=!v&&d)&&m--,s&&x.push(d))}if(m+=b,i&&b!==m){for(p=0;v=r[p++];)v(x,w,a,c);if(s){if(m>0)for(;b--;)x[b]||w[b]||(w[b]=P.call(l));w=pt(w)}g.apply(l,w),f&&!s&&w.length>0&&m+r.length>1&&k.uniqueSort(l)}return f&&(y=A,n=_),x};return i?et(s):s}(s,o)),a.selector=t}return a}function yt(t,n,r,i){var o,s,a,u,c,l="function"==typeof t&&t,f=!i&&lt(t=l.selector||t);if(r=r||[],1===f.length){if((s=f[0]=f[0].slice(0)).length>2&&"ID"===(a=s[0]).type&&9===n.nodeType&&h&&e.relative[s[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(Y,Z),n)||[])[0]))return r;l&&(n=n.parentNode),t=t.slice(s.shift().value.length)}for(o=q.needsContext.test(t)?0:s.length;o--&&(a=s[o],!e.relative[u=a.type]);)if((c=e.find[u])&&(i=c(a.matches[0].replace(Y,Z),X.test(s[0].type)&&at(n.parentNode)||n))){if(s.splice(o,1),!(t=i.length&&ht(s)))return g.apply(r,i),r;break}}return(l||mt(t,f))(i,n,!h,r,!n||X.test(t)&&at(n.parentNode)||n),r}ct.prototype=e.filters=e.pseudos,e.setFilters=new ct,v.sortStable=m.split("").sort(A).join("")===m,ut(),v.sortDetached=nt(function(t){return 1&t.compareDocumentPosition(u.createElement("fieldset"))}),k.find=Q,k.expr[":"]=k.expr.pseudos,k.unique=k.uniqueSort,Q.compile=mt,Q.select=yt,Q.setDocument=ut,Q.tokenize=lt,Q.escape=k.escapeSelector,Q.getText=k.text,Q.isXML=k.isXMLDoc,Q.selectors=k.expr,Q.support=k.support,Q.uniqueSort=k.uniqueSort}();var D=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&k(t).is(n))break;r.push(t)}return r},B=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},V=k.expr.match.needsContext,F=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(t,e,n){return m(e)?k.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?k.grep(t,function(t){return t===e!==n}):"string"!=typeof e?k.grep(t,function(t){return l.call(e,t)>-1!==n}):k.filter(e,t,n)}k.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?k.find.matchesSelector(r,t)?[r]:[]:k.find.matches(t,k.grep(e,function(t){return 1===t.nodeType}))},k.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(k(t).filter(function(){for(e=0;e<r;e++)if(k.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)k.find(t,i[e],n);return r>1?k.uniqueSort(n):n},filter:function(t){return this.pushStack(z(this,t||[],!1))},not:function(t){return this.pushStack(z(this,t||[],!0))},is:function(t){return!!z(this,"string"==typeof t&&V.test(t)?k(t):t||[],!1).length}});var G,U=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||G,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:U.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof k?e[0]:e,k.merge(this,k.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),F.test(r[1])&&k.isPlainObject(e))for(r in e)m(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==n.ready?n.ready(t):t(k):k.makeArray(t,this)}).prototype=k.fn,G=k(b);var q=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function $(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}k.fn.extend({has:function(t){var e=k(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(k.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&k(t);if(!V.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?l.call(k(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),k.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return D(t,"parentNode")},parentsUntil:function(t,e,n){return D(t,"parentNode",n)},next:function(t){return $(t,"nextSibling")},prev:function(t){return $(t,"previousSibling")},nextAll:function(t){return D(t,"nextSibling")},prevAll:function(t){return D(t,"previousSibling")},nextUntil:function(t,e,n){return D(t,"nextSibling",n)},prevUntil:function(t,e,n){return D(t,"previousSibling",n)},siblings:function(t){return B((t.parentNode||{}).firstChild,t)},children:function(t){return B(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(T(t,"template")&&(t=t.content||t),k.merge([],t.childNodes))}},function(t,e){k.fn[t]=function(n,r){var i=k.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=k.filter(r,i)),this.length>1&&(H[t]||k.uniqueSort(i),q.test(t)&&i.reverse()),this.pushStack(i)}});var W=/[^\x20\t\r\n\f]+/g;function X(t){return t}function Y(t){throw t}function Z(t,e,n,r){var i;try{t&&m(i=t.promise)?i.call(t).done(e).fail(n):t&&m(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}k.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return k.each(t.match(W)||[],function(t,n){e[n]=!0}),e}(t):k.extend({},t);var e,n,r,i,o=[],s=[],a=-1,u=function(){for(i=i||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<o.length;)!1===o[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(a=o.length-1,s.push(n)),function e(n){k.each(n,function(n,r){m(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==_(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return k.each(arguments,function(t,e){for(var n;(n=k.inArray(e,o,n))>-1;)o.splice(n,1),n<=a&&a--}),this},has:function(t){return t?k.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},k.extend({Deferred:function(t){var e=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return k.Deferred(function(n){k.each(e,function(e,r){var i=m(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&m(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,n,i){var o=0;function s(t,e,n,i){return function(){var a=this,u=arguments,c=function(){var r,c;if(!(t<o)){if((r=n.apply(a,u))===e.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,m(c)?i?c.call(r,s(o,e,X,i),s(o,e,Y,i)):(o++,c.call(r,s(o,e,X,i),s(o,e,Y,i),s(o,e,X,e.notifyWith))):(n!==X&&(a=void 0,u=[r]),(i||e.resolveWith)(a,u))}},l=i?c:function(){try{c()}catch(r){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(r,l.error),t+1>=o&&(n!==Y&&(a=void 0,u=[r]),e.rejectWith(a,u))}};t?l():(k.Deferred.getErrorHook?l.error=k.Deferred.getErrorHook():k.Deferred.getStackHook&&(l.error=k.Deferred.getStackHook()),r.setTimeout(l))}}return k.Deferred(function(r){e[0][3].add(s(0,r,m(i)?i:X,r.notifyWith)),e[1][3].add(s(0,r,m(t)?t:X)),e[2][3].add(s(0,r,m(n)?n:Y))}).promise()},promise:function(t){return null!=t?k.extend(t,i):i}},o={};return k.each(e,function(t,r){var s=r[2],a=r[5];i[r[1]]=s.add,a&&s.add(function(){n=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=a.call(arguments),o=k.Deferred(),s=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?a.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(Z(t,o.done(s(n)).resolve,o.reject,!e),"pending"===o.state()||m(i[n]&&i[n].then)))return o.then();for(;n--;)Z(i[n],s(n),o.reject);return o.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&J.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},k.readyException=function(t){r.setTimeout(function(){throw t})};var K=k.Deferred();function Q(){b.removeEventListener("DOMContentLoaded",Q),r.removeEventListener("load",Q),k.ready()}k.fn.ready=function(t){return K.then(t).catch(function(t){k.readyException(t)}),this},k.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==t&&--k.readyWait>0||K.resolveWith(b,[k]))}}),k.ready.then=K.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(k.ready):(b.addEventListener("DOMContentLoaded",Q),r.addEventListener("load",Q));var tt=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===_(n))for(a in i=!0,n)tt(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,m(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(k(t),n)})),e))for(;a<u;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o},et=/^-ms-/,nt=/-([a-z])/g;function rt(t,e){return e.toUpperCase()}function it(t){return t.replace(et,"ms-").replace(nt,rt)}var ot=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function st(){this.expando=k.expando+st.uid++}st.uid=1,st.prototype={cache:function(t){var e=t[this.expando];return e||(e={},ot(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[it(e)]=n;else for(r in e)i[it(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][it(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(it):(e=it(e))in r?[e]:e.match(W)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||k.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!k.isEmptyObject(e)}};var at=new st,ut=new st,ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,lt=/[A-Z]/g;function ht(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(lt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ct.test(t)?JSON.parse(t):t)}(n)}catch(t){}ut.set(t,e,n)}else n=void 0;return n}k.extend({hasData:function(t){return ut.hasData(t)||at.hasData(t)},data:function(t,e,n){return ut.access(t,e,n)},removeData:function(t,e){ut.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),k.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=ut.get(o),1===o.nodeType&&!at.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(r=s[n].name).indexOf("data-")&&(r=it(r.slice(5)),ht(o,r,i[r]));at.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){ut.set(this,t)}):tt(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=ut.get(o,t))||void 0!==(n=ht(o,t))?n:void 0;this.each(function(){ut.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ut.remove(this,t)})}}),k.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=at.get(t,e),n&&(!r||Array.isArray(n)?r=at.access(t,e,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=k.queue(t,e),r=n.length,i=n.shift(),o=k._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){k.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:k.Callbacks("once memory").add(function(){at.remove(t,[e+"queue",n])})})}}),k.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?k.queue(this[0],t):void 0===e?this:this.each(function(){var n=k.queue(this,t,e);k._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&k.dequeue(this,t)})},dequeue:function(t){return this.each(function(){k.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=k.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=at.get(o[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var ft=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,dt=new RegExp("^(?:([+-])=|)("+ft+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],gt=b.documentElement,vt=function(t){return k.contains(t.ownerDocument,t)},mt={composed:!0};gt.getRootNode&&(vt=function(t){return k.contains(t.ownerDocument,t)||t.getRootNode(mt)===t.ownerDocument});var yt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&vt(t)&&"none"===k.css(t,"display")};function bt(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return k.css(t,e,"")},u=a(),c=n&&n[3]||(k.cssNumber[e]?"":"px"),l=t.nodeType&&(k.cssNumber[e]||"px"!==c&&+u)&&dt.exec(k.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;s--;)k.style(t,e,l+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),l/=o;l*=2,k.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var xt={};function wt(t){var e,n=t.ownerDocument,r=t.nodeName,i=xt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=k.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),xt[r]=i,i)}function _t(t,e){for(var n,r,i=[],o=0,s=t.length;o<s;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=at.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&yt(r)&&(i[o]=wt(r))):"none"!==n&&(i[o]="none",at.set(r,"display",n)));for(o=0;o<s;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}k.fn.extend({show:function(){return _t(this,!0)},hide:function(){return _t(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){yt(this)?k(this).show():k(this).hide()})}});var Et,At,kt=/^(?:checkbox|radio)$/i,St=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Tt=/^$|^module$|\/(?:java|ecma)script/i;Et=b.createDocumentFragment().appendChild(b.createElement("div")),(At=b.createElement("input")).setAttribute("type","radio"),At.setAttribute("checked","checked"),At.setAttribute("name","t"),Et.appendChild(At),v.checkClone=Et.cloneNode(!0).cloneNode(!0).lastChild.checked,Et.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Et.cloneNode(!0).lastChild.defaultValue,Et.innerHTML="<option></option>",v.option=!!Et.lastChild;var Pt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ct(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?k.merge([t],n):n}function Nt(t,e){for(var n=0,r=t.length;n<r;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}Pt.tbody=Pt.tfoot=Pt.colgroup=Pt.caption=Pt.thead,Pt.th=Pt.td,v.option||(Pt.optgroup=Pt.option=[1,"<select multiple='multiple'>","</select>"]);var Lt=/<|&#?\w+;/;function Ot(t,e,n,r,i){for(var o,s,a,u,c,l,h=e.createDocumentFragment(),f=[],d=0,p=t.length;d<p;d++)if((o=t[d])||0===o)if("object"===_(o))k.merge(f,o.nodeType?[o]:o);else if(Lt.test(o)){for(s=s||h.appendChild(e.createElement("div")),a=(St.exec(o)||["",""])[1].toLowerCase(),u=Pt[a]||Pt._default,s.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],l=u[0];l--;)s=s.lastChild;k.merge(f,s.childNodes),(s=h.firstChild).textContent=""}else f.push(e.createTextNode(o));for(h.textContent="",d=0;o=f[d++];)if(r&&k.inArray(o,r)>-1)i&&i.push(o);else if(c=vt(o),s=Ct(h.appendChild(o),"script"),c&&Nt(s),n)for(l=0;o=s[l++];)Tt.test(o.type||"")&&n.push(o);return h}var Mt=/^([^.]*)(?:\.(.+)|)/;function It(){return!0}function Rt(){return!1}function jt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)jt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Rt;else if(!i)return t;return 1===o&&(s=i,i=function(t){return k().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=k.guid++)),t.each(function(){k.event.add(this,e,i,r,n)})}function Dt(t,e,n){n?(at.set(t,e,!1),k.event.add(t,e,{namespace:!1,handler:function(t){var n,r=at.get(this,e);if(1&t.isTrigger&&this[e]){if(r)(k.event.special[e]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),at.set(this,e,r),this[e](),n=at.get(this,e),at.set(this,e,!1),r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else r&&(at.set(this,e,k.event.trigger(r[0],r.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=It)}})):void 0===at.get(t,e)&&k.event.add(t,e,It)}k.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=at.get(t);if(ot(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(gt,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(e){return void 0!==k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(W)||[""]).length;c--;)d=g=(a=Mt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),d&&(h=k.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=k.event.special[d]||{},l=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||((f=u[d]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,s)||t.addEventListener&&t.addEventListener(d,s)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),k.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=at.hasData(t)&&at.get(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(W)||[""]).length;c--;)if(d=g=(a=Mt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),d){for(h=k.event.special[d]||{},f=u[d=(r?h.delegateType:h.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));s&&!f.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||k.removeEvent(t,d,v.handle),delete u[d])}else for(d in u)k.event.remove(t,d+e[c],n,r,!0);k.isEmptyObject(u)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=new Array(arguments.length),u=k.event.fix(t),c=(at.get(this,"events")||Object.create(null))[u.type]||[],l=k.event.special[u.type]||{};for(a[0]=u,e=1;e<arguments.length;e++)a[e]=arguments[e];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(s=k.event.handlers.call(this,u,c),e=0;(i=s[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[k.expando]?t:new k.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return kt.test(e.type)&&e.click&&T(e,"input")&&Dt(e,"click",!0),!1},trigger:function(t){var e=this||t;return kt.test(e.type)&&e.click&&T(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return kt.test(e.type)&&e.click&&T(e,"input")&&at.get(e,"click")||T(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},k.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},k.Event=function(t,e){if(!(this instanceof k.Event))return new k.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?It:Rt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&k.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Rt,isPropagationStopped:Rt,isImmediatePropagationStopped:Rt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=It,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=It,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=It,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(t,e){function n(t){if(b.documentMode){var n=at.get(this,"handle"),r=k.event.fix(t);r.type="focusin"===t.type?"focus":"blur",r.isSimulated=!0,n(t),r.target===r.currentTarget&&n(r)}else k.event.simulate(e,t.target,k.event.fix(t))}k.event.special[t]={setup:function(){var r;if(Dt(this,t,!0),!b.documentMode)return!1;(r=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(r||0)+1)},trigger:function(){return Dt(this,t),!0},teardown:function(){var t;if(!b.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},k.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=at.get(i,e);o||(b.documentMode?this.addEventListener(e,n):r.addEventListener(t,n,!0)),at.set(i,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=b.documentMode?this:r,o=at.get(i,e)-1;o?at.set(i,e,o):(b.documentMode?this.removeEventListener(e,n):r.removeEventListener(t,n,!0),at.remove(i,e))}}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){k.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||k.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),k.fn.extend({on:function(t,e,n,r){return jt(this,t,e,n,r)},one:function(t,e,n,r){return jt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,k(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Rt),this.each(function(){k.event.remove(this,t,n,e)})}});var Bt=/<script|<style|<link/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ft=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function zt(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&k(t).children("tbody")[0]||t}function Gt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function qt(t,e){var n,r,i,o,s,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(i in at.remove(e,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)k.event.add(e,i,a[i][n]);ut.hasData(t)&&(o=ut.access(t),s=k.extend({},o),ut.set(e,s))}}function Ht(t,e){var n=e.nodeName.toLowerCase();"input"===n&&kt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function $t(t,e,n,r){e=u(e);var i,o,s,a,c,l,h=0,f=t.length,d=f-1,p=e[0],g=m(p);if(g||f>1&&"string"==typeof p&&!v.checkClone&&Vt.test(p))return t.each(function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),$t(o,e,n,r)});if(f&&(o=(i=Ot(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=(s=k.map(Ct(i,"script"),Gt)).length;h<f;h++)c=i,h!==d&&(c=k.clone(c,!0,!0),a&&k.merge(s,Ct(c,"script"))),n.call(t[h],c,h);if(a)for(l=s[s.length-1].ownerDocument,k.map(s,Ut),h=0;h<a;h++)c=s[h],Tt.test(c.type||"")&&!at.access(c,"globalEval")&&k.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?k._evalUrl&&!c.noModule&&k._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):w(c.textContent.replace(Ft,""),c,l))}return t}function Wt(t,e,n){for(var r,i=e?k.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(Ct(r)),r.parentNode&&(n&&vt(r)&&Nt(Ct(r,"script")),r.parentNode.removeChild(r));return t}k.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=vt(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||k.isXMLDoc(t)))for(s=Ct(a),r=0,i=(o=Ct(t)).length;r<i;r++)Ht(o[r],s[r]);if(e)if(n)for(o=o||Ct(t),s=s||Ct(a),r=0,i=o.length;r<i;r++)qt(o[r],s[r]);else qt(t,a);return(s=Ct(a,"script")).length>0&&Nt(s,!u&&Ct(t,"script")),a},cleanData:function(t){for(var e,n,r,i=k.event.special,o=0;void 0!==(n=t[o]);o++)if(ot(n)){if(e=n[at.expando]){if(e.events)for(r in e.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,e.handle);n[at.expando]=void 0}n[ut.expando]&&(n[ut.expando]=void 0)}}}),k.fn.extend({detach:function(t){return Wt(this,t,!0)},remove:function(t){return Wt(this,t)},text:function(t){return tt(this,function(t){return void 0===t?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return $t(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||zt(this,t).appendChild(t)})},prepend:function(){return $t(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=zt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return $t(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return $t(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(k.cleanData(Ct(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return k.clone(this,t,e)})},html:function(t){return tt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Bt.test(t)&&!Pt[(St.exec(t)||["",""])[1].toLowerCase()]){t=k.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(k.cleanData(Ct(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return $t(this,arguments,function(e){var n=this.parentNode;k.inArray(this,t)<0&&(k.cleanData(Ct(this)),n&&n.replaceChild(e,this))},t)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){k.fn[t]=function(t){for(var n,r=[],i=k(t),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),k(i[s])[e](n),c.apply(r,n.get());return this.pushStack(r)}});var Xt=new RegExp("^("+ft+")(?!px)[a-z%]+$","i"),Yt=/^--/,Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Jt=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},Kt=new RegExp(pt.join("|"),"i");function Qt(t,e,n){var r,i,o,s,a=Yt.test(e),u=t.style;return(n=n||Zt(t))&&(s=n.getPropertyValue(e)||n[e],a&&s&&(s=s.replace(O,"$1")||void 0),""!==s||vt(t)||(s=k.style(t,e)),!v.pixelBoxStyles()&&Xt.test(s)&&Kt.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=s,s=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==s?s+"":s}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(c).appendChild(l);var t=r.getComputedStyle(l);n="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=12===e(l.offsetWidth/3),gt.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,s,a,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===l.style.backgroundClip,k.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==a&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",gt.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=b.createElement("div").style,re={};function ie(t){return k.cssProps[t]||re[t]||(t in ne?t:re[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var oe=/^(none|table(?!-c[ea]).+)/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=dt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ce(t,e,n,r,i,o){var s="width"===e?1:0,a=0,u=0,c=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(c+=k.css(t,n+pt[s],!0,i)),r?("content"===n&&(u-=k.css(t,"padding"+pt[s],!0,i)),"margin"!==n&&(u-=k.css(t,"border"+pt[s]+"Width",!0,i))):(u+=k.css(t,"padding"+pt[s],!0,i),"padding"!==n?u+=k.css(t,"border"+pt[s]+"Width",!0,i):a+=k.css(t,"border"+pt[s]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))||0),u+c}function le(t,e,n){var r=Zt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===k.css(t,"boxSizing",!1,r),o=i,s=Qt(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Xt.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&T(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===k.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===k.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ce(t,e,n||(i?"border":"content"),o,r,s)+"px"}function he(t,e,n,r,i){return new he.prototype.init(t,e,n,r,i)}k.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=it(e),u=Yt.test(e),c=t.style;if(u||(e=ie(a)),s=k.cssHooks[e]||k.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:c[e];"string"==(o=typeof n)&&(i=dt.exec(n))&&i[1]&&(n=bt(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,s,a=it(e);return Yt.test(e)||(e=ie(a)),(s=k.cssHooks[e]||k.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=Qt(t,e,r)),"normal"===i&&e in ae&&(i=ae[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(t,e){k.cssHooks[e]={get:function(t,n,r){if(n)return!oe.test(k.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?le(t,e,r):Jt(t,se,function(){return le(t,e,r)})},set:function(t,n,r){var i,o=Zt(t),s=!v.scrollboxSize()&&"absolute"===o.position,a=(s||r)&&"border-box"===k.css(t,"boxSizing",!1,o),u=r?ce(t,e,r,a,o):0;return a&&s&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ce(t,e,"border",!1,o)-.5)),u&&(i=dt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=k.css(t,e)),ue(0,n,u)}}}),k.cssHooks.marginLeft=te(v.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Qt(t,"marginLeft"))||t.getBoundingClientRect().left-Jt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(t,e){k.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+pt[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(k.cssHooks[t+e].set=ue)}),k.fn.extend({css:function(t,e){return tt(this,function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Zt(t),i=e.length;s<i;s++)o[e[s]]=k.css(t,e[s],!1,r);return o}return void 0!==n?k.style(t,e,n):k.css(t,e)},t,e,arguments.length>1)}}),k.Tween=he,he.prototype={constructor:he,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||k.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var t=he.propHooks[this.prop];return t&&t.get?t.get(this):he.propHooks._default.get(this)},run:function(t){var e,n=he.propHooks[this.prop];return this.options.duration?this.pos=e=k.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):he.propHooks._default.set(this),this}},he.prototype.init.prototype=he.prototype,he.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=k.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){k.fx.step[t.prop]?k.fx.step[t.prop](t):1!==t.elem.nodeType||!k.cssHooks[t.prop]&&null==t.elem.style[ie(t.prop)]?t.elem[t.prop]=t.now:k.style(t.elem,t.prop,t.now+t.unit)}}},he.propHooks.scrollTop=he.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},k.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},k.fx=he.prototype.init,k.fx.step={};var fe,de,pe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function ve(){de&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(ve):r.setTimeout(ve,k.fx.interval),k.fx.tick())}function me(){return r.setTimeout(function(){fe=void 0}),fe=Date.now()}function ye(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=pt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function be(t,e,n){for(var r,i=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function xe(t,e,n){var r,i,o=0,s=xe.prefilters.length,a=k.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=fe||me(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),r<1&&s?n:(s||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:e,originalOptions:n,startTime:fe||me(),duration:n.duration,tweens:[],createTween:function(e,n){var r=k.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),l=c.props;for(function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=it(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=k.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<s;o++)if(r=xe.prefilters[o].call(c,t,l,c.opts))return m(r.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return k.map(l,be,c),m(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return bt(n.elem,t,dt.exec(e),n),n}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match(W);for(var n,r=0,i=t.length;r<i;r++)n=t[r],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,l,h="width"in e||"height"in e,f=this,d={},p=t.style,g=t.nodeType&&yt(t),v=at.get(t,"fxshow");for(r in n.queue||(null==(s=k._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,k.queue(t,"fx").length||s.empty.fire()})})),e)if(i=e[r],pe.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(t,r)}if((u=!k.isEmptyObject(e))||!k.isEmptyObject(d))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=at.get(t,"display")),"none"===(l=k.css(t,"display"))&&(c?l=c:(_t([t],!0),c=t.style.display||c,l=k.css(t,"display"),_t([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===k.css(t,"float")&&(u||(f.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=at.access(t,"fxshow",{display:c}),o&&(v.hidden=!g),g&&_t([t],!0),f.done(function(){for(r in g||_t([t]),at.remove(t,"fxshow"),d)k.style(t,r,d[r])})),u=be(g?v[r]:0,r,f),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),k.speed=function(t,e,n){var r=t&&"object"==typeof t?k.extend({},t):{complete:n||!n&&e||m(t)&&t,duration:t,easing:n&&e||e&&!m(e)&&e};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(t,e,n,r){return this.filter(yt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),s=function(){var e=xe(this,k.extend({},t),o);(i||at.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||!1===o.queue?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=k.timers,s=at.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&ge.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||k.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=at.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=k.timers,s=r?r.length:0;for(n.finish=!0,k.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),k.each(["toggle","show","hide"],function(t,e){var n=k.fn[e];k.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ye(e,!0),t,r,i)}}),k.each({slideDown:ye("show"),slideUp:ye("hide"),slideToggle:ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){k.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),k.timers=[],k.fx.tick=function(){var t,e=0,n=k.timers;for(fe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||k.fx.stop(),fe=void 0},k.fx.timer=function(t){k.timers.push(t),k.fx.start()},k.fx.interval=13,k.fx.start=function(){de||(de=!0,ve())},k.fx.stop=function(){de=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(t,e){return t=k.fx&&k.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}})},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var we,_e=k.expr.attrHandle;k.fn.extend({attr:function(t,e){return tt(this,k.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){k.removeAttr(this,t)})}}),k.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?k.prop(t,e,n):(1===o&&k.isXMLDoc(t)||(i=k.attrHooks[e.toLowerCase()]||(k.expr.match.bool.test(e)?we:void 0)),void 0!==n?null===n?void k.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=k.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&T(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(W);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),we={set:function(t,e,n){return!1===e?k.removeAttr(t,n):t.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_e[e]||k.find.attr;_e[e]=function(t,e,r){var i,o,s=e.toLowerCase();return r||(o=_e[s],_e[s]=i,i=null!=n(t,e,r)?s:null,_e[s]=o),i}});var Ee=/^(?:input|select|textarea|button)$/i,Ae=/^(?:a|area)$/i;function ke(t){return(t.match(W)||[]).join(" ")}function Se(t){return t.getAttribute&&t.getAttribute("class")||""}function Te(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(W)||[]}k.fn.extend({prop:function(t,e){return tt(this,k.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[k.propFix[t]||t]})}}),k.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(t)||(e=k.propFix[e]||e,i=k.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=k.find.attr(t,"tabindex");return e?parseInt(e,10):Ee.test(t.nodeName)||Ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(k.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,s;return m(t)?this.each(function(e){k(this).addClass(t.call(this,e,Se(this)))}):(e=Te(t)).length?this.each(function(){if(r=Se(this),n=1===this.nodeType&&" "+ke(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=ke(n),r!==s&&this.setAttribute("class",s)}}):this},removeClass:function(t){var e,n,r,i,o,s;return m(t)?this.each(function(e){k(this).removeClass(t.call(this,e,Se(this)))}):arguments.length?(e=Te(t)).length?this.each(function(){if(r=Se(this),n=1===this.nodeType&&" "+ke(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=ke(n),r!==s&&this.setAttribute("class",s)}}):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,s=typeof t,a="string"===s||Array.isArray(t);return m(t)?this.each(function(n){k(this).toggleClass(t.call(this,n,Se(this),e),e)}):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Te(t),this.each(function(){if(a)for(o=k(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==s||((r=Se(this))&&at.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":at.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ke(Se(n))+" ").indexOf(e)>-1)return!0;return!1}});var Pe=/\r/g;k.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=m(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,k(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,function(t){return null==t?"":t+""})),(e=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Pe,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(t){var e=k.find.attr(t,"value");return null!=e?e:ke(k.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(e=k(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=k.makeArray(e),s=i.length;s--;)((r=i[s]).selected=k.inArray(k.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=k.inArray(k(t).val(),e)>-1}},v.checkOn||(k.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Ce=r.location,Ne={guid:Date.now()},Le=/\?/;k.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||k.error("Invalid XML: "+(n?k.map(n.childNodes,function(t){return t.textContent}).join("\n"):t)),e};var Oe=/^(?:focusinfocus|focusoutblur)$/,Me=function(t){t.stopPropagation()};k.extend(k.event,{trigger:function(t,e,n,i){var o,s,a,u,c,l,h,f,p=[n||b],g=d.call(t,"type")?t.type:t,v=d.call(t,"namespace")?t.namespace.split("."):[];if(s=f=a=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!Oe.test(g+k.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[k.expando]?t:new k.Event(g,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:k.makeArray(e,[t]),h=k.event.special[g]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!y(n)){for(u=h.delegateType||g,Oe.test(u+g)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(n.ownerDocument||b)&&p.push(a.defaultView||a.parentWindow||r)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?u:h.bindType||g,(l=(at.get(s,"events")||Object.create(null))[t.type]&&at.get(s,"handle"))&&l.apply(s,e),(l=c&&s[c])&&l.apply&&ot(s)&&(t.result=l.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(p.pop(),e)||!ot(n)||c&&m(n[g])&&!y(n)&&((a=n[c])&&(n[c]=null),k.event.triggered=g,t.isPropagationStopped()&&f.addEventListener(g,Me),n[g](),t.isPropagationStopped()&&f.removeEventListener(g,Me),k.event.triggered=void 0,a&&(n[c]=a)),t.result}},simulate:function(t,e,n){var r=k.extend(new k.Event,n,{type:t,isSimulated:!0});k.event.trigger(r,null,e)}}),k.fn.extend({trigger:function(t,e){return this.each(function(){k.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return k.event.trigger(t,e,n,!0)}});var Ie=/\[\]$/,Re=/\r?\n/g,je=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Be(t,e,n,r){var i;if(Array.isArray(e))k.each(e,function(e,i){n||Ie.test(t)?r(t,i):Be(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==_(e))r(t,e);else for(i in e)Be(t+"["+i+"]",e[i],n,r)}k.param=function(t,e){var n,r=[],i=function(t,e){var n=m(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!k.isPlainObject(t))k.each(t,function(){i(this.name,this.value)});else for(n in t)Be(n,t[n],e,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=k.prop(this,"elements");return t?k.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!k(this).is(":disabled")&&De.test(this.nodeName)&&!je.test(t)&&(this.checked||!kt.test(t))}).map(function(t,e){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(t){return{name:e.name,value:t.replace(Re,"\r\n")}}):{name:e.name,value:n.replace(Re,"\r\n")}}).get()}});var Ve=/%20/g,Fe=/#.*$/,ze=/([?&])_=[^&]*/,Ge=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:GET|HEAD)$/,qe=/^\/\//,He={},$e={},We="*/".concat("*"),Xe=b.createElement("a");function Ye(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(W)||[];if(m(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ze(t,e,n,r){var i={},o=t===$e;function s(a){var u;return i[a]=!0,k.each(t[a]||[],function(t,a){var c=a(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),u}return s(e.dataTypes[0])||!i["*"]&&s("*")}function Je(t,e){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&k.extend(!0,t,r),t}Xe.href=Ce.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":We,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Je(Je(t,k.ajaxSettings),e):Je(k.ajaxSettings,t)},ajaxPrefilter:Ye(He),ajaxTransport:Ye($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,i,o,s,a,u,c,l,h,f,d=k.ajaxSetup({},e),p=d.context||d,g=d.context&&(p.nodeType||p.jquery)?k(p):k.event,v=k.Deferred(),m=k.Callbacks("once memory"),y=d.statusCode||{},x={},w={},_="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(c){if(!s)for(s={};e=Ge.exec(o);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==c&&(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)E.always(t[E.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||_;return n&&n.abort(e),A(0,e),this}};if(v.promise(E),d.url=((t||d.url||Ce.href)+"").replace(qe,Ce.protocol+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(W)||[""],null==d.crossDomain){u=b.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=Xe.protocol+"//"+Xe.host!=u.protocol+"//"+u.host}catch(t){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!=typeof d.data&&(d.data=k.param(d.data,d.traditional)),Ze(He,d,e,E),c)return E;for(h in(l=k.event&&d.global)&&0===k.active++&&k.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Ue.test(d.type),i=d.url.replace(Fe,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ve,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"==typeof d.data)&&(i+=(Le.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(ze,"$1"),f=(Le.test(i)?"&":"?")+"_="+Ne.guid+++f),d.url=i+f),d.ifModified&&(k.lastModified[i]&&E.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&E.setRequestHeader("If-None-Match",k.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||e.contentType)&&E.setRequestHeader("Content-Type",d.contentType),E.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+We+"; q=0.01":""):d.accepts["*"]),d.headers)E.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,E,d)||c))return E.abort();if(_="abort",m.add(d.complete),E.done(d.success),E.fail(d.error),n=Ze($e,d,e,E)){if(E.readyState=1,l&&g.trigger("ajaxSend",[E,d]),c)return E;d.async&&d.timeout>0&&(a=r.setTimeout(function(){E.abort("timeout")},d.timeout));try{c=!1,n.send(x,A)}catch(t){if(c)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,s,u){var h,f,b,x,w,_=e;c||(c=!0,a&&r.clearTimeout(a),n=void 0,o=u||"",E.readyState=t>0?4:0,h=t>=200&&t<300||304===t,s&&(x=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(d,E,s)),!h&&k.inArray("script",d.dataTypes)>-1&&k.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),x=function(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],l.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(d,x,E,h),h?(d.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=w),(w=E.getResponseHeader("etag"))&&(k.etag[i]=w)),204===t||"HEAD"===d.type?_="nocontent":304===t?_="notmodified":(_=x.state,f=x.data,h=!(b=x.error))):(b=_,!t&&_||(_="error",t<0&&(t=0))),E.status=t,E.statusText=(e||_)+"",h?v.resolveWith(p,[f,_,E]):v.rejectWith(p,[E,_,b]),E.statusCode(y),y=void 0,l&&g.trigger(h?"ajaxSuccess":"ajaxError",[E,d,h?f:b]),m.fireWith(p,[E,_]),l&&(g.trigger("ajaxComplete",[E,d]),--k.active||k.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return k.get(t,e,n,"json")},getScript:function(t,e){return k.get(t,void 0,e,"script")}}),k.each(["get","post"],function(t,e){k[e]=function(t,n,r,i){return m(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:t,type:e,dataType:i,data:n,success:r},k.isPlainObject(t)&&t))}}),k.ajaxPrefilter(function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")}),k._evalUrl=function(t,e,n){return k.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){k.globalEval(t,e,n)}})},k.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=k(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return m(t)?this.each(function(e){k(this).wrapInner(t.call(this,e))}):this.each(function(){var e=k(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=m(t);return this.each(function(n){k(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(t){return!k.expr.pseudos.visible(t)},k.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var Ke={0:200,1223:204},Qe=k.ajaxSettings.xhr();v.cors=!!Qe&&"withCredentials"in Qe,v.ajax=Qe=!!Qe,k.ajaxTransport(function(t){var e,n;if(v.cors||Qe&&!t.crossDomain)return{send:function(i,o){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(Ke[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&r.setTimeout(function(){e&&n()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),k.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return k.globalEval(t),t}}}),k.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),k.ajaxTransport("script",function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=k("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}});var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||k.expando+"_"+Ne.guid++;return this[t]=!0,t}}),k.ajaxPrefilter("json jsonp",function(t,e,n){var i,o,s,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+i):!1!==t.jsonp&&(t.url+=(Le.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||k.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){s=arguments},n.always(function(){void 0===o?k(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,en.push(i)),s&&m(o)&&o(s[0]),s=o=void 0}),"script"}),v.createHTMLDocument=((tn=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),k.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=F.exec(t))?[e.createElement(i[1])]:(i=Ot([t],e,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return a>-1&&(r=ke(t.slice(a)),t=t.slice(0,a)),m(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&k.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?k("<div>").append(k.parseHTML(t)).find(r):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c=k.css(t,"position"),l=k(t),h={};"static"===c&&(t.style.position="relative"),a=l.offset(),o=k.css(t,"top"),u=k.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(s=(r=l.position()).top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),m(e)&&(e=e.call(t,n,k.extend({},a))),null!=e.top&&(h.top=e.top-a.top+s),null!=e.left&&(h.left=e.left-a.left+i),"using"in e?e.using.call(t,h):l.css(h)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===k.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=k(t).offset()).top+=k.css(t,"borderTopWidth",!0),i.left+=k.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-k.css(r,"marginTop",!0),left:e.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===k.css(t,"position");)t=t.offsetParent;return t||gt})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;k.fn[t]=function(r){return tt(this,function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),k.each(["top","left"],function(t,e){k.cssHooks[e]=te(v.pixelPosition,function(t,n){if(n)return n=Qt(t,e),Xt.test(n)?k(t).position()[e]+"px":n})}),k.each({Height:"height",Width:"width"},function(t,e){k.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){k.fn[r]=function(i,o){var s=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===o?"margin":"border");return tt(this,function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?k.css(e,n,a):k.style(e,n,i,a)},e,s?i:void 0,s)}})}),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){k.fn[e]=function(t){return this.on(e,t)}}),k.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){k.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;k.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),m(t))return r=a.call(arguments,2),i=function(){return t.apply(e||this,r.concat(a.call(arguments)))},i.guid=t.guid=t.guid||k.guid++,i},k.holdReady=function(t){t?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=T,k.isFunction=m,k.isWindow=y,k.camelCase=it,k.type=_,k.now=Date.now,k.isNumeric=function(t){var e=k.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},k.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return k}.apply(e,[]))||(t.exports=n);var on=r.jQuery,sn=r.$;return k.noConflict=function(t){return r.$===k&&(r.$=sn),t&&r.jQuery===k&&(r.jQuery=on),k},void 0===i&&(r.jQuery=r.$=k),k},"object"==typeof t.exports?t.exports=r.document?i(r,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(r)},74733(t,e,n){var r=n(21791),i=n(95950);t.exports=function(t,e){return t&&r(e,i(e),t)}},75288(t){t.exports=function(t,e){return t===e||t!=t&&e!=e}},75677(t){function e(t){t.nodes().forEach(e=>n(t.node(e))),t.edges().forEach(e=>n(t.edge(e)))}function n(t){let e=t.width;t.width=t.height,t.height=e}function r(t){t.y=-t.y}function i(t){let e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){let n=t.graph().rankdir.toLowerCase();"lr"!==n&&"rl"!==n||e(t)},undo:function(t){let n=t.graph().rankdir.toLowerCase();"bt"!==n&&"rl"!==n||function(t){t.nodes().forEach(e=>r(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(r),n.hasOwnProperty("y")&&r(n)})}(t),"lr"!==n&&"rl"!==n||(function(t){t.nodes().forEach(e=>i(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.points.forEach(i),n.hasOwnProperty("x")&&i(n)})}(t),e(t))}}},76001(t,e,n){var r=n(97420),i=n(80631);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},76135(t,e,n){t.exports=n(39754)},76169(t,e,n){var r=n(49653);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},76189(t){var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},76246(t,e,n){t.exports={graphlib:n(68191),layout:n(78202),debug:n(78909),util:{time:n(3988).time,notime:n(3988).notime},version:n(87038)}},76545(t,e,n){var r=n(56110)(n(9325),"Set");t.exports=r},76959(t){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},77199(t,e,n){var r=n(49653),i=n(76169),o=n(73201),s=n(93736),a=n(71961);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Symbol]":return s(t)}}},77556(t,e,n){var r=n(51873),i=n(34932),o=n(56449),s=n(44394),a=r?r.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},77797(t,e,n){var r=n(44394);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},77927(t){var e="\\ud800-\\udfff",n="["+e+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")?",c="[\\ufe0e\\ufe0f]?",l=c+u+"(?:\\u200d(?:"+[o,s,a].join("|")+")"+c+u+")*",h="(?:"+[o+r+"?",r,s,a,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+h+l,"g");t.exports=function(t){for(var e=f.lastIndex=0;f.test(t);)++e;return e}},78096(t){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},78202(t,e,n){var r=n(56857),i=n(96822),o=n(18209),s=n(79361),a=n(3988).normalizeRanks,u=n(62948),c=n(3988).removeEmptyRanks,l=n(56353),h=n(40135),f=n(4850),d=n(51453),p=n(73776),g=n(3988),v=n(68191).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new v({multigraph:!0,compound:!0}),n=S(t.graph());return e.setGraph(r.merge({},y,k(n,m),r.pick(n,b))),r.forEach(t.nodes(),function(n){var i=S(t.node(n));e.setNode(n,r.defaults(k(i,x),w)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=S(t.edge(n));e.setEdge(n,r.merge({},E,k(i,_),r.pick(i,A)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){l.run(t)}),e("    rank",function(){s(g.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e};g.addDummyNode(t,"edge-proxy",i,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){c(t)}),e("    nestingGraph.cleanup",function(){l.cleanup(t)}),e("    normalizeRanks",function(){a(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){u(t)}),e("    addBorderSegments",function(){h(t)}),e("    order",function(){d(t)}),e("    insertSelfEdges",function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){f.adjust(t)}),e("    position",function(){p(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){f.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,u=s.marginy||0;function c(t){var r=t.x,s=t.y,a=t.width,u=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-u/2),o=Math.max(o,s+u/2)}r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&c(n)}),e-=a,i-=u,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),s.width=n-e+a,s.height=o-i+u}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var m=["nodesep","edgesep","ranksep","marginx","marginy"],y={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function k(t,e){return r.mapValues(r.pick(t,e),Number)}function S(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},78909(t,e,n){var r=n(56857),i=n(3988),o=n(68191).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){var i="layer"+e;n.setNode(i,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},79361(t,e,n){var r=n(68073).longestPath,i=n(38481),o=n(36860);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){o(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t)}};var s=r},79439(t,e,n){var r=n(53933);t.exports=function(t,e){return r(t,e,"pre")}},79507(t,e,n){let r=n(41),i=n(20258),o=n(90860),s=n(4809).normalizeRanks,a=n(34867),u=n(4809).removeEmptyRanks,c=n(36554),l=n(41236),h=n(75677),f=n(34822),d=n(37277),p=n(4809),g=n(96743).Graph;t.exports=function(t,e){let n=e&&e.debugTiming?p.time:p.notime;n("layout",()=>{let e=n("  buildLayoutGraph",()=>function(t){let e=new g({multigraph:!0,compound:!0}),n=k(t.graph());return e.setGraph(Object.assign({},m,A(n,v),p.pick(n,y))),t.nodes().forEach(n=>{const r=A(k(t.node(n)),b);Object.keys(x).forEach(t=>{void 0===r[t]&&(r[t]=x[t])}),e.setNode(n,r),e.setParent(n,t.parent(n))}),t.edges().forEach(n=>{let r=k(t.edge(n));e.setEdge(n,Object.assign({},_,A(r,w),p.pick(r,E)))}),e}(t));n("  runLayout",()=>function(t,e){e("    makeSpaceForEdgeLabels",()=>function(t){let e=t.graph();e.ranksep/=2,t.edges().forEach(n=>{let r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)),e("    removeSelfEdges",()=>function(t){t.edges().forEach(e=>{if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}(t)),e("    acyclic",()=>r.run(t)),e("    nestingGraph.run",()=>c.run(t)),e("    rank",()=>o(p.asNonCompoundGraph(t))),e("    injectEdgeLabelProxies",()=>function(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.width&&n.height){let n=t.node(e.v),r={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e};p.addDummyNode(t,"edge-proxy",r,"_ep")}})}(t)),e("    removeEmptyRanks",()=>u(t)),e("    nestingGraph.cleanup",()=>c.cleanup(t)),e("    normalizeRanks",()=>s(t)),e("    assignRankMinMax",()=>function(t){let e=0;t.nodes().forEach(n=>{let r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=Math.max(e,r.maxRank))}),t.graph().maxRank=e}(t)),e("    removeEdgeLabelProxies",()=>function(t){t.nodes().forEach(e=>{let n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)),e("    normalize.run",()=>i.run(t)),e("    parentDummyChains",()=>a(t)),e("    addBorderSegments",()=>l(t)),e("    order",()=>f(t)),e("    insertSelfEdges",()=>function(t){p.buildLayerMatrix(t).forEach(e=>{var n=0;e.forEach((e,r)=>{var i=t.node(e);i.order=r+n,(i.selfEdges||[]).forEach(e=>{p.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}(t)),e("    adjustCoordinateSystem",()=>h.adjust(t)),e("    position",()=>d(t)),e("    positionSelfEdges",()=>function(t){t.nodes().forEach(e=>{var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}(t)),e("    removeBorderNodes",()=>function(t){t.nodes().forEach(e=>{if(t.children(e).length){let n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(n.borderLeft[n.borderLeft.length-1]),s=t.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),t.nodes().forEach(e=>{"border"===t.node(e).dummy&&t.removeNode(e)})}(t)),e("    normalize.undo",()=>i.undo(t)),e("    fixupEdgeLabelCoords",()=>function(t){t.edges().forEach(e=>{let n=t.edge(e);if(n.hasOwnProperty("x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)),e("    undoCoordinateSystem",()=>h.undo(t)),e("    translateGraph",()=>function(t){let e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),s=o.marginx||0,a=o.marginy||0;function u(t){let o=t.x,s=t.y,a=t.width,u=t.height;e=Math.min(e,o-a/2),n=Math.max(n,o+a/2),r=Math.min(r,s-u/2),i=Math.max(i,s+u/2)}t.nodes().forEach(e=>u(t.node(e))),t.edges().forEach(e=>{let n=t.edge(e);n.hasOwnProperty("x")&&u(n)}),e-=s,r-=a,t.nodes().forEach(n=>{let i=t.node(n);i.x-=e,i.y-=r}),t.edges().forEach(n=>{let i=t.edge(n);i.points.forEach(t=>{t.x-=e,t.y-=r}),i.hasOwnProperty("x")&&(i.x-=e),i.hasOwnProperty("y")&&(i.y-=r)}),o.width=n-e+s,o.height=i-r+a}(t)),e("    assignNodeIntersects",()=>function(t){t.edges().forEach(e=>{let n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(p.intersectRect(o,n)),i.points.push(p.intersectRect(s,r))})}(t)),e("    reversePoints",()=>function(t){t.edges().forEach(e=>{let n=t.edge(e);n.reversed&&n.points.reverse()})}(t)),e("    acyclic.undo",()=>r.undo(t))}(e,n)),n("  updateInputGraph",()=>function(t,e){t.nodes().forEach(n=>{let r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,r.rank=i.rank,e.children(n).length&&(r.width=i.width,r.height=i.height))}),t.edges().forEach(n=>{let r=t.edge(n),i=e.edge(n);r.points=i.points,i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e))})};let v=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],b=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},E=["labelpos"];function A(t,e){return p.mapValues(p.pick(t,e),Number)}function k(t){var e={};return t&&Object.entries(t).forEach(([t,n])=>{"string"==typeof t&&(t=t.toLowerCase()),e[t]=n}),e}},79770(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},80079(t,e,n){var r=n(63702),i=n(70080),o=n(24739),s=n(48655),a=n(31175);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,t.exports=u},80299(t,e,n){var r=n(83120),i=n(69302),o=n(55765),s=n(83693),a=i(function(t){return o(r(t,1,s,!0))});t.exports=a},80477(t){t.exports=function(t,e,n){let r,i={};n.forEach(n=>{let o,s,a=t.parent(n);for(;a;){if(o=t.parent(a),o?(s=i[o],i[o]=a):(s=r,r=a),s&&s!==a)return void e.setEdge(s,a);a=o}})}},80631(t,e,n){var r=n(28077),i=n(49326);t.exports=function(t,e){return null!=t&&i(t,e,r)}},80909(t,e,n){var r=n(30641),i=n(38329)(r);t.exports=i},80945(t,e,n){var r=n(80079),i=n(68223),o=n(53661);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},81042(t,e,n){var r=n(56110)(Object,"create");t.exports=r},81993(t,e,n){var r=n(99811),i=n(49698),o=n(77927);t.exports=function(t){return i(t)?o(t):r(t)}},82189(t,e,n){let r=n(96743).Graph,i=n(56796);t.exports=function(t,e){if(t.nodeCount()<=1)return[];let n=function(t,e){let n=new r,o=0,s=0;t.nodes().forEach(t=>{n.setNode(t,{v:t,in:0,out:0})}),t.edges().forEach(t=>{let r=n.edge(t.v,t.w)||0,i=e(t),a=r+i;n.setEdge(t.v,t.w,a),s=Math.max(s,n.node(t.v).out+=i),o=Math.max(o,n.node(t.w).in+=i)});let u=function(t){const e=[];for(let n=0;n<t;n++)e.push(n);return e}(s+o+3).map(()=>new i),c=o+1;return n.nodes().forEach(t=>{a(u,c,n.node(t))}),{graph:n,buckets:u,zeroIdx:c}}(t,e||o);return function(t,e,n){let r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)s(t,e,n,r);for(;r=o.dequeue();)s(t,e,n,r);if(t.nodeCount())for(let o=e.length-2;o>0;--o)if(r=e[o].dequeue(),r){i=i.concat(s(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx).flatMap(e=>t.outEdges(e.v,e.w))};let o=()=>1;function s(t,e,n,r,i){let o=i?[]:void 0;return t.inEdges(r.v).forEach(r=>{let s=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=s,a(e,n,u)}),t.outEdges(r.v).forEach(r=>{let i=t.edge(r),o=r.w,s=t.node(o);s.in-=i,a(e,n,s)}),t.removeNode(r.v),o}function a(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},82199(t,e,n){var r=n(14528),i=n(56449);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},83120(t,e,n){var r=n(14528),i=n(45891);t.exports=function t(e,n,o,s,a){var u=-1,c=e.length;for(o||(o=i),a||(a=[]);++u<c;){var l=e[u];n>0&&o(l)?n>1?t(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},83221(t){t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}},83349(t,e,n){var r=n(82199),i=n(86375),o=n(37241);t.exports=function(t){return r(t,o,i)}},83488(t){t.exports=function(t){return t}},83693(t,e,n){var r=n(64894),i=n(40346);t.exports=function(t){return i(t)&&r(t)}},83729(t){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},84247(t){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},84684(t,e,n){var r=n(69302),i=n(75288),o=n(36800),s=n(37241),a=Object.prototype,u=a.hasOwnProperty,c=r(function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],h=s(l),f=-1,d=h.length;++f<d;){var p=h[f],g=t[p];(void 0===g||i(g,a[p])&&!u.call(t,p))&&(t[p]=l[p])}return t});t.exports=c},85015(t,e,n){var r=n(72552),i=n(56449),o=n(40346);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},85250(t,e,n){var r=n(37217),i=n(87805),o=n(86649),s=n(42824),a=n(23805),u=n(37241),c=n(14974);t.exports=function t(e,n,l,h,f){e!==n&&o(n,function(o,u){if(f||(f=new r),a(o))s(e,n,u,l,t,h,f);else{var d=h?h(c(e,u),o,u+"",e,n,f):void 0;void 0===d&&(d=o),i(e,u,d)}},u)}},85463(t){t.exports=function(t){return t!=t}},85508(t,e,n){var r=n(86151),i=n(36800),o=n(17400);t.exports=function(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),s=void 0===s?e<n?1:-1:o(s),r(e,n,s,t)}}},85558(t){t.exports=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}},86009(t,e,n){t=n.nmd(t);var r=n(34840),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},86151(t){var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var s=-1,a=n(e((r-t)/(i||1)),0),u=Array(a);a--;)u[o?a:++s]=t,t+=i;return u}},86375(t,e,n){var r=n(14528),i=n(28879),o=n(4664),s=n(63345),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s;t.exports=a},86649(t,e,n){var r=n(83221)();t.exports=r},87038(t){t.exports="0.8.5"},87068(t,e,n){var r=n(37217),i=n(25911),o=n(21986),s=n(50689),a=n(5861),u=n(56449),c=n(3656),l=n(37167),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,m){var y=u(t),b=u(e),x=y?f:a(t),w=b?f:a(e),_=(x=x==h?d:x)==d,E=(w=w==h?d:w)==d,A=x==w;if(A&&c(t)){if(!c(e))return!1;y=!0,_=!1}if(A&&!_)return m||(m=new r),y||l(t)?i(t,e,n,g,v,m):o(t,e,x,n,g,v,m);if(!(1&n)){var k=_&&p.call(t,"__wrapped__"),S=E&&p.call(e,"__wrapped__");if(k||S){var T=k?t.value():t,P=S?e.value():e;return m||(m=new r),v(T,P,n,g,m)}}return!!A&&(m||(m=new r),s(t,e,n,g,v,m))}},87296(t,e,n){var r,i=n(55481),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},87612(t,e,n){var r=n(79770),i=n(16574),o=n(15389),s=n(56449);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},87730(t,e,n){var r=n(29172),i=n(27301),o=n(86009),s=o&&o.isMap,a=s?i(s):r;t.exports=a},87805(t,e,n){var r=n(43360),i=n(75288);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},87978(t,e,n){var r=n(60270),i=n(58156),o=n(80631),s=n(28586),a=n(30756),u=n(67197),c=n(77797);t.exports=function(t,e){return s(t)&&a(e)?u(c(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,3)}}},88055(t,e,n){var r=n(9999);t.exports=function(t){return r(t,5)}},88929(t){t.exports=function(t,n,r){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],s=o[n],a=r.distance+i.distance;a<s.distance&&(s.distance=a,s.predecessor=i.predecessor)})})}),r}(t,n||e,r||function(e){return t.outEdges(e)})};var e=()=>1},88984(t,e,n){var r=n(55527),i=n(3650),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},89294(t){t.exports={longestPath:function(t){var e={};t.sources().forEach(function n(r){var i=t.node(r);if(e.hasOwnProperty(r))return i.rank;e[r]=!0;var o=Math.min(...t.outEdges(r).map(e=>null==e?Number.POSITIVE_INFINITY:n(e.w)-t.edge(e).minlen));return o===Number.POSITIVE_INFINITY&&(o=0),i.rank=o})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},89935(t){t.exports=function(){return!1}},90181(t){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},90289(t,e,n){var r=n(12651);t.exports=function(t){return r(this,t).get(t)}},90860(t,e,n){var r=n(89294).longestPath,i=n(51395),o=n(43061);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":default:!function(t){o(t)}(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t)}};var s=r},90938(t){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},91033(t){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},91176(t,e,n){var r=n(74692),i=n(34160);void 0===i.$&&(i.$=r),t.exports=r},92271(t,e,n){var r=n(21791),i=n(4664);t.exports=function(t,e){return r(t,i(t),e)}},93243(t,e,n){var r=n(56110),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},93290(t,e,n){t=n.nmd(t);var r=n(9325),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},93599(t,e,n){var r=n(44394);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(void 0===u?a==a&&!r(a):n(a,u)))var u=a,c=s}return c}},93663(t,e,n){var r=n(41799),i=n(10776),o=n(67197);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},93736(t,e,n){var r=n(51873),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},94384(t,e,n){var r=n(56857);t.exports=function(t,e,n){var i,o={};r.forEach(n,function(n){for(var r,s,a=t.parent(n);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}})}},94506(t,e,n){var r=n(93599),i=n(3335),o=n(83488);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},95950(t,e,n){var r=n(70695),i=n(88984),o=n(64894);t.exports=function(t){return o(t)?r(t):i(t)}},96131(t,e,n){var r=n(2523),i=n(85463),o=n(76959);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},96743(t,e,n){var r=n(99351);t.exports={Graph:r.Graph,json:n(32377),alg:n(67174),version:r.version}},96822(t,e,n){var r=n(56857),i=n(22031);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[s])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},97200(t,e,n){var r=n(13222),i=0;t.exports=function(t){var e=++i;return r(t)+e}},97420(t,e,n){var r=n(47422),i=n(73170),o=n(31769);t.exports=function(t,e,n){for(var s=-1,a=e.length,u={};++s<a;){var c=e[s],l=r(t,c);n(l,c)&&i(u,o(c,t),l)}return u}},97860(t,e,n){var r=n(56857),i=n(68191).Graph;t.exports=function(t,e,n){var o=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,u||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}},98918(t,e,n){var r=n(56857);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]}),s=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(s,function n(i){if(!r.has(e,i)){e[i]=!0;var s=t.node(i);o[s.rank].push(i),r.forEach(t.successors(i),n)}}),o}},99351(t,e,n){t.exports={Graph:n(46239),version:n(19207)}},99374(t,e,n){var r=n(54128),i=n(23805),o=n(44394),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},99441(t){function e(t){var e={},r={},i=[];if(t.sinks().forEach(function o(s){if(r.hasOwnProperty(s))throw new n;e.hasOwnProperty(s)||(r[s]=!0,e[s]=!0,t.predecessors(s).forEach(o),delete r[s],i.push(s))}),Object.keys(e).length!==t.nodeCount())throw new n;return i}class n extends Error{constructor(){super(...arguments)}}t.exports=e,e.CycleException=n},99811(t,e,n){var r=n(47237)("length");t.exports=r}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var r={};n.r(r),n.d(r,{ellipseWithEllipse:()=>oi,ellipseWithLine:()=>ii,exists:()=>ni,lineWithLine:()=>ri,pathWithEllipse:()=>bi,pathWithLine:()=>yi,pathWithPath:()=>Ei,pathWithPolygon:()=>_i,pathWithPolyline:()=>wi,pathWithRect:()=>xi,polygonWithEllipse:()=>pi,polygonWithLine:()=>di,polygonWithPolygon:()=>mi,polygonWithPolyline:()=>vi,polygonWithRect:()=>gi,polylineWithEllipse:()=>li,polylineWithLine:()=>ci,polylineWithPolyline:()=>fi,polylineWithRect:()=>hi,rectWithEllipse:()=>ai,rectWithLine:()=>si,rectWithRect:()=>ui});var i={};n.r(i),n.d(i,{Curve:()=>Fr,Ellipse:()=>xr,Line:()=>gr,Path:()=>Gr,Point:()=>hr,Polygon:()=>ei,Polyline:()=>Ir,Rect:()=>Cr,bezier:()=>ti,ellipse:()=>wr,intersection:()=>Oi,line:()=>vr,normalizeAngle:()=>Un,point:()=>fr,random:()=>Wn,rect:()=>Nr,scale:()=>Gn,snapToGrid:()=>qn,toDeg:()=>Hn,toRad:()=>$n,types:()=>tr});var o={};n.r(o),n.d(o,{addClass:()=>Qi,append:()=>Ui,appendTo:()=>Hi,children:()=>no,clone:()=>zi,closest:()=>ro,css:()=>Yi,data:()=>Zi,detach:()=>Vi,empty:()=>Fi,hasClass:()=>eo,height:()=>uo,html:()=>Gi,off:()=>so,offset:()=>lo,on:()=>io,one:()=>oo,position:()=>co,prepend:()=>qi,prependTo:()=>$i,remove:()=>Bi,removeClass:()=>Ki,toggleClass:()=>to,width:()=>ao});var s={};n.r(s),n.d(s,{animate:()=>po,stop:()=>vo});var a={};n.r(a),n.d(a,{absolute:()=>sa,bottom:()=>fa,ellipse:()=>pa,ellipseSpread:()=>da,fn:()=>aa,left:()=>ca,line:()=>ua,right:()=>la,top:()=>ha});var u={};n.r(u),n.d(u,{bottom:()=>Aa,inside:()=>Pa,insideOriented:()=>Ta,left:()=>wa,manual:()=>xa,outside:()=>Sa,outsideOriented:()=>ka,radial:()=>Ca,radialOriented:()=>Na,right:()=>_a,top:()=>Ea});var c={};n.r(c),n.d(c,{manhattan:()=>Bu,metro:()=>Fu,normal:()=>iu,oneSide:()=>ou,orthogonal:()=>xu,rightAngle:()=>oc});var l={};n.r(l),n.d(l,{curve:()=>Sc,jumpover:()=>bc,normal:()=>xc,rounded:()=>_c,smooth:()=>Ec,straight:()=>lc});var h={};n.r(h),n.d(h,{addClass:()=>Ld,list:()=>Md,mask:()=>Pd,opacity:()=>Cd,stroke:()=>Sd});var f={};n.r(f),n.d(f,{connectionClosest:()=>Vd,connectionLength:()=>Rd,connectionPerpendicular:()=>Bd,connectionRatio:()=>Id,resolveRef:()=>jd});var d={};n.r(d),n.d(d,{anchor:()=>Hd,bbox:()=>$d,boundary:()=>Xd,rectangle:()=>Wd});var p={};n.r(p),n.d(p,{bottom:()=>Kd,bottomLeft:()=>rp,bottomRight:()=>ip,center:()=>Zd,left:()=>Qd,midSide:()=>sp,modelCenter:()=>ap,perpendicular:()=>op,right:()=>tp,top:()=>Jd,topLeft:()=>ep,topRight:()=>np});var g={};n.r(g),n.d(g,{Addition:()=>Ph,AdditionConst:()=>cf,AdditionConstView:()=>lf,AdditionView:()=>Ch,And:()=>Wl,AndReduce:()=>ah,AndReduceView:()=>uh,AndView:()=>Xl,Arith:()=>vh,Arith11:()=>mh,Arith21:()=>yh,ArithConst:()=>rf,BaseCompare:()=>wh,BaseCompareConst:()=>sf,BitExtend:()=>Df,BitExtendView:()=>Bf,Box:()=>cl,BoxView:()=>ll,BusGroup:()=>Wf,BusGroupView:()=>Xf,BusRegroup:()=>Hf,BusRegroupView:()=>$f,BusSlice:()=>Uf,BusSliceView:()=>qf,BusUngroup:()=>Yf,BusUngroupView:()=>Zf,Button:()=>ml,ButtonView:()=>yl,Clock:()=>Cl,ClockView:()=>Nl,Compare:()=>_h,CompareConst:()=>af,Constant:()=>Tl,ConstantView:()=>Pl,Dff:()=>_d,DffView:()=>Ed,Display7:()=>kp,Display7View:()=>Sp,Division:()=>Ih,DivisionConst:()=>gf,DivisionConstView:()=>vf,DivisionView:()=>Rh,Eq:()=>Kh,EqCompare:()=>Eh,EqCompareConst:()=>uf,EqConst:()=>Mf,EqConstView:()=>If,EqView:()=>Qh,FSM:()=>wp,FSMView:()=>_p,Gate:()=>ol,Gate11:()=>Bl,GateReduce:()=>Fl,GateSVG:()=>Dl,GateView:()=>sl,GateX1:()=>Vl,Ge:()=>Zh,GeConst:()=>Lf,GeConstView:()=>Of,GeView:()=>Jh,GenMux:()=>pd,GenMuxView:()=>gd,Gt:()=>Xh,GtConst:()=>Cf,GtConstView:()=>Nf,GtView:()=>Yh,IO:()=>dl,IOView:()=>pl,Input:()=>gl,InputView:()=>vl,Lamp:()=>El,LampView:()=>Al,Le:()=>$h,LeConst:()=>Tf,LeConstView:()=>Pf,LeView:()=>Wh,Lt:()=>qh,LtConst:()=>kf,LtConstView:()=>Sf,LtView:()=>Hh,Memory:()=>Ad,MemoryView:()=>kd,Modulo:()=>jh,ModuloConst:()=>mf,ModuloConstView:()=>yf,ModuloView:()=>Dh,Multiplication:()=>Oh,MultiplicationConst:()=>df,MultiplicationConstView:()=>pf,MultiplicationView:()=>Mh,Mux:()=>vd,Mux1Hot:()=>yd,Mux1HotView:()=>bd,MuxSparse:()=>xd,MuxSparseView:()=>wd,MuxView:()=>md,Nand:()=>Jl,NandReduce:()=>ch,NandReduceView:()=>lh,NandView:()=>Kl,Ne:()=>tf,NeConst:()=>Rf,NeConstView:()=>jf,NeView:()=>ef,Negation:()=>Ah,NegationView:()=>kh,Nor:()=>Yl,NorReduce:()=>oh,NorReduceView:()=>sh,NorView:()=>Zl,Not:()=>Ul,NotView:()=>ql,NumBase:()=>hl,NumBaseView:()=>fl,NumDisplay:()=>kl,NumDisplayView:()=>Sl,NumEntry:()=>bl,NumEntryView:()=>xl,OpConst:()=>nf,Or:()=>Hl,OrReduce:()=>rh,OrReduceView:()=>ih,OrView:()=>$l,Output:()=>wl,OutputView:()=>_l,Power:()=>Bh,PowerConst:()=>bf,PowerConstView:()=>xf,PowerView:()=>Vh,Repeater:()=>zl,RepeaterView:()=>Gl,Shift:()=>xh,ShiftConst:()=>of,ShiftLeft:()=>Fh,ShiftLeftConst:()=>wf,ShiftLeftConstView:()=>_f,ShiftLeftView:()=>zh,ShiftRight:()=>Gh,ShiftRightConst:()=>Ef,ShiftRightConstView:()=>Af,ShiftRightView:()=>Uh,SignExtend:()=>zf,SignExtendView:()=>Gf,Subcircuit:()=>fd,SubcircuitView:()=>dd,Subtraction:()=>Nh,SubtractionConst:()=>hf,SubtractionConstView:()=>ff,SubtractionView:()=>Lh,UnaryPlus:()=>Sh,UnaryPlusView:()=>Th,Wire:()=>al,WireView:()=>ul,Xnor:()=>eh,XnorReduce:()=>dh,XnorReduceView:()=>ph,XnorView:()=>nh,Xor:()=>Ql,XorReduce:()=>hh,XorReduceView:()=>fh,XorView:()=>th,ZeroExtend:()=>Vf,ZeroExtendView:()=>Ff,portGroupAttrs:()=>il});const v="[object Arguments]",m="[object Array]",y="[object Boolean]",b="[object Date]",x="[object Error]",w="[object Function]",_="[object Map]",E="[object Number]",A="[object Object]",k="[object RegExp]",S="[object Set]",T="[object String]",P="[object Symbol]",C="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",O="[object Float32Array]",M="[object Float64Array]",I="[object Int8Array]",R="[object Int16Array]",j="[object Int32Array]",D="[object Uint8Array]",B="[object Uint8ClampedArray]",V="[object Uint16Array]",F="[object Uint32Array]",z={[v]:!0,[m]:!0,[N]:!0,[L]:!0,[y]:!0,[b]:!0,[O]:!0,[M]:!0,[I]:!0,[R]:!0,[j]:!0,[_]:!0,[E]:!0,[A]:!0,[k]:!0,[S]:!0,[T]:!0,[P]:!0,[D]:!0,[B]:!0,[V]:!0,[F]:!0,[x]:!1,[w]:!1,[C]:!1},G="\\ud800-\\udfff",U="\\u2700-\\u27bf",q="a-z\\xdf-\\xf6\\xf8-\\xff",H="A-Z\\xc0-\\xd6\\xd8-\\xde",$="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",W="['’]",X=`[${$}]`,Y="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",Z=`[${U}]`,J=`[${q}]`,K=`[^${G}${$+"\\d"+U+q+H}]`,Q="\\ud83c[\\udffb-\\udfff]",tt=`[^${G}]`,et="(?:\\ud83c[\\udde6-\\uddff]){2}",nt="[\\ud800-\\udbff][\\udc00-\\udfff]",rt=`[${H}]`,it=`(?:${J}|${K})`,ot=`(?:${rt}|${K})`,st=`(?:${W}(?:d|ll|m|re|s|t|ve))?`,at=`(?:${W}(?:D|LL|M|RE|S|T|VE))?`,ut=`(?:${Y}|${Q})?`,ct="[\\ufe0e\\ufe0f]?",lt=ct+ut+`(?:\\u200d(?:${[tt,et,nt].join("|")})${ct+ut})*`,ht=`(?:${[Z,et,nt].join("|")})${lt}`,ft=RegExp([`${rt}?${J}+${st}(?=${[X,rt,"$"].join("|")})`,`${ot}+${at}(?=${[X,rt+it,"$"].join("|")})`,`${rt}?${it}+${st}`,`${rt}+${at}`,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",ht].join("|"),"g"),dt="__hash_undefined__",pt=/^\[object (?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)Array\]$/,gt=`(?:${[`${tt}${Y}?`,Y,et,nt,`[${G}]`].join("|")})`,vt=RegExp(`${Q}(?=${Q})|${gt+lt}`,"g"),mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yt=/^\w*$/,bt=".".charCodeAt(0),xt=/\\(\\)?/g,wt=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),_t=/^(?:0|[1-9]\d*)$/,Et=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),At=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kt=t=>vt.test(t),St=t=>kt(t)?(t=>t.match(vt)||[])(t):(t=>t.split(""))(t),Tt=t=>null==t?[]:Pt(t).map(e=>t[e]),Pt=t=>Dt(t)?Ct(t):Object.keys(Object(t)),Ct=(t,e)=>{const n=Array.isArray(t),r=!n&&Ot(t)&&Ft(t)===v,i=!n&&!r&&Ht(t),o=n||r||i,s=t.length,a=new Array(o?s:0);let u=o?-1:s;for(;++u<s;)a[u]=`${u}`;for(const n in t)!e&&!hasOwnProperty.call(t,n)||o&&("length"===n||ge(n,s))||a.push(n);return a},Nt=(t,e)=>{let{length:n}=t;for(;n--;)if(Lt(t[n][0],e))return n;return-1},Lt=(t,e)=>t===e||t!=t&&e!=e,Ot=t=>null!=t&&"object"==typeof t,Mt=(t,e,n)=>{if(!We(n))return!1;const r=typeof e;return!!("number"==r?Dt(n)&&e>-1&&e<n.length:"string"==r&&e in n)&&Lt(n[e],t)},It=t=>{const e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Object.prototype)},Rt=(t,e,n)=>{const r=t[e];hasOwnProperty.call(t,e)&&Lt(r,n)&&(void 0!==n||e in t)||(t[e]=n)},jt=(t,e,n)=>{let r=-1;const i=e.length;for(;++r<i;){const i=e[r];Rt(n,i,t[i])}return n},Dt=t=>null!=t&&"function"!=typeof t&&"number"==typeof t.length&&t.length>-1&&t.length%1==0,Bt=t=>"symbol"==typeof t||Ot(t)&&Ft(t)===P,Vt=(t,e)=>{let n=-1;const r=t.length;for(e||(e=new Array(r));++n<r;)e[n]=t[n];return e},Ft=t=>null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t),zt=t=>{const e=new t.constructor(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e},Gt=(t,e)=>{const n=e?zt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Ut=t=>"function"!=typeof t.constructor||It(t)?{}:Object.create(Object.getPrototypeOf(t)),qt=t=>null==t?[]:(t=Object(t),Object.getOwnPropertySymbols(t).filter(e=>propertyIsEnumerable.call(t,e))),Ht=t=>Ot(t)&&pt.test(Ft(t)),$t=t=>{const e=Object.keys(t);return Array.isArray(t)||null==t||e.push(...qt(Object(t))),e},Wt=t=>{const e=[];for(;t;)e.push(...qt(t)),t=Object.getPrototypeOf(Object(t));return e},Xt=t=>{const e=[];for(const n in t)e.push(n);return Array.isArray(t)||e.push(...Wt(t)),e},Yt=({__data__:t},e)=>{const n=t;return me(e)?n["string"==typeof e?"string":"hash"]:n.map},Zt=(t,e,n)=>t===e||(null==t||null==e||!Ot(t)&&!Ot(e)?t!=t&&e!=e:Jt(t,e,Zt,n)),Jt=(t,e,n,r)=>{let i=Array.isArray(t);const o=Array.isArray(e);let s=i?m:Ft(t),a=o?m:Ft(e);s=s==v?A:s,a=a==v?A:a;let u=s==A;const c=a==A,l=s==a;if(l&&!u)return r||(r=new Ge),i||Ht(t)?Kt(t,e,!1,n,r):ne(t,e,s,n,r);const h=u&&hasOwnProperty.call(t,"__wrapped__"),f=c&&hasOwnProperty.call(e,"__wrapped__");if(h||f){const i=h?t.value():t,o=f?e.value():e;return r||(r=new Ge),n(i,o,r)}return!!l&&(r||(r=new Ge),((t,e,n,r)=>{const i=$t(t),o=i.length;if(o!=$t(e).length)return!1;let s,a=o;for(;a--;)if(s=i[a],!hasOwnProperty.call(e,s))return!1;const u=r.get(t),c=r.get(e);if(u&&c)return u==e&&c==t;let l,h=!0;for(r.set(t,e),r.set(e,t);++a<o;){s=i[a];const o=t[s],u=e[s];if(o!==u&&!n(o,u,r)){h=!1;break}l||(l="constructor"==s)}if(h&&!l){const n=t.constructor,r=e.constructor;n==r||!("constructor"in t)||!("constructor"in e)||"function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r||(h=!1)}return r.delete(t),r.delete(e),h})(t,e,n,r))},Kt=(t,e,n,r,i)=>{const o=t.length;if(o!=e.length)return!1;const s=i.get(t),a=i.get(e);if(s&&a)return s==e&&a==t;let u=-1,c=!0;const l=n?new $e:void 0;for(i.set(t,e),i.set(e,t);++u<o;){let n;const o=t[u],s=e[u];if(void 0!==n){if(n)continue;c=!1;break}if(l){if(!Qt(e,(t,e)=>{if(!te(l,e)&&(o===t||r(o,t,i)))return l.push(e)})){c=!1;break}}else if(o!==s&&!r(o,s,i)){c=!1;break}}return i.delete(t),i.delete(e),c},Qt=(t,e)=>{let n=-1;const r=null==t?0:t.length;for(;++n<r;)if(e(t[n],n,t))return!0;return!1},te=(t,e)=>t.has(e),ee=(t,e,n,r)=>!(t.byteLength!=e.byteLength||!n(new Uint8Array(t),new Uint8Array(e),r)),ne=(t,e,n,r,i)=>{switch(n){case L:return t.byteLength==e.byteLength&&t.byteOffset==e.byteOffset&&(t=t.buffer,e=e.buffer,ee(t,e,r,i));case N:return ee(t,e,r,i);case y:case b:case E:return Lt(+t,+e);case x:return t.name==e.name&&t.message==e.message;case k:case T:return t==`${e}`;case _:var o=re;case S:if(o||(o=ie),t.size!=e.size)return!1;const n=i.get(t);if(n)return n==e;i.set(t,e);const s=Kt(o(t),o(e),!0,r,i);return i.delete(t),s;case P:return Symbol.prototype.valueOf.call(t)==Symbol.prototype.valueOf.call(e)}return!1},re=t=>{let e=-1,n=Array(t.size);return t.forEach((t,r)=>{n[++e]=[r,t]}),n},ie=t=>{let e=-1;const n=new Array(t.size);return t.forEach(t=>{n[++e]=t}),n},oe=(t,e)=>{if(Array.isArray(t))return!1;const n=typeof t;return!("number"!==n&&"boolean"!==n&&null!=t&&!Bt(t))||yt.test(t)||!mt.test(t)||null!=e&&t in Object(e)},se=(t,e)=>Array.isArray(t)?t:oe(t,e)?[t]:(t=>{const e=[];return t.charCodeAt(0)===bt&&e.push(""),t.replace(wt,(t,n,r,i)=>{let o=t;r?o=i.replace(xt,"$1"):n&&(o=n.trim()),e.push(o)}),e})(`${t}`),ae=(t,e)=>{let n=0;const r=(e=se(e,t)).length;for(;null!=t&&n<r;)t=t[le(e[n])],n++;return n&&n==r?t:void 0};function ue(t,e){if(t!==e){const n=void 0!==t,r=null===t,i=t==t,o=Bt(t),s=void 0!==e,a=null===e,u=e==e,c=Bt(e);if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}const ce=(t,e)=>{let n=(t,e)=>!(null==t||!t.length)&&t.indexOf(e)>-1,r=!0;const i=[],o=e.length;if(!t.length)return i;e.length>=200&&(n=(t,e)=>t.has(e),r=!1,e=new $e(e));t:for(let s in t){let a=t[s];const u=a;if(a=0!==a?a:0,r&&u==u){let t=o;for(;t--;)if(e[t]===u)continue t;i.push(a)}else n(e,u)||i.push(a)}return i},le=t=>{if("string"==typeof t||Bt(t))return t;const e=`${t}`;return"0"==e&&1/t==-1/0?"-0":e},he=(t,e=!1,n=!1,r=!0,i,o,s,a)=>{let u;if(i&&(u=s?i(t,o,s,a):i(t)),void 0!==u)return u;if(!We(t))return t;const c=Array.isArray(t),l=Ft(t);if(c){if(u=(t=>{const e=t.length;let n=new t.constructor(e);return e&&"string"==typeof t[0]&&hasOwnProperty.call(t,"index")&&(n.index=t.index,n.input=t.input),n})(t),!e)return Vt(t,u)}else{const r="function"==typeof t;if(l===A||l===v||r&&!s){if(u=n||r?{}:Ut(t),!e)return n?fe(t,jt(t,Object.keys(t),u)):((t,e)=>jt(t,qt(t),e))(t,Object.assign(u,t))}else{if(r||!z[l])return s?t:{};u=((t,e,n)=>{const r=t.constructor;switch(e){case N:return zt(t);case y:case b:return new r(+t);case L:return function(t,e){const n=e?zt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case O:case M:case I:case R:case j:case D:case B:case V:case F:return Gt(t,n);case _:case E:case T:return new r(t);case k:return(t=>{const e=new t.constructor(t.source,/\w*$/.exec(t));return e.lastIndex=t.lastIndex,e})(t);case S:return new r;case P:return Symbol.prototype.valueOf?Object(Symbol.prototype.valueOf.call(t)):{}}})(t,l,e)}}a||(a=new Ge);const h=a.get(t);if(h)return h;if(a.set(t,u),(t=>Ot(t)&&Ft(t)==_)(t))return t.forEach((o,s)=>{u.set(s,he(o,e,n,r,i,s,t,a))}),u;if((t=>Ot(t)&&Ft(t)==S)(t))return t.forEach(o=>{u.add(he(o,e,n,r,i,o,t,a))}),u;if(Ht(t))return u;const f=c?void 0:(r?n?Xt:$t:n?ye:Pt)(t);return(f||t).forEach((o,s)=>{f&&(o=t[s=o]),Rt(u,s,he(o,e,n,r,i,s,t,a))}),u},fe=(t,e)=>jt(t,Wt(t),e),de=(t,e)=>e.length<2?t:ae(t,e.slice(0,-1)),pe=(t,e,n)=>{if(!We(t))return t;const r=(e=se(e,t)).length,i=r-1;let o=-1,s=t;for(;null!=s&&++o<r;){const t=le(e[o]);let r=n;if(o!=i){const n=s[t];r=void 0,void 0===r&&(r=We(n)?n:ge(e[o+1])?[]:{})}Rt(s,t,r),s=s[t]}return t},ge=(t,e)=>{const n=typeof t;return!!(e=null==e?Number.MAX_SAFE_INTEGER:e)&&("number"===n||"symbol"!==n&&_t.test(t))&&t>-1&&t%1==0&&t<e},ve=(t,e)=>{e=se(e,t),t=de(t,e);const n=e[e.length-1];return null==t||delete t[le(n)]},me=t=>{const e=typeof t;return"string"===e||"number"===e||"symbol"===e||"boolean"===e?"__proto__"!==t:null===t},ye=t=>{const e=[];for(const n in t)e.push(n);return e},be=(t,e)=>{if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};function xe(t,e=!1){return(n,...r)=>{let i=-1,o=r.length,s=o>1?r[o-1]:void 0;const a=o>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):e?(t,e)=>{if(Array.isArray(t)&&!Array.isArray(e))return e}:void 0,a&&Mt(r[0],r[1],a)&&(s=o<3?void 0:s,o=1),n=Object(n);++i<o;){const e=r[i];e&&t(n,e,i,s)}return n}}const we=(t,e,n,r,i)=>{t!==e&&xn(e,(o,s)=>{if(We(o))i||(i=new Ge),_e(t,e,s,n,we,r,i);else{let n=r?r(t[s],o,`${s}`,t,e,i):void 0;void 0===n&&(n=o),Ee(t,s,n)}})},_e=(t,e,n,r,i,o,s)=>{const a=be(t,n),u=be(e,n),c=s.get(u);if(c)return void Ee(t,n,c);let l=o?o(a,u,`${n}`,t,e,s):void 0,h=void 0===l;if(h){const t=Array.isArray(u),e=!t&&Ht(u);l=u,t||e?Array.isArray(a)?l=a:Ot(a)&&Dt(a)?l=Vt(a):e?(h=!1,l=Gt(u,!0)):l=[]:cn(u)||Be(u)?(l=a,Be(a)?l=(t=>{t=Object(t);const e={};for(const n in t)e[n]=t[n];return e})(a):"function"!=typeof a&&We(a)||(l=Ut(u))):h=!1}h&&(s.set(u,l),i(l,u,r,o,s),s.delete(u)),Ee(t,n,l)},Ee=(t,e,n)=>{(void 0!==n&&!Lt(t[e],n)||void 0===n&&!(e in t))&&Rt(t,e,n)},Ae=(t,e)=>{if(null==t)return t;if(!Dt(t))return((t,e)=>t&&function(t,e,n){const r=Object(t),i=n(t);let{length:o}=i,s=-1;for(;o--;){const t=i[++s];if(!1===e(r[t],t,r))break}return t}(t,e,Pt))(t,e);const n=t.length,r=Object(t);let i=-1;for(;++i<n&&!1!==e(r[i],i,r););return t},ke=Set&&1/ie(new Set([void 0,-0]))[1]==1/0?t=>new Set(t):()=>{};function Se(t,e,n,r,i,o){return We(t)&&We(e)&&(o.set(e,t),we(t,e,void 0,Se,o),o.delete(e)),t}function Te(t,e,n){e=e.length?e.map(t=>Array.isArray(t)?e=>ae(e,1===t.length?t[0]:t):t):[t=>t];let r=-1,i=-1;const o=Dt(t)?new Array(t.length):[];return Ae(t,t=>{const n=e.map(e=>e(t));o[++i]={criteria:n,index:++r,value:t}}),function(t){let{length:e}=t;for(t.sort((t,e)=>function(t,e,n){let r=-1;const i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){const t=r<a?n[r]:null,e=(t&&"function"==typeof t?t:ue)(i[r],o[r]);if(e)return t&&"function"!=typeof t?e*("desc"==t?-1:1):e}return t.index-e.index}(t,e,n));e--;)t[e]=t[e].value;return t}(o)}function Pe(t){return t==t&&!We(t)}function Ce(t,e){return n=>null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}function Ne(t,e){return null!=t&&Fe(t,e,Ve)}function Le(t){const e=function(t){const e=Pt(t);let n=e.length;for(;n--;){const r=e[n],i=t[r];e[n]=[r,i,Pe(i)]}return e}(t);return 1===e.length&&e[0][2]?Ce(e[0][0],e[0][1]):n=>n===t||function(t,e,n){let r=n.length;const i=r;if(null==t)return!i;let o,s;for(t=Object(t);r--;)if(o=n[r],o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1;for(;++r<i;){o=n[r];const e=o[0],i=t[e],a=o[1];if(o[2]){if(void 0===i&&!(e in t))return!1}else{const t=new Ge;if(!(void 0===s?Zt(a,i,t):s))return!1}}return!0}(n,0,e)}function Oe(t){return"function"==typeof t?t:null==t?t=>t:"object"==typeof t?Array.isArray(t)?(e=t[0],n=t[1],oe(e)&&Pe(n)?Ce(le(e),n):t=>{const r=ae(t,e);return void 0===r&&r===n?Ne(t,e):Zt(n,r)}):Le(t):function(t){return oe(t)?(e=le(t),t=>null==t?void 0:t[e]):function(t){return e=>ae(e,t)}(t);var e}(t);var e,n}function Me(){const t=Oe;return arguments.length?t(arguments[0],arguments[1]):t}const Ie=(t,e,n,r)=>{let i=-1;const o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n},Re=(t,e,n,r,i)=>(i(t,(t,i,o)=>{n=r?(r=!1,t):e(n,t,i,o)}),n),je=t=>Array.isArray(t)||Be(t)||!(!t||!t[Symbol.isConcatSpreadable]);function De(t,e,n,r,i){let o=-1;const s=t.length;for(n||(n=je),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?De(a,e-1,n,r,i):i.push(...a):r||(i[i.length]=a)}return i}const Be=t=>Ot(t)&&"[object Arguments]"==Ft(t),Ve=(t,e)=>null!=t&&e in Object(t),Fe=(t,e,n)=>{for(var r,i=-1,o=(e=se(e,t)).length,s=!1;++i<o;){var a=le(e[i]);if(!(s=null!=t&&n(t,a)))break;t=t[a]}return s||++i!=o?s:!!(o=null==t?0:t.length)&&"number"==typeof(r=o)&&r>-1&&r%1==0&&r<=Number.MAX_SAFE_INTEGER&&ge(a,o)&&(Array.isArray(t)||Be(t))},ze=t=>{if(!t)return"";const e=kt(t)?St(t):void 0,n=e?e[0]:t[0],r=e?((t,e,n)=>{const{length:r}=t;return n=void 0===n?r:n,t.slice(1,n)})(e).join(""):t.slice(1);return n.toUpperCase()+r};class Ge{constructor(t){const e=this.__data__=new Ue(t);this.size=e.size}clear(){this.__data__=new Ue,this.size=0}delete(t){const e=this.__data__,n=e.delete(t);return this.size=e.size,n}get(t){return this.__data__.get(t)}has(t){return this.__data__.has(t)}set(t,e){let n=this.__data__;if(n instanceof Ue){const r=n.__data__;if(r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qe(r)}return n.set(t,e),this.size=n.size,this}}class Ue{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.clear();++e<n;){const n=t[e];this.set(n[0],n[1])}}clear(){this.__data__=[],this.size=0}delete(t){const e=this.__data__,n=Nt(e,t);return!(n<0)&&(n==e.length-1?e.pop():e.splice(n,1),--this.size,!0)}get(t){const e=this.__data__,n=Nt(e,t);return n<0?void 0:e[n][1]}has(t){return Nt(this.__data__,t)>-1}set(t,e){const n=this.__data__,r=Nt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}}class qe{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.clear();++e<n;){const n=t[e];this.set(n[0],n[1])}}clear(){this.size=0,this.__data__={hash:new He,map:new Map,string:new He}}delete(t){const e=Yt(this,t).delete(t);return this.size-=e?1:0,e}get(t){return Yt(this,t).get(t)}has(t){return Yt(this,t).has(t)}set(t,e){const n=Yt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}}class He{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.clear();++e<n;){const n=t[e];this.set(n[0],n[1])}}clear(){this.__data__=Object.create(null),this.size=0}delete(t){const e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}get(t){const e=this.__data__[t];return e===dt?void 0:e}has(t){return void 0!==this.__data__[t]}set(t,e){const n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=void 0===e?dt:e,this}}class $e{constructor(t){let e=-1;const n=null==t?0:t.length;for(this.__data__=new qe;++e<n;)this.add(t[e])}add(t){return this.__data__.set(t,dt),this}has(t){return this.__data__.has(t)}}$e.prototype.push=$e.prototype.add;const We=function(t){return!!t&&("object"==typeof t||"function"==typeof t)},Xe=function(t){var e=Object.prototype.toString;return"number"==typeof t||!!t&&"object"==typeof t&&e.call(t)===E},Ye=function(t){var e=Object.prototype.toString;return"string"==typeof t||!!t&&"object"==typeof t&&e.call(t)===T},Ze=xe((t,e)=>{if(It(e)||Dt(e))jt(e,Pt(e),t);else for(var n in e)hasOwnProperty.call(e,n)&&Rt(t,n,e[n])}),Je=(t,...e)=>{let n=-1,r=e.length;const i=r>2?e[2]:void 0;for(i&&Mt(e[0],e[1],i)&&(r=1);++n<r;){const r=e[n];if(null==r)continue;const i=Object.keys(r),o=i.length;let s=-1;for(;++s<o;){const e=i[s],n=t[e];(void 0===n||Lt(n,Object.prototype[e])&&!hasOwnProperty.call(t,e))&&(t[e]=r[e])}}return t},Ke=function(...t){return t.push(void 0,Se),An.apply(void 0,t)},Qe=(t,e,...n)=>{let r=-1;const i="function"==typeof e,o=Dt(t)?new Array(t.length):[];return Ae(t,t=>{o[++r]=i?e.apply(t,n):tn(t,e,...n)}),o},tn=(t,e,...n)=>{e=se(e,t);const r=null==(t=de(t,e))?t:t[le(function(t){const e=null==t?0:t.length;return e?t[e-1]:void 0}(e))];return null==r?void 0:r.apply(t,n)},en=(t,e,n)=>{let r=0,i=null==t?0:t.length;if(0==i)return 0;const o=(e=(n=Me(n,2))(e))!=e,s=null===e,a=Bt(e),u=void 0===e;for(;r<i;){let c;const l=Math.floor((r+i)/2),h=n(t[l]),f=void 0!==h,d=null===h,p=h==h,g=Bt(h);c=o?p:u?p&&f:s?p&&f&&!d:a?p&&f&&!d&&!g:!d&&!g&&h<e,c?r=l+1:i=l}return Math.min(i,4294967294)},nn=(t,e)=>{let n=-1,r=(t,e)=>!(null==t||!t.length)&&t.indexOf(e)>-1;e=Me(e,2);let i=!0;const{length:o}=t,s=[];let a=s;if(o>=200){const n=e?null:ke(t);if(n)return ie(n);i=!1,r=(t,e)=>t.has(e),a=new $e}else a=e?[]:s;t:for(;++n<o;){let o=t[n];const u=e?e(o):o;if(o=0!==o?o:0,i&&u==u){let t=a.length;for(;t--;)if(a[t]===u)continue t;e&&a.push(u),s.push(o)}else r(a,u)||(a!==s&&a.push(u),s.push(o))}return s},rn=t=>he(t),on=t=>he(t,!0),sn=t=>{if(null==t)return!0;if(Dt(t)&&(Array.isArray(t)||"string"==typeof t||"function"==typeof t.splice||Ht(t)||Be(t)))return!t.length;const e=Ft(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(It(t))return!(t=>{if(!It(t))return Object.keys(t);var e=[];for(var n in Object(t))hasOwnProperty.call(t,n)&&"constructor"!=n&&e.push(n);return e})(t).length;for(const e in t)if(hasOwnProperty.call(t,e))return!1;return!0},an=(t,e)=>Zt(t,e),un=t=>"function"==typeof t,cn=t=>{if(!Ot(t)||"[object Object]"!=Ft(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},ln=t=>{if(!t)return[];if(Dt(t))return Ye(t)?St(t):Vt(t);if(Symbol.iterator&&Symbol.iterator in Object(t)){const e=t[Symbol.iterator]();let n;const r=[];for(;!(n=e.next()).done;)r.push(n.value);return r}const e=Ft(t);return(e==_?re:e==S?ie:Tt)(t)},hn=(t,e=[])=>{if(null==t)return[];const n=e.length;return n>1&&Mt(t,e[0],e[1])?e=[]:n>2&&Mt(e[0],e[1],e[2])&&(e=[e[0]]),Array.isArray(e)||(e=[Me(e,2)]),Te(t,e.flat(1),[])},fn=t=>null!=t&&t.length?De(t,1/0):[],dn=(t,...e)=>Dt(t)?ce(t,e):[],pn=(t,...e)=>Ot(t)&&Dt(t)?ce(t,e.flat(1)):[],gn=(...t)=>{const e=t.flat(1);return nn(e)},vn=(t,e)=>{if(null==t)return!1;"string"==typeof e&&(e=e.split("."));let n=-1,r=t;for(;++n<e.length;){if(!r||!hasOwnProperty.call(r,e[n]))return!1;r=r[e[n]]}return!0},mn=(t,e,n)=>{let r=-1,i=(e=se(e,t)).length;for(i||(i=1,t=void 0);++r<i;){let o=null==t?void 0:t[le(e[r])];void 0===o&&(r=i,o=n),t="function"==typeof o?o.call(t):o}return t},yn=(t,...e)=>{let n={};if(null==t)return n;let r=!1;e=e.flat(1).map(e=>(e=se(e,t),r||(r=e.length>1),e)),jt(t,Xt(t),n),r&&(n=he(n,!0,!0,!0,t=>cn(t)?void 0:t));let i=e.length;for(;i--;)ve(n,e[i]);return n},bn=(t,...e)=>null==t?{}:((t,e)=>((t,e,n)=>{let r=-1;const i=e.length,o={};for(;++r<i;){const i=e[r],s=ae(t,i);n(s,i)&&pe(o,se(i,t),s)}return o})(t,e,(e,n)=>Ne(t,n)))(t,e.flat(1/0)),xn=(t,e=t=>t)=>{let n=-1;const r=Object(t),i=Dt(t)?Ct(t,!0):ye(t);let o=i.length;for(;o--;){const t=i[++n];if(!1===e(r[t],t,r))break}},wn=(t="")=>((t,e)=>{if(void 0===e){const e=Et(t)?(t=>t.match(ft))(t):(t=>t.match(At))(t);return e||[]}return t.match(e)||[]})(`${t}`.replace(/['\u2019]/g,"")).reduce((t,e,n)=>(e=e.toLowerCase(),t+(n?ze(e):e)),"");let _n=0;const En=(t="")=>`${t}`+ ++_n,An=xe((t,e,n,r)=>{we(t,e,n,r)},!0),kn=class{constructor(){this.map=new WeakMap}has(t,e){return void 0===e?this.map.has(t):e in this.map.get(t)}create(t){return this.has(t)||this.map.set(t,Object.create(null)),this.get(t)}get(t,e){if(!this.has(t))return;const n=this.map.get(t);return void 0===e?n:n[e]}set(t,e,n){if(void 0===e)return;const r=this.create(t);"string"==typeof e?r[e]=n:Object.assign(r,e)}remove(t,e){this.has(t)&&(void 0===e?this.map.delete(t):delete this.map.get(t)[e])}},Sn=new kn,Tn=new kn,Pn=function(t,e){if(!(this instanceof Pn))return new Pn(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Cn:Nn,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&Object.assign(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this.envelope=!0};function Cn(){return!0}function Nn(){return!1}Pn.prototype={constructor:Pn,isDefaultPrevented:Nn,isPropagationStopped:Nn,isImmediatePropagationStopped:Nn,preventDefault:function(){const t=this.originalEvent;this.isDefaultPrevented=Cn,t&&t.preventDefault()},stopPropagation:function(){const t=this.originalEvent;this.isPropagationStopped=Cn,t&&t.stopPropagation()},stopImmediatePropagation:function(){const t=this.originalEvent;this.isImmediatePropagationStopped=Cn,t&&t.stopImmediatePropagation(),this.stopPropagation()}},["altKey","bubbles","cancelable","changedTouches","ctrlKey","detail","eventPhase","metaKey","pageX","pageY","shiftKey","view","char","code","charCode","key","keyCode","button","buttons","clientX","clientY","offsetX","offsetY","pointerId","pointerType","screenX","screenY","targetTouches","toElement","touches","which"].forEach(t=>function(t){Object.defineProperty(Pn.prototype,t,{enumerable:!0,configurable:!0,get:function(){return this.originalEvent?this.originalEvent[t]:void 0},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})}(t));const Ln="undefined"!=typeof window?window.document:null,On=Ln&&Ln.documentElement,Mn=/^([^.]*)(?:\.(.+)|)/,In=/[^\x20\t\r\n\f]+/g,Rn=function(t){return new Rn.Dom(t)};Rn.fn=Rn.prototype={constructor:Rn,length:0},Rn.guid=1,Rn.data=Tn,Rn.merge=function(t,e){let n=+e.length,r=t.length;for(let i=0;i<n;i++)t[r++]=e[i];return t.length=r,t},Rn.parseHTML=function(t){const e=Ln.implementation.createHTMLDocument(),n=e.createElement("base");n.href=Ln.location.href,e.head.appendChild(n),e.body.innerHTML=t;const r=e.getElementsByTagName("script");for(let t=0;t<r.length;t++)r[t].remove();return Array.from(e.body.childNodes)},"function"==typeof Symbol&&(Rn.fn[Symbol.iterator]=Array.prototype[Symbol.iterator]),Rn.fn.toArray=function(){return Array.from(this)},Rn.fn.pushStack=function(t){const e=Rn.merge(this.constructor(),t);return e.prevObject=this,e},Rn.fn.find=function(t){const[e]=this,n=this.pushStack([]);if(!e)return n;const{nodeType:r}=e;return 1!==r&&9!==r&&11!==r||("string"!=typeof t?e!==t&&e.contains(t)&&Rn.merge(n,[t]):Rn.merge(n,e.querySelectorAll(t))),n},Rn.fn.add=function(t){const e=Rn(t).toArray(),n=this.toArray(),r=this.pushStack([]);return Rn.merge(r,nn(n.concat(e))),r},Rn.fn.addBack=function(){return this.add(this.prevObject)},Rn.fn.filter=function(t){const e=[];for(let n=0;n<this.length;n++){const r=this[n];r.matches(t)&&e.push(r)}return this.pushStack(e)};const jn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Dn=function(t){if(!t)return this;if("function"==typeof t)throw new Error("function not supported");if(arguments.length>1)throw new Error("selector with context not supported");if(t.nodeType)return this[0]=t,this.length=1,this;let e;if("<"===(n=t+"")[0]&&">"===n[n.length-1]&&n.length>=3)e=[null,t,null];else{if("string"!=typeof t)return Rn.merge(this,t);e=jn.exec(t)}var n;if(!e||!e[1])return Bn.find(t);if(e[1])return Rn.merge(this,Rn.parseHTML(e[1])),this;const r=Ln.getElementById(e[2]);return r&&(this[0]=r,this.length=1),this};Rn.Dom=Dn,Dn.prototype=Rn.fn,Rn.Event=Pn,Rn.event={special:Object.create(null)},Rn.event.has=function(t,e){const n=Sn.get(t,"events");return!!n&&(!e||Array.isArray(n[e])&&n[e].length>0)},Rn.event.on=function(t,e,n,r,i,o){if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=void 0);for(let i in e)Rn.event.on(t,i,n,r,e[i],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!i)return t;if(1===o){const t=i;i=function(e){return Rn().off(e),t.apply(this,arguments)},i.guid=t.guid||(t.guid=Rn.guid++)}for(let o=0;o<t.length;o++)Rn.event.add(t[o],e,i,r,n)},Rn.event.add=function(t,e,n,r,i){if("object"!=typeof t)return;const o=Sn.create(t);let s,a,u;n.handler&&(s=n,n=s.handler,i=s.selector),i&&On.matches(i),n.guid||(n.guid=Rn.guid++),(a=o.events)||(a=o.events=Object.create(null)),(u=o.handle)||(u=o.handle=function(e){return void 0!==Rn?Rn.event.dispatch.apply(t,arguments):void 0});const c=(e||"").match(In)||[""];let l=c.length;for(;l--;){const[,e,o=""]=Mn.exec(c[l]);if(!e)continue;const h=o.split(".").sort();let f=Rn.event.special[e];const d=f&&(i?f.delegateType:f.bindType)||e;f=Rn.event.special[d];const p=Object.assign({type:d,origType:e,data:r,handler:n,guid:n.guid,selector:i,namespace:h.join(".")},s);let g;(g=a[d])||(g=a[d]=[],g.delegateCount=0,f&&f.setup&&!1!==f.setup.call(t,r,h,u)||t.addEventListener&&t.addEventListener(d,u)),f&&f.add&&(f.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),i?g.splice(g.delegateCount++,0,p):g.push(p)}},Rn.event.remove=function(t,e,n,r,i){const o=Sn.get(t);if(!o||!o.events)return;const s=o.events,a=(e||"").match(In)||[""];let u=a.length;for(;u--;){const[,e,c=""]=Mn.exec(a[u]);if(!e){for(const e in s)Rn.event.remove(t,e+a[u],n,r,!0);continue}const l=Rn.event.special[e],h=l&&(r?l.delegateType:l.bindType)||e,f=s[h];if(!f||0===f.length)continue;const d=c.split(".").sort(),p=c?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g=f.length;let v=g;for(;v--;){const o=f[v];!i&&e!==o.origType||n&&n.guid!==o.guid||p&&!p.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(f.splice(v,1),o.selector&&f.delegateCount--,l&&l.remove&&l.remove.call(t,o))}g&&0===f.length&&(l&&l.teardown&&!1!==l.teardown.call(t,d,o.handle)||t.removeEventListener&&t.removeEventListener(h,o.handle),delete s[h])}sn(s)&&(Sn.remove(t,"handle"),Sn.remove(t,"events"))},Rn.event.dispatch=function(t){const e=this,n=Rn.event.fix(t);n.delegateTarget=e;const r=Array.from(arguments);r[0]=n;const i=Sn.get(e,"events"),o=i&&i[n.type]||[],s=Rn.event.special[n.type];if(s&&s.preDispatch&&!1===s.preDispatch.call(e,n))return;const a=Rn.event.handlers.call(e,n,o);let u,c=0;for(;(u=a[c++])&&!n.isPropagationStopped();){n.currentTarget=u.elem;let t,e=0;for(;(t=u.handlers[e++])&&!n.isImmediatePropagationStopped();){n.handleObj=t,n.data=t.data;const e=Rn.event.special[t.origType];let i;i=e&&e.handle?e.handle:t.handler;const o=i.apply(u.elem,r);void 0!==o&&!1===(n.result=o)&&(n.preventDefault(),n.stopPropagation())}}return s&&s.postDispatch&&s.postDispatch.call(e,n),n.result},Rn.event.handlers=function(t,e){const n=e.delegateCount,r=[];if(n&&!("click"===t.type&&t.button>=1))for(let i=t.target;i!==this;i=i.parentNode||this)if(1===i.nodeType&&("click"!==t.type||!0!==i.disabled)){const t=[],o={};for(let r=0;r<n;r++){const n=e[r],s=n.selector+" ";void 0===o[s]&&(o[s]=i.matches(s)),o[s]&&t.push(n)}t.length&&r.push({elem:i,handlers:t})}return n<e.length&&r.push({elem:this,handlers:e.slice(n)}),r},Rn.event.fix=function(t){return t.envelope?t:new Pn(t)};const Bn=Rn(Ln),{round:Vn,floor:Fn,PI:zn}=Math,Gn={linear:function(t,e,n){var r=t[1]-t[0],i=e[1]-e[0];return(n-t[0])/r*i+e[0]||0}},Un=function(t){return t%360+(t<0?360:0)},qn=function(t,e){return e*Vn(t/e)},Hn=function(t){return 180*t/zn%360},$n=function(t,e){return(t=(e=e||!1)?t:t%360)*zn/180},Wn=function(t,e){if(void 0===e)e=void 0===t?1:t,t=0;else if(e<t){const n=t;t=e,e=n}return Fn(Math.random()*(e-t+1)+t)},{cos:Xn,sin:Yn,atan2:Zn}=Math,Jn=function(t,e){var n=$n(t.y),r=$n(e.y),i=t.x,o=e.x,s=$n(o-i),a=Yn(s)*Xn(r),u=Xn(n)*Yn(r)-Yn(n)*Xn(r)*Xn(s),c=Hn(Zn(a,u))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},Kn=function(t,e){var n=t.x,r=t.y;return(n-=e.x)*n+(r-=e.y)*r},Qn=function(t,e){return Math.sqrt(Kn(t,e))},tr={Point:1,Line:2,Ellipse:3,Rect:4,Polyline:5,Polygon:6,Curve:7,Path:8},{abs:er,cos:nr,sin:rr,sqrt:ir,min:or,max:sr,atan2:ar,round:ur,pow:cr,PI:lr}=Math,hr=function(t,e){if(!(this instanceof hr))return new hr(t,e);if("string"==typeof t){var n=t.split(-1===t.indexOf("@")?" ":"@");t=parseFloat(n[0]),e=parseFloat(n[1])}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};hr.fromPolar=function(t,e,n){n=new hr(n);var r=er(t*nr(e)),i=er(t*rr(e)),o=Un(Hn(e));return o<90?i=-i:o<180?(r=-r,i=-i):o<270&&(r=-r),new hr(n.x+r,n.y+i)},hr.random=function(t,e,n,r){return new hr(Wn(t,e),Wn(n,r))},hr.prototype={type:tr.Point,chooseClosest:function(t){var e=t.length;if(1===e)return new hr(t[0]);for(var n=null,r=1/0,i=0;i<e;i++){var o=new hr(t[i]),s=this.squaredDistance(o);s<r&&(n=o,r=s)}return n},adhereToRect:function(t){return t.containsPoint(this)||(this.x=or(sr(this.x,t.x),t.x+t.width),this.y=or(sr(this.y,t.y),t.y+t.height)),this},angleBetween:function(t,e){var n=this.equals(t)||this.equals(e)?NaN:this.theta(e)-this.theta(t);return n<0&&(n+=360),n},bearing:function(t){return Jn(this,t)},changeInAngle:function(t,e,n){return this.clone().offset(-t,-e).theta(n)-this.theta(n)},clone:function(){return new hr(this)},cross:function(t,e){return t&&e?(e.x-this.x)*(t.y-this.y)-(e.y-this.y)*(t.x-this.x):NaN},difference:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),new hr(this.x-(t||0),this.y-(e||0))},distance:function(t){return Qn(this,t)},dot:function(t){return t?this.x*t.x+this.y*t.y:NaN},equals:function(t){return!!t&&this.x===t.x&&this.y===t.y},lerp:function(t,e){var n=this.x,r=this.y;return new hr((1-e)*n+e*t.x,(1-e)*r+e*t.y)},magnitude:function(){return ir(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return er(t.x-this.x)+er(t.y-this.y)},move:function(t,e){var n=$n(new hr(t).theta(this));return this.offset(nr(n)*e,-rr(n)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x+=t||0,this.y+=e||0,this},reflection:function(t){return new hr(t).move(this,this.distance(t))},rotate:function(t,e){if(0===e)return this;t=t||new hr(0,0),e=$n(Un(-e));var n=nr(e),r=rr(e),i=n*(this.x-t.x)-r*(this.y-t.y)+t.x,o=r*(this.x-t.x)+n*(this.y-t.y)+t.y;return this.x=i,this.y=o,this},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=cr(10,t)}return this.x=ur(this.x*e)/e,this.y=ur(this.y*e)/e,this},scale:function(t,e,n){return n=n&&new hr(n)||new hr(0,0),this.x=n.x+t*(this.x-n.x),this.y=n.y+e*(this.y-n.y),this},snapToGrid:function(t,e){return this.x=qn(this.x,t),this.y=qn(this.y,e||t),this},squaredDistance:function(t){return Kn(this,t)},theta:function(t){var e=-((t=new hr(t)).y-this.y),n=t.x-this.x,r=ar(e,n);return r<0&&(r=2*lr+r),180*r/lr},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&new hr(t)||new hr(0,0);var e=this.x,n=this.y;return this.x=ir((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y)),this.y=$n(t.theta(new hr(e,n))),this},toString:function(){return this.x+"@"+this.y},serialize:function(){return this.x+","+this.y},update:function(t,e){return Object(t)===t&&(e=t.y,t=t.x),this.x=t||0,this.y=e||0,this},vectorAngle:function(t){return new hr(0,0).angleBetween(this,t)}},hr.prototype.translate=hr.prototype.offset;const fr=hr,{max:dr,min:pr}=Math,gr=function(t,e){return this instanceof gr?t instanceof gr?new gr(t.start,t.end):(this.start=new hr(t),void(this.end=new hr(e))):new gr(t,e)};gr.prototype={type:tr.Line,angle:function(){var t=new hr(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)},bbox:function(){var t=pr(this.start.x,this.end.x),e=pr(this.start.y,this.end.y),n=dr(this.start.x,this.end.x),r=dr(this.start.y,this.end.y);return new Cr(t,e,n-t,r-e)},bearing:function(){return Jn(this.start,this.end)},clone:function(){return new gr(this.start,this.end)},closestPoint:function(t){return this.pointAt(this.closestPointNormalizedLength(t))},closestPointLength:function(t){return this.closestPointNormalizedLength(t)*this.length()},closestPointNormalizedLength:function(t){var e=this.vector().dot(new gr(this.start,t).vector()),n=pr(1,dr(0,e/this.squaredLength()));return n!=n?0:n},closestPointTangent:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))},containsPoint:function(t){var e=this.start,n=this.end;if(0!==e.cross(t,n))return!1;var r=this.length();return!(new gr(e,t).length()>r||new gr(t,n).length()>r)},divideAt:function(t){var e=this.pointAt(t);return[new gr(this.start,e),new gr(e,this.end)]},divideAtLength:function(t){var e=this.pointAtLength(t);return[new gr(this.start,e),new gr(e,this.end)]},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y},intersect:function(t,e){if(t&&t.intersectionWithLine){var n=t.intersectionWithLine(this,e);return n&&t instanceof gr&&(n=n[0]),n}return null},intersectionWithLine:function(t){var e=new hr(this.end.x-this.start.x,this.end.y-this.start.y),n=new hr(t.end.x-t.start.x,t.end.y-t.start.y),r=e.x*n.y-e.y*n.x,i=new hr(t.start.x-this.start.x,t.start.y-this.start.y),o=i.x*n.y-i.y*n.x,s=i.x*e.y-i.y*e.x;if(0===r||o*r<0||s*r<0)return null;if(r>0){if(o>r||s>r)return null}else if(o<r||s<r)return null;return[new hr(this.start.x+o*e.x/r,this.start.y+o*e.y/r)]},isDifferentiable:function(){return!this.start.equals(this.end)},length:function(){return Qn(this.start,this.end)},midpoint:function(){return new hr((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},parallel:function(t){const e=this.clone();if(!this.isDifferentiable())return e;const{start:n,end:r}=e,i=n.clone().rotate(r,270),o=r.clone().rotate(n,90);return n.move(o,t),r.move(i,t),e},pointAt:function(t){var e=this.start,n=this.end;return t<=0?e.clone():t>=1?n.clone():e.lerp(n,t)},pointAtLength:function(t){var e=this.start,n=this.end,r=!0;t<0&&(r=!1,t=-t);var i=this.length();return t>=i?r?n.clone():e.clone():this.pointAt((r?t:i-t)/i)},pointOffset:function(t){t=new hr(t);var e=this.start,n=this.end;return((n.x-e.x)*(t.y-e.y)-(n.y-e.y)*(t.x-e.x))/this.length()},rotate:function(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this},round:function(t){return this.start.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.end.scale(t,e,n),this},setLength:function(t){var e=this.length();if(!e)return this;var n=t/e;return this.scale(n,n,this.start)},squaredLength:function(){return Kn(this.start,this.end)},tangentAt:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAt(t),i=new gr(e,n);return i.translate(r.x-e.x,r.y-e.y),i},tangentAtLength:function(t){if(!this.isDifferentiable())return null;var e=this.start,n=this.end,r=this.pointAtLength(t),i=new gr(e,n);return i.translate(r.x-e.x,r.y-e.y),i},toString:function(){return this.start.toString()+" "+this.end.toString()},serialize:function(){return this.start.serialize()+" "+this.end.serialize()},translate:function(t,e){return this.start.translate(t,e),this.end.translate(t,e),this},vector:function(){return new hr(this.end.x-this.start.x,this.end.y-this.start.y)}},gr.prototype.intersection=gr.prototype.intersect;const vr=gr,{sqrt:mr,round:yr,pow:br}=Math,xr=function(t,e,n){return this instanceof xr?t instanceof xr?new xr(new hr(t.x,t.y),t.a,t.b):(t=new hr(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=n)):new xr(t,e,n)};xr.fromRect=function(t){return t=new Cr(t),new xr(t.center(),t.width/2,t.height/2)},xr.prototype={type:tr.Ellipse,bbox:function(){return new Cr(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},center:function(){return new hr(this.x,this.y)},clone:function(){return new xr(this)},containsPoint:function(t){return this.normalizedDistance(t)<=1},equals:function(t){return!!t&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.a+=2*t,this.b+=2*e,this},intersectionWithLine:function(t){var e=[],n=t.start,r=t.end,i=this.a,o=this.b,s=t.vector(),a=n.difference(new hr(this)),u=new hr(s.x/(i*i),s.y/(o*o)),c=new hr(a.x/(i*i),a.y/(o*o)),l=s.dot(u),h=s.dot(c),f=h*h-l*(a.dot(c)-1);if(f<0)return null;if(f>0){var d=mr(f),p=(-h-d)/l,g=(-h+d)/l;if((p<0||1<p)&&(g<0||1<g))return null;0<=p&&p<=1&&e.push(n.lerp(r,p)),0<=g&&g<=1&&e.push(n.lerp(r,g))}else{var v=-h/l;if(!(0<=v&&v<=1))return null;e.push(n.lerp(r,v))}return e},intersectionWithLineFromCenterToPoint:function(t,e){t=new hr(t),e&&t.rotate(new hr(this.x,this.y),e);var n,r=t.x-this.x,i=t.y-this.y;if(0===r)return n=this.bbox().pointNearestToPoint(t),e?n.rotate(new hr(this.x,this.y),-e):n;var o=i/r,s=o*o,a=this.a*this.a,u=this.b*this.b,c=mr(1/(1/a+s/u)),l=o*(c=r<0?-c:c);return n=new hr(this.x+c,this.y+l),e?n.rotate(new hr(this.x,this.y),-e):n},normalizedDistance:function(t){var e=t.x,n=t.y,r=this.a,i=this.b,o=this.x,s=this.y;return(e-o)*(e-o)/(r*r)+(n-s)*(n-s)/(i*i)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=br(10,t)}return this.x=yr(this.x*e)/e,this.y=yr(this.y*e)/e,this.a=yr(this.a*e)/e,this.b=yr(this.b*e)/e,this},tangentTheta:function(t){var e,n,r=t.x,i=t.y,o=this.a,s=this.b,a=this.bbox().center(),u=a.x,c=a.y,l=r>a.x+o/2,h=r<a.x-o/2;return l||h?n=o*o/(r-u)-o*o*(i-c)*((e=r>a.x?i-30:i+30)-c)/(s*s*(r-u))+u:e=s*s/(i-c)-s*s*(r-u)*((n=i>a.y?r+30:r-30)-u)/(o*o*(i-c))+c,new hr(n,e).theta(t)},toString:function(){return new hr(this.x,this.y).toString()+" "+this.a+" "+this.b}};const wr=xr,{abs:_r,cos:Er,sin:Ar,min:kr,max:Sr,round:Tr,pow:Pr}=Math,Cr=function(t,e,n,r){if(!(this instanceof Cr))return new Cr(t,e,n,r);Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===n?0:n,this.height=void 0===r?0:r};Cr.fromEllipse=function(t){return t=new xr(t),new Cr(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},Cr.fromPointUnion=function(...t){if(0===t.length)return null;const e=new hr;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,u=e.y;a<n&&(n=a),a>i&&(i=a),u<r&&(r=u),u>o&&(o=u)}return new Cr(n,r,i-n,o-r)},Cr.fromRectUnion=function(...t){if(0===t.length)return null;const e=new Cr;let n,r,i,o;n=r=1/0,i=o=-1/0;for(let s=0;s<t.length;s++){e.update(t[s]);const a=e.x,u=e.y,c=a+e.width,l=u+e.height;a<n&&(n=a),c>i&&(i=c),u<r&&(r=u),l>o&&(o=l)}return new Cr(n,r,i-n,o-r)},Cr.prototype={type:tr.Rect,bbox:function(t){return this.clone().rotateAroundCenter(t)},rotateAroundCenter:function(t){if(!t)return this;const{width:e,height:n}=this,r=$n(t),i=_r(Ar(r)),o=_r(Er(r)),s=e*o+n*i,a=e*i+n*o;return this.x+=(e-s)/2,this.y+=(n-a)/2,this.width=s,this.height=a,this},bottomLeft:function(){return new hr(this.x,this.y+this.height)},bottomLine:function(){return new gr(this.bottomLeft(),this.bottomRight())},bottomMiddle:function(){return new hr(this.x+this.width/2,this.y+this.height)},center:function(){return new hr(this.x+this.width/2,this.y+this.height/2)},clone:function(){return new Cr(this)},containsPoint:function(t,e){let n,r;return t&&"string"!=typeof t?({x:n=0,y:r=0}=t):({x:n,y:r}=new hr(t)),e&&e.strict?n>this.x&&n<this.x+this.width&&r>this.y&&r<this.y+this.height:n>=this.x&&n<=this.x+this.width&&r>=this.y&&r<=this.y+this.height},containsRect:function(t){var e=new Cr(this).normalize(),n=new Cr(t).normalize(),r=e.width,i=e.height,o=n.width,s=n.height;if(!(r&&i&&o&&s))return!1;var a=e.x,u=e.y,c=n.x,l=n.y;return o+=c,r+=a,s+=l,i+=u,a<=c&&o<=r&&u<=l&&s<=i},corner:function(){return new hr(this.x+this.width,this.y+this.height)},equals:function(t){var e=new Cr(this).normalize(),n=new Cr(t).normalize();return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height},inflate:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},intersect:function(t){var e=this.origin(),n=this.corner(),r=t.origin(),i=t.corner();if(i.x<=e.x||i.y<=e.y||r.x>=n.x||r.y>=n.y)return null;var o=Sr(e.x,r.x),s=Sr(e.y,r.y);return new Cr(o,s,kr(n.x,i.x)-o,kr(n.y,i.y)-s)},intersectionWithLine:function(t){var e,n,r=this,i=[r.topLine(),r.rightLine(),r.bottomLine(),r.leftLine()],o=[],s=[],a=i.length;for(n=0;n<a;n++)null!==(e=t.intersect(i[n]))&&s.indexOf(e.toString())<0&&(o.push(e),s.push(e.toString()));return o.length>0?o:null},intersectionWithLineFromCenterToPoint:function(t,e){t=new hr(t);var n,r=new hr(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(r,e);for(var i=[this.topLine(),this.rightLine(),this.bottomLine(),this.leftLine()],o=new gr(r,t),s=i.length-1;s>=0;--s){var a=i[s].intersection(o);if(null!==a){n=a;break}}return n&&e&&n.rotate(r,-e),n},leftLine:function(){return new gr(this.topLeft(),this.bottomLeft())},leftMiddle:function(){return new hr(this.x,this.y+this.height/2)},maxRectScaleToFit:function(t,e){var n,r,i,o,s,a,u,c;t=new Cr(t),e||(e=t.center());var l=e.x,h=e.y;n=r=i=o=s=a=u=c=1/0;var f=t.topLeft();f.x<l&&(n=(this.x-l)/(f.x-l)),f.y<h&&(s=(this.y-h)/(f.y-h));var d=t.bottomRight();d.x>l&&(r=(this.x+this.width-l)/(d.x-l)),d.y>h&&(a=(this.y+this.height-h)/(d.y-h));var p=t.topRight();p.x>l&&(i=(this.x+this.width-l)/(p.x-l)),p.y<h&&(u=(this.y-h)/(p.y-h));var g=t.bottomLeft();return g.x<l&&(o=(this.x-l)/(g.x-l)),g.y>h&&(c=(this.y+this.height-h)/(g.y-h)),{sx:kr(n,r,i,o),sy:kr(s,a,u,c)}},maxRectUniformScaleToFit:function(t,e){var n=this.maxRectScaleToFit(t,e);return kr(n.sx,n.sy)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,n=this.width,r=this.height;return this.width<0&&(t=this.x+this.width,n=-this.width),this.height<0&&(e=this.y+this.height,r=-this.height),this.x=t,this.y=e,this.width=n,this.height=r,this},offset:function(t,e){return hr.prototype.offset.call(this,t,e)},origin:function(){return new hr(this.x,this.y)},pointNearestToPoint:function(t){if(t=new hr(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return new hr(this.x+this.width,t.y);case"left":return new hr(this.x,t.y);case"bottom":return new hr(t.x,this.y+this.height);case"top":return new hr(t.x,this.y)}return t.adhereToRect(this)},rightLine:function(){return new gr(this.topRight(),this.bottomRight())},rightMiddle:function(){return new hr(this.x+this.width,this.y+this.height/2)},round:function(t){let e=1;if(t)switch(t){case 1:e=10;break;case 2:e=100;break;case 3:e=1e3;break;default:e=Pr(10,t)}return this.x=Tr(this.x*e)/e,this.y=Tr(this.y*e)/e,this.width=Tr(this.width*e)/e,this.height=Tr(this.height*e)/e,this},scale:function(t,e,n){return n=this.origin().scale(t,e,n),this.x=n.x,this.y=n.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=new hr(t)).x-this.x,n=this.x+this.width-t.x,r=t.y-this.y,i=e,o="left";return n<i&&(i=n,o="right"),r<i&&(i=r,o="top"),this.y+this.height-t.y<i&&(o="bottom"),o},snapToGrid:function(t,e){var n=this.origin().snapToGrid(t,e),r=this.corner().snapToGrid(t,e);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},topLine:function(){return new gr(this.topLeft(),this.topRight())},topMiddle:function(){return new hr(this.x+this.width/2,this.y)},topRight:function(){return new hr(this.x+this.width,this.y)},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){return Cr.fromRectUnion(this,t)},update:function(t,e,n,r){return Object(t)===t&&(e=t.y,n=t.width,r=t.height,t=t.x),this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this}},Cr.prototype.bottomRight=Cr.prototype.corner,Cr.prototype.topLeft=Cr.prototype.origin,Cr.prototype.translate=Cr.prototype.offset;const Nr=Cr;function Lr(t){const e=t.trim();if(""===e)return[];const n=[],r=e.split(/\b\s*,\s*|,\s*|\s+/),i=r.length;for(let t=0;t<i;t+=2)n.push({x:+r[t],y:+r[t+1]});return n}function Or(t){const e=t.length;if(0===e)return[];const n=[];for(let r=0;r<e;r++){const e=t[r].clone();n.push(e)}return n}function Mr(t){const{abs:e}=Math;var n,r,i,o=t.length;if(0===o)return[];for(n=0;n<o;n++)(void 0===i||t[n].y<i.y||t[n].y===i.y&&t[n].x>i.x)&&(i=t[n]);var s=[];for(n=0;n<o;n++){var a=i.theta(t[n]);0===a&&(a=360);var u=[t[n],n,a];s.push(u)}if(s.sort(function(t,e){var n=t[2]-e[2];return 0===n&&(n=e[1]-t[1]),n}),s.length>2){var c=s[s.length-1];s.unshift(c)}for(var l,h,f,d,p,g,v,m={},y=[];0!==s.length;)if(h=(l=s.pop())[0],!m.hasOwnProperty(l[0]+"@@"+l[1]))for(var b=!1;!b;)if(y.length<2)y.push(l),b=!0;else{d=(f=y.pop())[0];var x=(g=(p=y.pop())[0]).cross(d,h);if(x<0)y.push(p),y.push(f),y.push(l),b=!0;else if(0===x){var w=d.angleBetween(g,h);e(w-180)<1e-10||d.equals(h)||g.equals(d)?(m[f[0]+"@@"+f[1]]=d,y.push(p)):e((w+1)%360-1)<1e-10&&(y.push(p),s.push(f))}else m[f[0]+"@@"+f[1]]=d,y.push(p)}y.length>2&&y.pop();var _=-1;for(r=y.length,n=0;n<r;n++){var E=y[n][1];(void 0===v||E<v)&&(v=E,_=n)}var A=[];if(_>0){var k=y.slice(_),S=y.slice(0,_);A=k.concat(S)}else A=y;var T=[];for(r=A.length,n=0;n<r;n++)T.push(A[n][0]);return T}const Ir=function(t){return this instanceof Ir?"string"==typeof t?new Ir.parse(t):void(this.points=Array.isArray(t)?t.map(hr):[]):new Ir(t)};Ir.parse=function(t){return new Ir(Lr(t))},Ir.fromRect=function(t){return new Ir([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft(),t.topLeft()])},Ir.prototype={type:tr.Polyline,bbox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,i=this.points,o=i.length;if(0===o)return null;for(var s=0;s<o;s++){var a=i[s],u=a.x,c=a.y;u<t&&(t=u),u>e&&(e=u),c<n&&(n=c),c>r&&(r=c)}return new Cr(t,n,e-t,r-n)},clone:function(){return new Ir(Or(this.points))},closestPoint:function(t){var e=this.closestPointLength(t);return this.pointAtLength(e)},closestPointLength:function(t){var e,n=this.lengthPoints(),r=n.length;if(0===r)return 0;if(1===r)return 0;for(var i=1/0,o=0,s=r-1,a=0;a<s;a++){var u=new gr(n[a],n[a+1]),c=u.length(),l=u.closestPointNormalizedLength(t),h=u.pointAt(l).squaredDistance(t);h<i&&(i=h,e=o+l*c),o+=c}return e},closestPointNormalizedLength:function(t){var e=this.closestPointLength(t);if(0===e)return 0;var n=this.length();return 0===n?0:e/n},closestPointTangent:function(t){var e=this.closestPointLength(t);return this.tangentAtLength(e)},containsPoint:function(t){var e=this.points,n=e.length;if(0===n)return!1;for(var r=t.x,i=t.y,o=n-1,s=0,a=0,u=new gr,c=new gr,l=new hr;s<n;s++){var h=e[o],f=e[s];if(t.equals(h))return!0;if(u.start=h,u.end=f,u.containsPoint(t))return!0;if(i<=h.y&&i>f.y||i>h.y&&i<=f.y){var d=h.x-r>f.x-r?h.x-r:f.x-r;d>=0&&(l.x=r+d,l.y=i,c.start=t,c.end=l,u.intersect(c)&&a++)}o=s}return a%2==1},close:function(){const{start:t,end:e,points:n}=this;return t&&e&&!t.equals(e)&&n.push(t.clone()),this},lengthPoints:function(){return this.points},convexHull:function(){return new Ir(Mr(this.points))},equals:function(t){if(!t)return!1;var e=this.points,n=t.points,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],s=t.points[i];if(!o.equals(s))return!1}return!0},intersectionWithLine:function(t){for(var e=new gr(t),n=[],r=this.lengthPoints(),i=new gr,o=0,s=r.length-1;o<s;o++){i.start=r[o],i.end=r[o+1];var a=e.intersectionWithLine(i);a&&n.push(a[0])}return n.length>0?n:null},isDifferentiable:function(){var t=this.points,e=t.length;if(0===e)return!1;for(var n=new gr,r=e-1,i=0;i<r;i++)if(n.start=t[i],n.end=t[i+1],n.isDifferentiable())return!0;return!1},length:function(){var t=this.lengthPoints(),e=t.length;if(0===e)return 0;for(var n=0,r=e-1,i=0;i<r;i++)n+=t[i].distance(t[i+1]);return n},pointAt:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();if(t<=0)return e[0].clone();if(t>=1)return e[n-1].clone();var r=this.length()*t;return this.pointAtLength(r)},pointAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return e[0].clone();var r=!0;t<0&&(r=!1,t=-t);for(var i=0,o=n-1,s=0;s<o;s++){var a=r?s:o-1-s,u=e[a],c=e[a+1],l=new gr(u,c),h=u.distance(c);if(t<=i+h)return l.pointAtLength((r?1:-1)*(t-i));i+=h}return(r?e[n-1]:e[0]).clone()},round:function(t){for(var e=this.points,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.points,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},simplify:function(t={}){const e=this.points;if(e.length<3)return this;const n=t.threshold||1e-10;let r=0;for(;e[r+2];){const t=r+1,i=r+2,o=e[r],s=e[t],a=e[i];new gr(o,a).closestPoint(s).distance(s)<=n?e.splice(t,1):r+=1}return this},tangentAt:function(t){var e=this.lengthPoints().length;if(0===e)return null;if(1===e)return null;t<0&&(t=0),t>1&&(t=1);var n=this.length()*t;return this.tangentAtLength(n)},tangentAtLength:function(t){var e=this.lengthPoints(),n=e.length;if(0===n)return null;if(1===n)return null;var r,i=!0;t<0&&(i=!1,t=-t);for(var o=0,s=n-1,a=0;a<s;a++){var u=i?a:s-1-a,c=e[u],l=e[u+1],h=new gr(c,l),f=c.distance(l);if(h.isDifferentiable()){if(t<=o+f)return h.tangentAtLength((i?1:-1)*(t-o));r=h}o+=f}if(r){var d=i?1:0;return r.tangentAt(d)}return null},toString:function(){return this.points+""},translate:function(t,e){for(var n=this.points,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},serialize:function(){var t=this.points,e=t.length;if(0===e)return"";for(var n="",r=0;r<e;r++){var i=t[r];n+=i.x+","+i.y+" "}return n.trim()}},Object.defineProperty(Ir.prototype,"start",{configurable:!0,enumerable:!0,get:function(){return 0===this.points.length?null:this.points[0]}}),Object.defineProperty(Ir.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.points.length;return 0===t?null:this.points[t-1]}});const{abs:Rr,sqrt:jr,min:Dr,max:Br,pow:Vr}=Math,Fr=function(t,e,n,r){return this instanceof Fr?t instanceof Fr?new Fr(t.start,t.controlPoint1,t.controlPoint2,t.end):(this.start=new hr(t),this.controlPoint1=new hr(e),this.controlPoint2=new hr(n),void(this.end=new hr(r))):new Fr(t,e,n,r)};function zr(t){var e,n,r=[];for(n=arguments.length,e=1;e<n;e++)r.push(arguments[e]);if(!t)throw new Error("Missing a parent object.");var i=Object.create(t);for(n=r.length,e=0;e<n;e++){var o,s,a=r[e];for(s in a)a.hasOwnProperty(s)&&(delete i[s],o=Object.getOwnPropertyDescriptor(a,s),Object.defineProperty(i,s,o))}return i}Fr.throughPoints=function(){function t(t){var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n}return function(e){if(!e||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var n=function(e){var n,r=[],i=[],o=e.length-1;if(1==o)return r[0]=new hr((2*e[0].x+e[1].x)/3,(2*e[0].y+e[1].y)/3),i[0]=new hr(2*r[0].x-e[0].x,2*r[0].y-e[0].y),[r,i];var s=[];for(n=1;n<o-1;n++)s[n]=4*e[n].x+2*e[n+1].x;s[0]=e[0].x+2*e[1].x,s[o-1]=(8*e[o-1].x+e[o].x)/2;var a=t(s);for(n=1;n<o-1;++n)s[n]=4*e[n].y+2*e[n+1].y;s[0]=e[0].y+2*e[1].y,s[o-1]=(8*e[o-1].y+e[o].y)/2;var u=t(s);for(n=0;n<o;n++)r.push(new hr(a[n],u[n])),n<o-1?i.push(new hr(2*e[n+1].x-a[n+1],2*e[n+1].y-u[n+1])):i.push(new hr((e[o].x+a[o-1])/2,(e[o].y+u[o-1])/2));return[r,i]}(e),r=[],i=n[0].length,o=0;o<i;o++){var s=new hr(n[0][o].x,n[0][o].y),a=new hr(n[1][o].x,n[1][o].y);r.push(new Fr(e[o],s,a,e[o+1]))}return r}}(),Fr.prototype={type:tr.Curve,bbox:function(){for(var t,e,n,r,i,o,s,a,u=this.start,c=this.controlPoint1,l=this.controlPoint2,h=this.end,f=u.x,d=u.y,p=c.x,g=c.y,v=l.x,m=l.y,y=h.x,b=h.y,x=new Array,w=new Array,_=[new Array,new Array],E=0;E<2;++E)if(0===E?(e=6*f-12*p+6*v,t=-3*f+9*p-9*v+3*y,n=3*p-3*f):(e=6*d-12*g+6*m,t=-3*d+9*g-9*m+3*b,n=3*g-3*d),Rr(t)<1e-12){if(Rr(e)<1e-12)continue;0<(r=-n/e)&&r<1&&w.push(r)}else a=jr(s=e*e-4*n*t),s<0||(0<(i=(-e+a)/(2*t))&&i<1&&w.push(i),0<(o=(-e-a)/(2*t))&&o<1&&w.push(o));for(var A,k,S,T=w.length,P=T;T--;)k=(A=1-(r=w[T]))*A*A*f+3*A*A*r*p+3*A*r*r*v+r*r*r*y,_[0][T]=k,S=A*A*A*d+3*A*A*r*g+3*A*r*r*m+r*r*r*b,_[1][T]=S,x[T]={X:k,Y:S};w[P]=0,w[P+1]=1,x[P]={X:f,Y:d},x[P+1]={X:y,Y:b},_[0][P]=f,_[1][P]=d,_[0][P+1]=y,_[1][P+1]=b,w.length=P+2,_[0].length=P+2,_[1].length=P+2,x.length=P+2;var C=Dr.apply(null,_[0]),N=Dr.apply(null,_[1]),L=Br.apply(null,_[0]),O=Br.apply(null,_[1]);return new Cr(C,N,L-C,O-N)},clone:function(){return new Fr(this.start,this.controlPoint1,this.controlPoint2,this.end)},closestPoint:function(t,e){return this.pointAtT(this.closestPointT(t,e))},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions};return this.lengthAtT(this.closestPointT(t,r),r)},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},i=this.closestPointLength(t,r);if(!i)return 0;var o=this.length(r);return 0===o?0:i/o},closestPointT:function(t,e){for(var n,r,i,o,s,a,u,c=void 0===(e=e||{}).precision?this.PRECISION:e.precision,l=void 0===e.subdivisions?this.getSubdivisions({precision:c}):e.subdivisions,h=l.length,f=h?1/h:0,d=0;d<h;d++){var p=l[d],g=p.start.distance(t),v=p.end.distance(t),m=g+v;(!u||m<u)&&(n=p,r=d*f,i=(d+1)*f,o=g,s=v,a=p.start.distance(p.end),u=m)}for(var y=Vr(10,-c);;){var b=o?Rr(o-s)/o:0,x=s?Rr(o-s)/s:0;if(b<y||x<y||!o||o<a*y||!s||s<a*y)return o<=s?r:i;var w=n.divide(.5);f/=2;var _=w[0].start.distance(t),E=w[0].end.distance(t),A=_+E,k=w[1].start.distance(t),S=w[1].end.distance(t);A<=k+S?(n=w[0],i-=f,o=_,s=E):(n=w[1],r+=f,o=k,s=S)}},closestPointTangent:function(t,e){return this.tangentAtT(this.closestPointT(t,e))},containsPoint:function(t,e){return this.toPolyline(e).containsPoint(t)},divideAt:function(t,e){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var n=this.tAt(t,e);return this.divideAtT(n)},divideAtLength:function(t,e){var n=this.tAtLength(t,e);return this.divideAtT(n)},divideAtT:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return[new Fr(e,e,e,e),new Fr(e,n,r,i)];if(t>=1)return[new Fr(e,n,r,i),new Fr(i,i,i,i)];var o=this.getSkeletonPoints(t),s=o.startControlPoint1,a=o.startControlPoint2,u=o.divider,c=o.dividerControlPoint1,l=o.dividerControlPoint2;return[new Fr(e,s,a,u),new Fr(u,c,l,i)]},endpointDistance:function(){return this.start.distance(this.end)},equals:function(t){return!!t&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.controlPoint1.x===t.controlPoint1.x&&this.controlPoint1.y===t.controlPoint1.y&&this.controlPoint2.x===t.controlPoint2.x&&this.controlPoint2.y===t.controlPoint2.y&&this.end.x===t.end.x&&this.end.y===t.end.y},getSkeletonPoints:function(t){var e=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(t>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};var o=new gr(e,n).pointAt(t),s=new gr(n,r).pointAt(t),a=new gr(r,i).pointAt(t),u=new gr(o,s).pointAt(t),c=new gr(s,a).pointAt(t);return{startControlPoint1:o,startControlPoint2:u,divider:new gr(u,c).pointAt(t),dividerControlPoint1:c,dividerControlPoint2:a}},getSubdivisions:function(t){var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=this.start,r=this.controlPoint1,i=this.controlPoint2,o=this.end,s=[new Fr(n,r,i,o)];if(0===e)return s;if(!this.isDifferentiable())return s;var a=this.endpointDistance(),u=Vr(10,-e),c=2;0===r.cross(n,o)&&0===i.cross(n,o)&&(c=2*e);for(var l=0;;){l+=1;for(var h=[],f=s.length,d=0;d<f;d++){var p=s[d].divide(.5);h.push(p[0],p[1])}for(var g=0,v=h.length,m=0;m<v;m++)g+=h[m].endpointDistance();if(l>=c&&(0!==g?(g-a)/g:0)<u)return h;s=h,a=g}},isDifferentiable:function(){var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},length:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=0,i=n.length,o=0;o<i;o++)r+=n[o].endpointDistance();return r},lengthAtT:function(t,e){if(t<=0)return 0;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:n})},pointAt:function(t,e){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=this.tAt(t,e);return this.pointAtT(n)},pointAtLength:function(t,e){var n=this.tAtLength(t,e);return this.pointAtT(n)},pointAtT:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider},PRECISION:3,round:function(t){return this.start.round(t),this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.start.scale(t,e,n),this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},tangentAt:function(t,e){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var n=this.tAt(t,e);return this.tangentAtT(n)},tangentAtLength:function(t,e){if(!this.isDifferentiable())return null;var n=this.tAtLength(t,e);return this.tangentAtT(n)},tangentAtT:function(t){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var e=this.getSkeletonPoints(t),n=e.startControlPoint2,r=e.dividerControlPoint1,i=e.divider,o=new gr(n,r);return o.translate(i.x-n.x,i.y-n.y),o},tAt:function(t,e){if(t<=0)return 0;if(t>=1)return 1;var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,subdivisions:void 0===e.subdivisions?this.getSubdivisions({precision:n}):e.subdivisions},i=this.length(r)*t;return this.tAtLength(i,r)},tAtLength:function(t,e){var n=!0;t<0&&(n=!1,t=-t);for(var r,i,o,s,a,u=void 0===(e=e||{}).precision?this.PRECISION:e.precision,c=void 0===e.subdivisions?this.getSubdivisions({precision:u}):e.subdivisions,l={precision:u,subdivisions:c},h=0,f=c.length,d=1/f,p=0;p<f;p++){var g=n?p:f-1-p,v=c[p],m=v.endpointDistance();if(t<=h+m){r=v,i=g*d,o=(g+1)*d,s=n?t-h:m+h-t,a=n?m+h-t:t-h;break}h+=m}if(!r)return n?1:0;for(var y=this.length(l),b=Vr(10,-u);;){var x,w;if((0!==y?s/y:0)<b)return i;if((0!==y?a/y:0)<b)return o;var _=r.divide(.5);d/=2;var E=_[0].endpointDistance(),A=_[1].endpointDistance();s<=E?(r=_[0],o-=d,w=E-(x=s)):(r=_[1],i+=d,w=A-(x=s-E)),s=x,a=w}},toPoints:function(t){for(var e=void 0===(t=t||{}).precision?this.PRECISION:t.precision,n=void 0===t.subdivisions?this.getSubdivisions({precision:e}):t.subdivisions,r=[n[0].start.clone()],i=n.length,o=0;o<i;o++){var s=n[o];r.push(s.end.clone())}return r},toPolyline:function(t){return new Ir(this.toPoints(t))},toString:function(){return this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}},Fr.prototype.divide=Fr.prototype.divideAtT;const Gr=function(t){if(!(this instanceof Gr))return new Gr(t);if("string"==typeof t)return new Gr.parse(t);var e,n;if(this.segments=[],t)if(Array.isArray(t)&&0!==t.length)if(n=(t=t.reduce(function(t,e){return t.concat(e)},[])).length,t[0].isSegment)for(e=0;e<n;e++){var r=t[e];this.appendSegment(r)}else{var i=null;for(e=0;e<n;e++){var o=t[e];if(!(o instanceof gr||o instanceof Fr))throw new Error("Cannot construct a path segment from the provided object.");0===e&&this.appendSegment(Gr.createSegment("M",o.start)),i&&!i.end.equals(o.start)&&this.appendSegment(Gr.createSegment("M",o.start)),o instanceof gr?this.appendSegment(Gr.createSegment("L",o.end)):o instanceof Fr&&this.appendSegment(Gr.createSegment("C",o.controlPoint1,o.controlPoint2,o.end)),i=o}}else if(t.isSegment)this.appendSegment(t);else if(t instanceof gr)this.appendSegment(Gr.createSegment("M",t.start)),this.appendSegment(Gr.createSegment("L",t.end));else if(t instanceof Fr)this.appendSegment(Gr.createSegment("M",t.start)),this.appendSegment(Gr.createSegment("C",t.controlPoint1,t.controlPoint2,t.end));else{if(!(t instanceof Ir))throw new Error("Cannot construct a path from the provided object.");if(!t.points||0===t.points.length)return;for(n=t.points.length,e=0;e<n;e++){var s=t.points[e];0===e?this.appendSegment(Gr.createSegment("M",s)):this.appendSegment(Gr.createSegment("L",s))}}};function Ur(t,e){return e.unshift(null),new(Function.prototype.bind.apply(t,e))}Gr.parse=function(t){if(!t)return new Gr;for(var e=new Gr,n=t.match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g),r=n.length,i=0;i<r;i++){var o=n[i].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g),s=Gr.createSegment.apply(this,o);e.appendSegment(s)}return e},Gr.createSegment=function(t){if(!t)throw new Error("Type must be provided.");var e=Gr.segmentTypes[t];if(!e)throw new Error(t+" is not a recognized path segment type.");for(var n=[],r=arguments.length,i=1;i<r;i++)n.push(arguments[i]);return Ur(e,n)},Gr.prototype={type:tr.Path,appendSegment:function(t){var e,n=this.segments,r=n.length,i=0!==r?n[r-1]:null;if(Array.isArray(t)){if(!(t=t.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var o=t.length,s=0;s<o;s++){var a=t[s];e=this.prepareSegment(a,i,null),n.push(e),i=e}}else{if(!t||!t.isSegment)throw new Error("Segment required.");e=this.prepareSegment(t,i,null),n.push(e)}},bbox:function(){var t,e=this.segments,n=e.length;if(0===n)return null;for(var r=0;r<n;r++){var i=e[r];if(i.isVisible){var o=i.bbox();t=t?t.union(o):o}}if(t)return t;var s=e[n-1];return new Cr(s.end.x,s.end.y,0,0)},clone:function(){for(var t=this.segments,e=t.length,n=new Gr,r=0;r<e;r++){var i=t[r].clone();n.appendSegment(i)}return n},closestPoint:function(t,e){var n=this.closestPointT(t,e);return n?this.pointAtT(n):null},closestPointLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.closestPointT(t,r);return i?this.lengthAtT(i,r):0},closestPointNormalizedLength:function(t,e){var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.closestPointLength(t,r);if(0===i)return 0;var o=this.length(r);return 0===o?0:i/o},closestPointT:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var i,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],l=s[u];if(c.isVisible){var h=c.closestPointT(t,{precision:o,subdivisions:l}),f=c.pointAtT(h),d=new gr(f,t).squaredLength();d<a&&(i={segmentIndex:u,value:h},a=d)}}return i||{segmentIndex:r-1,value:1}},closestPointTangent:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;for(var i,o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=1/0,u=0;u<r;u++){var c=n[u],l=s[u];if(c.isDifferentiable()){var h=c.closestPointT(t,{precision:o,subdivisions:l}),f=c.pointAtT(h),d=new gr(f,t).squaredLength();d<a&&(i=c.tangentAtT(h),a=d)}}return i||null},containsPoint:function(t,e){var n=this.toPolylines(e);if(!n)return!1;for(var r=n.length,i=0,o=0;o<r;o++)n[o].containsPoint(t)&&i++;return i%2==1},divideAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.divideAtLength(i,r)},divideAtLength:function(t,e){var n=this.segments.length;if(0===n)return null;var r=!0;t<0&&(r=!1,t=-t);var i,o,s,a,u,c,l,h=void 0===(e=e||{}).precision?this.PRECISION:e.precision,f=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:h}):e.segmentSubdivisions,d=0;for(i=0;i<n;i++){var p=r?i:n-1-i;o=this.getSegment(p);var g=f[p],v=o.length({precision:h,subdivisions:g});if(o.isDifferentiable()&&(u=o,c=p,t<=d+v)){a=p,s=o.divideAtLength((r?1:-1)*(t-d),{precision:h,subdivisions:g});break}d+=v}if(!u)return null;s||(a=c,l=r?1:0,s=u.divideAtT(l));var m=this.clone();m.replaceSegment(a,s);var y=a,b=a+1,x=a+2;s[0].isDifferentiable()||(m.removeSegment(y),b-=1,x-=1);var w=m.getSegment(b).start;m.insertSegment(b,Gr.createSegment("M",w)),x+=1,s[1].isDifferentiable()||(m.removeSegment(x-1),x-=1);var _=x-y-1;for(i=x;i<m.segments.length;i++){var E=this.getSegment(i-_);if("Z"===(o=m.getSegment(i)).type&&!E.subpathStartSegment.end.equals(o.subpathStartSegment.end)){var A=Gr.createSegment("L",E.end);m.replaceSegment(i,A)}}return[new Gr(m.segments.slice(0,b)),new Gr(m.segments.slice(b))]},equals:function(t){if(!t)return!1;var e=this.segments,n=t.segments,r=e.length;if(n.length!==r)return!1;for(var i=0;i<r;i++){var o=e[i],s=n[i];if(o.type!==s.type||!o.equals(s))return!1}return!0},getSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");return e[t]},getSegmentSubdivisions:function(t){for(var e=this.segments,n=e.length,r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=[],o=0;o<n;o++){var s=e[o].getSubdivisions({precision:r});i.push(s)}return i},getSubpaths:function(){const t=this.clone().validate().segments,e=t.length,n=[];for(let r=0;r<e;r++){const e=t[r];e.isSubpathStart?n.push(new Gr(e)):n[n.length-1].appendSegment(e)}return n},insertSegment:function(t,e){var n,r=this.segments,i=r.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");var o=null,s=null;if(0!==i&&(s=t>=1?(o=r[t-1]).nextSegment:r[0]),Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");for(var a=e.length,u=0;u<a;u++){var c=e[u];n=this.prepareSegment(c,o,s),r.splice(t+u,0,n),o=n}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,o,s),r.splice(t,0,n)}},intersectionWithLine:function(t,e){var n=null,r=this.toPolylines(e);if(!r)return null;for(var i=0,o=r.length;i<o;i++){var s=r[i],a=t.intersect(s);a&&(n||(n=[]),Array.isArray(a)?Array.prototype.push.apply(n,a):n.push(a))}return n},isDifferentiable:function(){for(var t=this.segments,e=t.length,n=0;n<e;n++)if(t[n].isDifferentiable())return!0;return!1},isValid:function(){var t=this.segments;return 0===t.length||"M"===t[0].type},length:function(t){var e=this.segments,n=e.length;if(0===n)return 0;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=0,s=0;s<n;s++){var a=e[s],u=i[s];o+=a.length({subdivisions:u})}return o},lengthAtT:function(t,e){var n=this.segments,r=n.length;if(0===r)return 0;var i=t.segmentIndex;if(i<0)return 0;var o=t.value;i>=r?(i=r-1,o=1):o<0?o=0:o>1&&(o=1);for(var s,a=void 0===(e=e||{}).precision?this.PRECISION:e.precision,u=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:a}):e.segmentSubdivisions,c=0,l=0;l<i;l++){var h=n[l];s=u[l],c+=h.length({precisison:a,subdivisions:s})}return h=n[i],s=u[i],c+h.lengthAtT(o,{precisison:a,subdivisions:s})},pointAt:function(t,e){if(0===this.segments.length)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.pointAtLength(i,r)},pointAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;if(0===t)return this.start.clone();var i=!0;t<0&&(i=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=a[l],d=h.length({precision:s,subdivisions:f});if(h.isVisible){if(t<=u+d)return h.pointAtLength((i?1:-1)*(t-u),{precision:s,subdivisions:f});o=h}u+=d}return o?i?o.end:o.start:n[r-1].end.clone()},pointAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].pointAtT(0);if(r>=n)return e[n-1].pointAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].pointAtT(i)},PRECISION:3,prepareSegment:function(t,e,n){t.previousSegment=e,t.nextSegment=n,e&&(e.nextSegment=t),n&&(n.previousSegment=t);var r=t;return t.isSubpathStart&&(t.subpathStartSegment=t,r=n),r&&this.updateSubpathStartSegment(r),t},removeSegment:function(t){var e=this.segments,n=e.length;if(0===n)throw new Error("Path has no segments.");if(t<0&&(t=n+t),t>=n||t<0)throw new Error("Index out of range.");var r=e.splice(t,1)[0],i=r.previousSegment,o=r.nextSegment;i&&(i.nextSegment=o),o&&(o.previousSegment=i),r.isSubpathStart&&o&&this.updateSubpathStartSegment(o)},replaceSegment:function(t,e){var n,r=this.segments,i=r.length;if(0===i)throw new Error("Path has no segments.");if(t<0&&(t=i+t),t>=i||t<0)throw new Error("Index out of range.");var o=r[t],s=o.previousSegment,a=o.nextSegment,u=o.isSubpathStart;if(Array.isArray(e)){if(!(e=e.reduce(function(t,e){return t.concat(e)},[]))[0].isSegment)throw new Error("Segments required.");r.splice(t,1);for(var c=e.length,l=0;l<c;l++){var h=e[l];n=this.prepareSegment(h,s,a),r.splice(t+l,0,n),s=n,u&&n.isSubpathStart&&(u=!1)}}else{if(!e||!e.isSegment)throw new Error("Segment required.");n=this.prepareSegment(e,s,a),r.splice(t,1,n),u&&n.isSubpathStart&&(u=!1)}u&&a&&this.updateSubpathStartSegment(a)},round:function(t){for(var e=this.segments,n=e.length,r=0;r<n;r++)e[r].round(t);return this},scale:function(t,e,n){for(var r=this.segments,i=r.length,o=0;o<i;o++)r[o].scale(t,e,n);return this},segmentAt:function(t,e){var n=this.segmentIndexAt(t,e);return n?this.getSegment(n):null},segmentAtLength:function(t,e){var n=this.segmentIndexAtLength(t,e);return n?this.getSegment(n):null},segmentIndexAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.segmentIndexAtLength(i,r)},segmentIndexAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var o=void 0===(e=e||{}).precision?this.PRECISION:e.precision,s=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:o}):e.segmentSubdivisions,a=null,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=s[l],d=h.length({precision:o,subdivisions:f});if(h.isVisible){if(t<=u+d)return l;a=l}u+=d}return a},serialize:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.toString()},tangentAt:function(t,e){if(0===this.segments.length)return null;t<0&&(t=0),t>1&&(t=1);var n=void 0===(e=e||{}).precision?this.PRECISION:e.precision,r={precision:n,segmentSubdivisions:void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:n}):e.segmentSubdivisions},i=this.length(r)*t;return this.tangentAtLength(i,r)},tangentAtLength:function(t,e){var n=this.segments,r=n.length;if(0===r)return null;var i=!0;t<0&&(i=!1,t=-t);for(var o,s=void 0===(e=e||{}).precision?this.PRECISION:e.precision,a=void 0===e.segmentSubdivisions?this.getSegmentSubdivisions({precision:s}):e.segmentSubdivisions,u=0,c=0;c<r;c++){var l=i?c:r-1-c,h=n[l],f=a[l],d=h.length({precision:s,subdivisions:f});if(h.isDifferentiable()){if(t<=u+d)return h.tangentAtLength((i?1:-1)*(t-u),{precision:s,subdivisions:f});o=h}u+=d}if(o){var p=i?1:0;return o.tangentAtT(p)}return null},tangentAtT:function(t){var e=this.segments,n=e.length;if(0===n)return null;var r=t.segmentIndex;if(r<0)return e[0].tangentAtT(0);if(r>=n)return e[n-1].tangentAtT(1);var i=t.value;return i<0?i=0:i>1&&(i=1),e[r].tangentAtT(i)},toPoints:function(t){var e=this.segments,n=e.length;if(0===n)return null;for(var r=void 0===(t=t||{}).precision?this.PRECISION:t.precision,i=void 0===t.segmentSubdivisions?this.getSegmentSubdivisions({precision:r}):t.segmentSubdivisions,o=[],s=[],a=0;a<n;a++){var u=e[a];if(u.isVisible){var c=i[a];if(c.length>0){var l=c.map(function(t){return t.start});Array.prototype.push.apply(s,l)}else s.push(u.start)}else s.length>0&&(s.push(e[a-1].end),o.push(s),s=[])}return s.length>0&&(s.push(this.end),o.push(s)),o},toPolylines:function(t){var e=[],n=this.toPoints(t);if(!n)return null;for(var r=0,i=n.length;r<i;r++)e.push(new Ir(n[r]));return e},toString:function(){for(var t=this.segments,e=t.length,n="",r=0;r<e;r++)n+=t[r].serialize()+" ";return n.trim()},translate:function(t,e){for(var n=this.segments,r=n.length,i=0;i<r;i++)n[i].translate(t,e);return this},updateSubpathStartSegment:function(t){for(var e=t.previousSegment;t&&!t.isSubpathStart;)t.subpathStartSegment=e?e.subpathStartSegment:null,e=t,t=t.nextSegment},validate:function(){return this.isValid()||this.insertSegment(0,Gr.createSegment("M",0,0)),this}},Object.defineProperty(Gr.prototype,"start",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=0;n<e;n++){var r=t[n];if(r.isVisible)return r.start}return t[e-1].end}}),Object.defineProperty(Gr.prototype,"end",{configurable:!0,enumerable:!0,get:function(){var t=this.segments,e=t.length;if(0===e)return null;for(var n=e-1;n>=0;n--){var r=t[n];if(r.isVisible)return r.end}return t[e-1].end}});var qr={bbox:function(){throw new Error("Declaration missing for virtual function.")},clone:function(){throw new Error("Declaration missing for virtual function.")},closestPoint:function(){throw new Error("Declaration missing for virtual function.")},closestPointLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointNormalizedLength:function(){throw new Error("Declaration missing for virtual function.")},closestPointT:function(t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither closestPointT() nor closestPointNormalizedLength() function is implemented.")},closestPointTangent:function(){throw new Error("Declaration missing for virtual function.")},divideAt:function(){throw new Error("Declaration missing for virtual function.")},divideAtLength:function(){throw new Error("Declaration missing for virtual function.")},divideAtT:function(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither divideAtT() nor divideAt() function is implemented.")},equals:function(){throw new Error("Declaration missing for virtual function.")},getSubdivisions:function(){throw new Error("Declaration missing for virtual function.")},isDifferentiable:function(){throw new Error("Declaration missing for virtual function.")},isSegment:!0,isSubpathStart:!1,isVisible:!0,length:function(){throw new Error("Declaration missing for virtual function.")},lengthAtT:function(t){if(t<=0)return 0;var e=this.length();return t>=1?e:e*t},nextSegment:null,pointAt:function(){throw new Error("Declaration missing for virtual function.")},pointAtLength:function(){throw new Error("Declaration missing for virtual function.")},pointAtT:function(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither pointAtT() nor pointAt() function is implemented.")},previousSegment:null,round:function(){throw new Error("Declaration missing for virtual function.")},subpathStartSegment:null,scale:function(){throw new Error("Declaration missing for virtual function.")},serialize:function(){throw new Error("Declaration missing for virtual function.")},tangentAt:function(){throw new Error("Declaration missing for virtual function.")},tangentAtLength:function(){throw new Error("Declaration missing for virtual function.")},tangentAtT:function(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither tangentAtT() nor tangentAt() function is implemented.")},toString:function(){throw new Error("Declaration missing for virtual function.")},translate:function(){throw new Error("Declaration missing for virtual function.")}};Object.defineProperty(qr,"end",{configurable:!0,enumerable:!0,writable:!0}),Object.defineProperty(qr,"start",{configurable:!0,enumerable:!0,get:function(){if(!this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path; OR segment has not yet been added to a path.)");return this.previousSegment.end}}),Object.defineProperty(qr,"type",{configurable:!0,enumerable:!0,get:function(){throw new Error("Bad segment declaration. No type specified.")}});var Hr=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof Hr))return Ur(Hr,n);if(0===r)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof gr){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" lines provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new hr(+n[0],+n[1]),this;if(r<2)throw new Error("Lineto constructor expects a line, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=2)o=n.slice(i,i+2),t.push(Ur(Hr,o));return t}if(1===r)return this.end=new hr(n[0]),this;for(t=[],i=0;i<r;i+=1)e=n[i],t.push(new Hr(e));return t},$r={clone:function(){return new Hr(this.end)},divideAt:function(t){var e=new gr(this.start,this.end).divideAt(t);return[new Hr(e[0]),new Hr(e[1])]},divideAtLength:function(t){var e=new gr(this.start,this.end).divideAtLength(t);return[new Hr(e[0]),new Hr(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!!this.previousSegment&&!this.start.equals(this.end)},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty($r,"type",{configurable:!0,enumerable:!0,value:"L"}),Hr.prototype=zr(qr,gr.prototype,$r);var Wr=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof Wr))return Ur(Wr,n);if(0===r)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates (none provided).");if(n[0]instanceof Fr){if(1===r)return this.controlPoint1=n[0].controlPoint1.clone(),this.controlPoint2=n[0].controlPoint2.clone(),this.end=n[0].end.clone(),this;throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(6===r)return this.controlPoint1=new hr(+n[0],+n[1]),this.controlPoint2=new hr(+n[2],+n[3]),this.end=new hr(+n[4],+n[5]),this;if(r<6)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=6)o=n.slice(i,i+6),t.push(Ur(Wr,o));return t}if(3===r)return this.controlPoint1=new hr(n[0]),this.controlPoint2=new hr(n[1]),this.end=new hr(n[2]),this;if(r<3)throw new Error("Curveto constructor expects a curve, 3 points, or 6 coordinates ("+r+" points provided).");for(t=[],i=0;i<r;i+=3)e=n.slice(i,i+3),t.push(Ur(Wr,e));return t},Xr={clone:function(){return new Wr(this.controlPoint1,this.controlPoint2,this.end)},divideAt:function(t,e){var n=new Fr(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAt(t,e);return[new Wr(n[0]),new Wr(n[1])]},divideAtLength:function(t,e){var n=new Fr(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtLength(t,e);return[new Wr(n[0]),new Wr(n[1])]},divideAtT:function(t){var e=new Fr(this.start,this.controlPoint1,this.controlPoint2,this.end).divideAtT(t);return[new Wr(e[0]),new Wr(e[1])]},isDifferentiable:function(){if(!this.previousSegment)return!1;var t=this.start,e=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(t.equals(e)&&e.equals(n)&&n.equals(r))},round:function(t){return this.controlPoint1.round(t),this.controlPoint2.round(t),this.end.round(t),this},scale:function(t,e,n){return this.controlPoint1.scale(t,e,n),this.controlPoint2.scale(t,e,n),this.end.scale(t,e,n),this},serialize:function(){var t=this.controlPoint1,e=this.controlPoint2,n=this.end;return this.type+" "+t.x+" "+t.y+" "+e.x+" "+e.y+" "+n.x+" "+n.y},toString:function(){return this.type+" "+this.start+" "+this.controlPoint1+" "+this.controlPoint2+" "+this.end},translate:function(t,e){return this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e),this}};Object.defineProperty(Xr,"type",{configurable:!0,enumerable:!0,value:"C"}),Wr.prototype=zr(qr,Fr.prototype,Xr);var Yr=function(){for(var t,e,n=[],r=arguments.length,i=0;i<r;i++)n.push(arguments[i]);if(!(this instanceof Yr))return Ur(Yr,n);if(0===r)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates (none provided).");if(n[0]instanceof gr){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" lines provided).")}if(n[0]instanceof Fr){if(1===r)return this.end=n[0].end.clone(),this;throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" curves provided).")}if("string"==typeof n[0]||"number"==typeof n[0]){if(2===r)return this.end=new hr(+n[0],+n[1]),this;if(r<2)throw new Error("Moveto constructor expects a line, a curve, 1 point, or 2 coordinates ("+r+" coordinates provided).");var o;for(t=[],i=0;i<r;i+=2)o=n.slice(i,i+2),0===i?t.push(Ur(Yr,o)):t.push(Ur(Hr,o));return t}if(1===r)return this.end=new hr(n[0]),this;for(t=[],i=0;i<r;i+=1)e=n[i],0===i?t.push(new Yr(e)):t.push(new Hr(e));return t},Zr={bbox:function(){return null},clone:function(){return new Yr(this.end)},closestPoint:function(){return this.end.clone()},closestPointNormalizedLength:function(){return 0},closestPointLength:function(){return 0},closestPointT:function(){return 1},closestPointTangent:function(){return null},divideAt:function(){return[this.clone(),this.clone()]},divideAtLength:function(){return[this.clone(),this.clone()]},equals:function(t){return this.end.equals(t.end)},getSubdivisions:function(){return[]},isDifferentiable:function(){return!1},isSubpathStart:!0,isVisible:!1,length:function(){return 0},lengthAtT:function(){return 0},pointAt:function(){return this.end.clone()},pointAtLength:function(){return this.end.clone()},pointAtT:function(){return this.end.clone()},round:function(t){return this.end.round(t),this},scale:function(t,e,n){return this.end.scale(t,e,n),this},serialize:function(){var t=this.end;return this.type+" "+t.x+" "+t.y},tangentAt:function(){return null},tangentAtLength:function(){return null},tangentAtT:function(){return null},toString:function(){return this.type+" "+this.end},translate:function(t,e){return this.end.translate(t,e),this}};Object.defineProperty(Zr,"start",{configurable:!0,enumerable:!0,get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}}),Object.defineProperty(Zr,"type",{configurable:!0,enumerable:!0,value:"M"}),Yr.prototype=zr(qr,Zr);var Jr=function(){for(var t=[],e=arguments.length,n=0;n<e;n++)t.push(arguments[n]);if(!(this instanceof Jr))return Ur(Jr,t);if(e>0)throw new Error("Closepath constructor expects no arguments.");return this},Kr={clone:function(){return new Jr},divideAt:function(t){var e=new gr(this.start,this.end).divideAt(t);return[e[1].isDifferentiable()?new Hr(e[0]):this.clone(),new Hr(e[1])]},divideAtLength:function(t){var e=new gr(this.start,this.end).divideAtLength(t);return[e[1].isDifferentiable()?new Hr(e[0]):this.clone(),new Hr(e[1])]},getSubdivisions:function(){return[]},isDifferentiable:function(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))},round:function(){return this},scale:function(){return this},serialize:function(){return this.type},toString:function(){return this.type+" "+this.start+" "+this.end},translate:function(){return this}};Object.defineProperty(Kr,"end",{configurable:!0,enumerable:!0,get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. Moveto); OR segment has not yet been added to a path.)");return this.subpathStartSegment.end}}),Object.defineProperty(Kr,"type",{configurable:!0,enumerable:!0,value:"Z"}),Jr.prototype=zr(qr,gr.prototype,Kr);var Qr=Gr.segmentTypes={L:Hr,C:Wr,M:Yr,Z:Jr,z:Jr};Gr.regexSupportedData=new RegExp("^[\\s\\d"+Object.keys(Qr).join("")+",.]*$"),Gr.isDataSupported=function(t){return"string"==typeof t&&this.regexSupportedData.test(t)};const ti={curveThroughPoints:function(t){return console.warn("deprecated"),new Gr(Fr.throughPoints(t)).serialize()},getCurveControlPoints:function(t){console.warn("deprecated");var e,n=[],r=[],i=t.length-1;if(1==i)return n[0]=new hr((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),r[0]=new hr(2*n[0].x-t[0].x,2*n[0].y-t[0].y),[n,r];var o=[];for(e=1;e<i-1;e++)o[e]=4*t[e].x+2*t[e+1].x;o[0]=t[0].x+2*t[1].x,o[i-1]=(8*t[i-1].x+t[i].x)/2;var s=this.getFirstControlPoints(o);for(e=1;e<i-1;++e)o[e]=4*t[e].y+2*t[e+1].y;o[0]=t[0].y+2*t[1].y,o[i-1]=(8*t[i-1].y+t[i].y)/2;var a=this.getFirstControlPoints(o);for(e=0;e<i;e++)n.push(new hr(s[e],a[e])),e<i-1?r.push(new hr(2*t[e+1].x-s[e+1],2*t[e+1].y-a[e+1])):r.push(new hr((t[i].x+s[i-1])/2,(t[i].y+a[i-1])/2));return[n,r]},getCurveDivider:function(t,e,n,r){console.warn("deprecated");var i=new Fr(t,e,n,r);return function(t){var e=i.divide(t);return[{p0:e[0].start,p1:e[0].controlPoint1,p2:e[0].controlPoint2,p3:e[0].end},{p0:e[1].start,p1:e[1].controlPoint1,p2:e[1].controlPoint2,p3:e[1].end}]}},getFirstControlPoints:function(t){console.warn("deprecated");var e=t.length,n=[],r=[],i=2;n[0]=t[0]/i;for(var o=1;o<e;o++)r[o]=1/i,i=(o<e-1?4:3.5)-r[o],n[o]=(t[o]-n[o-1])/i;for(o=1;o<e;o++)n[e-o-1]-=r[e-o]*n[e-o];return n},getInversionSolver:function(t,e,n,r){console.warn("deprecated");var i=new Fr(t,e,n,r);return function(t){return i.closestPointT(t)}}},ei=function(t){return this instanceof ei?"string"==typeof t?new ei.parse(t):void(this.points=Array.isArray(t)?t.map(hr):[]):new ei(t)};function ni(t,e,n,r){switch(t.type){case tr.Line:if(e.type===tr.Line)return ri(t,e);break;case tr.Ellipse:switch(e.type){case tr.Line:return ii(t,e);case tr.Ellipse:return oi(t,e)}break;case tr.Rect:switch(e.type){case tr.Line:return si(t,e);case tr.Ellipse:return ai(t,e);case tr.Rect:return ui(t,e)}break;case tr.Polyline:switch(e.type){case tr.Line:return ci(t,e);case tr.Ellipse:return li(t,e);case tr.Rect:return hi(t,e);case tr.Polyline:return fi(t,e)}break;case tr.Polygon:switch(e.type){case tr.Line:return di(t,e);case tr.Ellipse:return pi(t,e);case tr.Rect:return gi(t,e);case tr.Polyline:return vi(t,e);case tr.Polygon:return mi(t,e)}break;case tr.Path:switch(e.type){case tr.Line:return yi(t,e,n);case tr.Ellipse:return bi(t,e,n);case tr.Rect:return xi(t,e,n);case tr.Polyline:return wi(t,e,n);case tr.Polygon:return _i(t,e,n);case tr.Path:return Ei(t,e,n,r)}}switch(e.type){case tr.Ellipse:case tr.Rect:case tr.Polyline:case tr.Polygon:case tr.Path:return ni(e,t,r,n);default:throw Error(`The intersection for ${t} and ${e} could not be found.`)}}function ri(t,e){const n=t.start.x,r=t.start.y,i=t.end.x,o=t.end.y,s=e.start.x,a=e.start.y,u=i-n,c=o-r,l=e.end.x-s,h=e.end.y-a,f=n-s,d=r-a,p=u*h-l*c,g=(u*d-c*f)/p,v=(l*d-h*f)/p;return g>=0&&g<=1&&v>=0&&v<=1}function ii(t,e){const n=t.a,r=t.b,i=t.x,o=t.y,s=e.start.x-i,a=e.end.x-i,u=e.start.y-o,c=n*n,l=r*r,h=a-s,f=e.end.y-o-u,d=h*h/c+f*f/l,p=2*s*h/c+2*u*f/l,g=p*p-4*d*(s*s/c+u*u/l-1);if(0===g){const t=-p/2/d;return t>=0&&t<=1}if(g>0){const t=Math.sqrt(g),e=(-p+t)/2/d,n=(-p-t)/2/d;return e>=0&&e<=1||n>=0&&n<=1}return!1}function oi(t,e){return function(t,e,n){const{cos:r,sin:i}=Math,o=i(0),s=r(0),a=i(0),u=r(0),c=o*o,l=s*s,h=o*s,f=a*a,d=u*u,p=a*u,g=t.a*t.a,v=t.b*t.b,m=n.a*n.a,y=n.b*n.b,b=g*c+v*l,x=m*f+y*d,w=g*l+v*c,_=m*d+y*f;let E=2*(v-g)*h,A=2*(y-m)*p,k=-2*b*t.x-E*t.y,S=-2*x*n.x-A*n.y,T=-E*t.x-2*w*t.y,P=-A*n.x-2*_*n.y;const C=b*t.x*t.x+w*t.y*t.y+E*t.x*t.y-g*v,N=x*n.x*n.x+_*n.y*n.y+A*n.x*n.y-m*y;E/=2,A/=2,k/=2,S/=2,T/=2,P/=2;const L=Li([[b,E,k],[E,w,T],[k,T,C]]),O=Li([[x,A,S],[A,_,P],[S,P,N]]),M=.33333333*(Li([[x,E,k],[A,w,T],[S,T,C]])+Li([[b,A,k],[E,_,T],[k,P,C]])+Li([[b,E,S],[E,w,P],[k,T,N]])),I=.33333333*(Li([[b,A,S],[E,_,P],[k,P,N]])+Li([[x,E,S],[A,w,P],[S,T,N]])+Li([[x,A,k],[A,_,T],[S,P,C]])),R=Ni([[L,M],[M,I]]),j=Ni([[L,I],[M,O]]),D=Ni([[M,I],[I,O]]);return!(Ni([[2*R,j],[j,2*D]])>0&&(I>0||M>0))}(t,0,e)}function si(t,e){const{start:n,end:r}=e,{x:i,y:o,width:s,height:a}=t;return!(n.x>i+s&&r.x>i+s||n.x<i&&r.x<i||n.y>o+a&&r.y>o+a||n.y<o&&r.y<o)&&(!(!t.containsPoint(e.start)&&!t.containsPoint(e.end))||ri(t.topLine(),e)||ri(t.rightLine(),e)||ri(t.bottomLine(),e)||ri(t.leftLine(),e))}function ai(t,e){return!!ui(t,Cr.fromEllipse(e))&&pi(ei.fromRect(t),e)}function ui(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function ci(t,e){return Ai(t,e,{interior:!1})}function li(t,e){return ki(t,e,{interior:!1})}function hi(t,e){return Si(t,e,{interior:!1})}function fi(t,e){return Pi(t,e,{interior:!1})}function di(t,e){return Ai(t,e,{interior:!0})}function pi(t,e){return ki(t,e,{interior:!0})}function gi(t,e){return Si(t,e,{interior:!0})}function vi(t,e){return Pi(t,e,{interior:!0})}function mi(t,e){return Ci(t,e,{interior:!0})}function yi(t,e,n){return t.getSubpaths().some(t=>{const[r]=t.toPolylines(n),{type:i}=t.getSegment(-1);return"Z"===i?di(r,e):ci(r,e)})}function bi(t,e,n){return t.getSubpaths().some(t=>{const[r]=t.toPolylines(n),{type:i}=t.getSegment(-1);return"Z"===i?pi(r,e):li(r,e)})}function xi(t,e,n){return _i(t,ei.fromRect(e),n)}function wi(t,e,n){return Ti(t,e,n,{interior:!1})}function _i(t,e,n){return Ti(t,e,n,{interior:!0})}function Ei(t,e,n,r){return t.getSubpaths().some(t=>{const[i]=t.toPolylines(n),{type:o}=t.getSegment(-1);return"Z"===o?_i(e,i,r):wi(e,i,r)})}function Ai(t,e,n={}){const{interior:r=!1}=n;let i;if(r){if(t.containsPoint(e.start))return!0;const{start:n,end:r,points:o}=t;i=r.equals(n)?o:[...o,n]}else i=t.points;const{length:o}=i,s=new gr;for(let t=0;t<o-1;t++)if(s.start=i[t],s.end=i[t+1],ri(e,s))return!0;return!1}function ki(t,e,n={}){const{start:r,end:i,points:o}=t;if(e.containsPoint(r))return!0;let s;const{interior:a=!1}=n;if(a){if(t.containsPoint(e.center()))return!0;s=i.equals(r)?o:[...o,r]}else s=o;const{length:u}=s,c=new gr;for(let t=0;t<u-1;t++)if(c.start=s[t],c.end=s[t+1],ii(e,c))return!0;return!1}function Si(t,e,n){return Ci(t,ei.fromRect(e),n)}function Ti(t,e,n,r){return t.getSubpaths().some(t=>{const[i]=t.toPolylines(n),{type:o}=t.getSegment(-1);return"Z"===o?Ci(e,i,r):Pi(e,i,r)})}function Pi(t,e,n={}){const{interior:r=!1}=n;let i;if(r){const{start:n}=e;if(t.containsPoint(n))return!0;i=t.clone().close()}else i=t;const o=e.points,{length:s}=o,a=new gr;for(let t=0;t<s-1;t++)if(a.start=o[t],a.end=o[t+1],ci(i,a))return!0;return!1}function Ci(t,e,n){return e.containsPoint(t.start)||Pi(t,e.clone().close(),n)}function Ni(t){return t[0][0]*t[1][1]-t[0][1]*t[1][0]}function Li(t){return t[0][0]*t[1][1]*t[2][2]-t[0][0]*t[1][2]*t[2][1]-t[0][1]*t[1][0]*t[2][2]+t[0][1]*t[1][2]*t[2][0]+t[0][2]*t[1][0]*t[2][1]-t[0][2]*t[1][1]*t[2][0]}ei.parse=function(t){return new ei(Lr(t))},ei.fromRect=function(t){return new ei([t.topLeft(),t.topRight(),t.bottomRight(),t.bottomLeft()])},ei.prototype=zr(Ir.prototype,{type:tr.Polygon,clone:function(){return new ei(Or(this.points))},convexHull:function(){return new ei(Mr(this.points))},lengthPoints:function(){const{start:t,end:e,points:n}=this;return n.length<=1||t.equals(e)?n:[...n,t.clone()]}});const Oi=r,Mi=function(){if("object"!=typeof window||!window.SVGAngle)return function(){throw new Error("SVG is required to use Vectorizer.")};var t={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},e=Math,n=e.PI,r=e.atan2,o=e.sqrt,s=e.min,a=e.max,u=e.cos,c=e.sin,l=function(e,n,r){if(!(this instanceof l))return l.apply(Object.create(l.prototype),arguments);if(e){if(l.isV(e)&&(e=e.node),n=n||{},l.isString(e)){if("svg"===(e=e.trim()).toLowerCase())e=l.createSvgDocument();else if("<"===e[0]){var i=l.createSvgDocument(e);if(i.childNodes.length>1){var o,s,a=[];for(o=0,s=i.childNodes.length;o<s;o++){var u=i.childNodes[o];a.push(new l(document.importNode(u,!0)))}return a}e=document.importNode(i.firstChild,!0)}else e=document.createElementNS(t.svg,e);l.ensureId(e)}return this.node=e,this.setAttributes(n),r&&this.append(r),this}},h=l.prototype;function f(t,e,n){n||(n={});for(var r=n.includeAnnotationIndices,i=n.eol,o=n.lineHeight,s=n.baseSize,a=0,u={},c=e.length-1,h=0;h<=c;h++){var f=e[h],d=null;if(l.isObject(f)){var p=f.attrs,g=l("tspan",p),v=g.node,m=f.t;i&&h===c&&(m+=i),v.textContent=m;var y=p.class;y&&g.addClass(y),r&&g.attr("annotations",f.annotations),d=parseFloat(p["font-size"]),isFinite(d)||(d=s),d&&d>a&&(a=d)}else i&&h===c&&(f+=i),v=document.createTextNode(f||" "),s&&s>a&&(a=s);t.appendChild(v)}return a&&(u.maxFontSize=a),o?u.lineHeight=o:a&&(u.lineHeight=1.2*a),u}Object.defineProperty(h,"id",{enumerable:!0,get:function(){return this.node.id},set:function(t){this.node.id=t}}),h.getTransformToElement=function(t){var e=this.node;if(l.isSVGGraphicsElement(t)&&l.isSVGGraphicsElement(e)){var n=l.toNode(t).getScreenCTM(),r=e.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return l.createSVGMatrix()},h.transform=function(t,e){var n=this.node;if(l.isUndefined(t))return l.transformStringToMatrix(this.attr("transform"));if(e&&e.absolute)return this.attr("transform",l.matrixToTransformString(t));var r=l.createSVGTransform(t);return n.transform.baseVal.appendItem(r),this},h.translate=function(t,e,n){n=n||{},e=e||0;var r=this.attr("transform")||"",i=l.parseTransformString(r);if(r=i.value,l.isUndefined(t))return i.translate;r=r.replace(/translate\([^)]*\)/g,"").trim();var o="translate("+(n.absolute?t:i.translate.tx+t)+","+(n.absolute?e:i.translate.ty+e)+")";return this.attr("transform",(o+" "+r).trim()),this},h.rotate=function(t,e,n,r){r=r||{};var i=this.attr("transform")||"",o=l.parseTransformString(i);if(i=o.value,l.isUndefined(t))return o.rotate;i=i.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;var s="rotate("+(r.absolute?t:o.rotate.angle+t)+(void 0!==e&&void 0!==n?","+e+","+n:"")+")";return this.attr("transform",(i+" "+s).trim()),this},h.scale=function(t,e){e=l.isUndefined(e)?t:e;var n=this.attr("transform")||"",r=l.parseTransformString(n);if(n=r.value,l.isUndefined(t))return r.scale;n=n.replace(/scale\([^)]*\)/g,"").trim();var i="scale("+t+","+e+")";return this.attr("transform",(n+" "+i).trim()),this},h.bbox=function(t,e){var n,r=this.node,i=r.ownerSVGElement;if(!i)return new Cr(0,0,0,0);try{n=r.getBBox()}catch(t){n={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(t)return new Cr(n);var o=this.getTransformToElement(e||i);return l.transformRect(n,o)},h.getBBox=function(t){var e,n={},r=this.node;if(!r.ownerSVGElement||!l.isSVGGraphicsElement(r))return new Cr(0,0,0,0);if(t&&(t.target&&(n.target=l.toNode(t.target)),t.recursive&&(n.recursive=t.recursive)),n.recursive){var i=this.children(),o=i.length;if(0===o)return this.getBBox({target:n.target,recursive:!1});n.target||(n.target=this);for(var s=0;s<o;s++){var a,u=i[s];a=0===u.children().length?u.getBBox({target:n.target,recursive:!1}):u.getBBox({target:n.target,recursive:!0}),e=e?e.union(a):a}return e}try{e=r.getBBox()}catch(t){e={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(n.target){var c=this.getTransformToElement(n.target);return l.transformRect(e,c)}return new Cr(e)};var d=/em$/;function p(t,e){var n=parseFloat(t);return d.test(t)?n*e:n}h.text=function(e,n){if(e&&"string"!=typeof e)throw new Error("Vectorizer: text() expects the first argument to be a string.");e=l.sanitizeText(e),n||(n={});var r=n.displayEmpty,i=n.eol,o=n.textPath,s=n.textVerticalAnchor,a="middle"===s||"bottom"===s||"top"===s,u=n.x;void 0===u&&(u=this.attr("x")||0);var c=n.includeAnnotationIndices,h=n.annotations;h&&!l.isArray(h)&&(h=[h]);var g=n.lineHeight,v="auto"===g,m=v?"1.5em":g||"1em";this.empty(),this.attr({"xml:space":"preserve",display:e||r?null:"none"});var y=parseFloat(this.attr("font-size"));y||(y=16,(a||h)&&this.attr("font-size",y));var b,x=document;o?("string"==typeof o&&(o={d:o}),b=function(t,e){t||(t={});var n=l("textPath"),r=t.d;if(r&&void 0===t["xlink:href"]){var i=l("path").attr("d",r).appendTo(e.defs());n.attr("xlink:href","#"+i.id)}return l.isObject(t)&&n.attr(t),n.node}(o,this)):b=x.createDocumentFragment();for(var w,_=0,E=e.split("\n"),A=[],k=0,S=E.length-1;k<=S;k++){var T,P=m,C="v-line",N=x.createElementNS(t.svg,"tspan"),L=E[k];if(L)if(h){var O=l.annotateString(L,h,{offset:-_,includeAnnotationIndices:c}),M=(T=f(N,O,{includeAnnotationIndices:c,eol:k!==S&&i,lineHeight:v?null:m,baseSize:y})).lineHeight;M&&v&&0!==k&&(P=M),0===k&&(w=.8*T.maxFontSize)}else i&&k!==S&&(L+=i),N.textContent=L;else{N.textContent="-",C+=" v-empty-line";var I=N.style;if(I.fillOpacity=0,I.strokeOpacity=0,h){T={};let t=y;for(let e=(O=l.findAnnotationsAtIndex(h,_)).length;e>0;e--){const n=O[e-1].attrs;if(!n||!("font-size"in n))continue;const r=parseFloat(n["font-size"]);if(isFinite(r)){t=r;break}}v&&(k>0?P=1.2*t:w=.8*t),N.setAttribute("font-size",t),T.maxFontSize=t}}T&&A.push(T),k>0&&N.setAttribute("dy",P),(k>0||o)&&N.setAttribute("x",u),N.className.baseVal=C,b.appendChild(N),_+=L.length+1}if(a)if(h)P=function(t,e,n,r){if(!Array.isArray(e))return 0;var i=e.length;if(!i)return 0;for(var o=e[0],s=p(o.maxFontSize,n)||n,a=0,u=p(r,n),c=1;c<i;c++)a+=p((o=e[c]).lineHeight,n)||u;var l,h=p(o.maxFontSize,n)||n;switch(t){case"middle":l=s/2-.15*h-a/2;break;case"bottom":l=-.25*h-a;break;default:l=.8*s}return l}(s,A,y,m);else if("top"===s)P="0.8em";else{var R;switch(S>0?(R=parseFloat(m)||1,R*=S,d.test(m)||(R/=y)):R=0,s){case"middle":P=.3-R/2+"em";break;case"bottom":P=-R-.3+"em"}}else 0===s?P="0em":s?P=s:(P=0,null===this.attr("y")&&this.attr("y",w||"0.8em"));return b.firstChild.setAttribute("dy",P),this.append(b),this},h.removeAttr=function(t){const e=y[t],{ns:n,local:r}=l.qualifyAttr(e),i=this.node;return n?i.hasAttributeNS(n,r)&&i.removeAttributeNS(n,r):i.hasAttribute(e)&&i.removeAttribute(e),this},h.attr=function(t,e){if(l.isUndefined(t)){for(var n=this.node.attributes,r={},i=0;i<n.length;i++)r[n[i].name]=n[i].value;return r}if(l.isString(t)&&l.isUndefined(e))return this.node.getAttribute(y[t]);if("object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,e);return this},h.normalizePath=function(){return"PATH"===this.tagName()&&this.attr("d",l.normalizePathData(this.attr("d"))),this},h.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},h.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},h.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},h.append=function(t){l.isArray(t)||(t=[t]);for(var e=0,n=t.length;e<n;e++)this.node.appendChild(l.toNode(t[e]));return this},h.prepend=function(t){var e=this.node.firstChild;return e?l(e).before(t):this.append(t)},h.before=function(t){var e=this.node,n=e.parentNode;if(n){l.isArray(t)||(t=[t]);for(var r=0,i=t.length;r<i;r++)n.insertBefore(l.toNode(t[r]),e)}return this},h.appendTo=function(t){return l.toNode(t).appendChild(this.node),this},h.svg=function(){return this.node instanceof window.SVGSVGElement?this:l(this.node.ownerSVGElement)},h.tagName=function(){return this.node.tagName.toUpperCase()},h.defs=function(){var t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?l(e):l("defs").appendTo(t)},h.clone=function(){var t=l(this.node.cloneNode(!0));return t.node.id=l.uniqueId(),t},h.findOne=function(t){var e=this.node.querySelector(t);return e?l(e):void 0},h.find=function(t){var e=[],n=this.node.querySelectorAll(t);if(n)for(var r=0;r<n.length;r++)e.push(l(n[r]));return e},h.children=function(){for(var t=this.node.childNodes,e=[],n=0;n<t.length;n++)1===t[n].nodeType&&e.push(l(t[n]));return e},h.parent=function(){return l(this.node.parentNode)||null},h.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},h.findParentByClass=function(t,e){for(var n=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==e&&r!==n;){var i=l(r);if(i.hasClass(t))return i;r=r.parentNode}return null},h.contains=function(t){var e=this.node,n=l.toNode(t),r=n&&n.parentNode;return e===r||!!(r&&1===r.nodeType&&16&e.compareDocumentPosition(r))},h.toLocalPoint=function(t,e){var n=this.svg().node,r=n.createSVGPoint();r.x=t,r.y=e;try{var i=r.matrixTransform(n.getScreenCTM().inverse()),o=this.getTransformToElement(n).inverse()}catch(t){return r}return i.matrixTransform(o)},h.translateCenterToPoint=function(t){var e=this.getBBox({target:this.svg()}).center();return this.translate(t.x-e.x,t.y-e.y),this},h.translateAndAutoOrient=function(t,e,n){t=new hr(t),e=new hr(e),n||(n=this.svg());var r=this.scale();this.attr("transform","");var i=this.getBBox({target:n}).scale(r.sx,r.sy),o=l.createSVGTransform();o.setTranslate(-i.x-i.width/2,-i.y-i.height/2);var s=l.createSVGTransform(),a=t.angleBetween(e,t.clone().offset(1,0));a&&s.setRotate(a,0,0);var u=l.createSVGTransform(),c=t.clone().move(e,i.width/2);u.setTranslate(2*t.x-c.x,2*t.y-c.y);var h=this.getTransformToElement(n),f=l.createSVGTransform();return f.setMatrix(u.matrix.multiply(s.matrix.multiply(o.matrix.multiply(h.scale(r.sx,r.sy))))),this.attr("transform",l.matrixToTransformString(f.matrix)),this},h.animateAlongPath=function(t,e){e=l.toNode(e);var n=l.ensureId(e),r=l("animateMotion",t),i=l("mpath",{"xlink:href":"#"+n});r.append(i),this.append(r);try{r.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var o=r.node;o.animators=[];var s=o.getAttribute("id");s&&(id2anim[s]=o);for(var a=getTargets(o),u=0,c=a.length;u<c;u++){var h=a[u],f=new Animator(o,h,u);animators.push(f),o.animators[u]=f,f.register()}}}return this};const g=/[^\x20\t\r\n\f]+/g;function v(t){return l.isString(t)&&t.trim().match(g)||[]}h.hasClass=function(t){return!!l.isString(t)&&this.node.classList.contains(t.trim())},h.addClass=function(t){return this.node.classList.add(...v(t)),this},h.removeClass=function(t){return this.node.classList.remove(...v(t)),this},h.toggleClass=function(t,e){const n=v(t);for(let t=0;t<n.length;t++)this.node.classList.toggle(n[t],e);return this},h.sample=function(t){t=t||1;for(var e,n=this.node,r=n.getTotalLength(),i=[],o=0;o<r;)e=n.getPointAtLength(o),i.push({x:e.x,y:e.y,distance:o}),o+=t;return i},h.convertToPath=function(){var t=l("path");t.attr(this.attr());var e=this.convertToPathData();return e&&t.attr("d",e),t},h.convertToPathData=function(){var t=this.tagName();switch(t){case"PATH":return this.attr("d");case"LINE":return l.convertLineToPathData(this.node);case"POLYGON":return l.convertPolygonToPathData(this.node);case"POLYLINE":return l.convertPolylineToPathData(this.node);case"ELLIPSE":return l.convertEllipseToPathData(this.node);case"CIRCLE":return l.convertCircleToPathData(this.node);case"RECT":return l.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},l.prototype.toGeometryShape=function(){var t,e,n,r,i,o,s,a,u,c,h,f,d,p,g;switch(this.tagName()){case"RECT":return t=parseFloat(this.attr("x"))||0,e=parseFloat(this.attr("y"))||0,n=parseFloat(this.attr("width"))||0,r=parseFloat(this.attr("height"))||0,new Cr(t,e,n,r);case"CIRCLE":return i=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,s=parseFloat(this.attr("r"))||0,new xr({x:i,y:o},s,s);case"ELLIPSE":return i=parseFloat(this.attr("cx"))||0,o=parseFloat(this.attr("cy"))||0,a=parseFloat(this.attr("rx"))||0,u=parseFloat(this.attr("ry"))||0,new xr({x:i,y:o},a,u);case"POLYLINE":return c=l.getPointsFromSvgNode(this),new Ir(c);case"POLYGON":return(c=l.getPointsFromSvgNode(this)).length>1&&c.push(c[0]),new Ir(c);case"PATH":return h=this.attr("d"),Gr.isDataSupported(h)||(h=l.normalizePathData(h)),new Gr(h);case"LINE":return f=parseFloat(this.attr("x1"))||0,p=parseFloat(this.attr("y1"))||0,d=parseFloat(this.attr("x2"))||0,g=parseFloat(this.attr("y2"))||0,new gr({x:f,y:p},{x:d,y:g})}return this.getBBox()},h.findIntersection=function(t,e){var n=this.svg().node;e=e||n;var r=this.getBBox({target:e}),i=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var o,s=this.tagName();if("RECT"===s){var a=new Cr(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),u=this.getTransformToElement(e),c=l.decomposeMatrix(u),h=n.createSVGTransform();h.setRotate(-c.rotation,i.x,i.y);var f=l.transformRect(a,h.matrix.multiply(u));o=new Cr(f).intersectionWithLineFromCenterToPoint(t,c.rotation)}else if("PATH"===s||"POLYGON"===s||"POLYLINE"===s||"CIRCLE"===s||"ELLIPSE"===s){var d,p,g,v,m,y=("PATH"===s?this:this.convertToPath()).sample(),b=1/0,x=[];for(d=0;d<y.length;d++)p=y[d],g=(g=l.createSVGPoint(p.x,p.y)).matrixTransform(this.getTransformToElement(e)),(m=(p=new hr(g)).distance(i)+(v=1.1*p.distance(t)))<b?(b=m,x=[{sample:p,refDistance:v}]):m<b+1&&x.push({sample:p,refDistance:v});x.sort(function(t,e){return t.refDistance-e.refDistance}),x[0]&&(o=x[0].sample)}return o}},h.setAttribute=function(t,e){const n=this.node;if(null===e)return this.removeAttr(t),this;const r=y[t],{ns:i}=l.qualifyAttr(r);return i?n.setAttributeNS(i,r,e):"id"===r?n.id=e:n.setAttribute(r,e),this},l.createSvgDocument=function(e){if(e){const n=`<svg xmlns="${t.svg}" xmlns:xlink="${t.xlink}" version="1.1">${e}</svg>`,{documentElement:r}=l.parseXML(n,{async:!1});return r}const n=document.createElementNS(t.svg,"svg");return n.setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),n.setAttribute("version","1.1"),n},l.createSVGStyle=function(t){const{node:e}=l("style",{type:"text/css"},[l.createCDATASection(t)]);return e},l.createCDATASection=function(t=""){return document.implementation.createDocument(null,"xml",null).createCDATASection(t)},l.idCounter=0,l.uniqueId=function(){return"v-"+ ++l.idCounter},l.toNode=function(t){return l.isV(t)?t.node:t.nodeName&&t||t[0]},l.ensureId=function(t){return(t=l.toNode(t)).id||(t.id=l.uniqueId())},l.sanitizeText=function(t){return(t||"").replace(/ /g," ")},l.isUndefined=function(t){return void 0===t},l.isString=function(t){return"string"==typeof t},l.isObject=function(t){return t&&"object"==typeof t},l.isArray=Array.isArray,l.parseXML=function(t,e){var n;e=e||{};try{var r=new DOMParser;l.isUndefined(e.async)||(r.async=e.async),n=r.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n};const m=Object.create(null);["baseFrequency","baseProfile","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].forEach(t=>m[t]=t),m.xlinkShow="xlink:show",m.xlinkRole="xlink:role",m.xlinkActuate="xlink:actuate",m.xlinkHref="xlink:href",m.xlinkType="xlink:type",m.xlinkTitle="xlink:title",m.xmlBase="xml:base",m.xmlLang="xml:lang",m.xmlSpace="xml:space";const y=new Proxy(m,{get:(t,e)=>l.supportCamelCaseAttributes?e in t?t[e]:t[e]=e.replace(/[A-Z]/g,"-$&").toLowerCase():e});Object.defineProperty(l,"attributeNames",{enumerable:!0,value:y,writable:!1}),Object.defineProperty(l,"supportCamelCaseAttributes",{enumerable:!0,value:!0,writable:!0}),l.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var n=e.split(":");return{ns:t[n[0]],local:n[1]}}return{ns:null,local:e}},l.transformSeparatorRegex=/[ ,]+/,l.transformRegex=/\b\w+\([^()]+\)/g,l.transformFunctionRegex=/\b(\w+)\(([^()]+)\)/,l.transformTranslateRegex=/\btranslate\(([^()]+)\)/,l.transformRotateRegex=/\brotate\(([^()]+)\)/,l.transformScaleRegex=/\bscale\(([^()]+)\)/,l.transformStringToMatrix=function(t){let e=l.createSVGMatrix();const n=t&&t.match(l.transformRegex);if(!n)return e;const r=n.length;for(let t=0;t<r;t++){const r=n[t].match(l.transformFunctionRegex);if(r){let t,n,i,o,s,a=l.createSVGMatrix();const u=r[1].toLowerCase(),c=r[2].split(l.transformSeparatorRegex);switch(u){case"scale":t=parseFloat(c[0]),n=void 0===c[1]?t:parseFloat(c[1]),a=a.scaleNonUniform(t,n);break;case"translate":i=parseFloat(c[0]),o=parseFloat(c[1]),a=a.translate(i,o);break;case"rotate":s=parseFloat(c[0]),i=parseFloat(c[1])||0,o=parseFloat(c[2])||0,a=0!==i||0!==o?a.translate(i,o).rotate(s).translate(-i,-o):a.rotate(s);break;case"skewx":s=parseFloat(c[0]),a=a.skewX(s);break;case"skewy":s=parseFloat(c[0]),a=a.skewY(s);break;case"matrix":a.a=parseFloat(c[0]),a.b=parseFloat(c[1]),a.c=parseFloat(c[2]),a.d=parseFloat(c[3]),a.e=parseFloat(c[4]),a.f=parseFloat(c[5]);break;default:continue}e=e.multiply(a)}}return e},l.matrixToTransformString=function(t){return t||(t=!0),"matrix("+(void 0!==t.a?t.a:1)+","+(void 0!==t.b?t.b:0)+","+(void 0!==t.c?t.c:0)+","+(void 0!==t.d?t.d:1)+","+(void 0!==t.e?t.e:0)+","+(void 0!==t.f?t.f:0)+")"},l.parseTransformString=function(t){var e,n,r;if(t){var i=l.transformSeparatorRegex;if(t.trim().indexOf("matrix")>=0){var o=l.transformStringToMatrix(t),s=l.decomposeMatrix(o);e=[s.translateX,s.translateY],r=[s.scaleX,s.scaleY],n=[s.rotation];var a=[];0===e[0]&&0===e[1]||a.push("translate("+e+")"),1===r[0]&&1===r[1]||a.push("scale("+r+")"),0!==n[0]&&a.push("rotate("+n+")"),t=a.join(" ")}else{const o=t.match(l.transformTranslateRegex);o&&(e=o[1].split(i));const s=t.match(l.transformRotateRegex);s&&(n=s[1].split(i));const a=t.match(l.transformScaleRegex);a&&(r=a[1].split(i))}}var u=r&&r[0]?parseFloat(r[0]):1;return{value:t,translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:u,sy:r&&r[1]?parseFloat(r[1]):u}}},l.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},l.decomposeMatrix=function(t){var e=l.deltaTransformPoint(t,{x:0,y:1}),i=l.deltaTransformPoint(t,{x:1,y:0}),s=180/n*r(e.y,e.x)-90,a=180/n*r(i.y,i.x);return{translateX:t.e,translateY:t.f,scaleX:o(t.a*t.a+t.b*t.b),scaleY:o(t.c*t.c+t.d*t.d),skewX:s,skewY:a,rotation:s}},l.matrixToScale=function(t){var e,n,r,i;return t?(e=l.isUndefined(t.a)?1:t.a,i=l.isUndefined(t.d)?1:t.d,n=t.b,r=t.c):e=i=1,{sx:n?o(e*e+n*n):e,sy:r?o(r*r+i*i):i}},l.matrixToRotate=function(t){var e={x:0,y:1};return t&&(e=l.deltaTransformPoint(t,e)),{angle:Un(Hn(r(e.y,e.x))-90)}},l.matrixToTranslate=function(t){return{tx:t&&t.e||0,ty:t&&t.f||0}},l.isV=function(t){return t instanceof l},l.isVElement=l.isV,l.isSVGGraphicsElement=function(t){return!!t&&(t=l.toNode(t))instanceof SVGElement&&"function"==typeof t.getScreenCTM};var b=l("svg").node;return l.createSVGMatrix=function(t){var e=b.createSVGMatrix();for(var n in t)e[n]=t[n];return e},l.createSVGTransform=function(t){return l.isUndefined(t)?b.createSVGTransform():(t instanceof SVGMatrix||(t=l.createSVGMatrix(t)),b.createSVGTransformFromMatrix(t))},l.createSVGPoint=function(t,e){var n=b.createSVGPoint();return n.x=t,n.y=e,n},l.transformRect=function(t,e){var n=b.createSVGPoint();n.x=t.x,n.y=t.y;var r=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y;var i=n.matrixTransform(e);n.x=t.x+t.width,n.y=t.y+t.height;var o=n.matrixTransform(e);n.x=t.x,n.y=t.y+t.height;var u=n.matrixTransform(e),c=s(r.x,i.x,o.x,u.x),l=a(r.x,i.x,o.x,u.x),h=s(r.y,i.y,o.y,u.y),f=a(r.y,i.y,o.y,u.y);return new Cr(c,h,l-c,f-h)},l.transformPoint=function(t,e){return new hr(l.createSVGPoint(t.x,t.y).matrixTransform(e))},l.transformLine=function(t,e){return new gr(l.transformPoint(t.start,e),l.transformPoint(t.end,e))},l.transformPolyline=function(t,e){var n=t instanceof Ir?t.points:t;l.isArray(n)||(n=[]);for(var r=[],i=0,o=n.length;i<o;i++)r[i]=l.transformPoint(n[i],e);return new Ir(r)},l.styleToObject=function(t){for(var e={},n=t.split(";"),r=0;r<n.length;r++){var i=n[r].split("=");e[i[0].trim()]=i[1].trim()}return e},l.createSlicePathData=function(t,e,r,i){var o=2*n-1e-6,s=t,a=e,l=r,h=i,f=(h<l&&(f=l,l=h,h=f),h-l),d=f<n?"0":"1",p=u(l),g=c(l),v=u(h),m=c(h);return f>=o?s?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":s?"M"+a*p+","+a*g+"A"+a+","+a+" 0 "+d+",1 "+a*v+","+a*m+"L"+s*v+","+s*m+"A"+s+","+s+" 0 "+d+",0 "+s*p+","+s*g+"Z":"M"+a*p+","+a*g+"A"+a+","+a+" 0 "+d+",1 "+a*v+","+a*m+"L0,0Z"},l.mergeAttrs=function(t,e){for(var n in e)"class"===n?t[n]=t[n]?t[n]+" "+e[n]:e[n]:"style"===n?l.isObject(t[n])&&l.isObject(e[n])?t[n]=l.mergeAttrs(t[n],e[n]):l.isObject(t[n])?t[n]=l.mergeAttrs(t[n],l.styleToObject(e[n])):l.isObject(e[n])?t[n]=l.mergeAttrs(l.styleToObject(t[n]),e[n]):t[n]=l.mergeAttrs(l.styleToObject(t[n]),l.styleToObject(e[n])):t[n]=e[n];return t},l.annotateString=function(t,e,n){e=e||[];for(var r,i,o,s=(n=n||{}).offset||0,a=[],u=[],c=0;c<t.length;c++){i=u[c]=t[c];for(var h=0;h<e.length;h++){var f=e[h],d=f.start+s,p=f.end+s;c>=d&&c<p&&(l.isObject(i)?i.attrs=l.mergeAttrs(l.mergeAttrs({},i.attrs),f.attrs):i=u[c]={t:t[c],attrs:f.attrs},n.includeAnnotationIndices&&(i.annotations||(i.annotations=[])).push(h))}(o=u[c-1])?l.isObject(i)&&l.isObject(o)?JSON.stringify(i.attrs)===JSON.stringify(o.attrs)?r.t+=i.t:(a.push(r),r=i):l.isObject(i)||l.isObject(o)?(a.push(r),r=i):r=(r||"")+i:r=i}return r&&a.push(r),a},l.findAnnotationsAtIndex=function(t,e){var n=[];return t&&t.forEach(function(t){t.start<e&&e<=t.end&&n.push(t)}),n},l.findAnnotationsBetweenIndexes=function(t,e,n){var r=[];return t&&t.forEach(function(t){(e>=t.start&&e<t.end||n>t.start&&n<=t.end||t.start>=e&&t.end<n)&&r.push(t)}),r},l.shiftAnnotations=function(t,e,n){return t&&t.forEach(function(t){t.start<e&&t.end>=e?t.end+=n:t.start>=e&&(t.start+=n,t.end+=n)}),t},l.convertLineToPathData=function(t){return["M",(t=l(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},l.convertPolygonToPathData=function(t){var e=l.getPointsFromSvgNode(t);return 0===e.length?null:l.svgPointsToPath(e)+" Z"},l.convertPolylineToPathData=function(t){var e=l.getPointsFromSvgNode(t);return 0===e.length?null:l.svgPointsToPath(e)},l.svgPointsToPath=function(t){for(var e=0,n=t.length;e<n;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},l.getPointsFromSvgNode=function(t){var e=[],n=(t=l.toNode(t)).points;if(n)for(var r=0,i=n.numberOfItems;r<i;r++)e.push(n.getItem(r));return e},l.KAPPA=.551784,l.convertCircleToPathData=function(t){t=l(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),i=r*l.KAPPA;return["M",e,n-r,"C",e+i,n-r,e+r,n-i,e+r,n,"C",e+r,n+i,e+i,n+r,e,n+r,"C",e-i,n+r,e-r,n+i,e-r,n,"C",e-r,n-i,e-i,n-r,e,n-r,"Z"].join(" ")},l.convertEllipseToPathData=function(t){t=l(t);var e=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),i=parseFloat(t.attr("ry"))||r,o=r*l.KAPPA,s=i*l.KAPPA;return["M",e,n-i,"C",e+o,n-i,e+r,n-s,e+r,n,"C",e+r,n+s,e+o,n+i,e,n+i,"C",e-o,n+i,e-r,n+s,e-r,n,"C",e-r,n-s,e-o,n-i,e,n-i,"Z"].join(" ")},l.convertRectToPathData=function(t){return t=l(t),l.rectToPath({x:parseFloat(t.attr("x"))||0,y:parseFloat(t.attr("y"))||0,width:parseFloat(t.attr("width"))||0,height:parseFloat(t.attr("height"))||0,rx:parseFloat(t.attr("rx"))||0,ry:parseFloat(t.attr("ry"))||0})},l.rectToPath=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=s(t.rx||t["top-rx"]||0,r/2),a=s(t.rx||t["bottom-rx"]||0,r/2),u=s(t.ry||t["top-ry"]||0,i/2),c=s(t.ry||t["bottom-ry"]||0,i/2);return(o||a||u||c?["M",e,n+u,"v",i-u-c,"a",a,c,0,0,0,a,c,"h",r-2*a,"a",a,c,0,0,0,a,-c,"v",-(i-c-u),"a",o,u,0,0,0,-o,-u,"h",-(r-2*o),"a",o,u,0,0,0,-o,u,"Z"]:["M",e,n,"H",e+r,"V",n+i,"H",e,"V",n,"Z"]).join(" ")},l.normalizePathData=function(){var t="\t\n\v\f\r   ᠎             　\u2028\u2029",e=new RegExp("([a-z])["+t+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+t+"]*,?["+t+"]*)+)","ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+t+"]*,?["+t+"]*","ig"),r=Math,i=r.PI,o=r.sin,s=r.cos,a=r.tan,u=r.asin,c=r.sqrt,l=r.abs;function h(t,e,n,r,i,o){var s=1/3,a=2/3;return[s*t+a*n,s*e+a*r,s*i+a*n,s*o+a*r,i,o]}function f(t,e,n){return{x:t*s(n)-e*o(n),y:t*o(n)+e*s(n)}}function d(t,e,n,r,h,p,g,v,m,y){var b,x=120*i/180,w=i/180*(+h||0),_=[];if(y)L=y[0],O=y[1],C=y[2],N=y[3];else{t=(b=f(t,e,-w)).x,e=b.y;var E=(t-(v=(b=f(v,m,-w)).x))/2,A=(e-(m=b.y))/2,k=E*E/(n*n)+A*A/(r*r);k>1&&(n*=k=c(k),r*=k);var S=n*n,T=r*r,P=(p==g?-1:1)*c(l((S*T-S*A*A-T*E*E)/(S*A*A+T*E*E)));if(!Number.isFinite(P))return[t,e,v,m,v,m];var C=P*n*A/r+(t+v)/2,N=P*-r*E/n+(e+m)/2,L=u(((e-N)/r).toFixed(9)),O=u(((m-N)/r).toFixed(9));(L=t<C?i-L:L)<0&&(L=2*i+L),(O=v<C?i-O:O)<0&&(O=2*i+O),g&&L>O&&(L-=2*i),!g&&O>L&&(O-=2*i)}var M=O-L;if(l(M)>x){var I=O,R=v,j=m;_=d(v=C+n*s(O=L+x*(g&&O>L?1:-1)),m=N+r*o(O),n,r,h,0,g,R,j,[O,I,C,N])}M=O-L;var D=s(L),B=o(L),V=s(O),F=o(O),z=a(M/4),G=4/3*(n*z),U=4/3*(r*z),q=[t,e],H=[t+G*B,e-U*D],$=[v+G*F,m-U*V],W=[v,m];if(H[0]=2*q[0]-H[0],H[1]=2*q[1]-H[1],y)return[H,$,W].concat(_);for(var X=[],Y=(_=[H,$,W].concat(_).join().split(",")).length,Z=0;Z<Y;Z++)X[Z]=Z%2?f(_[Z-1],_[Z],w).y:f(_[Z],_[Z+1],w).x;return X}function p(t){var r=function(t){if(Array.isArray(t)&&Array.isArray(t&&t[0])||(t=function(t){if(!t)return null;var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return String(t).replace(e,function(t,e,o){var s=[],a=e.toLowerCase();for(o.replace(n,function(t,e){e&&s.push(+e)}),"m"===a&&s.length>2&&(i.push([e].concat(s.splice(0,2))),a="l",e="m"===e?"l":"L");s.length>=r[a]&&(i.push([e].concat(s.splice(0,r[a]))),r[a]););}),i}(t)),!t||!t.length)return[["M",0,0]];for(var r,i=[],o=0,s=0,a=0,u=0,c=t.length,l=0;l<c;l++){var h=[];i.push(h);var f,d,p=t[l];if((r=p[0])!=r.toUpperCase())switch(h[0]=r.toUpperCase(),h[0]){case"A":h[1]=p[1],h[2]=p[2],h[3]=p[3],h[4]=p[4],h[5]=p[5],h[6]=+p[6]+o,h[7]=+p[7]+s;break;case"V":h[1]=+p[1]+s;break;case"H":h[1]=+p[1]+o;break;case"M":for(a=+p[1]+o,u=+p[2]+s,f=p.length,d=1;d<f;d++)h[d]=+p[d]+(d%2?o:s);break;default:for(f=p.length,d=1;d<f;d++)h[d]=+p[d]+(d%2?o:s)}else for(var g=p.length,v=0;v<g;v++)h[v]=p[v];switch(h[0]){case"Z":o=+a,s=+u;break;case"H":o=h[1];break;case"V":s=h[1];break;case"M":a=h[h.length-2],u=h[h.length-1],o=h[h.length-2],s=h[h.length-1];break;default:o=h[h.length-2],s=h[h.length-1]}}return i}(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function o(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(t[0]in{T:1,Q:1}||(e.qx=null,e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=0===parseFloat(t[1])||0===parseFloat(t[2])?["L",t[6],t[7]]:["C"].concat(d.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(h(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(h(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"H":t=["L"].concat(t[1],e.y);break;case"V":t=["L"].concat(e.x,t[1])}return t}function s(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)a[e]="A",t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),l=r.length}}for(var a=[],u="",c="",l=r.length,f=0;f<l;f++){r[f]&&(u=r[f][0]),"C"!==u&&(a[f]=u,f>0&&(c=a[f-1])),r[f]=o(r[f],i,c),"A"!==a[f]&&"C"===u&&(a[f]="C"),s(r,f);var p=r[f],g=p.length;i.x=p[g-2],i.y=p[g-1],i.bx=parseFloat(p[g-4])||i.x,i.by=parseFloat(p[g-3])||i.y}return r[0][0]&&"M"===r[0][0]||r.unshift(["M",0,0]),r}return function(t){return p(t).join(",").split(",").join(" ")}}(),l.namespace=t,l.g=i,l}(),Ii=Mi;function Ri(t){let e=t.length;for(;e--;)ji(t[e])}function ji(t){Rn.event.remove(t),Sn.remove(t),Tn.remove(t)}function Di(t){for(let e=0;e<t.length;e++){const n=t[e];n.parentNode&&n.parentNode.removeChild(n)}}function Bi(){for(let t=0;t<this.length;t++){const e=this[t];ji(e),Ri(e.getElementsByTagName("*"))}return Di(this),this}function Vi(){return Di(this),this}function Fi(){for(let t=0;t<this.length;t++){const e=this[t];1===e.nodeType&&(Ri(e.getElementsByTagName("*")),e.textContent="")}return this}function zi(){const t=[];for(let e=0;e<this.length;e++)t.push(this[e].cloneNode(!0));return this.pushStack(t)}function Gi(t){const[e]=this;return e?0===arguments.length?e.innerHTML:void 0===t?this:(Ri(e.getElementsByTagName("*")),"string"!=typeof t&&"number"!=typeof t?(e.innerHTML="",this.append(t)):(e.innerHTML=t,this)):null}function Ui(...t){const[e]=this;return e?(t.forEach(t=>{t&&("string"==typeof t?e.append(...Rn.parseHTML(t)):"[object Object]"===t.toString()?this.append(...Array.from(t)):Array.isArray(t)?this.append(...t):e.appendChild(t))}),this):this}function qi(...t){const[e]=this;return e?(t.forEach(t=>{t&&("string"==typeof t?e.prepend(...Rn.parseHTML(t)):"[object Object]"===t.toString()?this.prepend(...Array.from(t)):Array.isArray(t)?this.prepend(...t):e.insertBefore(t,e.firstChild))}),this):this}function Hi(t){return Rn(t).append(this),this}function $i(t){return Rn(t).prepend(this),this}const Wi={};function Xi(t,e,n){"number"==typeof n&&Wi[wn(e)]&&(n+="px"),t.style[e]=n}function Yi(t,e){let n;if("string"==typeof t){if(void 0===e){const[e]=this;return e?e.style[t]:null}n={[t]:e}}else{if(!t)throw new Error("no styles provided");n=t}for(let t in n)if(n.hasOwnProperty(t))for(let e=0;e<this.length;e++)Xi(this[e],t,n[t]);return this}function Zi(t,e){if(arguments.length<2){const[e]=this;return e?void 0===t?e.dataset:e.dataset[t]:null}for(let n=0;n<this.length;n++)this[n].dataset[t]=e;return this}function Ji(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];Ii.prototype[t].apply({node:i},n)}}function Ki(){return Ji("removeClass",this,arguments),this}function Qi(){return Ji("addClass",this,arguments),this}function to(){return Ji("toggleClass",this,arguments),this}function eo(){const[t]=this;return!!t&&Ii.prototype.hasClass.apply({node:t},arguments)}function no(t){const e=[];for(let n=0;n<this.length;n++){const r=this[n];let i=Array.from(r.children);"string"==typeof t&&(i=i.filter(e=>e.matches(t))),e.push(...i)}return this.pushStack(e)}function ro(t){const e=[];for(let n=0;n<this.length;n++){const r=this[n];if("string"==typeof t){const n=r.closest(t);n&&e.push(n)}else{const[n]=Rn(t);n&&n.contains(r)&&e.push(n)}}return this.pushStack(e)}function io(t,e,n,r){return Rn.event.on(this,t,e,n,r),this}function oo(t,e,n,r){return Rn.event.on(this,t,e,n,r,1),this}function so(t,e,n){if(t&&t.preventDefault&&t.handleObj){const e=t.handleObj;return Rn(t.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if("object"==typeof t){for(let n in t)this.off(n,e,t[n]);return this}!1!==e&&"function"!=typeof e||(n=e,e=void 0);for(let r=0;r<this.length;r++)Rn.event.remove(this[r],t,n,e);return this}function ao(){const[t]=this;if(t===window)return t.document.documentElement.clientWidth;if(!t)return;const e=window.getComputedStyle(t),n=t.offsetWidth,r=parseFloat(e.borderTopWidth);return n-parseFloat(e.borderBottomWidth)-r-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)}function uo(){const[t]=this;if(t===window)return t.document.documentElement.clientHeight;if(!t)return;const e=window.getComputedStyle(t);return t.offsetHeight-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)}function co(){const[t]=this;if(!t)return;let e,n,r,i=Rn(t),o={top:0,left:0};if("fixed"===i.css("position"))n=t.getBoundingClientRect();else{n=i.offset(),r=t.ownerDocument,e=t.offsetParent||r.documentElement;const s=t=>{const{position:e}=getComputedStyle(t);return"static"===e};for(;e&&e!==r.documentElement&&s(e);)e=e.offsetParent||r.documentElement;if(e&&e!==t&&1===e.nodeType&&!s(e)){const t=window.getComputedStyle(e),n=parseFloat(t.borderTopWidth)||0,r=parseFloat(t.borderLeftWidth)||0;o=Rn(e).offset(),o.top+=n,o.left+=r}}const s=parseFloat(window.getComputedStyle(t).marginTop)||0,a=parseFloat(window.getComputedStyle(t).marginLeft)||0;return{top:n.top-o.top-s,left:n.left-o.left-a}}function lo(t){const[e]=this;if(void 0===t){if(!e)return null;if(!e.getClientRects().length)return{top:0,left:0};const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}if(!e)return this;const n=window.getComputedStyle(e);"static"===n.position&&this.css("position","relative");const r=this.offset(),i=t.top-r.top,o=t.left-r.left;return this.css({top:(parseFloat(n.top)||0)+i+"px",left:(parseFloat(n.left)||0)+o+"px"}),this}["width","height","top","bottom","left","right","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","margin","marginTop","marginBottom","marginLeft","marginRight"].forEach(t=>{Wi[t]=!0});const ho="animationFrameId",fo={};function po(t,e={}){this.stop();for(let n=0;n<this.length;n++)go(this[n],t,e);return this}function go(t,e,n={}){let{duration:r=400,easing:i="ease-in-out",delay:o=0,complete:s}=n;const a=setTimeout(function(){const n=Rn(t);let a=!1,u="transitionend";r/=1e3,o/=1e3;const c={};if("string"==typeof e)c["animation-name"]=e,c["animation-duration"]=r+"s",c["animation-delay"]=o+"s",c["animation-timing-function"]=i,u="animationend";else{const t=[];for(var l in e)e.hasOwnProperty(l)&&(c[l]=e[l],t.push(l));r>0&&(c["transition-property"]=t.join(", "),c["transition-duration"]=r+"s",c["transition-delay"]=o+"s",c["transition-timing-function"]=i)}const h=function(e){if(e){if(e.target!==e.currentTarget)return;e.target.removeEventListener(u,h)}else t.removeEventListener(u,h);a=!0,n.css(fo),s&&s.call(t)};if(r>0){t.addEventListener(u,h);const e=setTimeout(function(){a||h(null)},1e3*(r+o)+25);Sn.set(t,ho,{id:e,stop:()=>{clearTimeout(e),t.removeEventListener(u,h)}})}n.css(c),r<=0&&h(null)});Sn.set(t,ho,{stop:()=>clearTimeout(a)})}function vo(){for(let t=0;t<this.length;t++){const e=this[t],n=Sn.get(e,ho);n&&(n.stop(),Sn.remove(e,ho))}return this.css(fo),this}fo["transition-property"]=fo["transition-duration"]=fo["transition-delay"]=fo["transition-timing-function"]=fo["animation-name"]=fo["animation-duration"]=fo["animation-delay"]=fo["animation-timing-function"]="";const mo={outerWidth:"offsetWidth",outerHeight:"offsetHeight",innerWidth:"clientWidth",innerHeight:"clientHeight",scrollLeft:"scrollLeft",scrollTop:"scrollTop",val:"value",text:"textContent"},yo={disabled:"disabled",value:"value",text:"textContent"},bo={prop:function(t,e){if(!t)throw new Error("no property provided");if(1===arguments.length){const[e]=this;return e?e[t]:null}if(void 0===e)return this;for(let n=0;n<this.length;n++)this[n][t]=e;return this},attr:function(t,e){let n;if("string"==typeof t){if(void 0===e){const[e]=this;return e?e.getAttribute(t):null}n={[t]:e}}else{if(!t)throw new Error("no attributes provided");n=t}for(let t in n)if(n.hasOwnProperty(t)){const e=n[t];if(yo[t]){this.prop(yo[t],e);continue}for(let n=0;n<this.length;n++)null===e?this[n].removeAttribute(t):this[n].setAttribute(t,e)}return this}};Object.keys(mo).forEach(t=>{bo[t]=function(...e){return this.prop(mo[t],...e)}});const xo=bo,wo="joint-",_o=Object.create(null),Eo=_o;_o.load={noBubble:!0},[["mouseenter","mouseover"],["mouseleave","mouseout"],["pointerenter","pointerover"],["pointerleave","pointerout"]].forEach(([t,e])=>{_o[t]={delegateType:e,bindType:e,handle:function(t){const n=t.relatedTarget,r=t.handleObj;let i;return n&&this.contains(n)||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}});_o.dbltap={bindType:"touchend",delegateType:"touchend",handle:function(t,...e){const{handleObj:n,target:r}=t,i=Rn.data.create(r),o=(new Date).getTime(),s="lastTouch"in i?o-i.lastTouch:0;s<300&&s>30?(i.lastTouch=null,t.type=n.origType,n.handler.call(this,t,...e)):i.lastTouch=o}},Object.assign(Rn.fn,o),Object.assign(Rn.fn,s),Object.assign(Rn.fn,xo),Object.assign(Rn.event.special,Eo);const Ao=Rn,ko=function(t){return t?t.toString().split(" ").map(function(t){return t.substr(0,6)!==wo&&(t=wo+t),t}).join(" "):t},So=function(t,e){const n={},r={},i=Ii.namespace.svg,o=e||i,s=document.createDocumentFragment(),a=function(t,e,o){for(let s=0;s<t.length;s++){const u=t[s];if("string"==typeof u){const t=document.createTextNode(u);e.appendChild(t);continue}if(!u.hasOwnProperty("tagName"))throw new Error("json-dom-parser: missing tagName");const c=u.tagName;let l;const h=u.hasOwnProperty("namespaceURI")?u.namespaceURI:o;l=document.createElementNS(h,c);const f=h===i,d=f?Ii(l):Ao(l),p=u.attributes;p&&d.attr(p);const g=u.style;if(g&&Ao(l).css(g),u.hasOwnProperty("className")){const t=u.className;f?l.className.baseVal=t:l.className=t}if(u.hasOwnProperty("textContent")&&(l.textContent=u.textContent),u.hasOwnProperty("selector")){const t=u.selector;if(n[t])throw new Error("json-dom-parser: selector must be unique");n[t]=l,d.attr("joint-selector",t)}if(u.hasOwnProperty("groupSelector")){let t=u.groupSelector;Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){const n=t[e];let i=r[n];i||(i=r[n]=[]),i.push(l)}}e.appendChild(l);const v=u.children;Array.isArray(v)&&a(v,l,h)}};return a(t,s,o),{fragment:s,selectors:n,groupSelectors:r}},To=function(t){let e=0;if(0===t.length)return e;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e},Po=function(t,e,n){for(var r,i=Array.isArray(e)?e:e.split(n||"/"),o=0,s=i.length;o<s;){if(r=i[o++],Object(t)!==t||!(r in t))return;t=t[r]}return t},Co=function(t,e){return"string"!=typeof e&&"number"!=typeof e&&(e=String(e)),("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!==e},No=function(t,e,n,r){const i=Array.isArray(e)?e:e.split(r||"/"),o=i.length-1;let s=t,a=0;for(;a<o;a++){const e=i[a];if(!Co(s,e))return t;s=s[e]||(s[e]={})}return s[i[o]]=n,t},Lo=function(t,e,n){const r=Array.isArray(e)?e:e.split(n||"/"),i=r.length-1;let o=t,s=0;for(;s<i;s++){const e=r[s];if(!Co(o,e))return t;const n=o[e];if(!n)return t;o=n}return delete o[r[i]],t},Oo=function(t){return Oo.id=Oo.id||1,void 0===t?"j_"+Oo.id++:(t.id=void 0===t.id?"j_"+Oo.id++:t.id,t.id)},Mo=function(t){if(t.normalized)return t;const{originalEvent:e,target:n}=t,r=e&&e.changedTouches&&e.changedTouches[0];if(r)for(let e in r)void 0===t[e]&&(t[e]=r[e]);if(n){const e=n.correspondingUseElement;e&&(t.target=e)}return t.normalized=!0,t},Io=function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=setTimeout(function(){t(n+r)},r);return e=n+r,i}}return function(e,n,...r){return t(void 0!==n?e.bind(n,...r):e)}}(),Ro=((Do="undefined"!=typeof window)&&(jo=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),jo=jo||clearTimeout,Do?jo.bind(window):jo);var jo,Do;const Bo=function(t){return Ye(t)&&"%"===t.slice(-1)},Vo=function(t,e){var n=parseFloat(t);if(Number.isNaN(n))return null;var r,i={};if(i.value=n,null==e)r="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;r=e.join("|")}else Ye(e)&&(r=e);var o=function(e){var n=new RegExp("(?:\\d+(?:\\.\\d+)*)("+e+")$").exec(t);return n?n[1]:null}(r);return null===o?null:(i.unit=o,i)};function Fo(t,e){const n=t.split(e);let r=1;for(let t=0,i=n.length-1;t<i;t++){const o=[];(t>0||""!==n[0])&&o.push(0),o.push(e),(t<i-1||""!==n[i])&&o.push(0),n.splice(r,0,...o),r+=o.length+1}return n.filter(t=>""!==t)}function zo(t,e){if(null===t)return e.getBBox().height;switch(t.unit){case"em":return e.getBBox().height*t.value;case"px":case"":return t.value}}const Go=function(t,e,n={},r={}){var i=e.width,o=e.height,s=r.svgDocument||Ii("svg").node,a=Ii("tspan").node,u=Ii("text").attr(n).append(a).node,c=document.createTextNode("");u.style.opacity=0,u.style.display="block",a.style.display="block",a.appendChild(c),s.appendChild(u),r.svgDocument||document.body.appendChild(s);const l=r.preserveSpaces,h=r.separator||""===r.separator?r.separator:" ",f="string"==typeof h?h:" ";var d=r.eol||"\n",p=r.hyphen?new RegExp(r.hyphen):/[^\w\d\u00C0-\u1FFF\u2800-\uFFFD]/,g=r.maxLineCount;Xe(g)||(g=1/0);var v,m,y,b=t.split(h),x=[],w=[];l&&Ii(a).attr("xml:space","preserve");for(var _=0,E=0,A=b.length;_<A;_++){var k=b[_];if((k||l)&&"string"==typeof k){var S=!1;if(d&&k.indexOf(d)>=0){if(k.length>1){const t=Fo(b[_],d);b.splice(_,1,...t),_--,A=b.length;continue}if(l&&"string"==typeof b[_-1]){b.splice(_,0,"",0),A+=2,_--;continue}w[++E]=l&&"string"!=typeof b[_+1]?void 0:"",S=!0}if(!S){let t;if(t=l?void 0!==w[E]?w[E]+f+k:k:w[E]?w[E]+f+k:k,c.data=t,a.getComputedTextLength()<=i)w[E]=t,(v||m)&&(x[E++]=!0,v=0,m=0);else{if(!w[E]||v){var T=!!v;if(v=k.length-1,T||!v){if(!v){if(!w[E]){w=[];break}b.splice(_,2,k+b[_+1]),A--,x[E++]=!0,_--;continue}b[_]=k.substring(0,v);const t=b[_+1];b[_+1]=k.substring(v)+(void 0===t||0===t?"":t)}else{if(m)b.splice(_,2,b[_]+b[_+1]),m=0;else{var P=k.search(p);P>-1&&P!==k.length-1&&0!==P&&(m=P+1,v=0),b.splice(_,1,k.substring(0,m||v),k.substring(m||v)),A++}E&&!x[E-1]&&E--}l&&""===w[E]||_--;continue}E++,_--}}var C=null;if(w.length>g?C=g-1:void 0!==o&&(void 0===y&&""!==c.data&&(y="auto"===n.lineHeight?zo({value:1.5,unit:"em"},u):zo(Vo(n.lineHeight,["em","px",""]),u)),y*w.length>o&&(C=Math.floor(o/y)-1)),null!==C){w.splice(C+1);var N=r.ellipsis;if(!N||C<0)break;"string"!=typeof N&&(N="…");var L=w[C];if(!L&&!S)break;var O,M,I=L.length;do{if(M=L[I],O=L.substring(0,I),M?M.match(h)&&(O+=M):O+=f,O+=N,c.data=O,a.getComputedTextLength()<=i){w[C]=O;break}I--}while(I>=0);break}}}return r.svgDocument?s.removeChild(u):document.body.removeChild(s),w.join(d)},Uo=function(t){if(Object(t)!==t){var e=0;return isFinite(t)&&(e=+t),{top:e,right:e,bottom:e,left:e}}var n,r,i,o;return n=r=i=o=0,isFinite(t.vertical)&&(n=i=+t.vertical),isFinite(t.horizontal)&&(r=o=+t.horizontal),isFinite(t.top)&&(n=+t.top),isFinite(t.right)&&(r=+t.right),isFinite(t.bottom)&&(i=+t.bottom),isFinite(t.left)&&(o=+t.left),{top:n,right:r,bottom:i,left:o}},qo={linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,n=1;;e+=n,n/=2)if(t>=(7-4*e)/11){var r=(11-6*e-11*t)/4;return-r*r+n*n}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,n){return e=e||0,n=n||1,function(r){var i=t(r);return i<e?e:i>n?n:i}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},Ho={number:function(t,e){var n=e-t;return function(e){return t+n*e}},object:function(t,e){var n=Object.keys(t);return function(r){var i,o,s={};for(i=n.length-1;-1!=i;i--)s[o=n[i]]=t[o]+(e[o]-t[o])*r;return s}},hexColor:function(t,e){var n=parseInt(t.slice(1),16),r=parseInt(e.slice(1),16),i=255&n,o=(255&r)-i,s=65280&n,a=(65280&r)-s,u=16711680&n,c=(16711680&r)-u;return function(t){return"#"+(1<<24|i+o*t&255|s+a*t&65280|u+c*t&16711680).toString(16).slice(1)}},unit:function(t,e){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(t),i=n.exec(e),o=i[1].indexOf("."),s=o>0?i[1].length-o-1:0;t=+r[1];var a=+i[1]-t,u=r[2];return function(e){return(t+a*e).toFixed(s)+u}}},$o={outline:function(t){var e=Number.isFinite(t.margin)?t.margin:2,n=Number.isFinite(t.width)?t.width:1;return Wo('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:Number.isFinite(t.opacity)?t.opacity:1,outerRadius:e+n,innerRadius:e})},highlight:function(t){return Wo('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:Number.isFinite(t.width)?t.width:1,blur:Number.isFinite(t.blur)?t.blur:0,opacity:Number.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=Number.isFinite(t.x)?t.x:2;return Wo('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:Number.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return Wo(e)({dx:t.dx||0,dy:t.dy||0,opacity:Number.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:Number.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wo('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wo('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wo('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return Wo('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wo('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return Wo('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:Number.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=Number.isFinite(t.amount)?t.amount:1;return Wo('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},Wo=function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^{} ]+) ?\}|\{\{([^{} ]+)\}\}/g;return function(n){return n=n||{},t.replace(e,function(t){for(var e=Array.from(arguments).slice(1,4).find(function(t){return!!t}).split("."),r=n[e.shift()];void 0!==r&&e.length;)r=r[e.shift()];return void 0!==r?r:""})}};function Xo(t,e,n,r){if(n===r)return{};const i={};return Object.keys(t).forEach(o=>{const s=t[o],a=e[o];if(!Array.isArray(s)&&!Array.isArray(a)&&We(s)&&We(a)){const t=n+1,e=Xo(s,a,t,r);Object.keys(e).length>0?i[o]=e:0!==n&&t!==r||(i[o]={})}else an(s,a)||(i[o]=s)}),i}function Yo(t,e,n){const{maxDepth:r=Number.POSITIVE_INFINITY}=n||{};return Xo(t,e,0,r)}const Zo=function(){};var Jo,Ko={},Qo=/\s+/,ts=function(t,e,n,r,i){var o,s=0;if(n&&"object"==typeof n){void 0!==r&&"context"in i&&void 0===i.context&&(i.context=r);for(o=Object.keys(n);s<o.length;s++)e=ts(t,e,o[s],n[o[s]],i)}else if(n&&Qo.test(n))for(o=n.split(Qo);s<o.length;s++)e=t(e,o[s],r,i);else e=t(e,n,r,i);return e};Ko.on=function(t,e,n){return this._events=ts(es,this._events||{},t,e,{context:n,ctx:this,listening:Jo}),Jo&&((this._listeners||(this._listeners={}))[Jo.id]=Jo,Jo.interop=!1),this},Ko.listenTo=function(t,e,n){if(!t)return this;var r=t._listenId||(t._listenId=En("l")),i=this._listeningTo||(this._listeningTo={}),o=Jo=i[r];o||(this._listenId||(this._listenId=En("l")),o=Jo=i[r]=new us(this,t));var s=ns(t,e,n,this);if(Jo=void 0,s)throw s;return o.interop&&o.on(e,n),this};var es=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,s=r.ctx,a=r.listening;a&&a.count++,i.push({callback:n,context:o,ctx:o||s,listening:a})}return t},ns=function(t,e,n,r){try{t.on(e,n,r)}catch(t){return t}};Ko.off=function(t,e,n){return this._events?(this._events=ts(rs,this._events,t,e,{context:n,listeners:this._listeners}),this):this},Ko.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;for(var i=t?[t._listenId]:Object.keys(r),o=0;o<i.length;o++){var s=r[i[o]];if(!s)break;s.obj.off(e,n,this),s.interop&&s.off(e,n)}return sn(r)&&(this._listeningTo=void 0),this};var rs=function(t,e,n,r){if(t){var i,o=r.context,s=r.listeners,a=0;if(e||o||n){for(i=e?[e]:Object.keys(t);a<i.length;a++){var u=t[e=i[a]];if(!u)break;for(var c=[],l=0;l<u.length;l++){var h=u[l];if(n&&n!==h.callback&&n!==h.callback._callback||o&&o!==h.context)c.push(h);else{var f=h.listening;f&&f.off(e,n)}}c.length?t[e]=c:delete t[e]}return t}if(null!=s)for(i=Object.keys(s);a<i.length;a++)s[i[a]].cleanup()}};Ko.once=function(t,e,n){var r=ts(is,{},t,e,this.off.bind(this));return"string"==typeof t&&null==n&&(e=void 0),this.on(r,e,n)},Ko.listenToOnce=function(t,e,n){var r=ts(is,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,r)};var is=function(t,e,n,r){if(n){var i=t[e]=os(function(){r(e,i),n.apply(this,arguments)});i._callback=n}return t},os=function(t){var e;if("function"!=typeof t)throw new TypeError("Expected a function");var n=2;return function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=void 0),e}};Ko.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return ts(ss,this._events,t,void 0,n),this};var ss=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&as(i,r),o&&as(o,[e].concat(r))}return t},as=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},us=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};us.prototype.on=Ko.on,us.prototype.off=function(t,e){var n;this.interop?(this._events=ts(rs,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},us.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},Ko.bind=Ko.on,Ko.unbind=Ko.off;var cs=function(t,e){var n,r=this;return n=t&&vn(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},Ze(n,r,e),n.prototype=Object.assign(Object.create(r.prototype),t),n.prototype.constructor=n,n.__super__=r.prototype,n},ls=function(t,e){return un(t)?t:We(t)&&!e._isModel(t)?hs(t):Ye(t)?function(e){return e.get(t)}:t},hs=function(t){var e=Le(he(t,!0));return function(t){return e(t.attributes)}},fs=function(t,e){var n=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=En(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection);var r=mn(this,"defaults");n=Je(Ze({},r,n),r),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};function ds(t){t=nn(t);const e=ln(t).reduce(function(t,e){return t[e.id]=e.clone(),t},{});return ln(t).forEach(function(t){const n=e[t.id];if(n.isLink()){const t=n.source(),r=n.target();t.id&&e[t.id]&&n.prop("source/id",e[t.id].id),r.id&&e[r.id]&&n.prop("target/id",e[r.id].id)}const r=t.get("parent");r&&e[r]&&n.set("parent",e[r].id);const i=ln(t.get("embeds")).reduce(function(t,n){return e[n]&&t.push(e[n].id),t},[]);sn(i)||n.set("embeds",i)}),e}Ze(fs.prototype,Ko,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(t){return rn(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,e,n){if(null==t)return this;var r;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;var i=n.unset,o=n.silent,s=[],a=this._changing;this._changing=!0,a||(this._previousAttributes=rn(this.attributes),this.changed={});var u=this.attributes,c=this.changed,l=this._previousAttributes;for(var h in r)e=r[h],an(u[h],e)||s.push(h),an(l[h],e)?delete c[h]:c[h]=e,i?delete u[h]:u[h]=e;if(this.idAttribute in r){var f=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,f,n)}if(!o){s.length&&(this._pending=n);for(var d=0;d<s.length;d++)this.trigger("change:"+s[d],this,u[s[d]],n)}if(a)return this;if(!o)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,Ze({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,Ze({},t,{unset:!0}))},hasChanged:function(t){return null==t?!sn(this.changed):vn(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&rn(this.changed);var e,n=this._changing?this._previousAttributes:this.attributes,r={};for(var i in t){var o=t[i];an(n[i],o)||(r[i]=o,e=!0)}return!!e&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return rn(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isValid:function(t){return this._validate({},Ze({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=Ze({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,Ze(e,{validationError:n})),!1)}}),fs.extend=cs;const ps=["checked","selected","disabled","readOnly","contentEditable","value","indeterminate"].reduce((t,e)=>(t[e]=!0,t),{}),gs={qualify:function(t){return cn(t)},set:function(t,e,n){Object.keys(t).forEach(function(e){if(ps[e]&&e in n){const r=t[e];"SELECT"===n.tagName&&Array.isArray(r)?Array.from(n.options).forEach(function(t,e){t.selected=r.includes(t.value)}):n[e]=r}})}};function vs(t,e,n){return function(r,i){var o,s=Bo(r);if(r=parseFloat(r),s&&(r/=100),isFinite(r)){var a=i[n]();o=s||r>0&&r<1?a[t]+i[e]*r:a[t]+r}var u=hr();return u[t]=o||0,u}}function ms(t,e){return function(n,r){var i=Bo(n);n=parseFloat(n),i&&(n/=100);var o={};if(isFinite(n)){var s=i||n>=0&&n<=1?n*r[e]:Math.max(n+r[e],0);o[t]=s}return o}}const ys={"ref-x":{position:vs("x","width","origin")},"ref-y":{position:vs("y","height","origin")},"ref-dx":{position:vs("x","width","corner")},"ref-dy":{position:vs("y","height","corner")},"ref-width":{set:ms("width","width")},"ref-height":{set:ms("height","height")},"ref-rx":{set:ms("rx","width")},"ref-ry":{set:ms("ry","height")},"ref-cx":{set:ms("cx","width")},"ref-cy":{set:ms("cy","height")},"ref-r-inscribed":{set:(bs=ms("r","width"),xs=ms("r","height"),function(t,e){return(e.height>e.width?bs:xs)(t,e)})},"ref-r-circumscribed":{set:function(t,e){var n=Bo(t);t=parseFloat(t),n&&(t/=100);var r,i=Math.sqrt(e.height*e.height+e.width*e.width);return isFinite(t)&&(r=n||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r}}}};var bs,xs;ys.refX=ys["ref-x"],ys.refY=ys["ref-y"],ys["ref-x2"]=ys["ref-x"],ys["ref-y2"]=ys["ref-y"],ys["ref-width2"]=ys["ref-width"],ys["ref-height2"]=ys["ref-height"],ys["ref-r"]=ys["ref-r-inscribed"];const ws=ys,_s={x:"x",y:"y",width:"w",height:"h",minimum:"s",maximum:"l",diagonal:"d"},Es=Object.keys(_s).map(t=>_s[t]).join(""),As="[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?",ks=/\s/g,Ss=new RegExp(`^(${As}\\*)?([${Es}])(/${As})?([-+]{1,2}${As})?$`,"g");function Ts(t){throw new Error(`Invalid calc() expression: ${t}`)}function Ps(t,e){const n=Ss.exec(t.replace(ks,""));n||Ts(t),Ss.lastIndex=0;const[,r,i,o,s]=n,{x:a,y:u,width:c,height:l}=e;let h=0;switch(i){case _s.width:h=c;break;case _s.height:h=l;break;case _s.x:h=a;break;case _s.y:h=u;break;case _s.minimum:h=Math.min(l,c);break;case _s.maximum:h=Math.max(l,c);break;case _s.diagonal:h=Math.sqrt(l*l+c*c)}return r&&(h*=parseFloat(r)),o&&(h/=parseFloat(o.slice(1))),s&&(h+=function(t){if(!t)return 0;const[e]=t;switch(e){case"+":return parseFloat(t.substr(1));case"-":return-parseFloat(t.substr(1))}return parseFloat(t)}(s)),h}function Cs(t){return"string"==typeof t&&t.includes("calc")}function Ns(t,e){let n=t,r=0;for(;;){let t=n.indexOf("calc(",r);if(-1===t)return n;let i=t+5,o=1;t:for(;;){switch(n[i]){case"(":o++;break;case")":if(o--,0===o)break t;break;case void 0:Ts(n)}i++}let s=n.slice(t+5,i);Cs(s)&&(s=Ns(s,e));const a=String(Ps(s,e));n=n.slice(0,t)+a+n.slice(i+1),r=t+a.length}}function Ls(t,e,n){return void 0!==n.text}const Os=["font-weight","font-family","font-size","letter-spacing","text-transform"],Ms={"line-height":{qualify:Ls},"text-vertical-anchor":{qualify:Ls},"text-path":{qualify:Ls},annotations:{qualify:Ls},eol:{qualify:Ls},"display-empty":{qualify:Ls},text:{qualify:function(t,e,n){const r=n["text-wrap"];return!r||!cn(r)},unset:function(t){t.textContent=""},set:function(t,e,n,r){const i="joint-text",o=Ao.data.get(n,i),s=r["line-height"],a=r["text-vertical-anchor"],u=r["display-empty"],c=r["font-size"],l=r.annotations,h=r.eol,f=r.x;let d=r["text-path"];const p=JSON.stringify([t,s,l,a,h,u,d,f,c]);if(void 0===o||o!==p){if(c&&n.setAttribute("font-size",c),We(d)){const t=d.selector;if("string"==typeof t){const e=this.findNode(t);e instanceof SVGPathElement&&(d=Ze({"xlink:href":"#"+e.id},d))}}Ii(n).text(""+t,{lineHeight:s,annotations:l,textPath:d,x:f,textVerticalAnchor:a,eol:h,displayEmpty:u}),Ao.data.set(n,i,p)}}},"text-wrap":{qualify:cn,set:function(t,e,n,r){var i={},o=t.width||0;Bo(o)?i.width=e.width*parseFloat(o)/100:Cs(o)?i.width=Number(Ns(o,e)):null===t.width?i.width=1/0:i.width=o<=0?e.width+o:o;var s,a=t.height||0;Bo(a)?i.height=e.height*parseFloat(a)/100:Cs(a)?i.height=Number(Ns(a,e)):null===t.height||(i.height=a<=0?e.height+a:a);var u=t.text;if(void 0===u&&(u=r.text),void 0!==u){const e=t.breakText||Go,o=getComputedStyle(n),a={};for(let t=0;t<Os.length;t++){const e=Os[t];e in r&&n.setAttribute(e,r[e]),a[e]=o[e]}a.lineHeight=r["line-height"],s=e(""+u,i,a,{svgDocument:this.paper.svg,ellipsis:t.ellipsis,hyphen:t.hyphen,separator:t.separator,maxLineCount:t.maxLineCount,preserveSpaces:t.preserveSpaces})}else s="";Ms.text.set.call(this,s,e,n,r)},FONT_ATTRIBUTES:Os},title:{qualify:function(t,e){return e instanceof SVGElement},unset:function(t){Ao.data.remove(t,"joint-title");const e=t.firstElementChild;e&&e.remove()},set:function(t,e,n){var r="joint-title",i=Ao.data.get(n,r);if(void 0===i||i!==t){if(Ao.data.set(n,r,t),"title"===n.tagName)return void(n.textContent=t);var o=n.firstElementChild;if(o&&"title"===o.tagName)o.textContent=t;else{var s=document.createElementNS(n.namespaceURI,"title");s.textContent=t,n.insertBefore(s,o)}}}}},Is=Ms;function Rs(t,e){var n=new hr(1,0);return function(r){var i,o,s=this[t](r);return s?(o=e.rotate?s.vector().vectorAngle(n):0,i=s.start):(i=this.path.start,o=0),0===o?{transform:"translate("+i.x+","+i.y+")"}:{transform:"translate("+i.x+","+i.y+") rotate("+o+")"}}}function js(){return this.model.isLink()}const Ds={connection:{qualify:js,unset:"d",set:function({stubs:t=0}){let e;if(isFinite(t)&&0!==t){let n;n=t<0?(this.getConnectionLength()+t)/2:t;const r=this.getConnection(),i=this.getConnectionSubdivisions(),o=r.divideAtLength(n,{segmentSubdivisions:i}),s=r.divideAtLength(-n,{segmentSubdivisions:i});o&&s&&(e=`${o[0].serialize()} ${s[1].serialize()}`)}return{d:e||this.getSerializedConnection()}}},"at-connection-length-keep-gradient":{qualify:js,unset:"transform",set:Rs("getTangentAtLength",{rotate:!0})},"at-connection-length-ignore-gradient":{qualify:js,unset:"transform",set:Rs("getTangentAtLength",{rotate:!1})},"at-connection-ratio-keep-gradient":{qualify:js,unset:"transform",set:Rs("getTangentAtRatio",{rotate:!0})},"at-connection-ratio-ignore-gradient":{qualify:js,unset:"transform",set:Rs("getTangentAtRatio",{rotate:!1})}};Ds["at-connection-length"]=Ds["at-connection-length-keep-gradient"],Ds["at-connection-ratio"]=Ds["at-connection-ratio-keep-gradient"];const Bs=Ds;function Vs(t,e){var n="joint-shape",r=e&&e.resetOffset;return function(e,i,o){var s=Ao.data.get(o,n);if(!s||s.value!==e){var a=t(e);s={value:e,shape:a,shapeBBox:a.bbox()},Ao.data.set(o,n,s)}var u=s.shape.clone(),c=s.shapeBBox.clone(),l=c.origin(),h=i.origin();c.x=h.x,c.y=h.y;var f=i.maxRectScaleToFit(c,h),d=0===c.width||0===i.width?1:f.sx,p=0===c.height||0===i.height?1:f.sy;return u.scale(d,p,l),r&&u.translate(-l.x,-l.y),u}}function Fs(t){var e=Vs(function(t){return new Gr(Ii.normalizePathData(t))},t);return function(t,n,r){return{d:e(t,n,r).serialize()}}}function zs(t){var e=Vs(Ir,t);return function(t,n,r){return{points:e(t,n,r).serialize()}}}const Gs={"ref-d-reset-offset":{unset:"d",set:Fs({resetOffset:!0})},"ref-d-keep-offset":{unset:"d",set:Fs({resetOffset:!1})},"ref-points-reset-offset":{unset:"points",set:zs({resetOffset:!0})},"ref-points-keep-offset":{unset:"points",set:zs({resetOffset:!1})}};Gs["ref-d"]=Gs["ref-d-reset-offset"],Gs["ref-points"]=Gs["ref-points-reset-offset"];const Us=Gs;function qs(t){var e={},n=t.stroke;"string"==typeof n&&(e.stroke=n,e.fill=n);var r=t["stroke-opacity"];return void 0===r&&(r=t.opacity),void 0!==r&&(e["stroke-opacity"]=r,e["fill-opacity"]=r),e}function Hs(t){const{paper:e}=this;return`url(#${"pattern"===t.type?e.definePattern(t):e.defineGradient(t)})`}const $s={"source-marker":{qualify:cn,unset:"marker-start",set:function(t,e,n,r){return t=Ze(qs(r),t),{"marker-start":"url(#"+this.paper.defineMarker(t)+")"}}},"target-marker":{qualify:cn,unset:"marker-end",set:function(t,e,n,r){return t=Ze(qs(r),{transform:"rotate(180)"},t),{"marker-end":"url(#"+this.paper.defineMarker(t)+")"}}},"vertex-marker":{qualify:cn,unset:"marker-mid",set:function(t,e,n,r){return t=Ze(qs(r),t),{"marker-mid":"url(#"+this.paper.defineMarker(t)+")"}}},fill:{qualify:cn,set:Hs},stroke:{qualify:cn,set:Hs},filter:{qualify:cn,set:function(t){return"url(#"+this.paper.defineFilter(t)+")"}}};function Ws(t,e,n){return function(r,i){var o;o="middle"===r?i[e]/2:r===n?i[e]:isFinite(r)?r>-1&&r<1?-i[e]*r:-r:Bo(r)?i[e]*parseFloat(r)/100:0;var s=new hr;return s[t]=-(i[t]+o),s}}const Xs={"x-alignment":{offset:Ws("x","width","right")},"y-alignment":{offset:Ws("y","height","bottom")},"reset-offset":{offset:function(t,e){return t?{x:-e.x,y:-e.y}:{x:0,y:0}}}};function Ys(t){return function(e,n,r){const i=Ii(r);i.attr(t)!==e&&i.attr(t,e)}}const Zs={ref:{},href:{set:Ys("href")},"xlink:href":{set:Ys("xlink:href")},port:{set:function(t){return null===t||void 0===t.id?t:t.id}},style:{qualify:cn,set:function(t,e,n){Ao(n).css(t)}},html:{unset:function(t){Ao(t).empty()},set:function(t,e,n){Ao(n).html(t+"")}},props:gs};Ze(Zs,ws),Ze(Zs,Is),Ze(Zs,Bs),Ze(Zs,Us),Ze(Zs,$s),Ze(Zs,Xs);const Js=Zs,Ks=function(t,e){if(Array.isArray(t))return e};function Qs(t){for(const e in t){const n=t[e];We(n)&&!Array.isArray(n)&&sn(n)&&delete t[e]}}const ta=fs.extend({constructor:function(t,e){var n,r=t||{};if("function"==typeof this.preinitialize&&this.preinitialize.apply(this,arguments),this.cid=En("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(r=this.parse(r,e)||{}),n=mn(this,"defaults")){const t=(!e||!0!==e.mergeArrays)&&Ks;r=An({},n,r,t)}this.set(r,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,n){throw new Error("Must define a translate() method.")},toJSON:function(t){const{ignoreDefaults:e,ignoreEmptyAttributes:n=!1}=t||{},r=mn(this.constructor.prototype,"defaults");if(!1===e){const t=on(this.attributes);return n?(Qs(t),t):t}let i={},o=on(this.attributes);!0===e?i=r:(Array.isArray(e)?e:["attrs"]).forEach(t=>{i[t]=r[t]||{}});const s=Yo(o,yn(i,"id","type"),{maxDepth:4});return n&&Qs(s),s},initialize:function(t){const e=this.getIdAttribute();t&&void 0!==t[e]||this.set(e,this.generateId(),{silent:!0}),this._transitionIds={},this._scheduledTransitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},getIdAttribute:function(){return this.idAttribute||"id"},generateId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},processPorts:function(){var t=this.ports,e={};xn(this.get("attrs"),function(t,n){t&&t.port&&(void 0!==t.port.id?e[t.port.id]=t.port:e[t.port]={id:t.port})});var n={};xn(t,function(t,r){e[r]||(n[r]=!0)}),this.graph&&!sn(n)&&(this.graph.getConnectedLinks(this,{inbound:!0}).forEach(function(t){n[t.get("target").port]&&t.remove()}),this.graph.getConnectedLinks(this,{outbound:!0}).forEach(function(t){n[t.get("source").port]&&t.remove()})),this.ports=e},remove:function(t={}){const{graph:e,collection:n}=this;if(!e)return n&&n.remove(this,t),this;e.startBatch("remove");const r=this.getParentCell();r&&r.unembed(this,t);const i=this.getEmbeddedCells();for(let e=0,n=i.length;e<n;e++){const n=i[e];n&&n.remove(t)}return this.trigger("remove",this,e.attributes.cells,t),e.stopBatch("remove"),this},toFront:function(t){var e=this.graph;if(e){let n;(t=Je(t||{},{foregroundEmbeds:!0})).deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];const r=t.foregroundEmbeds?n:hn(n,t=>t.z());let i=e.maxZIndex()-n.length+1;const o=e.get("cells");let s=o.toArray().indexOf(r[0])!==o.length-n.length;s||(s=r.some(function(t,e){return t.z()!==i+e})),s&&(this.startBatch("to-front"),i+=n.length,r.forEach(function(e,n){e.set("z",i+n,t)}),this.stopBatch("to-front"))}return this},toBack:function(t){var e=this.graph;if(e){let n;(t=Je(t||{},{foregroundEmbeds:!0})).deep?(n=this.getEmbeddedCells({deep:!0,breadthFirst:!1!==t.breadthFirst,sortSiblings:t.foregroundEmbeds}),n.unshift(this)):n=[this];const r=t.foregroundEmbeds?n:hn(n,t=>t.z());let i=e.minZIndex(),o=0!==e.get("cells").toArray().indexOf(r[0]);o||(o=r.some(function(t,e){return t.z()!==i+e})),o&&(this.startBatch("to-back"),i-=n.length,r.forEach(function(e,n){e.set("z",i+n,t)}),this.stopBatch("to-back"))}return this},parent:function(t,e){return void 0===t?this.get("parent"):this.set("parent",t,e)},embed:function(t,e={}){const n=Array.isArray(t)?t:[t];if(!this.canEmbed(n))throw new Error("Recursive embedding not allowed.");if(e.reparent)nn(n.map(t=>t.getParentCell())).forEach(t=>{t&&t._unembedCells(n,e)});else if(n.some(t=>t.isEmbedded()&&this.id!==t.parent()))throw new Error("Embedding of already embedded cells is not allowed.");return this._embedCells(n,e),this},unembed:function(t,e){const n=Array.isArray(t)?t:[t];return this._unembedCells(n,e),this},canEmbed:function(t){return(Array.isArray(t)?t:[t]).every(t=>this!==t&&!this.isEmbeddedIn(t))},_embedCells:function(t,e){const n="embed";this.startBatch(n);const r=Ze([],this.get("embeds"));t.forEach(t=>{r[t.isLink()?"unshift":"push"](t.id),t.parent(this.id,e)}),this.set("embeds",nn(r),e),this.stopBatch(n)},_unembedCells:function(t,e){const n="unembed";this.startBatch(n),t.forEach(t=>t.unset("parent",e)),this.set("embeds",dn(this.get("embeds"),...t.map(t=>t.id)),e),this.stopBatch(n)},getParentCell:function(){var t=this.parent(),e=this.graph;return t&&e&&e.getCell(t)||null},getAncestors:function(){var t=[];if(!this.graph)return t;for(var e=this.getParentCell();e;)t.push(e),e=e.getParentCell();return t},getEmbeddedCells:function(t){if(t=t||{},!this.graph)return[];if(t.deep)return t.breadthFirst?this._getEmbeddedCellsBfs(t.sortSiblings):this._getEmbeddedCellsDfs(t.sortSiblings);const e=this.get("embeds");if(sn(e))return[];let n=e.map(this.graph.getCell,this.graph);return t.sortSiblings&&(n=hn(n,t=>t.z())),n},_getEmbeddedCellsBfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.shift();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});n.push(...i)}return e.shift(),e},_getEmbeddedCellsDfs:function(t){const e=[],n=[];for(n.push(this);n.length>0;){const r=n.pop();e.push(r);const i=r.getEmbeddedCells({sortSiblings:t});for(let t=i.length-1;t>=0;--t)n.push(i[t])}return e.shift(),e},isEmbeddedIn:function(t,e){var n=Ye(t)?t:t.id,r=this.parent();if(e=Ze({deep:!0},e),this.graph&&e.deep){for(;r;){if(r===n)return!0;r=this.graph.getCell(r).parent()}return!1}return r===n},isEmbedded:function(){return!!this.parent()},clone:function(t){if((t=t||{}).deep)return ln(ds([this].concat(this.getEmbeddedCells({deep:!0}))));var e=fs.prototype.clone.apply(this,arguments);return e.set(this.getIdAttribute(),this.generateId()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,n){var r=Ye(t);if(r||Array.isArray(t)){if(arguments.length>1){var i,o;r?o=(i=t).split("/"):(i=t.join("/"),o=t.slice());var s=o[0],a=o.length;const v=n||{};v.propertyPath=i,v.propertyValue=e,v.propertyPathArray=o,"rewrite"in v||(v.rewrite=!1);for(var u={},c=u,l=s,h=1;h<a;h++){var f=o[h],d=Number.isFinite(r?Number(f):f);c=c[l]=d?[]:{},l=f}u=No(u,o,e,"/");var p=An({},this.attributes);v.rewrite&&Lo(p,i,"/");var g=An(p,u);return this.set(s,g[s],v)}return Po(this.attributes,t,"/")}const v=e||{};v.propertyPath=null,v.propertyValue=t,v.propertyPathArray=[],"rewrite"in v||(v.rewrite=!1);const m={};for(const e in t){const{changedValue:n}=An({},{changedValue:this.attributes[e]},{changedValue:t[e]});m[e]=n}return this.set(m,v)},removeProp:function(t,e){e=e||{};var n=Array.isArray(t)?t:t.split("/"),r=n[0];if("attrs"===r&&(e.dirty=!0),1===n.length)return this.unset(t,e);var i=n.slice(1),o=this.get(r);return null==o?this:(o=on(o),Lo(o,i,"/"),this.set(r,o,e))},attr:function(t,e,n){var r=Array.from(arguments);return 0===r.length?this.get("attrs"):(Array.isArray(t)?r[0]=["attrs"].concat(t):Ye(t)?r[0]="attrs/"+t:r[0]={attrs:t},this.prop.apply(this,r))},removeAttr:function(t,e){return Array.isArray(t)?this.removeProp(["attrs"].concat(t)):this.removeProp("attrs/"+t,e)},transition:function(t,e,n,r){r=r||"/",n=Ze({duration:100,delay:10,timingFunction:qo.linear,valueFunction:Ho.number},n);var i,o=0,s=function(e){var r,a,u;(a=(e-=o=o||e)/n.duration)<1?this._transitionIds[t]=r=Io(s):(a=1,delete this._transitionIds[t]),u=i(n.timingFunction(a)),n.transitionId=r,this.prop(t,u,n),r||this.trigger("transition:end",this,t)}.bind(this);const{_scheduledTransitionIds:a}=this;let u;return u=setTimeout(o=>{a[t]&&(a[t]=dn(a[t],u),0===a[t].length&&delete a[t]),this.stopPendingTransitions(t,r),i=n.valueFunction(Po(this.attributes,t,r),e),this._transitionIds[t]=Io(o),this.trigger("transition:start",this,t)},n.delay,s),a[t]||(a[t]=[]),a[t].push(u),u},getTransitions:function(){return gn(Object.keys(this._transitionIds),Object.keys(this._scheduledTransitionIds))},stopScheduledTransitions:function(t,e="/"){const{_scheduledTransitionIds:n={}}=this;let r=Object.keys(n);if(t){const n=t.split(e);r=r.filter(t=>an(n,t.split(e).slice(0,n.length)))}return r.forEach(t=>{n[t].forEach(t=>clearTimeout(t)),delete n[t]}),this},stopPendingTransitions(t,e="/"){const{_transitionIds:n={}}=this;let r=Object.keys(n);if(t){const n=t.split(e);r=r.filter(t=>an(n,t.split(e).slice(0,n.length)))}r.forEach(t=>{const e=n[t];Ro(e),delete n[t],this.trigger("transition:end",this,t)})},stopTransitions:function(t,e="/"){return this.stopScheduledTransitions(t,e),this.stopPendingTransitions(t,e),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,Ze({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,Ze({},e,{cell:this})),this},getChangeFlag:function(t){var e=0;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&this.hasChanged(n)&&(e|=t[n]);return e},angle:function(){return 0},position:function(){return new hr(0,0)},z:function(){return this.get("z")||0},getPointFromConnectedLink:function(){return new hr},getBBox:function(){return new Cr(0,0,0,0)},getPointRotatedAroundCenter(t,e,n){const r=new hr(e,n);return t&&r.rotate(this.getBBox().center(),t),r},getAbsolutePointFromRelative(t,e){return this.getPointRotatedAroundCenter(-this.angle(),this.position().offset(t,e))},getRelativePointFromAbsolute(t,e){return this.getPointRotatedAroundCenter(this.angle(),t,e).difference(this.position())}},{getAttributeDefinition:function(t){var e=this.attributes,n=Js;return e&&e[t]||n[t]},define:function(t,e,n,r){n=Ze({defaults:Ke({type:t},e,this.prototype.defaults)},n);var i=this.extend(n,r);return"undefined"!=typeof joint&&vn(joint,"shapes")&&No(joint.shapes,t,i,"."),i}});function ea(t,e,n){var r=t.toJSON();return r.angle=e||0,Je({},n,r)}function na(t,e,n,r){return t.map(function(t,e,n){var i=this.pointAt((e+.5)/n.length);return(t.dx||t.dy)&&i.offset(t.dx||0,t.dy||0),ea(i.round(),0,ia(r,t))},vr(e,n))}function ra(t,e,n,r){var i=e.center(),o=e.width/e.height,s=e.topMiddle(),a=xr.fromRect(e);return t.map(function(t,u,c){var l=n+r(u,c.length),h=s.clone().rotate(i,-l).scale(o,1,i),f=t.compensateRotation?-a.tangentTheta(h):0;return(t.dx||t.dy)&&h.offset(t.dx||0,t.dy||0),t.dr&&h.move(i,t.dr),ea(h.round(),f,ia(e,t))})}function ia(t,e){let{x:n,y:r,angle:i}=e;return Bo(n)?n=parseFloat(n)/100*t.width:Cs(n)&&(n=Number(Ns(n,t))),Bo(r)?r=parseFloat(r)/100*t.height:Cs(r)&&(r=Number(Ns(r,t))),{x:n,y:r,angle:i}}function oa(t,e){const{x:n,y:r}=ia(t,e);return new hr(n||0,r||0)}const sa=function(t,e){return t.map(t=>{const n=oa(e,t).round().toJSON();return n.angle=t.angle||0,n})},aa=function(t,e,n){return n.fn(t,e,n)},ua=function(t,e,n){return na(t,oa(e,n.start||e.origin()),oa(e,n.end||e.corner()),e)},ca=function(t,e,n){return na(t,e.origin(),e.bottomLeft(),e)},la=function(t,e,n){return na(t,e.topRight(),e.corner(),e)},ha=function(t,e,n){return na(t,e.origin(),e.topRight(),e)},fa=function(t,e,n){return na(t,e.bottomLeft(),e.corner(),e)},da=function(t,e,n){var r=n.startAngle||0,i=n.step||360/t.length;return ra(t,e,r,function(t){return t*i})},pa=function(t,e,n){var r=n.startAngle||0,i=n.step||20;return ra(t,e,r,function(t,e){return(t+.5-e/2)*i})};function ga(t,e){return Ke({},t,e,{x:0,y:0,angle:0,attrs:{}})}function va(t){var e=t.center(),n=e.theta(t.origin()),r=e.theta(t.bottomLeft()),i=e.theta(t.corner());return[n,e.theta(t.topRight()),i,r]}function ma(t,e,n,r){r=Je({},r,{offset:15});var i,o,s,a,u=e.center().theta(t),c=r.offset,l=0;const[h,f,d,p]=va(e);u<f||u>d?(s=".3em",i=c,o=0,a="start"):u<h?(i=0,o=-c,n?(l=-90,a="start",s=".3em"):(a="middle",s="0")):u<p?(s=".3em",i=-c,o=0,a="end"):(i=0,o=c,n?(l=90,a="start",s=".3em"):(a="middle",s=".6em"));var g=Math.round;return ga(r,{x:g(i),y:g(o),angle:l,attrs:{labelText:{y:s,textAnchor:a}}})}function ya(t,e,n,r){r=Je({},r,{offset:15});var i,o,s,a,u=e.center().theta(t),c=r.offset,l=0;const[h,f,d,p]=va(e);u<f||u>d?(s=".3em",i=-c,o=0,a="end"):u<h?(i=0,o=c,n?(l=90,a="start",s=".3em"):(a="middle",s=".6em")):u<p?(s=".3em",i=c,o=0,a="start"):(i=0,o=-c,n?(l=-90,a="start",s=".3em"):(a="middle",s="0"));var g=Math.round;return ga(r,{x:g(i),y:g(o),angle:l,attrs:{labelText:{y:s,textAnchor:a}}})}function ba(t,e,n){n=Je({},n,{offset:20});var r,i=fr(0,0),o=-t.theta(i),s=o,a=t.clone().move(i,n.offset).difference(t).round(),u=".3em";(o+90)%180==0?(r=e?"end":"middle",e||-270!==o||(u="0em")):o>-270&&o<-90?(r="start",s=o-180):r="end";var c=Math.round;return ga(n,{x:c(a.x),y:c(a.y),angle:e?s:0,attrs:{labelText:{y:u,textAnchor:r}}})}const xa=function(t,e,n){return ga(n)},wa=function(t,e,n){return ga(n,{x:-15,attrs:{labelText:{y:".3em",textAnchor:"end"}}})},_a=function(t,e,n){return ga(n,{x:15,attrs:{labelText:{y:".3em",textAnchor:"start"}}})},Ea=function(t,e,n){return ga(n,{y:-15,attrs:{labelText:{y:"0",textAnchor:"middle"}}})},Aa=function(t,e,n){return ga(n,{y:15,attrs:{labelText:{y:".6em",textAnchor:"middle"}}})},ka=function(t,e,n){return ma(t,e,!0,n)},Sa=function(t,e,n){return ma(t,e,!1,n)},Ta=function(t,e,n){return ya(t,e,!0,n)},Pa=function(t,e,n){return ya(t,e,!1,n)},Ca=function(t,e,n){return ba(t.difference(e.center()),!1,n)},Na=function(t,e,n){return ba(t.difference(e.center()),!0,n)};var La=function(t){var e=on(t)||{};this.ports=[],this.groups={},this.portLayoutNamespace=a,this.portLabelLayoutNamespace=u,this._init(e)};La.prototype={getPorts:function(){return this.ports},getGroup:function(t){return this.groups[t]||{}},getPortsByGroup:function(t){return this.ports.filter(function(e){return e.group===t})},getGroupPortsMetrics:function(t,e){var n=this.getGroup(t),r=this.getPortsByGroup(t),i=n.position||{},o=i.name,s=this.portLayoutNamespace;s[o]||(o="left");var a=i.args||{},u=r.map(function(t){return t&&t.position&&t.position.args}),c=s[o](u,e,a),l={ports:r,result:[]};return ln(c).reduce(function(t,n,r){var i=t.ports[r];return t.result.push({portId:i.id,portTransformation:n,labelTransformation:this._getPortLabelLayout(i,hr(n),e),portAttrs:i.attrs,portSize:i.size,labelSize:i.label.size}),t}.bind(this),l),l.result},_getPortLabelLayout:function(t,e,n){var r=this.portLabelLayoutNamespace,i=t.label.position.name||"left";return r[i]?r[i](e,n,t.label.position.args):null},_init:function(t){if(We(t.groups))for(var e=Object.keys(t.groups),n=0,r=e.length;n<r;n++){var i=e[n];this.groups[i]=this._evaluateGroup(t.groups[i])}for(var o=ln(t.items),s=0,a=o.length;s<a;s++)this.ports.push(this._evaluatePort(o[s]))},_evaluateGroup:function(t){return An(t,{position:this._getPosition(t.position,!0),label:this._getLabel(t,!0)})},_evaluatePort:function(t){var e=Ze({},t),n=this.getGroup(t.group);return e.markup=e.markup||n.markup,e.attrs=An({},n.attrs,e.attrs),e.position=this._createPositionNode(n,e),e.label=An({},n.label,this._getLabel(e)),e.z=this._getZIndex(n,e),e.size=Ze({},n.size,e.size),e},_getZIndex:function(t,e){return Xe(e.z)?e.z:Xe(t.z)||"auto"===t.z?t.z:"auto"},_createPositionNode:function(t,e){return An({name:"left",args:{}},t.position,{args:e.args})},_getPosition:function(t,e){var n,r={};un(t)?(n="fn",r.fn=t):Ye(t)?n=t:void 0===t?n=e?"left":null:Array.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):We(t)&&(n=t.name,Ze(r,t.args));var i={args:r};return n&&(i.name=n),i},_getLabel:function(t,e){var n=t.label||{},r=n;return r.position=this._getPosition(n.position,e),r}};const Oa={_initializePorts:function(){this._createPortData(),this.on("change:ports",function(){this._processRemovedPort(),this._createPortData()},this)},_processRemovedPort:function(){var t=this.get("ports")||{},e={};ln(t.items).forEach(function(t){e[t.id]=!0});var n=this.previous("ports")||{},r={};ln(n.items).forEach(function(t){e[t.id]||(r[t.id]=!0)});var i=this.graph;i&&!sn(r)&&(i.getConnectedLinks(this,{inbound:!0}).forEach(function(t){r[t.get("target").port]&&t.remove()}),i.getConnectedLinks(this,{outbound:!0}).forEach(function(t){r[t.get("source").port]&&t.remove()}))},hasPorts:function(){var t=this.prop("ports/items");return Array.isArray(t)&&t.length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return on(this.prop("ports/items"))||[]},getGroupPorts:function(t){const e=ln(this.prop(["ports","items"])).filter(e=>e.group===t);return on(e)},getPort:function(t){return on(ln(this.prop("ports/items")).find(function(e){return e.id&&e.id===t}))},getPortGroupNames:function(){return Object.keys(this._portSettingsData.groups)},getPortsPositions:function(t){return this._portSettingsData.getGroupPortsMetrics(t,Cr(this.size())).reduce(function(t,e){var n=e.portTransformation;return t[e.portId]={x:n.x,y:n.y,angle:n.angle},t},{})},getPortIndex:function(t){var e=We(t)?t.id:t;return this._isValidPortId(e)?ln(this.prop("ports/items")).findIndex(function(t){return t.id===e}):-1},addPort:function(t,e){if(!We(t)||Array.isArray(t))throw new Error("Element: addPort requires an object.");var n=Ze([],this.prop("ports/items"));return n.push(t),this.prop("ports/items",n,e),this},insertPort:function(t,e,n){const r="number"==typeof t?t:this.getPortIndex(t);if(!We(e)||Array.isArray(e))throw new Error("dia.Element: insertPort requires an object.");const i=Ze([],this.prop("ports/items"));return i.splice(r,0,e),this.prop("ports/items",i,n),this},portProp:function(t,e,n,r){var i=this.getPortIndex(t);if(-1===i)throw new Error("Element: unable to find port with id "+t);var o=Array.prototype.slice.call(arguments,1);return Array.isArray(e)?o[0]=["ports","items",i].concat(e):Ye(e)?o[0]=["ports/items/",i,"/",e].join(""):(o=["ports/items/"+i],cn(e)&&(o.push(e),o.push(n))),this.prop.apply(this,o)},_validatePorts:function(){var t=this.get("ports")||{},e=[],n=ln((t=t||{}).items);return n.forEach(function(t){"object"!=typeof t&&e.push("Element: invalid port ",t),this._isValidPortId(t.id)||(t.id=this.generatePortId())},this),nn(n,"id").length!==n.length&&e.push("Element: found id duplicities in ports."),e},generatePortId:function(){return this.generateId()},_isValidPortId:function(t){return null!=t&&!We(t)},addPorts:function(t,e){return t.length&&this.prop("ports/items",Ze([],this.prop("ports/items")).concat(t),e),this},removePort:function(t,e){const n=e||{},r=this.getPortIndex(t);if(-1!==r){const t=Ze([],this.prop(["ports","items"]));t.splice(r,1),n.rewrite=!0,this.startBatch("port-remove"),this.prop(["ports","items"],t,n),this.stopBatch("port-remove")}return this},removePorts:function(t,e){let n,r;if(Array.isArray(t)){if(n=e||{},0===t.length)return this.this;r=Ze([],this.prop(["ports","items"])).filter(function(e){return!t.some(function(t){const n=We(t)?t.id:t;return e.id===n})})}else n=t||{},r=[];return this.startBatch("port-remove"),n.rewrite=!0,this.prop(["ports","items"],r,n),this.stopBatch("port-remove"),this},_createPortData:function(){var t,e=this._validatePorts();if(e.length>0)throw this.set("ports",this.previous("ports")),new Error(e.join(" "));this._portSettingsData&&(t=this._portSettingsData.getPorts()),this._portSettingsData=new La(this.get("ports"));var n=this._portSettingsData.getPorts();if(t){var r=n.filter(function(e){if(!t.find(function(t){return t.id===e.id}))return e}),i=t.filter(function(t){if(!n.find(function(e){return e.id===t.id}))return t});i.length>0&&this.trigger("ports:remove",this,i),r.length>0&&this.trigger("ports:add",this,r)}}},Ma={portContainerMarkup:"g",portMarkup:[{tagName:"circle",selector:"circle",attributes:{r:10,fill:"#FFFFFF",stroke:"#000000"}}],portLabelMarkup:[{tagName:"text",selector:"text",attributes:{fill:"#000000"}}],_portElementsCache:null,_initializePorts:function(){this._cleanPortsCache()},_refreshPorts:function(){this._removePorts(),this._cleanPortsCache(),this._renderPorts()},_cleanPortsCache:function(){this._portElementsCache={}},_renderPorts:function(){for(var t=[],e=this._getContainerElement(),n=0,r=e.node.childNodes.length;n<r;n++)t.push(e.node.childNodes[n]);var i,o,s=(i=this.model._portSettingsData.getPorts(),o=Me(o="z",2),function(t,e,n){return(Array.isArray(t)?Ie:Re)(t,e,n,arguments.length<3,Ae)}(i,(t,e)=>{const n=o(e);return hasOwnProperty.call(t,n)?t[n].push(e):Rt(t,n,[e]),t},{})),a="auto";ln(s[a]).forEach(function(n){var r=this._getPortElement(n);e.append(r),t.push(r)},this);for(var u=Object.keys(s),c=0;c<u.length;c++){var l=u[c];if(l!==a){var h=parseInt(l,10);this._appendPorts(s[l],h,t)}}this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,e,n){var r=this._getContainerElement(),i=ln(t).map(this._getPortElement,this);n[e]||e<0?Ii(n[Math.max(e,0)]).before(i):r.append(i)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},findPortNodes:function(t,e){const n=this._portElementsCache[t];if(!n)return[];if(!e)return[n.portContentElement.node];const r=n.portElement.node,i=n.portSelectors;return this.findBySelector(e,r,i)},findPortNode:function(t,e){const[n=null]=this.findPortNodes(t,e);return n},_updatePorts:function(){this._updatePortGroup(void 0),Object.keys(this.model._portSettingsData.groups).forEach(this._updatePortGroup,this)},_removePorts:function(){Qe(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){let e,n,r,i;var o=Ii(this.portContainerMarkup).addClass("joint-port"),s=this._getPortMarkup(t);if(Array.isArray(s)){var a=this.parseDOMJSON(s,o.node),u=a.fragment;e=u.childNodes.length>1?Ii("g").append(u):Ii(u.firstChild),i=a.selectors}else e=Ii(s),Array.isArray(e)&&(e=Ii("g").append(e));if(!e)throw new Error("ElementView: Invalid port markup.");e.attr({port:t.id,"port-group":t.group}),Xe(t.id)&&e.attr("port-id-type","number");const c=this._getPortLabelMarkup(t.label);if(Array.isArray(c)){const{fragment:t,selectors:e}=this.parseDOMJSON(c,o.node),i=t.childNodes.length;i>0&&(r=e,n=1===i?Ii(t.firstChild):Ii("g").append(t))}else n=Ii(c),Array.isArray(n)&&(n=Ii("g").append(n));var l;if(i&&r){for(var h in r)if(i[h]&&h!==this.selector)throw new Error("ElementView: selectors within port must be unique.");l=Ze({},i,r)}else l=i||r||{};const f="portRoot",d="labelRoot",p="labelText";if(f in l||(l[f]=e.node),n){const t=n.node;if(d in l||(l[d]=t),!(p in l)){const e="TEXT"===n.tagName()?t:Array.from(t.querySelectorAll("text"));l[p]=e,r||(r={}),r[p]=e}}return o.append(e.addClass("joint-port-body")),n&&o.append(n.addClass("joint-port-label")),this._portElementsCache[t.id]={portElement:o,portLabelElement:n,portSelectors:l,portLabelSelectors:r,portContentElement:e,portContentSelectors:i},o},_updatePortGroup:function(t){for(var e=Cr(this.model.size()),n=this.model._portSettingsData.getGroupPortsMetrics(t,e),r=0,i=n.length;r<i;r++){var o=n[r],s=o.portId,a=this._portElementsCache[s]||{},u=o.portTransformation,c=o.labelTransformation;c&&a.portLabelElement&&(this.updateDOMSubtreeAttributes(a.portLabelElement.node,c.attrs,{rootBBox:new Cr(o.labelSize),selectors:a.portLabelSelectors}),this.applyPortTransform(a.portLabelElement,c,-u.angle||0)),this.updateDOMSubtreeAttributes(a.portElement.node,o.portAttrs,{rootBBox:new Cr(o.portSize),selectors:a.portSelectors}),this.applyPortTransform(a.portElement,u)}},applyPortTransform:function(t,e,n){var r=Ii.createSVGMatrix().rotate(n||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(r,{absolute:!0})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}},Ia=ta.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),ta.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},_refreshPorts:function(){},isElement:function(){return!0},position:function(t,e,n){const r=Xe(e);n=(r?n:t)||{};const{parentRelative:i,deep:o,restrictedArea:s}=n;let a;if(i){if(!this.graph)throw new Error("Element must be part of a graph.");const t=this.getParentCell();t&&!t.isLink()&&(a=t.get("position"))}if(r){if(a&&(t+=a.x,e+=a.y),o||s){const{x:r,y:i}=this.get("position");this.translate(t-r,e-i,n)}else this.set("position",{x:t,y:e},n);return this}{const t=hr(this.get("position"));return i?t.difference(a):t}},translate:function(t,e,n){if(e=e||0,0===(t=t||0)&&0===e)return this;(n=n||{}).translateBy=n.translateBy||this.id;var r=this.get("position")||{x:0,y:0},i=n.restrictedArea;if(i&&n.translateBy===this.id)if("function"==typeof i){var o=i.call(this,r.x+t,r.y+e,n);t=o.x-r.x,e=o.y-r.y}else{var s=this.getBBox({deep:!0}),a=r.x-s.x,u=r.y-s.y,c=Math.max(i.x+a,Math.min(i.x+i.width+a-s.width,r.x+t)),l=Math.max(i.y+u,Math.min(i.y+i.height+u-s.height,r.y+e));t=c-r.x,e=l-r.y}var h={x:r.x+t,y:r.y+e};return n.tx=t,n.ty=e,n.transition?(We(n.transition)||(n.transition={}),this.transition("position",h,Ze({},n.transition,{valueFunction:Ho.object})),Qe(this.getEmbeddedCells(),"translate",t,e,n)):(this.startBatch("translate",n),this.set("position",h,n),Qe(this.getEmbeddedCells(),"translate",t,e,n),this.stopBatch("translate",n)),this},size:function(t,e,n){var r=this.get("size");return void 0===t?{width:r.width,height:r.height}:(We(t)&&(n=e,e=Xe(t.height)?t.height:r.height,t=Xe(t.width)?t.width:r.width),this.resize(t,e,n))},resize:function(t,e,n){if(n=n||{},this.startBatch("resize",n),n.direction){var r=this.get("size");switch(n.direction){case"left":case"right":e=r.height;break;case"top":case"bottom":t=r.width}var i,o=Un(this.get("angle")||0),s=this.getBBox();if(o){var a={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[n.direction];n.absolute&&(a+=Math.floor((o+45)/90),a%=4);var u=s[["bottomLeft","corner","topRight","origin"][a]](),c=hr(u).rotate(s.center(),-o),l=Math.sqrt(t*t+e*e)/2,h=a*Math.PI/2;h+=Math.atan(a%2==0?e/t:t/e),h-=$n(o);var f=hr.fromPolar(l,h,c);i=hr(f).offset(t/-2,e/-2)}else switch(i=s.topLeft(),n.direction){case"top":case"top-right":i.offset(0,s.height-e);break;case"left":case"bottom-left":i.offset(s.width-t,0);break;case"top-left":i.offset(s.width-t,s.height-e)}this.set("size",{width:t,height:e},n),this.position(i.x,i.y,n)}else this.set("size",{width:t,height:e},n);return this.stopBatch("resize",n),this},scale:function(t,e,n,r){var i=this.getBBox().scale(t,e,n);return this.startBatch("scale",r),this.position(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this},fitEmbeds:function(t){return this.fitToChildren(t)},fitToChildren:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");const n=this.getEmbeddedCells().filter(t=>t.isElement());return 0===n.length||(this.startBatch("fit-embeds",t),t.deep&&Qe(n,"fitToChildren",t),this._fitToElements(Object.assign({elements:n},t)),this.stopBatch("fit-embeds")),this},fitParent:function(t={}){const{graph:e}=this;if(!e)throw new Error("Element must be part of a graph.");if(t.deep&&t.terminator&&(t.terminator===this||t.terminator===this.id))return this;const n=this.getParentCell();if(!n||!n.isElement())return this;const r=n.getEmbeddedCells().filter(t=>t.isElement());return 0===r.length||(this.startBatch("fit-parent",t),n._fitToElements(Object.assign({elements:r},t)),t.deep&&n.fitParent(t),this.stopBatch("fit-parent")),this},_fitToElements:function(t={}){const e=this.graph.getCellsBBox(t.elements);if(!e)return;const{expandOnly:n,shrinkOnly:r}=t;if(n&&r)return;let{x:i,y:o,width:s,height:a}=e;const{left:u,right:c,top:l,bottom:h}=Uo(t.padding);i-=u,o-=l,s+=u+c,a+=h+l;let f=new Cr(i,o,s,a);if(n)f=this.getBBox().union(f);else if(r){const t=this.getBBox().intersect(f);if(!t)return;f=t}this.set({position:{x:f.x,y:f.y},size:{width:f.width,height:f.height}},t)},rotate:function(t,e,n,r){if(n){var i=this.getBBox().center(),o=this.get("size"),s=this.get("position");i.rotate(n,this.get("angle")-t);var a=i.x-o.width/2-s.x,u=i.y-o.height/2-s.y;this.startBatch("rotate",{angle:t,absolute:e,origin:n}),this.position(s.x+a,s.y+u,r),this.rotate(t,e,null,r),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,r);return this},angle:function(){return Un(this.get("angle")||0)},getBBox:function(t={}){const{graph:e,attributes:n}=this,{deep:r,rotate:i}=t;if(r&&e){const n=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return n.push(this),e.getCellsBBox(n,t)}const{angle:o=0,position:{x:s,y:a},size:{width:u,height:c}}=n,l=new Cr(s,a,u,c);return i&&l.rotateAroundCenter(o),l},getPointFromConnectedLink:function(t,e){var n=this.getBBox(),r=n.center(),i=t.get(e);if(!i)return r;var o=i.port;if(!o||!this.hasPort(o))return r;var s=this.portProp(o,["group"]),a=this.getPortsPositions(s),u=new hr(a[o]).offset(n.origin()),c=this.angle();return c&&u.rotate(r,-c),u}});Ze(Ia.prototype,Oa);var Ra=function(t){this.cid=En("view"),this.preinitialize.apply(this,arguments),Ze(this,bn(t,Da)),this._ensureElement(),this.initialize.apply(this,arguments)},ja=/^(\S+)\s*(.*)$/,Da=["model","collection","el","id","attributes","className","tagName","events","style"];Ze(Ra.prototype,Ko,{tagName:"div",$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof Ao?t:Ao(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=mn(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(un(n)||(n=this[n]),n){var r=e.match(ja);this.delegate(r[1],r[2],n.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(mn(this,"el"));else{var t=Ze({},mn(this,"attributes"));this.id&&(t.id=mn(this,"id")),this.className&&(t.class=mn(this,"className")),this.setElement(this._createElement(mn(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),Ra.extend=cs;const Ba={},Va=Ra.extend({options:{},theme:null,themeClassNamePrefix:ko("theme-"),requireSetThemeOverride:!1,defaultTheme:"default",children:null,childNodes:null,DETACHABLE:!0,UPDATE_PRIORITY:2,FLAG_INSERT:1<<30,FLAG_REMOVE:1<<29,FLAG_INIT:1<<28,constructor:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=Ze({},this.options,t),Ra.call(this,t)},initialize:function(){Ba[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this.init()},unmount:function(){this.svgElement?this.vel.remove():this.$el.remove()},isMounted:function(){return null!==this.el.parentNode},renderChildren:function(t){if(t||(t=mn(this,"children")),t){var e=this.svgElement,n=Ii.namespace[e?"svg":"xhtml"],r=So(t,n);(e?this.vel:this.$el).empty().append(r.fragment),this.childNodes=r.selectors}return this},findAttributeNode:function(t,e){let n=e;for(;n&&1===n.nodeType;){if(n.getAttribute(t))return n;if(n===this.el)return null;n=n.parentNode}return null},findAttribute:function(t,e){const n=this.findAttributeNode(t,e);return n&&n.getAttribute(t)},_ensureElement:function(){if(this.el)this.setElement(mn(this,"el"));else{var t=mn(this,"tagName"),e=Ze({},mn(this,"attributes")),n=Ze({},mn(this,"style"));this.id&&(e.id=mn(this,"id")),this.setElement(this._createElement(t)),this._setAttributes(e),this._setStyle(n)}this._ensureElClassName()},_setAttributes:function(t){this.svgElement?this.vel.attr(t):this.$el.attr(t)},_setStyle:function(t){this.$el.css(t)},_createElement:function(t){return this.svgElement?document.createElementNS(Ii.namespace.svg,t):document.createElement(t)},_setElement:function(t){this.$el=t instanceof Ao?t:Ao(t),this.el=this.$el[0],this.svgElement&&(this.vel=Ii(this.el))},_ensureElClassName:function(){var t=mn(this,"className");if(t){var e=ko(t);this.svgElement?this.vel.removeClass(t).addClass(e):this.$el.removeClass(t).addClass(e)}},init:function(){},onRender:function(){},confirmUpdate:function(){return 0},setTheme:function(t,e){return e=e||{},this.theme&&this.requireSetThemeOverride&&!e.override||(this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t),this},addThemeClassName:function(t){if(!(t=t||this.theme))return this;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.addClass(e):this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.svgElement?this.vel.removeClass(e):this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),this.undelegateDocumentEvents(),Ba[this.cid]=null,Ra.prototype.remove.apply(this,arguments),this},onRemove:function(){},getEventNamespace:function(){return".joint-event-ns-"+this.cid},delegateElementEvents:function(t,e,n){if(!e)return this;n||(n={});var r=this.getEventNamespace();for(var i in e){var o=e[i];"function"!=typeof o&&(o=this[o]),o&&Ao(t).on(i+r,n,o.bind(this))}return this},undelegateElementEvents:function(t){return Ao(t).off(this.getEventNamespace()),this},delegateDocumentEvents:function(t,e){return t||(t=mn(this,"documentEvents")),this.delegateElementEvents(document,t,e)},undelegateDocumentEvents:function(){return this.undelegateElementEvents(document)},eventData:function(t,e){if(!t)throw new Error("eventData(): event object required.");var n=t.data,r="__"+this.cid+"__";return void 0===e?n&&n[r]||{}:(n||(n=t.data={}),n[r]||(n[r]={}),Ze(n[r],e),this)},stopPropagation:function(t){return this.eventData(t,{propagationStopped:!0}),this},isPropagationStopped:function(t){return!!this.eventData(t).propagationStopped}},{extend:function(){var t=Array.from(arguments),e=t[0]&&Ze({},t[0])||{},n=t[1]&&Ze({},t[1])||{},r=e.render||this.prototype&&this.prototype.render||null;return e.render=function(){return"function"==typeof r&&r.apply(this,arguments),this.render.__render__===r&&this.onRender(),this},e.render.__render__=r,Ra.extend.call(this,e,n)}});function Fa(t){return t?Array.isArray(t)?t:[t]:[]}const za=Va.extend({tagName:"g",svgElement:!0,className:"highlight",HIGHLIGHT_FLAG:1,UPDATE_PRIORITY:3,DETACHABLE:!1,UPDATABLE:!0,MOUNTABLE:!0,cellView:null,nodeSelector:null,node:null,updateRequested:!1,postponedUpdate:!1,transformGroup:null,detachedTransformGroup:null,requestUpdate(t,e){const{paper:n}=t;this.cellView=t,this.nodeSelector=e,n&&(this.updateRequested=!0,n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY))},confirmUpdate(){this.updateRequested=!1;const{cellView:t,nodeSelector:e}=this;return t.isMounted()?(this.update(t,e),this.mount(),this.transform()):this.postponedUpdate=!0,0},findNode(t,e=null){let n;if("string"==typeof e)n=t.findNode(e);else if(cn(e)){const r=t.model.isLink(),{label:i=null,port:o,selector:s}=e;n=r&&null!==i?t.findLabelNode(i,s):!r&&o?t.findPortNode(o,s):t.findNode(s)}else e&&(n=Ii.toNode(e),n instanceof SVGElement||(n=null));return n||null},getNodeMatrix(t,e){const{options:n}=this,{layer:r}=n,{rotatableNode:i}=t,o=t.getNodeMatrix(e);return i?r?i.contains(e)?o:t.getRootRotateMatrix().inverse().multiply(o):t.getNodeRotateMatrix(e).multiply(o):o},mount(){const{MOUNTABLE:t,cellView:e,el:n,options:r,transformGroup:i,detachedTransformGroup:o,postponedUpdate:s,nodeSelector:a}=this;if(!t||i)return;if(s)return this.update(e,a),void this.transform();const{vel:u,paper:c}=e,{layer:l}=r;if(l){let t;o?(t=o,this.detachedTransformGroup=null):t=Ii("g").addClass("highlight-transform").append(n),this.transformGroup=t,c.getLayerView(l).insertSortedNode(t.node,r.z)}else n.parentNode&&!n.nextSibling||u.append(n)},unmount(){const{MOUNTABLE:t,transformGroup:e,vel:n}=this;t&&(e?(this.transformGroup=null,this.detachedTransformGroup=e,e.remove()):n.remove())},transform(){const{transformGroup:t,cellView:e,updateRequested:n}=this;if(!t||e.model.isLink()||n)return;const r=e.getRootTranslateMatrix(),i=e.getRootRotateMatrix(),o=r.multiply(i);t.attr("transform",Ii.matrixToTransformString(o))},update(){const{node:t,cellView:e,nodeSelector:n,updateRequested:r,id:i}=this;if(r)return;this.postponedUpdate=!1;const o=this.node=this.findNode(e,n);t&&this.unhighlight(e,t),o?(this.highlight(e,o),this.mount()):(this.unmount(),e.notify("cell:highlight:invalid",i,this))},onRemove(){const{node:t,cellView:e,id:n,constructor:r}=this;t&&this.unhighlight(e,t),this.unmount(),r._removeRef(e,n)},highlight(t,e){},unhighlight(t,e){},listenToUpdateAttributes(t){const e=mn(this,"UPDATE_ATTRIBUTES");Array.isArray(e)&&0!==e.length&&this.listenTo(t.model,"change",this.onCellAttributeChange)},onCellAttributeChange(){const{cellView:t}=this;if(!t)return;const{model:e,paper:n}=t;mn(this,"UPDATE_ATTRIBUTES").some(t=>e.hasChanged(t))&&n.requestViewUpdate(this,this.HIGHLIGHT_FLAG,this.UPDATE_PRIORITY)}},{_views:{},highlight:function(t,e,n){const r=this.uniqueId(e,n);this.add(t,e,r,n)},unhighlight:function(t,e,n){const r=this.uniqueId(e,n);this.remove(t,r)},get(t,e=null){const{cid:n}=t,{_views:r}=this,i=r[n];if(null===e){const t=[];if(!i)return t;for(let e in i){const n=i[e];n instanceof this&&t.push(n)}return t}if(!i)return null;if(e in i){const t=i[e];if(t instanceof this)return t}return null},add(t,e,n,r={}){if(!n)throw new Error("dia.HighlighterView: An ID required.");const i=za.get(t,n);i&&i.remove();const o=new this(r);return o.id=n,this._addRef(t,n,o),o.requestUpdate(t,e),o.listenToUpdateAttributes(t),o},_addRef(t,e,n){const{cid:r}=t,{_views:i}=this;let o=i[r];o||(o=i[r]={}),o[e]=n},_removeRef(t,e){const{cid:n}=t,{_views:r}=this,i=r[n];if(i){e&&delete i[e];for(let t in i)return;delete r[n]}},remove(t,e=null){Fa(this.get(t,e)).forEach(t=>{t.remove()})},getAll(t,e=null){const n=[],{_views:r}=this;for(let i in r)for(let o in r[i]){const s=r[i][o];s.cellView.paper===t&&s instanceof this&&(null===e||o===e)&&n.push(s)}return n},removeAll(t,e=null){this.getAll(t,e).forEach(t=>t.remove())},update(t,e=null,n=!1){Fa(this.get(t,e)).forEach(t=>{(n||t.UPDATABLE)&&t.update()})},transform(t,e=null){Fa(this.get(t,e)).forEach(t=>{t.UPDATABLE&&t.transform()})},unmount(t,e=null){Fa(this.get(t,e)).forEach(t=>t.unmount())},mount(t,e=null){Fa(this.get(t,e)).forEach(t=>t.mount())},uniqueId:(t,e="")=>Ii.ensureId(t)+JSON.stringify(e)}),Ga=["transform","x","y","cx","cy","dx","dy","x1","y1","x2","y2","points","d","r","rx","ry","width","height","stroke-width","font-size"].reduce((t,e)=>(t[e]=!0,t),{}),Ua=["r","rx","ry","width","height","stroke-width","font-size"].reduce((t,e)=>(t[e]=!0,t),{});function qa(t,e){const n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=Ha(r,t[r],e));return n}function Ha(t,e,n){if(t in Ga&&Cs(e)){let r=Ns(e,n);return t in Ua&&(r=Math.max(0,r)),r}return e}const $a={DEFAULT:"default",EMBEDDING:"embedding",CONNECTING:"connecting",MAGNET_AVAILABILITY:"magnetAvailability",ELEMENT_AVAILABILITY:"elementAvailability"},Wa=Va.extend({tagName:"g",svgElement:!0,selector:"root",metrics:null,className:function(){var t=["cell"],e=this.model.get("type");return e&&e.toLowerCase().split(".").forEach(function(e,n,r){t.push("type-"+r.slice(0,n+1).join("-"))}),t.join(" ")},_presentationAttributes:null,_flags:null,setFlags:function(){var t,e,n,r={},i={},o=0,s=mn(this,"presentationAttributes");for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];for(Array.isArray(u)||(u=[u]),t=0,e=u.length;t<e;t++){var c=r[n=u[t]];c||(c=r[n]=1<<o++),i[a]|=c}}var l=mn(this,"initFlag");for(Array.isArray(l)||(l=[l]),t=0,e=l.length;t<e;t++)r[n=l[t]]||(r[n]=1<<o++);if(o>25)throw new Error("dia.CellView: Maximum number of flags exceeded.");this._flags=r,this._presentationAttributes=i},hasFlag:function(t,e){return t&this.getFlag(e)},removeFlag:function(t,e){return t^t&this.getFlag(e)},getFlag:function(t){var e=this._flags;if(!e)return 0;var n=0;if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n|=e[t[r]];else n|=e[t];return n},attributes:function(){var t=this.model;return{"model-id":t.id,"data-type":t.attributes.type}},constructor:function(t){t.id=t.id||Oo(this),Va.call(this,t)},initialize:function(){this.setFlags(),Va.prototype.initialize.apply(this,arguments),this.cleanNodesCache(),this.startListening()},startListening:function(){this.listenTo(this.model,"change",this.onAttributesChange)},onAttributesChange:function(t,e){var n=t.getChangeFlag(this._presentationAttributes);!e.updateHandled&&n&&(e.dirty&&this.hasFlag(n,"UPDATE")&&(n|=this.getFlag("RENDER")),e.tool&&(e.async=!1),this.requestUpdate(n,e))},requestUpdate:function(t,e){const{paper:n}=this;n&&t>0&&n.requestViewUpdate(this,t,this.UPDATE_PRIORITY,e)},parseDOMJSON:function(t,e){var n=So(t),r=n.selectors,i=n.groupSelectors;for(var o in i){if(r[o])throw new Error("dia.CellView: ambiguous group selector");r[o]=i[o]}if(e){var s=this.selector;if(r[s])throw new Error("dia.CellView: ambiguous root selector.");r[s]=e}return{fragment:n.fragment,selectors:r}},can:function(t){var e=un(this.options.interactive)?this.options.interactive(this):this.options.interactive;return We(e)&&!1!==e[t]||function(t){var e=Object.prototype.toString;return!0===t||!1===t||!!t&&"object"==typeof t&&e.call(t)===y}(e)&&!1!==e},findBySelector:function(t,e,n){if(!t||"."===t)return[e];if(n){var r=n[t];if(r)return Array.isArray(r)?r:[r]}return this.useCSSSelectors?Ao(e).find(t).toArray():[]},findNodes:function(t){return this.findBySelector(t,this.el,this.selectors)},findNode:function(t){const[e=null]=this.findNodes(t);return e},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getBBox:function(t){var e;if(t&&t.useModelGeometry){var n=this.model;e=n.getBBox().bbox(n.angle())}else e=this.getNodeBBox(this.el);return this.paper.localToPaperRect(e)},getNodeBBox:function(t){const e=this.getNodeBoundingRect(t),n=this.getRootTranslateMatrix().multiply(this.getNodeRotateMatrix(t)),r=this.getNodeMatrix(t);return Ii.transformRect(e,n.multiply(r))},getNodeRotateMatrix(t){return!this.rotatableNode||this.rotatableNode.contains(t)?this.getRootRotateMatrix():Ii.createSVGMatrix()},getNodeUnrotatedBBox:function(t){var e=this.getNodeBoundingRect(t),n=this.getNodeMatrix(t),r=this.getRootTranslateMatrix();return Ii.transformRect(e,r.multiply(n))},getRootTranslateMatrix:function(){var t=this.model.position();return Ii.createSVGMatrix().translate(t.x,t.y)},getRootRotateMatrix:function(){var t=Ii.createSVGMatrix(),e=this.model,n=e.angle();if(n){var r=e.getBBox(),i=r.width/2,o=r.height/2;t=t.translate(i,o).rotate(n).translate(-i,-o)}return t},_notifyHighlight:function(t,e,n={}){const{el:r}=this;let i;if("string"==typeof e?i=this.findNode(e)||r:[i=r]=this.$(e),n.partial=i!==r,void 0===n.type){let t;switch(!0){case n.embedding:t=$a.EMBEDDING;break;case n.connecting:t=$a.CONNECTING;break;case n.magnetAvailability:t=$a.MAGNET_AVAILABILITY;break;case n.elementAvailability:t=$a.ELEMENT_AVAILABILITY;break;default:t=$a.DEFAULT}n.type=t}return this.notify(t,i,n),this},highlight:function(t,e){return this._notifyHighlight("cell:highlight",t,e)},unhighlight:function(t,e={}){return this._notifyHighlight("cell:unhighlight",t,e)},findMagnet:function(t){const e=this.el;let n=this.$(t)[0];n||(n=e);do{const t=n.getAttribute("magnet"),r=n===e;if((t||r)&&"false"!==t)return n;if(r)return;n=n.parentNode}while(n)},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const t=this.findNode(n);if(t)return t}return t},getSelector:function(t,e){var n;if(t===this.el)return"string"==typeof e&&(n=":scope > "+e),n;if(t){var r=Ii(t).index()+1;n=t.tagName+":nth-child("+r+")",e&&(n+=" > "+e),n=this.getSelector(t.parentNode,n)}return n},addLinkFromMagnet:function(t,e,n){var r=this.paper,i=r.model,o=r.getDefaultLink(this,t);return o.set({source:this.getLinkEnd(t,e,n,o,"source"),target:{x:e,y:n}}).addTo(i,{async:!1,ui:!0}),o.findView(r)},getLinkEnd:function(t,...e){const n=this.model,r=n.id,i=this.findAttributeNode("port",t),o=t.getAttribute("joint-selector"),s={id:r};if(null!=o&&(s.magnet=o),null!=i){let e=i.getAttribute("port");"number"===i.getAttribute("port-id-type")&&(e=parseInt(e,10)),s.port=e,n.hasPort(e)||o||(s.selector=this.getSelector(t))}else null==o&&this.el!==t&&(s.selector=this.getSelector(t));return this.customizeLinkEnd(s,t,...e)},customizeLinkEnd:function(t,e,n,r,i,o){const{paper:s}=this,{connectionStrategy:a}=s.options;if("function"==typeof a){var u=a.call(s,t,this,e,new hr(n,r),i,o,s);if(u)return u}return t},getMagnetFromLinkEnd:function(t){var e,n=t.port,r=t.magnet,i=this.model;return null!=n&&i.isElement()&&i.hasPort(n)?e=this.findPortNode(n,r)||this.el:(r||(r=t.selector),r||null==n||(r='[port="'+n+'"]'),e=this.findNode(r)),this.findProxyNode(e,"magnet")},dragLinkStart:function(t,e,n,r){this.model.startBatch("add-link");const i=this.addLinkFromMagnet(e,n,r);i.notifyPointerdown(t,n,r),i.eventData(t,i.startArrowheadMove("target",{whenNotAllowed:"remove"})),this.eventData(t,{linkView:i})},dragLink:function(t,e,n){var r=this.eventData(t),i=r.linkView;if(i)i.pointermove(t,e,n);else{var o=this.paper,s=o.options.magnetThreshold,a=this.getEventTarget(t),u=r.targetMagnet;if("onleave"===s){if(u===a||Ii(u).contains(a))return}else if(o.eventData(t).mousemoved<=s)return;this.dragLinkStart(t,u,e,n)}},dragLinkEnd:function(t,e,n){var r=this.eventData(t).linkView;r&&(r.pointerup(t,e,n),this.model.stopBatch("add-link"))},getAttributeDefinition:function(t){return this.model.constructor.getAttributeDefinition(t)},setNodeAttributes:function(t,e){sn(e)||(t instanceof SVGElement?Ii(t).attr(e):Ao(t).attr(e))},processNodeAttributes:function(t,e){var n,r,i,o,s,a,u,c,l,h=[];const f={};for(n in e)e.hasOwnProperty(n)&&(f[Ii.attributeNames[n]]=e[n]);for(n in f)if(f.hasOwnProperty(n))if(r=f[n],i=this.getAttributeDefinition(n))if(null===r){let e;if(e=un(i.unset)?i.unset.call(this,t,f,this):i.unset,!e&&Ye(i.set)&&(e=i.set),e||(e=n),Ye(e)&&e){if(a||(a={}),e in a)continue;a[e]=r}else if(Array.isArray(e)&&e.length>0)for(a||(a={}),o=0,s=e.length;o<s;o++){const t=e[o];t in a||(a[t]=r)}}else!un(i.qualify)||i.qualify.call(this,r,t,f,this)?(Ye(i.set)&&(a||(a={}),a[i.set]=r),h.push(n,i)):(a||(a={}),a[n]=r);else a||(a={}),a[n]=r;for(o=0,s=h.length;o<s;o+=2)n=h[o],i=h[o+1],r=e[n],un(i.set)&&(u||(u={}),u[n]=r),un(i.position)&&(c||(c={}),c[n]=r),un(i.offset)&&(l||(l={}),l[n]=r);return{raw:f,normal:a,set:u,position:c,offset:l}},updateRelativeAttributes:function(t,e,n,r){var i,o;r||(r={});var s=qa(e.raw||{},n),a=e.normal||{};for(const t in a)a[t]=s[t];var u=e.set,c=e.position,l=e.offset;for(i in u){o=s[i];var h=this.getAttributeDefinition(i).set.call(this,o,n.clone(),t,s,this);We(h)?Ze(a,h):void 0!==h&&(a[i]=h)}if(t instanceof HTMLElement)this.setNodeAttributes(t,a);else{var f,d,p,g=a.transform,v=Ii.transformStringToMatrix(g),m=hr(v.e,v.f);if(g&&(a=yn(a,"transform"),v.e=v.f=0),c||l){var y=this.getNodeScale(t,r.scalableNode);f=y.sx,d=y.sy}var b=!1;for(i in c)o=s[i],(p=this.getAttributeDefinition(i).position.call(this,o,n.clone(),t,s,this))&&(m.offset(hr(p).scale(f,d)),b||(b=!0));this.setNodeAttributes(t,a);var x=!1;if(l){var w=this.getNodeBoundingRect(t);if(w.width>0&&w.height>0){var _=Ii.transformRect(w,v).scale(1/f,1/d);for(i in l)o=s[i],(p=this.getAttributeDefinition(i).offset.call(this,o,_,t,s,this))&&(m.offset(hr(p).scale(f,d)),x||(x=!0))}}(void 0!==g||b||x)&&(m.round(1),v.e=m.x,v.f=m.y,t.setAttribute("transform",Ii.matrixToTransformString(v)))}},getNodeScale:function(t,e){var n,r;if(e&&e.contains(t)){var i=e.scale();n=1/i.sx,r=1/i.sy}else n=1,r=1;return{sx:n,sy:r}},cleanNodesCache:function(){this.metrics={}},cleanNodeCache:function(t){const e=t.id;e&&delete this.metrics[e]},nodeCache:function(t){var e=this.metrics;if(!e)return{};var n=Ii.ensureId(t),r=e[n];return r||(r=e[n]={}),r},getNodeData:function(t){var e=this.nodeCache(t);return e.data||(e.data={}),e.data},getNodeBoundingRect:function(t){var e=this.nodeCache(t);return void 0===e.boundingRect&&(e.boundingRect=Ii(t).getBBox()),new Cr(e.boundingRect)},getNodeMatrix:function(t){const e=this.nodeCache(t);if(void 0===e.magnetMatrix){const{rotatableNode:n,el:r}=this;let i;i=n&&n.contains(t)?n:r,e.magnetMatrix=Ii(t).getTransformToElement(i)}return Ii.createSVGMatrix(e.magnetMatrix)},getNodeShape:function(t){var e=this.nodeCache(t);return void 0===e.geometryShape&&(e.geometryShape=Ii(t).toGeometryShape()),e.geometryShape.clone()},isNodeConnection:function(t){return this.model.isLink()&&(!t||t===this.el)},findNodesAttributes:function(t,e,n,r){var i,o,s,a,u={},c=[];for(var l in t)if(t.hasOwnProperty(l)&&(s=t[l],cn(s))){var h=n[l]=this.findBySelector(l,e,r);for(i=0,o=h.length;i<o;i++){var f=h[i];a=Ii.ensureId(f);var d=r&&r[l]===f,p=u[a];if(p){p.array||(c.push(a),p.array=!0,p.attributes=[p.attributes],p.selectedLength=[p.selectedLength]);var g=p.attributes,v=p.selectedLength;if(d)g.unshift(s),v.unshift(-1);else{var m=en(v,o);g.splice(m,0,s),v.splice(m,0,o)}}else u[a]={attributes:s,selectedLength:d?-1:o,node:f,array:!1}}}for(i=0,o=c.length;i<o;i++)(s=u[a=c[i]]).attributes=An({},...s.attributes.reverse());return u},getEventTarget:function(t,e={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=t;return e.fromPoint||"touchmove"===r||"touchend"===r||"pointerId"in t&&n.hasPointerCapture(t.pointerId)?document.elementFromPoint(i,o):n},updateDOMSubtreeAttributes:function(t,e,n){n||(n={}),n.rootBBox||(n.rootBBox=Cr()),n.selectors||(n.selectors=this.selectors);var r,i,o,s,a,u={},c={},l=[],h=[],f=n.roAttributes,d=this.findNodesAttributes(f||e,t,u,n.selectors),p=f?this.findNodesAttributes(e,t,u,n.selectors):d;for(var g in d)if(o=(s=d[g]).attributes,i=s.node,(a=this.processNodeAttributes(i,o)).set||a.position||a.offset||a.raw.ref){var v,m=p[g]&&p[g].attributes,y=m&&void 0===o.ref?m.ref:o.ref;if(y){if(!(v=(u[y]||this.findBySelector(y,t,n.selectors))[0]))throw new Error('dia.CellView: "'+y+'" reference does not exist.')}else v=null;if(r={node:i,refNode:v,processedAttributes:a,allAttributes:m},v){var b=h.findIndex(function(t){return t.refNode===i});b>-1?h.splice(b,0,r):h.push(r)}else l.push(r)}else this.setNodeAttributes(i,qa(a.normal,n.rootBBox));l.push(...h);for(let t=0,e=l.length;t<e;t++){r=l[t],i=r.node;const e=(v=r.refNode)?Ii.ensureId(v):"";let o=c[e];o||(o=c[e]=v?Ii(v).getBBox({target:Xa(i,v)}):n.rootBBox),f?(a=this.processNodeAttributes(i,r.allAttributes),this.mergeProcessedAttributes(a,r.processedAttributes)):a=r.processedAttributes,this.updateRelativeAttributes(i,a,o,n)}},mergeProcessedAttributes:function(t,e){t.set||(t.set={}),t.position||(t.position={}),t.offset||(t.offset={}),Ze(t.set,e.set),Ze(t.position,e.position),Ze(t.offset,e.offset);var n=t.normal&&t.normal.transform;void 0!==n&&e.normal&&(e.normal.transform=n),t.normal=e.normal},onMount(t){t||(this.mountTools(),za.mount(this))},onDetach(){this.unmountTools(),za.unmount(this)},onRemove:function(){this.removeTools(),this.removeHighlighters()},_toolsView:null,hasTools:function(t){var e=this._toolsView;return!(!e||t&&e.getName()!==t)},addTools:function(t){return this.removeTools(),t&&(this._toolsView=t,t.configure({relatedView:this}),t.listenTo(this.paper,"tools:event",this.onToolEvent.bind(this))),this},unmountTools(){const t=this._toolsView;return t&&t.unmount(),this},mountTools(){const t=this._toolsView;return t&&!t.isMounted()&&t.mount(),this},updateTools:function(t){var e=this._toolsView;return e&&e.update(t),this},removeTools:function(){var t=this._toolsView;return t&&(t.remove(),this._toolsView=null),this},hideTools:function(){var t=this._toolsView;return t&&t.hide(),this},showTools:function(){var t=this._toolsView;return t&&t.show(),this},onToolEvent:function(t){switch(t){case"remove":this.removeTools();break;case"hide":this.hideTools();break;case"show":this.showTools()}},removeHighlighters:function(){za.remove(this)},updateHighlighters:function(t=!1){za.update(this,null,t)},transformHighlighters:function(){za.transform(this)},preventDefaultInteraction(t){this.eventData(t,{defaultInteractionPrevented:!0})},isDefaultInteractionPrevented(t){const{defaultInteractionPrevented:e=!1}=this.eventData(t);return e},pointerdblclick:function(t,e,n){this.notify("cell:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){this.notify("cell:pointerclick",t,e,n)},contextmenu:function(t,e,n){this.notify("cell:contextmenu",t,e,n)},pointerdown:function(t,e,n){const{model:r}=this,{graph:i}=r;i&&(r.startBatch("pointer"),this.eventData(t,{graph:i})),this.notify("cell:pointerdown",t,e,n)},pointermove:function(t,e,n){this.notify("cell:pointermove",t,e,n)},pointerup:function(t,e,n){const{graph:r}=this.eventData(t);this.notify("cell:pointerup",t,e,n),r&&r.stopBatch("pointer",{cell:this.model})},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mouseenter:function(t){this.notify("cell:mouseenter",t)},mouseleave:function(t){this.notify("cell:mouseleave",t)},mousewheel:function(t,e,n,r){this.notify("cell:mousewheel",t,e,n,r)},onevent:function(t,e,n,r){this.notify(e,t,n,r)},onmagnet:function(){},magnetpointerdblclick:function(){},magnetcontextmenu:function(){},checkMouseleave(t){const{paper:e,model:n}=this;if(e.isAsync()){if(n.isLink()){const t=n.getSourceElement();if(t){const n=e.findViewByModel(t);n&&(e.dumpView(n),e.checkViewVisibility(n))}const r=n.getTargetElement();if(r){const t=e.findViewByModel(r);t&&(e.dumpView(t),e.checkViewVisibility(t))}}e.dumpView(this),e.checkViewVisibility(this)}const r=this.getEventTarget(t,{fromPoint:!0}),i=e.findView(r);i!==this&&(this.mouseleave(t),i&&i.mouseenter(t))},setInteractivity:function(t){this.options.interactive=t},isIntersecting:function(t,e){return Oi.exists(t,this.getNodeBBox(this.el),e)},isEnclosedIn:function(t){return t.containsRect(this.getNodeBBox(this.el))},isInArea:function(t,e={}){return e.strict?this.isEnclosedIn(t):this.isIntersecting(t)},isAtPoint:function(t,e){return this.getNodeBBox(this.el).containsPoint(t,e)}},{Flags:{TOOLS:"TOOLS"},Highlighting:$a,addPresentationAttributes:function(t){return An({},mn(this.prototype,"presentationAttributes"),t,function(t,e){if(t&&e)return"string"==typeof t&&(t=[t]),"string"==typeof e&&(e=[e]),Array.isArray(t)&&Array.isArray(e)?nn(t.concat(e)):void 0})},evalAttribute:Ha});function Xa(t,e){let n=t;do{if(n.contains(e))return n;n=n.parentNode}while(n);return null}Object.defineProperty(Wa.prototype,"useCSSSelectors",{get(){const t=this.model.useCSSSelectors;return void 0!==t&&t}});const Ya={TOOLS:Wa.Flags.TOOLS,UPDATE:"UPDATE",TRANSLATE:"TRANSLATE",RESIZE:"RESIZE",PORTS:"PORTS",ROTATE:"ROTATE",RENDER:"RENDER"},Za="move",Ja="magnet",Ka=Wa.extend({_removePorts:function(){},_renderPorts:function(){},className:function(){var t=Wa.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){Wa.prototype.initialize.apply(this,arguments),this._initializePorts()},presentationAttributes:{attrs:[Ya.UPDATE],position:[Ya.TRANSLATE,Ya.TOOLS],size:[Ya.RESIZE,Ya.PORTS,Ya.TOOLS],angle:[Ya.ROTATE,Ya.TOOLS],markup:[Ya.RENDER],ports:[Ya.PORTS]},initFlag:[Ya.RENDER],UPDATE_PRIORITY:0,confirmUpdate:function(t,e){const{useCSSSelectors:n}=this;this.hasFlag(t,Ya.PORTS)&&(this._removePorts(),this._cleanPortsCache());let r=!1;if(this.hasFlag(t,Ya.RENDER))this.render(),this.updateTools(e),this.updateHighlighters(!0),r=!0,t=this.removeFlag(t,[Ya.RENDER,Ya.UPDATE,Ya.RESIZE,Ya.TRANSLATE,Ya.ROTATE,Ya.PORTS,Ya.TOOLS]);else{let i=!1;this.hasFlag(t,Ya.RESIZE)&&(this.resize(e),i=!0,t=this.removeFlag(t,[Ya.RESIZE,Ya.UPDATE]),n&&(t=this.removeFlag(t,Ya.PORTS))),this.hasFlag(t,Ya.UPDATE)&&(this.update(this.model,null,e),t=this.removeFlag(t,Ya.UPDATE),i=!0,n&&(t=this.removeFlag(t,Ya.PORTS))),this.hasFlag(t,Ya.TRANSLATE)&&(this.translate(),t=this.removeFlag(t,Ya.TRANSLATE),r=!0),this.hasFlag(t,Ya.ROTATE)&&(this.rotate(),t=this.removeFlag(t,Ya.ROTATE),r=!0),this.hasFlag(t,Ya.PORTS)&&(this._renderPorts(),i=!0,t=this.removeFlag(t,Ya.PORTS)),i&&this.updateHighlighters(!1)}return r&&this.transformHighlighters(),this.hasFlag(t,Ya.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,Ya.TOOLS)),t},_initializePorts:function(){},update:function(t,e){this.cleanNodesCache();const{useCSSSelectors:n}=this;n&&this._removePorts();var r=this.model,i=r.attr();this.updateDOMSubtreeAttributes(this.el,i,{rootBBox:new Cr(r.size()),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode,roAttributes:e===i?null:e}),n&&this._renderPorts()},rotatableSelector:"rotatable",scalableSelector:"scalable",scalableNode:null,rotatableNode:null,renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.ElementView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.ElementView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el),n=this.selectors=e.selectors;this.rotatableNode=Ii(n[this.rotatableSelector])||null,this.scalableNode=Ii(n[this.scalableSelector])||null,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=this.vel;e.append(Ii(t)),this.rotatableNode=e.findOne(".rotatable"),this.scalableNode=e.findOne(".scalable"),(this.selectors={})[this.selector]=this.el},render:function(){return this.vel.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransformation(),this.useCSSSelectors||this._renderPorts(),this},resize:function(t){if(this.scalableNode)return this.sgResize(t);this.model.attributes.angle&&this.rotate(),this.update()},translate:function(){if(this.rotatableNode)return this.rgTranslate();this.updateTransformation()},rotate:function(){if(this.rotatableNode)return this.rgRotate(),void this.update();this.updateTransformation()},updateTransformation:function(){var t=this.getTranslateString(),e=this.getRotateString();e&&(t+=" "+e),this.vel.attr("transform",t)},getTranslateString:function(){const{x:t,y:e}=this.model.position();return`translate(${t},${e})`},getRotateString:function(){const t=this.model.angle();if(!t)return null;const{width:e,height:n}=this.model.size();return`rotate(${t},${e/2},${n/2})`},rgRotate:function(){this.rotatableNode.attr("transform",this.getRotateString())},rgTranslate:function(){this.vel.attr("transform",this.getTranslateString())},sgResize:function(t){var e=this.model,n=e.angle(),r=e.size(),i=this.scalableNode,o=!1;i.node.getElementsByTagName("path").length>0&&(o=!0);var s=i.getBBox({recursive:o}),a=r.width/(s.width||1),u=r.height/(s.height||1);i.attr("transform","scale("+a+","+u+")");var c=this.rotatableNode,l=c&&c.attr("transform");if(l){c.attr("transform",l+" rotate("+-n+","+r.width/2+","+r.height/2+")");var h=i.getBBox({target:this.paper.cells});e.set("position",{x:h.x,y:h.y},Ze({updateHandled:!0},t)),this.translate(),this.rotate()}this.update()},prepareEmbedding:function(t={}){const e=t.model||this.model,n=(t.paper||this.paper).model,r=t.initialZIndices={},i=e.getEmbeddedCells({deep:!0}),o=n.getConnectedLinks(e,{deep:!0,includeEnclosed:!0});[e,...i,...o].forEach(t=>r[t.id]=t.attributes.z),e.startBatch("to-front"),e.toFront({deep:!0,ui:!0});const s=n.getElements().reduce((t,e)=>Math.max(t,e.attributes.z||0),0);o.forEach(t=>{t.attributes.z<=s&&t.set("z",s+1,{ui:!0})}),e.stopBatch("to-front");const a=e.parent();a?(n.getCell(a).unembed(e,{ui:!0}),t.initialParentId=a):t.initialParentId=null},processEmbedding:function(t={},e,n,r){const i=t.model||this.model,o=t.paper||this.paper,s=o.model,{findParentBy:a,frontParentOnly:u,validateEmbedding:c}=o.options;let l;l=un(a)?ln(a.call(s,this,e,n,r)):"pointer"===a?s.findElementsAtPoint({x:n,y:r}):s.findElementsUnderElement(i,{searchBy:a}),l=l.filter(t=>t instanceof ta&&i.id!==t.id&&!t.isEmbeddedIn(i)),u&&(l=l.slice(-1));let h=null;const f=t.candidateEmbedView;for(let t=l.length-1;t>=0;t--){const e=l[t];if(f&&f.model.id==e.id){h=f;break}{const t=e.findView(o);if(!un(c)||c.call(o,this,t)){h=t;break}}}h&&h!=f&&(this.clearEmbedding(t),t.candidateEmbedView=h.highlight(h.findProxyNode(null,"container"),{embedding:!0})),!h&&f&&this.clearEmbedding(t)},clearEmbedding:function(t){t||(t={});var e=t.candidateEmbedView;e&&(e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null)},finalizeEmbedding:function(t={}){const e=t.candidateEmbedView,n=t.model||this.model,r=t.paper||this.paper;if(e)e.model.embed(n,{ui:!0}),e.unhighlight(e.findProxyNode(null,"container"),{embedding:!0}),t.candidateEmbedView=null;else{const{validateUnembedding:e}=r.options,{initialParentId:n}=t;if(n&&"function"==typeof e&&!e.call(r,this))return void this._disallowUnembed(t)}r.model.getConnectedLinks(n,{deep:!0}).forEach(t=>{t.reparent({ui:!0})})},_disallowUnembed:function(t){const{model:e,whenNotAllowed:n="revert"}=t,r=e||this.model,i=(t.paper||this.paper).model;switch(n){case"remove":r.remove({ui:!0});break;case"revert":{const{initialParentId:e,initialPosition:n,initialZIndices:o}=t;if(n){const{x:t,y:e}=n;r.position(t,e,{deep:!0,ui:!0})}o&&Object.keys(o).forEach(t=>{const e=i.getCell(t);e&&e.set("z",o[t],{ui:!0})});const s=i.getCell(e);s&&s.embed(r,{ui:!0});break}}},getTargetParentView:function(t){const{candidateEmbedView:e=null}=this.eventData(t);return e},getDelegatedView:function(){for(var t=this,e=t.model,n=t.paper;t&&!e.isLink();){if(!e.isEmbedded()||t.can("stopDelegation"))return t;e=e.getParentCell(),t=n.findViewByModel(e)}return null},findProxyNode:function(t,e){t||(t=this.el);const n=t.getAttribute(`${e}-selector`);if(n){const e=this.findAttribute("port",t);if(e){const t=this.findPortNode(e,n);if(t)return t}else{const t=this.findNode(n);if(t)return t}}return t},notifyPointerdown(t,e,n){Wa.prototype.pointerdown.call(this,t,e,n),this.notify("element:pointerdown",t,e,n)},notifyPointermove(t,e,n){Wa.prototype.pointermove.call(this,t,e,n),this.notify("element:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("element:pointerup",t,e,n),Wa.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Wa.prototype.pointerdblclick.apply(this,arguments),this.notify("element:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Wa.prototype.pointerclick.apply(this,arguments),this.notify("element:pointerclick",t,e,n)},contextmenu:function(t,e,n){Wa.prototype.contextmenu.apply(this,arguments),this.notify("element:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=r;switch(i&&this.magnetpointermove(t,i,e,n),o){case Ja:this.dragMagnet(t,e,n);break;case Za:(s||this).drag(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointermove(t,e,n)}this.eventData(t,r)},pointerup:function(t,e,n){const r=this.eventData(t),{targetMagnet:i,action:o,delegatedView:s}=r;switch(i&&this.magnetpointerup(t,i,e,n),o){case Ja:this.dragMagnetEnd(t,e,n);break;case Za:(s||this).dragEnd(t,e,n);default:if(r.preventPointerEvents)break;this.notifyPointerup(t,e,n)}i&&this.magnetpointerclick(t,i,e,n),this.checkMouseleave(t)},mouseover:function(t){Wa.prototype.mouseover.apply(this,arguments),this.notify("element:mouseover",t)},mouseout:function(t){Wa.prototype.mouseout.apply(this,arguments),this.notify("element:mouseout",t)},mouseenter:function(t){Wa.prototype.mouseenter.apply(this,arguments),this.notify("element:mouseenter",t)},mouseleave:function(t){Wa.prototype.mouseleave.apply(this,arguments),this.notify("element:mouseleave",t)},mousewheel:function(t,e,n,r){Wa.prototype.mousewheel.apply(this,arguments),this.notify("element:mousewheel",t,e,n,r)},onmagnet:function(t,e,n){const{currentTarget:r}=t;this.magnetpointerdown(t,r,e,n),this.eventData(t,{targetMagnet:r}),this.dragMagnetStart(t,e,n)},magnetpointerdown:function(t,e,n,r){this.notify("element:magnet:pointerdown",t,e,n,r)},magnetpointermove:function(t,e,n,r){this.notify("element:magnet:pointermove",t,e,n,r)},magnetpointerup:function(t,e,n,r){this.notify("element:magnet:pointerup",t,e,n,r)},magnetpointerdblclick:function(t,e,n,r){this.notify("element:magnet:pointerdblclick",t,e,n,r)},magnetcontextmenu:function(t,e,n,r){this.notify("element:magnet:contextmenu",t,e,n,r)},dragStart:function(t,e,n){if(this.isDefaultInteractionPrevented(t))return;var r=this.getDelegatedView();if(!r||!r.can("elementMove"))return;this.eventData(t,{action:Za,delegatedView:r});const i=r.model.position();r.eventData(t,{initialPosition:i,pointerOffset:i.difference(e,n),restrictedArea:this.paper.getRestrictedArea(r,e,n)})},dragMagnetStart:function(t,e,n){const{paper:r}=this,i=t.isPropagationStopped();if(i&&this.eventData(t,{preventPointerEvents:!0}),this.isDefaultInteractionPrevented(t)||!this.can("addLinkFromMagnet"))return;const{targetMagnet:o=t.currentTarget}=this.eventData(t);t.stopPropagation(),r.options.validateMagnet.call(r,this,o,t)?(r.options.magnetThreshold<=0&&this.dragLinkStart(t,o,e,n),this.eventData(t,{action:Ja})):i?this.dragStart(t,e,n):this.pointerdown(t,e,n)},snapToGrid:function(t,e,n){const r=this.paper.options.gridSize;return{x:qn(e,r),y:qn(n,r)}},drag:function(t,e,n){var r=this.paper,i=this.model,o=this.eventData(t),{pointerOffset:s,restrictedArea:a,embedding:u}=o;const{x:c,y:l}=this.snapToGrid(t,e+s.x,n+s.y);i.position(c,l,{restrictedArea:a,deep:!0,ui:!0}),r.options.embeddingMode&&(u||(this.prepareEmbedding(o),u=!0),this.processEmbedding(o,t,e,n)),this.eventData(t,{embedding:u})},dragMagnet:function(t,e,n){this.dragLink(t,e,n)},dragEnd:function(t,e,n){var r=this.eventData(t);r.embedding&&this.finalizeEmbedding(r)},dragMagnetEnd:function(t,e,n){this.dragLinkEnd(t,e,n)},magnetpointerclick:function(t,e,n,r){var i=this.paper;i.eventData(t).mousemoved>i.options.clickThreshold||this.notify("element:magnet:pointerclick",t,e,n,r)}},{Flags:Ya});Ze(Ka.prototype,Ma);const Qa=ta.extend({defaultLabel:void 0,labelMarkup:void 0,_builtins:{defaultLabel:{markup:[{tagName:"rect",selector:"rect"},{tagName:"text",selector:"text"}],attrs:{text:{fill:"#000000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"text",fill:"#ffffff",rx:3,ry:3,x:"calc(x)",y:"calc(y)",width:"calc(w)",height:"calc(h)"}},position:{distance:.5}}},defaults:{source:{},target:{}},isLink:function(){return!0},disconnect:function(t){return this.set({source:{x:0,y:0},target:{x:0,y:0}},t)},source:function(t,e,n){return void 0===t?rn(this.get("source")):t instanceof ta?((r=rn(e)||{}).id=t.id,i=n,this.set("source",r,i)):cn(t)?(r=t,i=e,this.set("source",r,i)):((r=rn(e)||{}).x=t.x,r.y=t.y,i=n,this.set("source",r,i));var r,i},target:function(t,e,n){return void 0===t?rn(this.get("target")):t instanceof ta?((r=rn(e)||{}).id=t.id,i=n,this.set("target",r,i)):cn(t)?(r=t,i=e,this.set("target",r,i)):((r=rn(e)||{}).x=t.x,r.y=t.y,i=n,this.set("target",r,i));var r,i},router:function(t,e,n){if(void 0===t){var r=this.get("router");return r?"object"==typeof r?rn(r):r:null}var i="object"==typeof t||"function"==typeof t,o=i?t:{name:t,args:e},s=i?e:n;return this.set("router",o,s)},connector:function(t,e,n){if(void 0===t){var r=this.get("connector");return r?"object"==typeof r?rn(r):r:null}var i="object"==typeof t||"function"==typeof t,o=i?t:{name:t,args:e},s=i?e:n;return this.set("connector",o,s)},label:function(t,e,n){var r=this.labels();return(t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1?this.prop(["labels",t]):this.prop(["labels",t],e,n)},labels:function(t,e){return 0===arguments.length?(t=this.get("labels"),Array.isArray(t)?t.slice():[]):(Array.isArray(t)||(t=[]),this.set("labels",t,e))},hasLabels:function(){const{labels:t}=this.attributes;return Array.isArray(t)&&t.length>0},insertLabel:function(t,e,n){if(!e)throw new Error("dia.Link: no label provided");var r=this.labels(),i=r.length;return(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1),r.splice(t,0,e),this.labels(r,n)},appendLabel:function(t,e){return this.insertLabel(-1,t,e)},removeLabel:function(t,e){var n=this.labels();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.labels(n,e)},vertex:function(t,e,n){var r=this.vertices();if((t=isFinite(t)&&null!==t?0|t:0)<0&&(t=r.length+t),arguments.length<=1)return this.prop(["vertices",t]);var i=this._normalizeVertex(e);return this.prop(["vertices",t],i,n)},vertices:function(t,e){if(0===arguments.length)return t=this.get("vertices"),Array.isArray(t)?t.slice():[];Array.isArray(t)||(t=[]);for(var n=[],r=0;r<t.length;r++){var i=t[r],o=this._normalizeVertex(i);n.push(o)}return this.set("vertices",n,e)},insertVertex:function(t,e,n){if(!e)throw new Error("dia.Link: no vertex provided");var r=this.vertices(),i=r.length;(t=isFinite(t)&&null!==t?0|t:i)<0&&(t=i+t+1);var o=this._normalizeVertex(e);return r.splice(t,0,o),this.vertices(r,n)},removeVertex:function(t,e){var n=this.vertices();return t=isFinite(t)&&null!==t?0|t:-1,n.splice(t,1),this.vertices(n,e)},_normalizeVertex:function(t){return cn(t)?t:{x:t.x,y:t.y}},translate:function(t,e,n){return(n=n||{}).translateBy=n.translateBy||this.id,n.tx=t,n.ty=e,this.applyToPoints(function(n){return{x:(n.x||0)+t,y:(n.y||0)+e}},n)},scale:function(t,e,n,r){return this.applyToPoints(function(r){return hr(r).scale(t,e,n).toJSON()},r)},applyToPoints:function(t,e){if(!un(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var n={},{source:r,target:i}=this.attributes;r.id||(n.source=t(r)),i.id||(n.target=t(i));var o=this.vertices();return o.length>0&&(n.vertices=o.map(t)),this.set(n,e)},getSourcePoint:function(){var t=this.getSourceCell();return t?t.getPointFromConnectedLink(this,"source"):new hr(this.source())},getTargetPoint:function(){var t=this.getTargetCell();return t?t.getPointFromConnectedLink(this,"target"):new hr(this.target())},getPointFromConnectedLink:function(){return this.getPolyline().pointAt(.5)},getPolyline:function(){const t=[this.getSourcePoint(),...this.vertices().map(hr),this.getTargetPoint()];return new Ir(t)},getBBox:function(){return this.getPolyline().bbox()},reparent:function(t){var e;if(this.graph){var n=this.getSourceElement(),r=this.getTargetElement(),i=this.getParentCell();n&&r&&(e=n===r||n.isEmbeddedIn(r)?r:r.isEmbeddedIn(n)?n:this.graph.getCommonAncestor(n,r)),!i||e&&e.id===i.id||i.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var{source:e,target:n}=this.attributes,r=e.id,i=n.id;if(!r||!i)return!1;var o=r===i;if(!o&&t.deep&&this.graph){var s=this.getSourceCell(),a=this.getTargetCell();o=s.isEmbeddedIn(a)||a.isEmbeddedIn(s)}return o},getSourceCell:function(){const{graph:t,attributes:e}=this;var n=e.source;return n&&n.id&&t&&t.getCell(n.id)||null},getSourceElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getSourceCell()}while(t&&t.isLink());return t},getTargetCell:function(){const{graph:t,attributes:e}=this;var n=e.target;return n&&n.id&&t&&t.getCell(n.id)||null},getTargetElement:function(){var t=this,e={};do{if(e[t.id])return null;e[t.id]=!0,t=t.getTargetCell()}while(t&&t.isLink());return t},getRelationshipAncestor:function(){var t;if(this.graph){var e=[this,this.getSourceElement(),this.getTargetElement()].filter(function(t){return!!t});t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=Ye(t)||Xe(t)?t:t.id,n=this.getRelationshipAncestor();return!!n&&(n.id===e||n.isEmbeddedIn(e))},_getDefaultLabel:function(){var t=this.get("defaultLabel")||this.defaultLabel||{},e={};return e.markup=t.markup||this.get("labelMarkup")||this.labelMarkup,e.position=t.position,e.attrs=t.attrs,e.size=t.size,e}},{endsEqual:function(t,e){var n=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&n}}),tu={_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))},isSafari:function(){return/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)}},addTest:function(t,e){return this._tests[t]=e},test:function(t){var e=this._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var n=this._results[t];if(void 0!==n)return n;try{n=e()}catch(t){n=!1}return this._results[t]=n,n}},eu=(Ia.define("standard.Rectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}]}),Ia.define("standard.Circle",{attrs:{root:{cursor:"move"},body:{cx:"calc(s/2)",cy:"calc(s/2)",r:"calc(s/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"circle",selector:"body"},{tagName:"text",selector:"label"}]}));Ia.define("standard.Ellipse",{attrs:{root:{cursor:"move"},body:{cx:"calc(w/2)",cy:"calc(h/2)",rx:"calc(w/2)",ry:"calc(h/2)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"body"},{tagName:"text",selector:"label"}]}),Ia.define("standard.Path",{attrs:{root:{cursor:"move"},body:{d:"M 0 0 H calc(w) V calc(h) H 0 Z",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}]}),Ia.define("standard.Polygon",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polygon",selector:"body"},{tagName:"text",selector:"label"}]}),Ia.define("standard.Polyline",{attrs:{root:{cursor:"move"},body:{points:"0 0 calc(w) 0 calc(w) calc(h) 0 calc(h)",strokeWidth:2,stroke:"#333333",fill:"#FFFFFF"},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"polyline",selector:"body"},{tagName:"text",selector:"label"}]}),Ia.define("standard.Image",{attrs:{root:{cursor:"move"},image:{width:"calc(w)",height:"calc(h)"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ia.define("standard.BorderedImage",{attrs:{root:{cursor:"move"},border:{width:"calc(w)",height:"calc(h)",stroke:"#333333",strokeWidth:2},background:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5,fill:"#FFFFFF"},image:{width:"calc(w-1)",height:"calc(h-1)",x:.5,y:.5},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"background",attributes:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ia.define("standard.EmbeddedImage",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{width:"calc(0.3*w)",height:"calc(h-20)",x:10,y:10,preserveAspectRatio:"xMidYMin"},label:{textVerticalAnchor:"top",textAnchor:"left",x:"calc(0.3*w+20)",y:10,fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}]}),Ia.define("standard.InscribedImage",{attrs:{root:{cursor:"move"},border:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",stroke:"#333333",strokeWidth:2},background:{rx:"calc(w/2)",ry:"calc(h/2)",cx:"calc(w/2)",cy:"calc(h/2)",fill:"#FFFFFF"},image:{width:"calc(0.68*w)",height:"calc(0.68*h)",x:"calc(0.16*w)",y:"calc(0.16*h)",preserveAspectRatio:"xMidYMid"},label:{textVerticalAnchor:"top",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+10)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attributes:{fill:"none"}},{tagName:"text",selector:"label"}]}),Ia.define("standard.HeaderedRectangle",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},header:{width:"calc(w)",height:30,strokeWidth:2,stroke:"#000000",fill:"#FFFFFF"},headerText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:15,fontSize:16,fill:"#333333"},bodyText:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h/2+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}]}),Ia.define("standard.Cylinder",{attrs:{root:{cursor:"move"},body:{lateralArea:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},top:{cx:"calc(w/2)",cy:10,rx:"calc(w/2)",ry:10,fill:"#FFFFFF",stroke:"#333333",strokeWidth:2},label:{textVerticalAnchor:"middle",textAnchor:"middle",x:"calc(w/2)",y:"calc(h+15)",fontSize:14,fill:"#333333"}}},{markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],topRy:function(t,e){if(void 0===t)return this.attr("body/lateralArea");var n={lateralArea:t},r=Bo(t)?`calc(${parseFloat(t)/100}*h)`:t,i={cy:r,ry:r};return this.attr({body:n,top:i},e)}},{attributes:{"lateral-area":{set:function(t,e){var n=Bo(t);n&&(t=parseFloat(t)/100);var r=e.x,i=e.y,o=e.width,s=e.height,a=o/2,u=n?s*t:t,c=Ii.KAPPA,l=c*a,h=c*(n?s*t:t),f=r+o/2,d=r+o,p=i+u,g=p-u,v=i+s-u,m=i+s;return{d:["M",r,p,"L",r,v,"C",r,v+h,f-l,m,f,m,"C",f+l,m,d,v+h,d,v,"L",d,p,"C",d,p-h,f+l,g,f,g,"C",f-l,g,r,p-h,r,p,"Z"].join(" ")}},unset:"d"}}});var nu=tu.test("svgforeignobject")?{tagName:"foreignObject",selector:"foreignObject",attributes:{overflow:"hidden"},children:[{tagName:"div",namespaceURI:"http://www.w3.org/1999/xhtml",selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attributes:{"text-anchor":"middle"}};Ia.define("standard.TextBlock",{attrs:{root:{cursor:"move"},body:{width:"calc(w)",height:"calc(h)",stroke:"#333333",fill:"#ffffff",strokeWidth:2},foreignObject:{width:"calc(w)",height:"calc(h)"},label:{style:{fontSize:14}}}},{markup:[{tagName:"rect",selector:"body"},nu]},{attributes:{text:{set:function(t,e,n,r){if(!(n instanceof HTMLElement)){var i=r.style||{},o={text:t,width:-5,height:"100%"},s=Ze({"text-vertical-anchor":"middle"},i);return Js["text-wrap"].set.call(this,o,e,n,s),{fill:i.color||null}}n.textContent=t},unset:function(t){if(t.textContent="",t instanceof SVGElement)return"fill"},position:function(t,e,n){if(n instanceof SVGElement)return e.center()}}}});const ru=Qa.define("standard.Link",{attrs:{line:{connection:!0,stroke:"#333333",strokeWidth:2,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 10 -5 0 0 10 5 z"}},wrapper:{connection:!0,strokeWidth:10,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"wrapper",attributes:{fill:"none",cursor:"pointer",stroke:"transparent","stroke-linecap":"round"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),iu=(Qa.define("standard.DoubleLink",{attrs:{line:{connection:!0,stroke:"#DDDDDD",strokeWidth:4,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}},{markup:[{tagName:"path",selector:"outline",attributes:{fill:"none",cursor:"pointer"}},{tagName:"path",selector:"line",attributes:{fill:"none","pointer-events":"none"}}]}),Qa.define("standard.ShadowLink",{attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}},shadow:{connection:!0,transform:"translate(3,6)",stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{type:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none"},sourceMarker:{type:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z"}}}},{markup:[{tagName:"path",selector:"shadow",attributes:{fill:"none","pointer-events":"none"}},{tagName:"path",selector:"line",attributes:{fill:"none",cursor:"pointer"}}]}),function(t,e,n){return t}),ou=function(t,e,n){var r,i,o,s=e.side||"bottom",a=Uo(e.padding||40),u=n.sourceBBox,c=n.targetBBox,l=u.center(),h=c.center();switch(s){case"bottom":o=1,r="y",i="height";break;case"top":o=-1,r="y",i="height";break;case"left":o=-1,r="x",i="width";break;case"right":o=1,r="x",i="width";break;default:throw new Error("Router: invalid side")}return l[r]+=o*(u[i]/2+a[s]),h[r]+=o*(c[i]/2+a[s]),o*(l[r]-h[r])>0?h[r]=l[r]:l[r]=h[r],[l].concat(t,h)};var su={N:"S",S:"N",E:"W",W:"E"},au={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function uu(t,e,n){var r=new hr(t.x,e.y);return n.containsPoint(r)&&(r=new hr(e.x,t.y)),r}function cu(t,e){return t["W"===e||"E"===e?"width":"height"]}function lu(t,e){return t.x===e.x?t.y>e.y?"N":"S":t.y===e.y?t.x>e.x?"W":"E":null}function hu(t){return new Cr(t.x,t.y,0,0)}function fu(t){var e=Uo(t.padding||t.elementPadding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function du(t,e){return t.sourceBBox.clone().moveAndExpand(fu(e))}function pu(t,e){return t.targetBBox.clone().moveAndExpand(fu(e))}function gu(t,e,n){var r=new hr(t.x,e.y),i=new hr(e.x,t.y),o=lu(t,r),s=lu(t,i),a=su[n],u=o===n||o!==a&&(s===a||s!==n)?r:i;return{points:[u],direction:lu(u,e)}}function vu(t,e,n){var r=uu(t,e,n);return{points:[r],direction:lu(r,e)}}function mu(t,e,n,r){var i,o={},s=[new hr(t.x,e.y),new hr(e.x,t.y)],a=s.filter(function(t){return!n.containsPoint(t)}),u=a.filter(function(e){return lu(e,t)!==r});if(u.length>0)i=(i=u.filter(function(e){return lu(t,e)===r}).pop())||u[0],o.points=[i],o.direction=lu(i,e);else{i=pn(s,a)[0];var c=new hr(e).move(i,-cu(n,r)/2),l=uu(c,t,n);o.points=[l,c],o.direction=lu(c,e)}return o}function yu(t,e,n,r){var i=vu(e,t,r),o=i.points[0];if(n.containsPoint(o)){var s=(i=vu(t,e,n)).points[0];if(r.containsPoint(s)){var a=new hr(t).move(s,-cu(n,lu(t,s))/2),u=new hr(e).move(o,-cu(r,lu(e,o))/2),c=new gr(a,u).midpoint(),l=vu(t,c,n),h=gu(c,e,l.direction);i.points=[l.points[0],h.points[0]],i.direction=h.direction}}return i}function bu(t,e,n,r,i){var o,s,a,u={},c=n.union(r).inflate(1),l=c.center().distance(e)>c.center().distance(t),h=l?e:t,f=l?t:e;return i?(o=hr.fromPolar(c.width+c.height,au[i],h),o=c.pointNearestToPoint(o).move(o,-1)):o=c.pointNearestToPoint(h).move(h,1),s=uu(o,f,c),o.round().equals(s.round())?(s=hr.fromPolar(c.width+c.height,$n(o.theta(h))+Math.PI/2,f),a=uu(o,s=c.pointNearestToPoint(s).move(f,1).round(),c),u.points=l?[s,a,o]:[o,a,s]):u.points=l?[s,o]:[o,s],u.direction=lu(l?o:s,e),u}function xu(t,e,n){var r,i=du(n,e),o=pu(n,e),s=function(t,e){return t.sourceAnchor?t.sourceAnchor:du(t,e).center()}(n,e),a=function(t,e){return t.targetAnchor?t.targetAnchor:pu(t,e).center()}(n,e);i=i.union(hu(s)),o=o.union(hu(a)),(t=ln(t).map(hr)).unshift(s),t.push(a);for(var u=[],c=0,l=t.length-1;c<l;c++){var h=null,f=t[c],d=t[c+1],p=!!lu(f,d);if(0===c)c+1===l?i.intersect(o.clone().inflate(1))?h=bu(f,d,i,o):p||(h=yu(f,d,i,o)):i.containsPoint(d)?h=bu(f,d,i,hu(d).moveAndExpand(fu(e))):p||(h=vu(f,d,i));else if(c+1===l){var g=p&&lu(d,f)===r;o.containsPoint(f)||g?h=bu(f,d,hu(f).moveAndExpand(fu(e)),o,r):p||(h=mu(f,d,o,r))}else p||(h=gu(f,d,r));h?(Array.prototype.push.apply(u,h.points),r=h.direction):r=lu(f,d),c+1<l&&u.push(d)}return u}var wu={step:10,maximumLoops:2e3,precision:1,maxAllowedDirectionChange:90,perpendicular:!0,excludeEnds:[],excludeTypes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){return this.step},directions:function(){var t=this.step,e=this.cost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:-t,offsetY:0,cost:e},{offsetX:0,offsetY:t,cost:e},{offsetX:0,offsetY:-t,cost:e}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},isPointObstacle:null,fallbackRouter:function(t,e,n){if(!un(xu))throw new Error("Manhattan requires the orthogonal router as default fallback.");return xu(t,Ze({},wu,e),n)},fallbackRoute:function(t,e,n){return null},draggingRoute:null};function _u(t){this.map={},this.options=t,this.mapGridSize=100}function Eu(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function Au(t,e){return e&&e.paddingBox?t.sourceBBox.clone().moveAndExpand(e.paddingBox):t.sourceBBox.clone()}function ku(t,e){return e&&e.paddingBox?t.targetBBox.clone().moveAndExpand(e.paddingBox):t.targetBBox.clone()}function Su(t,e){return t.sourceAnchor?t.sourceAnchor:Au(t,e).center()}function Tu(t,e,n,r,i){var o=360/n,s=t.theta(function(t,e,n,r){var i=r.step,o=e.x-t.x,s=e.y-t.y,a=o/n.x*i,u=s/n.y*i;return new hr(t.x+a,t.y+u)}(t,e,r,i)),a=Un(s+o/2);return o*Math.floor(a/o)}function Pu(t,e){var n=Math.abs(t-e);return n>180?360-n:n}function Cu(t,e){if(!t)return e;var n=Math.abs(t),r=Math.round(n/e);return r?e+(n-r*e)/r:n}function Nu(t,e){return t.round(e)}function Lu(t,e,n){return Nu(function(t,e){var n=e.source,r=qn(t.x-n.x,e.x)+n.x,i=qn(t.y-n.y,e.y)+n.y;return new hr(r,i)}(t.clone(),e),n)}function Ou(t){return t.clone().toString()}function Mu(t){return new hr(0===t.x?0:Math.abs(t.x)/t.x,0===t.y?0:Math.abs(t.y)/t.y)}function Iu(t,e,n,r,i,o,s){for(var a,u=[],c=Mu(i.difference(n)),l=Ou(n),h=t[l];h;){var f=Mu((a=e[l]).difference(h));f.equals(c)||(u.unshift(a),c=f),h=t[l=Ou(h)]}var d=e[l];return Mu(d.difference(r)).equals(c)||u.unshift(d),u}function Ru(t,e){for(var n=1/0,r=0,i=e.length;r<i;r++){var o=t.manhattanDistance(e[r]);o<n&&(n=o)}return n}function ju(t,e,n,r,i){var o=i.precision,s=i.directionMap,a=t.difference(e.center()),u=We(s)?Object.keys(s):[],c=ln(n),l=u.reduce(function(n,i){if(c.includes(i)){for(var u,l=s[i],h=new hr(t.x+l.x*(Math.abs(a.x)+e.width),t.y+l.y*(Math.abs(a.y)+e.height)),f=new gr(t,h).intersect(e)||[],d=f.length,p=null,g=0;g<d;g++){var v=f[g],m=t.squaredDistance(v);(void 0===u||m>u)&&(u=m,p=v)}if(p){var y=Lu(p,r,o);e.containsPoint(y)&&(y=Lu(y.offset(l.x*r.x,l.y*r.y),r,o)),n.push(y)}}return n},[]);return e.containsPoint(t)||l.push(Lu(t,r,o)),l}function Du(t,e,n,r){var i,o,s=r.precision;i=Nu(t instanceof Cr?Su(this,r).clone():t.clone(),s),o=Nu(e instanceof Cr?function(t,e){return t.targetAnchor?t.targetAnchor:ku(t,e).center()}(this,r).clone():e.clone(),s);var a,u,c,l,h,f,d,p=(a=r.step,c=o,{source:(u=i).clone(),x:Cu(c.x-u.x,a),y:Cu(c.y-u.y,a)});if(f=t instanceof Cr?ju(l=i,t,r.startDirections,p,r):[l=i],e instanceof Cr?(h=o,d=ju(o,e,r.endDirections,p,r)):d=[h=o],f=f.filter(t=>!n(t)),d=d.filter(t=>!n(t)),f.length>0&&d.length>0){for(var g=new Eu,v={},m={},y={},b=0,x=f.length;b<x;b++){var w=f[b],_=Ou(w);g.add(_,Ru(w,d)),v[_]=w,y[_]=0}var E,A,k=r.previousDirectionAngle,S=void 0===k,T=r.directions;!function(t,e,n){var r=n.step;ln(n.directions).forEach(function(t){t.gridOffsetX=t.offsetX/r*e.x,t.gridOffsetY=t.offsetY/r*e.y})}(0,p,r);for(var P=T.length,C=ln(d).reduce(function(t,e){var n=Ou(e);return t.push(n),t},[]),N=r.maximumLoops;!g.isEmpty()&&N>0;){var L,O=g.pop(),M=v[O],I=m[O],R=y[O],j=void 0===I,D=M.equals(l);L=j?S?D?null:Tu(l,M,P,p,r):k:Tu(I,M,P,p,r);var B=f.length===d.length;if(B)for(var V=0;V<f.length;V++)if(!f[V].equals(d[V])){B=!1;break}if((!j||!B)&&C.indexOf(O)>=0)return r.previousDirectionAngle=L,Iu(m,v,M,l,h);for(b=0;b<P;b++){var F=(E=T[b]).angle;if(A=Pu(L,F),S&&D||!(A>r.maxAllowedDirectionChange)){var z=Lu(M.clone().offset(E.gridOffsetX,E.gridOffsetY),p,s),G=Ou(z);if(!g.isClose(G)&&!n(z)){if(C.indexOf(G)>=0&&!z.equals(h)&&Pu(F,Tu(z,h,P,p,r))>r.maxAllowedDirectionChange)continue;var U=R+E.cost+(D?0:r.penalties[A]);(!g.isOpen(G)||U<y[G])&&(v[G]=z,m[G]=M,y[G]=U,g.add(G,U+Ru(z,d)))}}}N--}}return r.fallbackRoute.call(this,l,h,r)}_u.prototype.build=function(t,e){var n=this.options,r=ln(n.excludeEnds).reduce(function(n,r){var i=e.get(r);if(i){var o=t.getCell(i.id);o&&n.push(o)}return n},[]),i=[],o=t.getCell(e.get("source").id);o&&(i=gn(i,o.getAncestors().map(function(t){return t.id})));var s=t.getCell(e.get("target").id);s&&(i=gn(i,s.getAncestors().map(function(t){return t.id})));var a=this.mapGridSize;return t.getElements().reduce(function(t,e){var o=ln(n.excludeTypes).includes(e.get("type")),s=r.find(function(t){return t.id===e.id}),u=i.includes(e.id);if(!(o||s||u))for(var c=e.getBBox().moveAndExpand(n.paddingBox),l=c.origin().snapToGrid(a),h=c.corner().snapToGrid(a),f=l.x;f<=h.x;f+=a)for(var d=l.y;d<=h.y;d+=a){var p=f+"@"+d;t[p]=t[p]||[],t[p].push(c)}return t},this.map),this},_u.prototype.isPointAccessible=function(t){var e=t.clone().snapToGrid(this.mapGridSize).toString();return ln(this.map[e]).every(function(e){return!e.containsPoint(t)})},Eu.prototype.add=function(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=e;var n=en(this.items,t,function(t){return this.values[t]}.bind(this));this.items.splice(n,0,t)},Eu.prototype.remove=function(t){this.hash[t]=this.CLOSE},Eu.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},Eu.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},Eu.prototype.isEmpty=function(){return 0===this.items.length},Eu.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t};const Bu=function(t,e,n){return function(t,e,n){!function(t){if(t.directions=mn(t,"directions"),t.penalties=mn(t,"penalties"),t.paddingBox=mn(t,"paddingBox"),t.padding=mn(t,"padding"),t.padding){var e=Uo(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}ln(t.directions).forEach(function(t){var e=new hr(0,0),n=new hr(t.offsetX,t.offsetY);t.angle=Un(e.theta(n))})}(e),n.options.perpendicular=!!e.perpendicular;var r=Au(n,e),i=ku(n,e),o=Su(n,e);let s;if("function"==typeof e.isPointObstacle)s=e.isPointObstacle;else{const t=new _u(e);t.build(n.paper.model,n.model),s=e=>!t.isPointAccessible(e)}for(var a,u,c=ln(t).map(hr),l=[],h=o,f=0,d=c.length;f<=d;f++){var p=null;if(u=a||r,!(a=c[f])&&(a=i,(!n.model.get("source").id||!n.model.get("target").id)&&un(e.draggingRoute))){var g=u===r?o:u,v=a.origin();p=e.draggingRoute.call(n,g,v,e)}if(null===(p=p||Du.call(n,u,a,s,e)))return e.fallbackRouter(t,e,n);var m=p[0];m&&m.equals(h)&&p.shift(),h=p[p.length-1]||h,Array.prototype.push.apply(l,p)}return l}(t,Ze({},wu,e),n)};var Vu={maxAllowedDirectionChange:45,diagonalCost:function(){var t=this.step;return Math.ceil(Math.sqrt(t*t<<1))},directions:function(){var t=this.step,e=this.cost(),n=this.diagonalCost();return[{offsetX:t,offsetY:0,cost:e},{offsetX:t,offsetY:t,cost:n},{offsetX:0,offsetY:t,cost:e},{offsetX:-t,offsetY:t,cost:n},{offsetX:-t,offsetY:0,cost:e},{offsetX:-t,offsetY:-t,cost:n},{offsetX:0,offsetY:-t,cost:e},{offsetX:t,offsetY:-t,cost:n}]},fallbackRoute:function(t,e,n){var r=t.theta(e),i=[],o={x:e.x,y:t.y},s={x:t.x,y:e.y};if(r%180>90){var a=o;o=s,s=a}var u=r%90<45?o:s,c=new gr(t,u),l=90*Math.ceil(r/90),h=hr.fromPolar(c.squaredLength(),$n(l+135),u),f=new gr(e,h),d=c.intersection(f),p=d||e,g=d?p:t,v=360/n.directions.length,m=g.theta(e),y=Un(m+v/2),b=v*Math.floor(y/v);return n.previousDirectionAngle=b,p&&i.push(p.round()),i.push(e),i}};const Fu=function(t,e,n){if(!un(Bu))throw new Error("Metro requires the manhattan router.");return Bu(t,Ze({},Vu,e),n)},zu={AUTO:"auto",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",ANCHOR_SIDE:"anchor-side",MAGNET_SIDE:"magnet-side"},Gu=[zu.LEFT,zu.RIGHT,zu.TOP,zu.BOTTOM],Uu={[zu.LEFT]:zu.RIGHT,[zu.RIGHT]:zu.LEFT,[zu.TOP]:zu.BOTTOM,[zu.BOTTOM]:zu.TOP},qu=[zu.TOP,zu.BOTTOM],Hu={0:zu.RIGHT,180:zu.LEFT,270:zu.TOP,90:zu.BOTTOM};function $u(t){return t.angle()}function Wu(t){return new Ir(t).simplify({threshold:1}).points}function Xu(t,e){const{point:n,x0:r,y0:i,view:o,bbox:s,direction:a}=t,{point:u,x0:c,y0:l,view:h,bbox:f,direction:d}=e;let p,g;if(o)p=o.model.isLink()?Yu(u,n,o):a===zu.ANCHOR_SIDE?s.sideNearestToPoint(n):a===zu.MAGNET_SIDE?o.model.getBBox().sideNearestToPoint(n):a;else{const t=new Cr(r,i,0,0);p=Gu.includes(a)?a:t.sideNearestToPoint(u)}if(h)g=h.model.isLink()?Yu(n,u,h):d===zu.ANCHOR_SIDE?f.sideNearestToPoint(u):d===zu.MAGNET_SIDE?h.model.getBBox().sideNearestToPoint(u):d;else{const t=new Cr(c,l,0,0);g=Gu.includes(d)?d:t.sideNearestToPoint(n)}return[p,g]}function Yu(t,e,n){const r=n.getTangentAtLength(n.getClosestPointLength(e)),i=90*Math.round($u(r)/90);if(i%180==0&&t.y===e.y)return t.x<e.x?zu.LEFT:zu.RIGHT;if(t.x===e.x)return t.y<e.y?zu.TOP:zu.BOTTOM;switch(i){case 0:case 180:case 360:return t.y<e.y?zu.TOP:zu.BOTTOM;case 90:case 270:return t.x<e.x?zu.LEFT:zu.RIGHT}}function Zu(t,e,n,r,i,o,s){r===zu.AUTO&&(r=i?zu.MAGNET_SIDE:zu.ANCHOR_SIDE);const a=t&&t.model.isElement(),{x:u,y:c,width:l=0,height:h=0}=a?Cr.fromRectUnion(n,t.model.getBBox()):o;return{point:e,x0:u,y0:c,view:t,bbox:n,width:l,height:h,direction:r,margin:a?s:0}}function Ju(t,e,n){const r=e.point.clone(),{x0:i,y0:o,width:s,height:a}=e;switch(t){case"left":r.x=i-n;break;case"right":r.x=i+s+n;break;case"top":r.y=o-n;break;case"bottom":r.y=o+a+n}return r}function Ku(t,e,{dx:n=0,dy:r=0}){const i={x:t.point.x+n,y:t.point.y+r},o={x:e.point.x+n,y:e.point.y+r};return[t.point,i,o,e.point]}function Qu(t,e,n,r){const i=Un(n-90);let o=0,s=0;90===i?s=-r:180===i?o=-r:270===i?s=r:0===i&&(o=r);const a=Ku(t,e,{dx:o,dy:s}),u=a[2],c=new gr(e.point,u);return{loopRoute:a,continueDirection:Hu[$u(c)]}}function tc(t,e,n){switch(e){case zu.LEFT:t.inflate(0,n).moveAndExpand({x:-n,width:n});break;case zu.RIGHT:t.inflate(0,n).moveAndExpand({width:n});break;case zu.TOP:t.inflate(n,0).moveAndExpand({y:-n,height:n});break;case zu.BOTTOM:t.inflate(n,0).moveAndExpand({height:n})}return t}function ec(t,e,n={}){const{point:r,x0:i,y0:o,width:s,height:a,margin:u}=t,{point:c,x0:l,y0:h,width:f,height:d,margin:p}=e,{targetInSourceBBox:g=!1}=n,v=l+f,m=h+d,y=i+s,b=o+a,x=i-u,w=y+u,_=o-u,E=b+u,A=l-p,k=v+p,S=h-p,T=m+p,[P,C]=Xu(t,e),N=Ju(P,{point:r,x0:i,y0:o,width:s,height:a},u),L=Ju(C,{point:c,x0:l,y0:h,width:f,height:d},p),{x:O,y:M}=N,{x:I,y:R}=L,j=((i+y)/2<(l+v)/2?y+l:v+i)/2,D=((o+b)/2<(h+m)/2?b+h:m+o)/2,B=new Cr(i,o,s,a),V=new Cr(l,h,f,d),F=B.clone().inflate(u),z=V.clone().inflate(p),G=Object.assign({},t,{x1:y,y1:b,outsidePoint:N,direction:P}),U=Object.assign({},e,{x1:v,y1:m,outsidePoint:L,direction:C}),[q,H]=function(t,e){const{x0:n,x1:r,outsidePoint:i}=t,{x0:o,x1:s,outsidePoint:a}=e;let u=Math.min(n,o),c=Math.max(r,s);if(t.direction===e.direction){const n=t.y0<e.y0?t:e,r=n===t?e:t,i=t.direction===zu.TOP?n:r;u=i.x0,c=i.x1}const{x:l}=i,{x:h}=a;return[Math.abs(l-u)+Math.abs(h-u),Math.abs(l-c)+Math.abs(h-c)]}(G,U),[$,W]=function(t,e){const{y0:n,y1:r,outsidePoint:i}=t,{y0:o,y1:s,outsidePoint:a}=e;let u=Math.min(n,o),c=Math.max(r,s);if(t.direction===e.direction){const n=t.x0<e.x0?t:e,r=n===t?e:t,i=t.direction===zu.LEFT?n:r;u=i.y0,c=i.y1}const{y:l}=i,{y:h}=a;return[Math.abs(l-u)+Math.abs(h-u),Math.abs(l-c)+Math.abs(h-c)]}(G,U);if("left"===P&&"right"===C){const t=F.containsPoint(L),e=z.containsPoint(N);if(t||e){const t=(M+R)/2;return[{x:O,y:M},{x:O,y:t},{x:I,y:t},{x:I,y:R}]}if(x<I){let t=D,e=O,n=I;const r=$<W;return(t>=_&&t<=E||t>=S&&t<=T)&&(E>=S&&r?t=Math.min(S,_):_<=T&&!r&&(t=Math.max(T,E)),e=Math.min(O,A),n=Math.max(I,w),r&&M<h||!r&&M>m?e=O:(r&&R<o||!r&&R>b)&&(n=I)),[{x:e,y:M},{x:e,y:t},{x:n,y:t},{x:n,y:R}]}const n=(O+I)/2;return[{x:n,y:M},{x:n,y:R}]}if("right"===P&&"left"===C){const t=F.containsPoint(L),e=z.containsPoint(N);if(t||e){const t=(M+R)/2;return[{x:O,y:M},{x:O,y:t},{x:I,y:t},{x:I,y:R}]}if(w>I){let t=D,e=O,n=I;const r=$<W;return(t>=_&&t<=E||t>=S&&t<=T)&&(E>=S&&r?t=Math.min(S,_):_<=T&&!r&&(t=Math.max(T,E)),e=Math.max(O,k),n=Math.min(I,x),r&&M<h||!r&&M>m?e=O:(r&&R<o||!r&&R>b)&&(n=I)),[{x:e,y:M},{x:e,y:t},{x:n,y:t},{x:n,y:R}]}const n=(O+I)/2;return[{x:n,y:M},{x:n,y:R}]}if("top"===P&&"bottom"===C){const t=F.containsPoint(L),e=z.containsPoint(N);if(t||e){const t=(O+I)/2;return[{x:O,y:M},{x:t,y:M},{x:t,y:R},{x:I,y:R}]}if(_<R){let t=j,e=M,n=R;const r=q<H;return(t>=x&&t<=w||t>=A&&t<=k)&&(w>=A&&r?t=Math.min(A,x):x<=k&&!r&&(t=Math.max(k,w)),e=Math.min(M,S),n=Math.max(R,E),r&&O<l||!r&&O>v?e=M:(r&&I<i||!r&&I>y)&&(n=R)),[{x:O,y:e},{x:t,y:e},{x:t,y:n},{x:I,y:n}]}const n=(M+R)/2;return[{x:O,y:n},{x:I,y:n}]}if("bottom"===P&&"top"===C){const t=F.containsPoint(L),e=z.containsPoint(N);if(t||e){const t=(O+I)/2;return[{x:O,y:M},{x:t,y:M},{x:t,y:R},{x:I,y:R}]}if(E>R){let t=j,e=M,n=R;const r=q<H;return(t>=x&&t<=w||t>=A&&t<=k)&&(w>=A&&r?t=Math.min(A,x):x<=k&&!r&&(t=Math.max(k,w)),e=Math.max(M,T),n=Math.min(R,_),r&&O<l||!r&&O>v?e=M:(r&&I<i||!r&&I>y)&&(n=R)),[{x:O,y:e},{x:t,y:e},{x:t,y:n},{x:I,y:n}]}const n=(M+R)/2;return[{x:O,y:n},{x:I,y:n}]}if("top"===P&&"top"===C){if((g||Oi.rectWithRect(F,V)||M<=h&&(F.bottomRight().x<=I||F.bottomLeft().x>=I)||M>=h&&(z.bottomRight().x<=O||z.bottomLeft().x>=O))&&O!==I)return[{x:O,y:Math.min(M,R)},{x:I,y:Math.min(M,R)}];let t,e=Math.min((b+h)/2,R),n=Math.min((o+m)/2,M);return t=R<M?H>q?Math.min(O,A):Math.max(O,k):H>q?Math.min(I,x):Math.max(I,w),[{x:O,y:n},{x:t,y:n},{x:t,y:e},{x:I,y:e}]}if("bottom"===P&&"bottom"===C){if((g||Oi.rectWithRect(F,V)||M>=R&&(F.topRight().x<=I||F.topLeft().x>=I)||M<=R&&(z.topRight().x<=O||z.topLeft().x>=O))&&O!==I)return[{x:O,y:Math.max(M,R)},{x:I,y:Math.max(M,R)}];let t,e=Math.max((o+m)/2,R),n=Math.max((b+h)/2,M);return t=R>M?H>q?Math.min(O,A):Math.max(O,k):H>q?Math.min(I,x):Math.max(I,w),[{x:O,y:n},{x:t,y:n},{x:t,y:e},{x:I,y:e}]}if("left"===P&&"left"===C){if((g||Oi.rectWithRect(F,V)||O<=I&&(F.bottomRight().y<=R||F.topRight().y>=R)||O>=I&&(z.bottomRight().y<=M||z.topRight().y>=M))&&M!==R)return[{x:Math.min(O,I),y:M},{x:Math.min(O,I),y:R}];let t,e=Math.min((y+l)/2,I),n=Math.min((i+v)/2,O);return t=I>O?$<=W?Math.min(_,R):Math.max(E,R):$<=W?Math.min(S,M):Math.max(T,M),[{x:n,y:M},{x:n,y:t},{x:e,y:t},{x:e,y:R}]}if("right"===P&&"right"===C){if((g||Oi.rectWithRect(F,V)||O>=I&&(F.bottomLeft().y<=R||F.topLeft().y>=R)||O<=I&&(z.bottomLeft().y<=M||z.topLeft().y>=M))&&M!==R)return[{x:Math.max(O,I),y:M},{x:Math.max(O,I),y:R}];let t,e=Math.max((i+v)/2,I),n=Math.max((y+l)/2,O);return t=I<=O?$<=W?Math.min(_,R):Math.max(E,R):$<=W?Math.min(S,M):Math.max(T,M),[{x:n,y:M},{x:n,y:t},{x:e,y:t},{x:e,y:R}]}if("top"===P&&"right"===C){if(F.containsPoint(c)){if(O<=k){const t=Math.max(O+u,I),e=Math.min(_,S);return[{x:O,y:e},{x:t,y:e},{x:t,y:R}]}const t=(O-u+I)/2;return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if(_>R){if(O<I){let t=S;return T<=_&&k>=O&&(t=D),[{x:O,y:t},{x:I,y:t},{x:I,y:R}]}return[{x:O,y:R}]}const t=Math.max(j,k);if(O>I&&b>=R)return[{x:O,y:M},{x:t,y:M},{x:t,y:R}];if(t>x&&M<m){const t=Math.min(_,S),e=Math.max(w,k);return[{x:O,y:t},{x:e,y:t},{x:e,y:R}]}return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if("top"===P&&"left"===C){if(F.containsPoint(c)){if(O>=A){const t=Math.min(O-u,I),e=Math.min(_,S);return[{x:O,y:e},{x:t,y:e},{x:t,y:R}]}const t=(O+u+I)/2;return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if(_>R){if(O>I){let t=S;return T<=_&&A<=O&&(t=D),[{x:O,y:t},{x:I,y:t},{x:I,y:R}]}return[{x:O,y:R}]}const t=Math.min(A,j);if(O<I&&b>=R)return[{x:O,y:M},{x:t,y:M},{x:t,y:R}];if(t<w&&M<m){const t=Math.min(_,S),e=Math.min(x,A);return[{x:O,y:t},{x:e,y:t},{x:e,y:R}]}return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if("bottom"===P&&"right"===C){if(F.containsPoint(c)){if(O<=k){const t=Math.max(O+u,I),e=Math.max(E,T);return[{x:O,y:e},{x:t,y:e},{x:t,y:R}]}const t=(O-u+I)/2;return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if(E<R){if(O<I){let t=T;return S>=E&&k>=O&&(t=D),[{x:O,y:t},{x:I,y:t},{x:I,y:R}]}return[{x:O,y:R}]}const t=Math.max(j,k);if(O>I&&o<=R)return[{x:O,y:M},{x:t,y:M},{x:t,y:R}];if(t>x&&M>h){const t=Math.max(E,T),e=Math.max(w,k);return[{x:O,y:t},{x:e,y:t},{x:e,y:R}]}return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if("bottom"===P&&"left"===C){if(F.containsPoint(c)){if(O>=A){const t=Math.min(O-u,I),e=Math.max(E,T);return[{x:O,y:e},{x:t,y:e},{x:t,y:R}]}const t=(O+u+I)/2;return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if(E<R){if(O>I){let t=T;return S>=E&&A<=O&&(t=D),[{x:O,y:t},{x:I,y:t},{x:I,y:R}]}return[{x:O,y:R}]}const t=Math.min(A,j);if(O<I&&o<=R)return[{x:O,y:M},{x:t,y:M},{x:t,y:R}];if(t<w&&M>h){const t=Math.max(E,T),e=Math.min(x,A);return[{x:O,y:t},{x:e,y:t},{x:e,y:R}]}return[{x:O,y:M},{x:t,y:M},{x:t,y:R}]}if("left"===P&&"bottom"===C){if(F.containsPoint(c)){if(M<=T){const t=Math.min(x,A),e=Math.max(M+u,R);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}const t=(M-u+R)/2;return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if(x>I){if(M<R){let t=A;return k<=x&&T>=M&&(t=j),[{x:t,y:M},{x:t,y:R},{x:I,y:R}]}return[{x:I,y:M}]}const t=Math.max(T,D);if(M>R&&y>=I)return[{x:O,y:M},{x:O,y:t},{x:I,y:t}];if(t>_&&O<v){const t=Math.min(x,A),e=Math.max(E,T);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if("left"===P&&"top"===C){if(F.containsPoint(c)){if(M>=S){const t=Math.min(M-u,R),e=Math.min(x,A);return[{x:e,y:M},{x:e,y:t},{x:I,y:t}]}const t=(M+u+R)/2;return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if(x>I){if(M>R){let t=A;return k<=x&&S<=M&&(t=j),[{x:t,y:M},{x:t,y:R},{x:I,y:R}]}return[{x:I,y:M}]}const t=Math.min(S,D);if(M<R&&y>=I)return[{x:O,y:M},{x:O,y:t},{x:I,y:t}];if(t<E&&O<v){const t=Math.min(x,A),e=Math.min(_,S);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if("right"===P&&"top"===C){if(F.containsPoint(c)){if(M>=S){const t=Math.max(w,k),e=Math.min(M-u,R);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}const t=(M+u+R)/2;return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if(w<I){if(M>R){let t=k;return A>=w&&S<=M&&(t=j),[{x:t,y:M},{x:t,y:R},{x:I,y:R}]}return[{x:I,y:M}]}const t=Math.min(S,D);if(M<R&&i<=I)return[{x:O,y:M},{x:O,y:t},{x:I,y:t}];if(t<E&&O>l){const t=Math.max(w,k),e=Math.min(_,S);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if("right"===P&&"bottom"===C){if(F.containsPoint(c)){if(M<=T){const t=Math.max(w,k),e=Math.max(M+u,R);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}const t=(M-u+R)/2;return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}if(w<I){if(M<R){let t=k;return A>=w&&T>=M&&(t=j),[{x:t,y:M},{x:t,y:R},{x:I,y:R}]}return[{x:I,y:M}]}const t=Math.max(T,D);if(M>R&&i<=I)return[{x:O,y:M},{x:O,y:t},{x:I,y:t}];if(t>_&&O>l){const t=Math.max(w,k),e=Math.max(E,T);return[{x:t,y:M},{x:t,y:e},{x:I,y:e}]}return[{x:O,y:M},{x:O,y:t},{x:I,y:t}]}}function nc(t,e,n){const r=t===zu.LEFT||t===zu.RIGHT;let i=0,o=0;switch(Un(Math.round(e))){case 0:case 90:i=r?0:n,o=r?n:0;break;case 180:case 270:i=r?0:-n,o=r?-n:0}return{dx:i,dy:o}}function rc(t,e,n){const{sourceDirection:r=zu.AUTO,targetDirection:i=zu.AUTO}=e,o=e.margin||20,s=e.useVertices||!1,a=!!n.model.source().port,u=Zu(n.sourceView,n.sourceAnchor,n.sourceBBox,r,a,n.sourceAnchor,o),c=!!n.model.target().port,l=Zu(n.targetView,n.targetAnchor,n.targetBBox,i,c,n.targetAnchor,o);let h=[];if(!s||0===t.length)return Wu(ec(u,l));const f=t.map(t=>function({x:t,y:e}){const n=new hr(t,e);return{point:n,x0:n.x,y0:n.y,view:null,bbox:new Cr(t,e,0,0),width:0,height:0,direction:null,margin:0}}(t)),[d]=f,[p]=Xu(u,d),g=u.view&&u.view.model.isElement(),v=g?tc(u.view.model.getBBox(),p,o):null,m=!!g&&v.containsPoint(d.point);if(m){const t=Ju(p,u,o),e=t.equals(d.point),n=u.point.x===d.point.x,r=u.point.y===d.point.y,i=n&&(p===zu.TOP||p===zu.BOTTOM),s=r&&(p===zu.LEFT||p===zu.RIGHT),a=new gr(u.point,t),c=a.containsPoint(d.point),l=m&&(s||i);if(e)h.push(u.point,d.point),d.direction=Uu[p];else if(c||l){const e=$u(c?a:new gr(u.point,d.point)),{dx:n,dy:r}=nc(p,e,o),i=Ku({point:t},d,{dx:n,dy:r}),s=i[2],l=new gr(d.point,s),f=Hu[$u(l)];d.direction=f,h.push(...i)}else d.direction=p,d.margin=o,h.push(...ec(u,d,{targetInSourceBBox:!0}),d.point)}else{const t=function(t,e,n){const[r]=Xu(t,e);switch(r){case zu.TOP:return function(t,e,n){const{x0:r,y0:i,width:o,height:s,point:a,margin:u}=t,c=i+s,l=r-u,h=r+o+u,f=i-u,{x:d}=a,{x0:p,y0:g}=e;return p===d&&g<i?zu.BOTTOM:p<d&&g<f?n.point.x===d?zu.BOTTOM:zu.RIGHT:p>d&&g<f?n.point.x===d?zu.BOTTOM:zu.LEFT:p<l&&g>f||p>h&&g>f?zu.TOP:p>=l&&p<=d&&g>c||p<=h&&p>=d&&g>c?n.point.x<p?zu.RIGHT:zu.LEFT:zu.BOTTOM}(t,e,n);case zu.RIGHT:return function(t,e,n){const{y0:r,x0:i,width:o,height:s,point:a,margin:u}=t,c=i+o+u,l=r-u,h=r+s+u,{x:f,y:d}=a,{x0:p,y0:g}=e;return p>f&&g===d?zu.LEFT:p>=c&&g<d?zu.BOTTOM:p>=c&&g>d?zu.TOP:p<=c&&g<l||p<=c&&g>h?zu.RIGHT:p<i&&g>=l&&g<=d||p<i&&g<=h&&g>=d?n.point.y<g?zu.BOTTOM:zu.TOP:zu.LEFT}(t,e,n);case zu.BOTTOM:return function(t,e,n){const{x0:r,y0:i,width:o,height:s,point:a,margin:u}=t,c=i+s,l=r-u,h=r+o+u,f=c+u,{x:d}=a,{x0:p,y0:g}=e;return p===d&&g>c?zu.TOP:p<d&&g>f?n.point.x===d?zu.TOP:zu.RIGHT:p>d&&g>f?n.point.x===d?zu.TOP:zu.LEFT:p<l&&g<f||p>h&&g<f?zu.BOTTOM:p>=l&&p<=d&&g<i||p<=h&&p>=d&&g<i?n.point.x<p?zu.RIGHT:zu.LEFT:zu.TOP}(t,e,n);case zu.LEFT:return function(t,e,n){const{y0:r,x0:i,width:o,height:s,point:a,margin:u}=t,c=i+o,l=i-u,h=r-u,f=r+s+u,{x:d,y:p}=a,{x0:g,y0:v}=e;return g<d&&v===p?zu.RIGHT:g<=l&&v<p?zu.BOTTOM:g<=l&&v>p?zu.TOP:g>=l&&v<h||g>=l&&v>f?zu.LEFT:g>c&&v>=h&&v<=p||g>c&&v<=f&&v>=p?n.point.y<v?zu.BOTTOM:zu.TOP:zu.RIGHT}(t,e,n)}}(u,d,f[1]||l);d.direction=t,h.push(...ec(u,d),d.point)}for(let t=0;t<f.length-1;t++){const e=f[t],n=f[t+1],r=$u(new gr(e.point,n.point));if(r%90==0){const t=Hu[r],i=Wu([...h,e.point]),s=new gr(i[i.length-2],i[i.length-1]),a=Hu[Math.round($u(s))];if(t!==Uu[a]){h.push(e.point,n.point);const[,t]=Xu(e,n);n.direction=t}else{const{loopRoute:t,continueDirection:i}=Qu(e,n,r,o);n.direction=i,h.push(...t)}continue}const[i,s]=ic(e,n);e.direction=i,n.direction=s,h.push(...ec(e,n),n.point)}const y=f[f.length-1];if(l.view&&l.view.model.isElement()){const[,t]=Xu(y,l),e=Ju(t,l,o),n=Wu([...h,y.point]),r=new gr(n[n.length-2],n[n.length-1]),i=Math.round($u(r)),s=Hu[i],a=e.equals(y.point);if(!a||a&&s===t){y.direction=s;let n=ec(y,l);const[r,u]=Wu([...n,l.point]),c=new gr(r,u),f=Math.round($u(c)),d=Hu[f],p=tc(l.view.model.getBBox(),t,o),g=y.point.x===l.point.x,v=y.point.y===l.point.y,m=p.containsPoint(y.point),b=g&&(t===zu.TOP||t===zu.BOTTOM),x=v&&(t===zu.LEFT||t===zu.RIGHT);if(!a&&m&&(x||b)){const{dx:r,dy:s}=nc(t,i,o);n=Ku(y,{point:e},{dx:r,dy:s})}else m&&t!==Uu[s]?(y.margin=o,y.direction=t,n=ec(y,l)):d!==s&&s===Uu[d]&&(y.margin=o,n=ec(y,l));h.push(...n)}}else{const t=y,e=l,n=$u(new gr(t.point,e.point));if(n%90==0){const r=Hu[n],i=Wu(h),s=new gr(i[i.length-2],t.point),a=Hu[Math.round($u(s))];if(r!==Uu[a])h.push(t.point);else{const{loopRoute:r}=Qu(t,e,n,o);r.pop(),h.push(...r)}}else{const[n,r]=ic(t,e);t.direction=n,e.direction=r,h.push(...ec(t,e))}}return Wu(h)}function ic(t,e){const n=t.direction,r=qu.includes(n);let i=t.direction,o=e.direction;if(r){const r=t.point.y>e.point.y,s=e.point.x-t.point.x;n===zu.BOTTOM?(i=r?Uu[n]:s>=0?zu.RIGHT:zu.LEFT,s>0?o=r?zu.LEFT:zu.TOP:s<0&&(o=r?zu.RIGHT:zu.TOP)):(i=r?s>=0?zu.RIGHT:zu.LEFT:Uu[n],s>0?o=r?zu.BOTTOM:zu.LEFT:s<0&&(o=r?zu.BOTTOM:zu.RIGHT))}else{const r=t.point.x>e.point.x,s=e.point.y-t.point.y;n===zu.RIGHT?(i=r?Uu[n]:s>=0?zu.BOTTOM:zu.TOP,s>0?o=r?zu.TOP:zu.LEFT:s<0&&(o=r?zu.BOTTOM:zu.LEFT)):(i=r?s>=0?zu.BOTTOM:zu.TOP:Uu[n],s>0?o=r?zu.RIGHT:zu.TOP:s<0&&(o=r?zu.RIGHT:zu.BOTTOM))}return[i,o]}rc.Directions=zu;const oc=rc,sc={POINT:"point",CUBIC:"cubic",LINE:"line",GAP:"gap"},ac=Object.values(sc),uc=10,cc=1,lc=function(t,e,n=[],r={}){const{cornerType:i=sc.POINT,cornerRadius:o=uc,cornerPreserveAspectRatio:s=!1,precision:a=cc,raw:u=!1}=r;if(-1===ac.indexOf(i))throw new Error("Invalid `cornerType` provided to `straight` connector.");let c;if(i!==sc.POINT&&o){let r;c=new Gr,c.appendSegment(Gr.createSegment("M",t));const u=n.length;for(let l=0;l<u;l++){const u=new hr(n[l]),h=n[l-1]||t,f=n[l+1]||e,d=r||u.distance(h)/2;let p,g;r=u.distance(f)/2,s?p=g=-Math.min(o,d,r):(p=-Math.min(o,d),g=-Math.min(o,r));const v=u.clone().move(h,p).round(a),m=u.clone().move(f,g).round(a);switch(c.appendSegment(Gr.createSegment("L",v)),i){case sc.CUBIC:{const t=1/3,e=2/3,n=new hr(t*v.x+e*u.x,e*u.y+t*v.y),r=new hr(t*m.x+e*u.x,e*u.y+t*m.y);c.appendSegment(Gr.createSegment("C",n,r,m));break}case sc.LINE:c.appendSegment(Gr.createSegment("L",m));break;case sc.GAP:c.appendSegment(Gr.createSegment("M",m))}}c.appendSegment(Gr.createSegment("L",e))}else{const r=[t].concat(n).concat([e]),i=new Ir(r);c=new Gr(i)}return u?c:c.serialize()};var hc=["arc","gap","cubic"],fc=["smooth"],dc=1/3,pc=2/3;function gc(t,e){let{x:n,y:r}=t,{x:i,y:o}=e;if(n>i){let t=n;n=i,i=t,t=r,r=o,o=t}if(r>o){let t=n;n=i,i=t,t=r,r=o,o=t}return[new hr(n,r),new hr(i,o)]}function vc(t,e,n){var r=[].concat(t,n,e);return r.reduce(function(t,e,n){var i=r[n+1];return null!=i&&(t[n]=vr(e,i)),t},[])}function mc(t,e){return vr(t,e).squaredLength()}function yc(t,e,n,r){var i,o=new Gr;return i=Gr.createSegment("M",t[0].start),o.appendSegment(i),ln(t).forEach(function(s,a){if(s.isJump){var u,c,l,h;if("arc"===n){u=-90,c=s.start.difference(s.end);var f=Number(c.x<0||0===c.x&&c.y<0);f&&(u+=180);var d,p=s.midpoint(),g=new gr(p,s.end).rotate(p,u);l=(d=new gr(s.start,p)).pointAt(2/3).rotate(s.start,u),h=g.pointAt(1/3).rotate(g.end,-u),i=Gr.createSegment("C",l,h,g.end),o.appendSegment(i),d=new gr(p,s.end),l=g.pointAt(1/3).rotate(g.end,u),h=d.pointAt(1/3).rotate(s.end,-u),i=Gr.createSegment("C",l,h,s.end),o.appendSegment(i)}else if("gap"===n)i=Gr.createSegment("M",s.end),o.appendSegment(i);else if("cubic"===n){u=s.start.theta(s.end);var v=.6*e,m=1.35*e;c=s.start.difference(s.end),(f=Number(c.x<0||0===c.x&&c.y<0))&&(m*=-1),l=hr(s.start.x+v,s.start.y+m).rotate(s.start,u),h=hr(s.end.x-v,s.end.y+m).rotate(s.end,u),i=Gr.createSegment("C",l,h,s.end),o.appendSegment(i)}}else{var y=t[a+1];0==r||!y||y.isJump?(i=Gr.createSegment("L",s.end),o.appendSegment(i)):function(t,e,n,r,i){var o,s=n.distance(r)/2,a=n.distance(i)/2,u=-Math.min(t,s),c=-Math.min(t,a),l=n.clone().move(r,u).round(),h=n.clone().move(i,c).round(),f=new hr(dc*l.x+pc*n.x,pc*n.y+dc*l.y),d=new hr(dc*h.x+pc*n.x,pc*n.y+dc*h.y);o=Gr.createSegment("L",l),e.appendSegment(o),o=Gr.createSegment("C",f,d,h),e.appendSegment(o)}(r,o,s.end,s.start,y.end)}}),o}const bc=function(t,e,n,r){!function(t){var e=t.paper,n=e._jumpOverUpdateList;if(null==n){n=e._jumpOverUpdateList=[];var r=e.model;r.on("batch:stop",function(){this.hasActiveBatch()||function(t){for(var e=t._jumpOverUpdateList,n=0;n<e.length;n++){const t=e[n],r=t.getFlag(t.constructor.Flags.CONNECTOR);t.requestUpdate(r)}}(e)}),r.on("reset",function(){n=e._jumpOverUpdateList=[]})}n.indexOf(t)<0&&(n.push(t),t.listenToOnce(t.model,"change:connector remove",function(){n.splice(n.indexOf(t),1)}))}(this);var i=r.raw,o=r.size||5,s=r.jump&&(""+r.jump).toLowerCase(),a=r.radius||0,u=r.ignoreConnectors||fc;-1===hc.indexOf(s)&&(s=hc[0]);var c=this.paper,l=c.model.getLinks();if(1===l.length)return yc(vc(t,e,n),o,s,a);var h=this.model,f=l.indexOf(h),d=c.options.defaultConnector||{},p=l.filter(function(t,e){var n=t.get("connector")||d;return!(ln(u).includes(n.name)||e>f&&"jumpover"===n.name)}),g=p.map(function(t){return c.findViewByModel(t)}),v=vc(t,e,n),m=g.map(function(t){return null==t?[]:t===this?v:vc(t.sourcePoint,t.targetPoint,t.route)},this),y=v.reduce(function(t,e){var n=p.reduce(function(t,n,r){if(n!==h){const n=m[r].slice(),i=n.findIndex(t=>function(t,e){const[{x:n,y:r},{x:i,y:o}]=gc(t.start,t.end),[{x:s,y:a},{x:u,y:c}]=gc(e.start,e.end);return n<=u&&s<=i&&r<=c&&a<=o}(e,t));i>-1&&e.containsPoint(n[i].end)&&n.splice(i+1,1);const o=function(t,e){return ln(e).reduce(function(e,n){var r=t.intersection(n);return r&&e.push(r),e},[])}(e,n);t.push.apply(t,o)}return t},[]).sort(function(t,n){return mc(e.start,t)-mc(e.start,n)});return n.length>0?t.push.apply(t,function(t,e,n){return e.reduce(function(r,i,o){if(!0===i.skip)return r;var s=r.pop()||t,a=fr(i).move(s.start,-n),u=fr(i).move(s.start,+n),c=e[o+1];if(null!=c){var l=u.distance(c);l<=n&&(u=c.move(s.start,l),c.skip=!0)}else if(a.distance(s.end)<2*n+1)return r.push(s),r;if(u.distance(s.start)<2*n+1)return r.push(s),r;var h=vr(a,u);return h.isJump=!0,r.push(vr(s.start,a),h,vr(u,s.end)),r},[])}(e,n,o)):t.push(e),t},[]),b=yc(y,o,s,a);return i?b:b.serialize()},xc=function(t,e,n=[],r={}){const{raw:i}=r;return lc(t,e,n,{cornerType:"point",raw:i})},wc=10,_c=function(t,e,n=[],r={}){const{radius:i=wc,raw:o}=r;return lc(t,e,n,{cornerType:"cubic",cornerRadius:i,precision:0,raw:o})},Ec=function(t,e,n,r){var i,o=r&&r.raw;if(n&&0!==n.length){var s=[t].concat(n).concat([e]),a=Fr.throughPoints(s);i=new Gr(a)}else{var u;if(i=new Gr,u=Gr.createSegment("M",t),i.appendSegment(u),Math.abs(t.x-e.x)>=Math.abs(t.y-e.y)){var c=(t.x+e.x)/2;u=Gr.createSegment("C",c,t.y,c,e.y,e.x,e.y),i.appendSegment(u)}else{var l=(t.y+e.y)/2;u=Gr.createSegment("C",t.x,l,e.x,l,e.x,e.y),i.appendSegment(u)}}return o?i:i.serialize()},Ac={AUTO:"auto",HORIZONTAL:"horizontal",VERTICAL:"vertical",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},kc={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",AUTO:"auto",CLOSEST_POINT:"closest-point",OUTWARDS:"outwards"},Sc=function(t,e,n=[],r={},i){const o=Boolean(r.raw),{direction:s=Ac.AUTO,precision:a=3}=r,u={coeff:r.distanceCoefficient||.6,angleTangentCoefficient:r.angleTangentCoefficient||80,tau:r.tension||.5,sourceTangent:r.sourceTangent?new hr(r.sourceTangent):null,targetTangent:r.targetTangent?new hr(r.targetTangent):null,rotate:Boolean(r.rotate)};"string"==typeof r.sourceDirection?u.sourceDirection=r.sourceDirection:"number"==typeof r.sourceDirection?u.sourceDirection=new hr(1,0).rotate(null,r.sourceDirection):u.sourceDirection=r.sourceDirection?new hr(r.sourceDirection).normalize():null,"string"==typeof r.targetDirection?u.targetDirection=r.targetDirection:"number"==typeof r.targetDirection?u.targetDirection=new hr(1,0).rotate(null,r.targetDirection):u.targetDirection=r.targetDirection?new hr(r.targetDirection).normalize():null;const c=[t,...n,e].map(t=>new hr(t));let l,h;if(u.sourceTangent)l=u.sourceTangent;else{const t=function(t,e,n,r){if(r.sourceDirection)switch(r.sourceDirection){case kc.UP:return new hr(0,-1);case kc.DOWN:return new hr(0,1);case kc.LEFT:return new hr(-1,0);case kc.RIGHT:return new hr(1,0);case kc.AUTO:return Tc(t,e,r);case kc.CLOSEST_POINT:return Cc(0,e);case kc.OUTWARDS:return Lc(t,e);default:return r.sourceDirection}switch(n){case Ac.HORIZONTAL:return function(t,e,n){const{sourceBBox:r}=t;let i,o,s;if(t.sourceView)if(o=t.sourceView.model.angle(),n.rotate&&o){const n=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[0]);else i=r.x>e[1].x?"right":"left";return s=new hr("left"===i?-1:1,0),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case Ac.VERTICAL:return function(t,e,n){const{sourceBBox:r}=t;let i,o,s;if(t.sourceView)if(o=t.sourceView.model.angle(),n.rotate&&o){const n=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[0]);else i=r.y>e[1].y?"bottom":"top";return s=new hr(0,"top"===i?-1:1),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case Ac.CLOSEST_POINT:return Cc(0,e);case Ac.OUTWARDS:return Lc(t,e);case Ac.AUTO:default:return Tc(t,e,r)}}(i,c,s,u),e=c[0].distance(c[1])*u.coeff,n=Ic(t,c[1].difference(c[0]).normalize());if(n>Math.PI/4){const r=e+(n-Math.PI/4)*u.angleTangentCoefficient;l=t.clone().scale(r,r)}else l=t.clone().scale(e,e)}if(u.targetTangent)h=u.targetTangent;else{const t=function(t,e,n,r){if(r.targetDirection)switch(r.targetDirection){case kc.UP:return new hr(0,-1);case kc.DOWN:return new hr(0,1);case kc.LEFT:return new hr(-1,0);case kc.RIGHT:return new hr(1,0);case kc.AUTO:return Pc(t,e,r);case kc.CLOSEST_POINT:return Nc(0,e);case kc.OUTWARDS:return Oc(t,e);default:return r.targetDirection}switch(n){case Ac.HORIZONTAL:return function(t,e,n){const{targetBBox:r}=t;let i,o,s;if(t.targetView)if(o=t.targetView.model.angle(),n.rotate&&o){const n=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[e.length-1]);else i=r.x>e[e.length-2].x?"left":"right";return s=new hr("left"===i?-1:1,0),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case Ac.VERTICAL:return function(t,e,n){const{targetBBox:r}=t;let i,o,s;if(t.targetView)if(o=t.targetView.model.angle(),n.rotate&&o){const n=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[e.length-1]);else i=r.y>e[e.length-2].y?"top":"bottom";return s=new hr(0,"top"===i?-1:1),n.rotate&&o&&s.rotate(null,-o),s}(t,e,r);case Ac.CLOSEST_POINT:return Nc(0,e);case Ac.OUTWARDS:return Oc(t,e);case Ac.AUTO:default:return Pc(t,e,r)}}(i,c,s,u),e=c.length-1,n=c[e-1].distance(c[e])*u.coeff,r=Ic(t,c[e-1].difference(c[e]).normalize());if(r>Math.PI/4){const e=n+(r-Math.PI/4)*u.angleTangentCoefficient;h=t.clone().scale(e,e)}else h=t.clone().scale(n,n)}const f=function(t,e,n,r){const{tau:i,coeff:o}=r,s=[],a=[],u=[],c=t.length-1;for(let e=0;e<c;e++)s[e]=t[e].distance(t[e+1]);a[0]=e,a[c]=n;for(let e=1;e<c;e++){let n,r;n=1===e?t[e-1].clone().offset(a[e-1].x,a[e-1].y):t[e-1].clone(),r=e===c-1?t[e+1].clone().offset(a[e+1].x,a[e+1].y):t[e+1].clone();const i=n.difference(t[e]).normalize(),u=r.difference(t[e]).normalize(),l=Ic(i,u);let h,f=(Math.PI-l)/2;const d=Rc(i,u);let p;p=Rc(t[e].difference(t[e+1]),t[e].difference(t[e-1])),d<0&&(f=-f),l<Math.PI/2&&(f<0&&p<0||f>0&&p>0)&&(f-=Math.PI),h=u.clone(),Mc(h,f);const g=h.clone(),v=h.clone(),m=s[e-1]*o,y=s[e]*o;g.scale(m,m),v.scale(y,y),a[e]=[g,v]}for(let e=0;e<c;e++){let n,r;n=0===e?t[e+1].difference(a[e].x/i,a[e].y/i):t[e+1].difference(a[e][1].x/i,a[e][1].y/i),r=e===c-1?t[e].clone().offset(a[e+1].x/i,a[e+1].y/i):t[e].difference(a[e+1][0].x/i,a[e+1][0].y/i),u[e]=[n,t[e],t[e+1],r]}return u}(c,l,h,u),d=f.map(t=>function(t,e){const{tau:n}=e,r=new hr;r.x=t[1].x+(t[2].x-t[0].x)/(6*n),r.y=t[1].y+(t[2].y-t[0].y)/(6*n);const i=new hr;return i.x=t[2].x+(t[3].x-t[1].x)/(6*n),i.y=t[2].y+(t[3].y-t[1].y)/(6*n),new Fr(t[1],r,i,t[2])}(t,u)),p=new Gr(d).round(a);return o?p:p.serialize()};function Tc(t,e,n){const{sourceBBox:r}=t;let i,o,s;if(t.sourceView)if(o=t.sourceView.model.angle(),n.rotate&&o){const n=t.sourceView.getNodeUnrotatedBBox(t.sourceView.el),s=e[0].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[0]);else i=r.sideNearestToPoint(e[1]);switch(i){case"top":s=new hr(0,-1);break;case"bottom":s=new hr(0,1);break;case"right":s=new hr(1,0);break;case"left":s=new hr(-1,0)}return n.rotate&&o&&s.rotate(null,-o),s}function Pc(t,e,n){const{targetBBox:r}=t;let i,o,s;if(t.targetView)if(o=t.targetView.model.angle(),n.rotate&&o){const n=t.targetView.getNodeUnrotatedBBox(t.targetView.el),s=e[e.length-1].clone();s.rotate(r.center(),o),i=n.sideNearestToPoint(s)}else i=r.sideNearestToPoint(e[e.length-1]);else i=r.sideNearestToPoint(e[e.length-2]);switch(i){case"top":s=new hr(0,-1);break;case"bottom":s=new hr(0,1);break;case"right":s=new hr(1,0);break;case"left":s=new hr(-1,0)}return n.rotate&&o&&s.rotate(null,-o),s}function Cc(t,e,n){return e[1].difference(e[0]).normalize()}function Nc(t,e,n){const r=e.length-1;return e[r-1].difference(e[r]).normalize()}function Lc(t,e,n){const{sourceBBox:r}=t,i=r.center();return e[0].difference(i).normalize()}function Oc(t,e,n){const{targetBBox:r}=t,i=r.center();return e[e.length-1].difference(i).normalize()}function Mc(t,e){const n=Math.cos(e),r=Math.sin(e),i=n*t.x-r*t.y,o=r*t.x+n*t.y;t.x=i,t.y=o}function Ic(t,e){let n=t.dot(e)/(t.magnitude()*e.magnitude());return n<-1&&(n=-1),n>1&&(n=1),Math.acos(n)}function Rc(t,e){return t.x*e.y-t.y*e.x}Sc.Directions=Ac,Sc.TangentDirections=kc;const jc={TOOLS:Wa.Flags.TOOLS,RENDER:"RENDER",UPDATE:"UPDATE",LABELS:"LABELS",SOURCE:"SOURCE",TARGET:"TARGET",CONNECTOR:"CONNECTOR"},Dc=Wa.extend({className:function(){var t=Wa.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},_labelCache:null,_labelSelectors:null,_V:null,_dragData:null,metrics:null,decimalsRounding:2,initialize:function(){Wa.prototype.initialize.apply(this,arguments),this._labelCache={},this._labelSelectors={},this._V={},this.cleanNodesCache()},presentationAttributes:{markup:[jc.RENDER],attrs:[jc.UPDATE],router:[jc.UPDATE],connector:[jc.CONNECTOR],labels:[jc.LABELS,jc.TOOLS],labelMarkup:[jc.LABELS],vertices:[jc.UPDATE],source:[jc.SOURCE,jc.UPDATE],target:[jc.TARGET,jc.UPDATE]},initFlag:[jc.RENDER,jc.SOURCE,jc.TARGET,jc.TOOLS],UPDATE_PRIORITY:1,EPSILON:1e-6,confirmUpdate:function(t,e){if(e||(e={}),this.hasFlag(t,jc.SOURCE)){if(!this.updateEndProperties("source"))return t;t=this.removeFlag(t,jc.SOURCE)}if(this.hasFlag(t,jc.TARGET)){if(!this.updateEndProperties("target"))return t;t=this.removeFlag(t,jc.TARGET)}const{paper:n,sourceView:r,targetView:i}=this;if(n&&(r&&!n.isViewMounted(r)||i&&!n.isViewMounted(i)))return t;if(this.hasFlag(t,jc.RENDER))return this.render(),this.updateHighlighters(!0),this.updateTools(e),t=this.removeFlag(t,[jc.RENDER,jc.UPDATE,jc.LABELS,jc.TOOLS,jc.CONNECTOR]),tu.test("isSafari")&&this.__fixSafariBug268376(),t;let o=!1;const{model:s}=this,{attributes:a}=s;let u=this.hasFlag(t,jc.LABELS);u&&(this.onLabelsChange(s,a.labels,e),t=this.removeFlag(t,jc.LABELS),o=!0);const c=this.hasFlag(t,jc.UPDATE),l=this.hasFlag(t,jc.CONNECTOR);return(c||l)&&(c?e.translateBy&&s.isRelationshipEmbeddedIn(e.translateBy)?this.translate(e.tx,e.ty):this.update():(this.updatePath(),this.updateDOM()),this.updateTools(e),t=this.removeFlag(t,[jc.UPDATE,jc.TOOLS,jc.CONNECTOR]),u=!1,o=!0),u&&this.updateLabelPositions(),o&&this.updateHighlighters(),this.hasFlag(t,jc.TOOLS)&&(this.updateTools(e),t=this.removeFlag(t,jc.TOOLS)),t},__fixSafariBug268376:function(){const{el:t}=this,e=Array.from(t.childNodes),n=document.createDocumentFragment();for(let r=0,i=e.length;r<i;r++)t.removeChild(e[r]),n.appendChild(e[r]);t.appendChild(n)},requestConnectionUpdate:function(t){this.requestUpdate(this.getFlag(jc.UPDATE),t)},isLabelsRenderRequired:function(t={}){const e=this.model.previous("labels");if(!e)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var n=t.propertyPathArray||[],r=n.length;if(r>1&&e[n[1]]){if(2===r)return"markup"in Object(t.propertyValue);if("markup"!==n[2])return!1}}return!0},onLabelsChange:function(t,e,n){this.isLabelsRenderRequired(n)?this.renderLabels():this.updateLabels()},render:function(){return this.vel.empty(),this.unmountLabels(),this._V={},this.renderMarkup(),this.renderLabels(),this.update(),this},renderMarkup:function(){var t=this.model,e=t.get("markup")||t.markup;if(!e)throw new Error("dia.LinkView: markup required");if(Array.isArray(e))return this.renderJSONMarkup(e);if("string"==typeof e)return this.renderStringMarkup(e);throw new Error("dia.LinkView: invalid markup")},renderJSONMarkup:function(t){var e=this.parseDOMJSON(t,this.el);this.selectors=e.selectors,this.vel.append(e.fragment)},renderStringMarkup:function(t){var e=Ii(t);Array.isArray(e)||(e=[e]),this.vel.append(e)},_getLabelMarkup:function(t){if(t){if(Array.isArray(t))return this.parseDOMJSON(t,null);if("string"==typeof t)return this._getLabelStringMarkup(t);throw new Error("dia.linkView: invalid label markup")}},_getLabelStringMarkup:function(t){var e=Ii(t),n=document.createDocumentFragment();if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r].node;n.appendChild(o)}else n.appendChild(e.node);return{fragment:n,selectors:{}}},_normalizeLabelMarkup:function(t){if(t){var e,n=t.fragment;if(!(t.fragment instanceof DocumentFragment&&t.fragment.hasChildNodes()))throw new Error("dia.LinkView: invalid label markup.");var r=n.childNodes;return(e=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Ii("g").append(n):Ii(r[0])).addClass("label"),{node:e.node,selectors:t.selectors}}},renderLabels:function(){var t=this._V,e=t.labels,n=this._labelCache={},r=this._labelSelectors={},i=this.model,o=i.attributes.labels||[],s=o.length;if(0===s)return e&&e.remove(),this;e?e.empty():(e=t.labels=Ii("g").addClass("labels"),this.options.labelsLayer&&(e.addClass(ko(mn(this,"className"))),e.attr("model-id",i.id)));for(var a=0;a<s;a++){var u,c,l=o[a],h=this._normalizeLabelMarkup(this._getLabelMarkup(l.markup));if(h)u=h.node,c=h.selectors;else{var f=i._builtins.defaultLabel,d=this._normalizeLabelMarkup(this._getLabelMarkup(f.markup)),p=i._getDefaultLabel(),g=this._normalizeLabelMarkup(this._getLabelMarkup(p.markup))||d;u=g.node,c=g.selectors}u.setAttribute("label-idx",a),e.append(u),n[a]=u;var v=this.selector;if(c[v])throw new Error("dia.LinkView: ambiguous label root selector.");c[v]=u,r[a]=c}return e.parent()||this.mountLabels(),this.updateLabels(),this},mountLabels:function(){const{el:t,paper:e,model:n,_V:r,options:i}=this,{labels:o}=r;if(!o||!n.hasLabels())return;const{node:s}=o;i.labelsLayer?e.getLayerView(i.labelsLayer).insertSortedNode(s,n.get("z")):s.parentNode!==t&&t.appendChild(s)},unmountLabels:function(){const{options:t,_V:e}=this;if(!e)return;const{labels:n}=e;n&&t.labelsLayer&&n.remove()},findLabelNodes:function(t,e){const n=this._labelCache[t];if(!n)return[];const r=this._labelSelectors[t];return this.findBySelector(e,n,r)},findLabelNode:function(t,e){const[n=null]=this.findLabelNodes(t,e);return n},_mergeLabelAttrs:function(t,e,n,r){if(null===e)return null;if(void 0===e){if(null===n)return null;if(void 0===n){if(t)return;return r}return t?n:An({},r,n)}return t?An({},n,e):An({},r,n,e)},_mergeLabelSize:function(t,e){if(null===t)return null;if(void 0===t){if(null===e)return null;if(void 0===e)return;return e}return An({},e,t)},updateLabels:function(){if(!this._V.labels)return this;this.paper.options.labelLayer||this.cleanNodeCache(this.el);for(var t=this.model,e=t.get("labels")||[],n=this.can("labelMove"),r=t._builtins.defaultLabel.attrs,i=t._getDefaultLabel(),o=i.markup,s=i.attrs,a=i.size,u=0,c=e.length;u<c;u++){var l=this._labelCache[u];l.setAttribute("cursor",n?"move":"default");var h=this._labelSelectors[u],f=e[u],d=f.markup,p=f.attrs,g=f.size,v=this._mergeLabelAttrs(d||o,p,s,r),m=this._mergeLabelSize(g,a);this.updateDOMSubtreeAttributes(l,v,{rootBBox:new Cr(m),selectors:h})}return this},removeRedundantLinearVertices:function(t){const e=this.model,n=e.vertices(),r=[this.sourceAnchor,...n,this.targetAnchor],i=r.length,o=new Ir(r);o.simplify({threshold:.001});const s=o.points.map(t=>t.toJSON()),a=s.length;return i===a?0:(e.vertices(s.slice(1,a-1),t),i-a)},getEndView:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("dia.LinkView: type parameter required.")}},getEndAnchor:function(t){switch(t){case"source":return new hr(this.sourceAnchor);case"target":return new hr(this.targetAnchor);default:throw new Error("dia.LinkView: type parameter required.")}},getEndConnectionPoint:function(t){switch(t){case"source":return new hr(this.sourcePoint);case"target":return new hr(this.targetPoint);default:throw new Error("dia.LinkView: type parameter required.")}},getEndMagnet:function(t){switch(t){case"source":var e=this.sourceView;if(!e)break;return this.sourceMagnet||e.el;case"target":var n=this.targetView;if(!n)break;return this.targetMagnet||n.el;default:throw new Error("dia.LinkView: type parameter required.")}return null},update:function(){return this.updateRoute(),this.updatePath(),this.updateDOM(),this},translate:function(t=0,e=0){const{route:n,path:r}=this;if(!n||!r)return;const i=new Ir(n);i.translate(t,e),this.route=i.points,this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e),this.sourceAnchor.offset(t,e),this.targetAnchor.offset(t,e),r.translate(t,e),this.updateDOM()},updateDOM(){const{el:t,model:e,selectors:n}=this;this.cleanNodesCache(),this.updateDOMSubtreeAttributes(t,e.attr(),{selectors:n}),this.updateLabelPositions(),this.options.perpendicular=null},updateRoute:function(){const{model:t}=this,e=t.vertices(),n=this.findAnchors(e),r=this.sourceAnchor=n.source,i=this.targetAnchor=n.target,o=this.findRoute(e);this.route=o;var s=this.findConnectionPoints(o,r,i);this.sourcePoint=s.source,this.targetPoint=s.target},updatePath:function(){const{route:t,sourcePoint:e,targetPoint:n}=this,r=this.findPath(t,e.clone(),n.clone());this.path=r},findAnchorsOrdered:function(t,e,n,r){var i,o,s,a,u=this.model,c=u.get(t),l=u.get(n),h=this.getEndView(t),f=this.getEndView(n),d=this.getEndMagnet(t),p=this.getEndMagnet(n);h?(s=e?new hr(e):f?p:new hr(l),i=this.getAnchor(c.anchor,h,d,s,t)):i=new hr(c),f?(a=new hr(r||i),o=this.getAnchor(l.anchor,f,p,a,n)):o=new hr(l);var g={};return g[t]=i,g[n]=o,g},findAnchors:function(t){var e=this.model,n=t[0],r=t[t.length-1];return e.target().priority&&!e.source().priority?this.findAnchorsOrdered("target",r,"source",n):this.findAnchorsOrdered("source",n,"target",r)},findConnectionPoints:function(t,e,n){var r,i,o,s,a=t[0],u=t[t.length-1],c=this.model,l=c.get("source"),h=c.get("target"),f=this.sourceView,d=this.targetView,p=this.paper.options;if(f&&!f.isNodeConnection(this.sourceMagnet)){r=this.sourceMagnet||f.el;var g=l.connectionPoint||p.defaultConnectionPoint,v=new gr(a||n,e);o=this.getConnectionPoint(g,f,r,v,"source")}else o=e;if(d&&!d.isNodeConnection(this.targetMagnet)){i=this.targetMagnet||d.el;var m=h.connectionPoint||p.defaultConnectionPoint,y=new gr(u||e,n);s=this.getConnectionPoint(m,d,i,y,"target")}else s=n;return{source:o,target:s}},getAnchor:function(t,e,n,r,i){var o,s=e.isNodeConnection(n),a=this.paper.options;if(t||(t=s?a.defaultLinkAnchor:this.options.perpendicular?{name:"perpendicular"}:a.defaultAnchor),!t)throw new Error("Anchor required.");if("function"==typeof t)o=t;else{var u=t.name;if("function"!=typeof(o=a[s?"linkAnchorNamespace":"anchorNamespace"][u]))throw new Error("Unknown anchor: "+u)}var c=o.call(this,e,n,r,t.args||{},i,this);return c?c.round(this.decimalsRounding):new hr},getConnectionPoint:function(t,e,n,r,i){var o,s,a=r.end,u=this.paper.options;if(!t)return a;if("function"==typeof t)s=t;else{var c=t.name;if("function"!=typeof(s=u.connectionPointNamespace[c]))throw new Error("Unknown connection point: "+c)}return(o=s.call(this,r,e,n,t.args||{},i,this))?o.round(this.decimalsRounding):a},isIntersecting:function(t,e){const n=this.getConnection();return!!n&&Oi.exists(t,n,e,{segmentSubdivisions:this.getConnectionSubdivisions()})},isEnclosedIn:function(t){const e=this.getConnection();if(!e)return!1;const n=e.bbox();return!!n&&t.containsRect(n)},isAtPoint:function(t){const e=new Cr(t);return e.inflate(this.EPSILON),this.isIntersecting(e)},_getDefaultLabelPositionProperty:function(){var t=this.model,e=t._builtins.defaultLabel.position,n=t._getDefaultLabel(),r=this._normalizeLabelPosition(n.position);return An({},e,r)},_normalizeLabelPosition:function(t){return"number"==typeof t?{distance:t,offset:null,angle:0,args:null}:t},_mergeLabelPositionProperty:function(t,e){return null===t?null:void 0===t?null===e?null:e:An({},e,t)},updateLabelPositions:function(){if(!this._V.labels)return this;if(!this.path)return this;var t=this.model.get("labels")||[];if(!t.length)return this;for(var e=this._getDefaultLabelPositionProperty(),n=0,r=t.length;n<r;n++){var i=this._labelCache[n];if(i){var o=t[n],s=this._normalizeLabelPosition(o.position),a=this._mergeLabelPositionProperty(s,e),u=this._getLabelTransformationMatrix(a);i.setAttribute("transform",Ii.matrixToTransformString(u)),this._cleanLabelMatrices(n)}}return this},_cleanLabelMatrices:function(t){const{metrics:e,_labelSelectors:n}=this,r=n[t];if(r)for(let t in r){const{id:n}=r[t];n&&n in e&&delete e[n].magnetMatrix}},updateEndProperties:function(t){const{model:e,paper:n}=this,r=`${t}View`,i=e.get(t),o=i&&i.id;if(!o)return this[r]=null,this.updateEndMagnet(t),!0;const s=n.getModelById(o);if(!s)throw new Error("LinkView: invalid "+t+" cell.");const a=s.findView(n);return!!a&&(this[r]=a,this.updateEndMagnet(t),!0)},updateEndMagnet:function(t){const e=`${t}Magnet`,n=this.getEndView(t);if(n){let r=n.getMagnetFromLinkEnd(this.model.get(t));r===n.el&&(r=null),this[e]=r}else this[e]=null},_getLabelPositionProperty:function(t){return this.model.label(t).position||{}},_getLabelPositionAngle:function(t){return this._getLabelPositionProperty(t).angle||0},_getLabelPositionArgs:function(t){return this._getLabelPositionProperty(t).args},_getDefaultLabelPositionArgs:function(){return(this.model._getDefaultLabel().position||{}).args},_mergeLabelPositionArgs:function(t,e){return null===t?null:void 0===t?null===e?null:e:An({},e,t)},addLabel:function(t,e,n,r){var i,o,s,a=0;"number"!=typeof t?(i=t.x,o=t.y,"number"==typeof e?(a=e,s=n):s=e):(i=t,o=e,"number"==typeof n?(a=n,s=r):s=n);var u=this._getDefaultLabelPositionArgs(),c=s,l=this._mergeLabelPositionArgs(c,u),h={position:this.getLabelPosition(i,o,a,l)};return this.model.insertLabel(-1,h,s),-1},addVertex:function(t,e,n){var r="number"!=typeof t,i=r?t.x:t,o=r?t.y:e,s=r?e:n,a={x:i,y:o},u=this.getVertexIndex(i,o);return this.model.insertVertex(u,a,s),u},sendToken:function(t,e,n){var r,i,o;We(e)?(r=e.duration,i="reverse"===e.direction,o=e.connection):(r=e,i=!1,o=null);var s={dur:(r=r||1e3)+"ms",repeatCount:1,calcMode:"linear",fill:"freeze"};i&&(s.keyPoints="1;0",s.keyTimes="0;1");var a,u=Ii(t);if("string"==typeof o)a=this.findNode(o);else{var c=this._V;a=c.connection?c.connection.node:this.el.querySelector("path")}if(!(a instanceof SVGPathElement))throw new Error("dia.LinkView: token animation requires a valid connection path.");u.appendTo(this.paper.cells).animateAlongPath(s,a),setTimeout(function(t,e){return function(){t.remove(),"function"==typeof e&&e()}}(u,n),r)},findRoute:function(t){t||(t=[]);var e=this.paper.options.routerNamespace||c,n=this.model.router(),r=this.paper.options.defaultRouter;if(!n){if(!r)return t.map(hr);n=r}var i=un(n)?n:e[n.name];if(!un(i))throw new Error('dia.LinkView: unknown router: "'+n.name+'".');var o=n.args||{};return i.call(this,t,o,this)||t.map(hr)},findPath:function(t,e,n){var r=this.paper.options.connectorNamespace||l,i=this.model.connector(),o=this.paper.options.defaultConnector;i||(i=o||{});var s=un(i)?i:r[i.name];if(!un(s))throw new Error('dia.LinkView: unknown connector: "'+i.name+'".');var a=rn(i.args||{});a.raw=!0;var u=s.call(this,e,n,t,a,this);return"string"==typeof u&&(u=new Gr(Ii.normalizePathData(u))),u},getConnection:function(){var t=this.path;return t?t.clone():null},getSerializedConnection:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("data"))return e.data;var n=t.serialize();return e.data=n,n},getConnectionSubdivisions:function(){var t=this.path;if(!t)return null;var e=this.metrics;if(e.hasOwnProperty("segmentSubdivisions"))return e.segmentSubdivisions;var n=t.getSegmentSubdivisions();return e.segmentSubdivisions=n,n},getConnectionLength:function(){var t=this.path;if(!t)return 0;var e=this.metrics;if(e.hasOwnProperty("length"))return e.length;var n=t.length({segmentSubdivisions:this.getConnectionSubdivisions()});return e.length=n,n},getPointAtLength:function(t){var e=this.path;return e?e.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getPointAtRatio:function(t){var e=this.path;return e?(Bo(t)&&(t=parseFloat(t)/100),e.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})):null},getTangentAtLength:function(t){var e=this.path;return e?e.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getTangentAtRatio:function(t){var e=this.path;return e?e.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPoint:function(t){var e=this.path;return e?e.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointLength:function(t){var e=this.path;return e?e.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getClosestPointRatio:function(t){var e=this.path;return e?e.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()}):null},getLabelPosition:function(t,e,n,r){var i,o={},s=0;"number"==typeof n?(s=n,i=r):i=n,i&&(o.args=i);var a,u,c=!(i&&i.absoluteDistance),l=i&&i.absoluteDistance&&i.reverseDistance,h=i&&i.absoluteOffset,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=new hr(t,e),g=f.closestPointT(p,d),v=f.lengthAtT(g,d);if(c&&(v=v/this.getConnectionLength()||0),l&&(v=-1*(this.getConnectionLength()-v)||1),o.distance=v,h||(a=f.tangentAtT(g)),a)u=a.pointOffset(p);else{var m=f.pointAtT(g),y=p.difference(m);u={x:y.x,y:y.y}}return o.offset=u,o.angle=s,o},_getLabelTransformationMatrix:function(t){var e,n=0,r={};if("number"==typeof t)e=t;else{if("number"!=typeof t.distance)throw new Error("dia.LinkView: invalid label position distance.");r=t.args||{},e=t.distance,n=t.angle||0}var i=e>0&&e<=1,o=0,s={x:0,y:0};if(t.offset){var a=t.offset;"number"==typeof a&&(o=a),a.x&&(s.x=a.x),a.y&&(s.y=a.y)}var u,c=0!==s.x||0!==s.y||0===o,l=r.keepGradient,h=r.ensureLegibility,f=this.path,d={segmentSubdivisions:this.getConnectionSubdivisions()},p=i?e*this.getConnectionLength():e,g=f.tangentAtLength(p,d),v=n;if(g){if(c)(u=g.start.clone()).offset(s);else{var m=g.clone();m.rotate(g.start,-90),m.setLength(o),u=m.end}l&&(v=g.angle()+n,h&&(v=Un((v+90)%180-90)))}else u=f.start.clone(),c&&u.offset(s);return Ii.createSVGMatrix().translate(u.x,u.y).rotate(v)},getLabelCoordinates:function(t){var e=this._getLabelTransformationMatrix(t);return new hr(e.e,e.f)},getVertexIndex:function(t,e){for(var n=this.model.vertices(),r=this.getClosestPointLength(new hr(t,e)),i=0,o=n.length;i<o;i++){var s=n[i];if(r<this.getClosestPointLength(s))break}return i},notifyPointerdown(t,e,n){Wa.prototype.pointerdown.call(this,t,e,n),this.notify("link:pointerdown",t,e,n)},notifyPointermove(t,e,n){Wa.prototype.pointermove.call(this,t,e,n),this.notify("link:pointermove",t,e,n)},notifyPointerup(t,e,n){this.notify("link:pointerup",t,e,n),Wa.prototype.pointerup.call(this,t,e,n)},pointerdblclick:function(t,e,n){Wa.prototype.pointerdblclick.apply(this,arguments),this.notify("link:pointerdblclick",t,e,n)},pointerclick:function(t,e,n){Wa.prototype.pointerclick.apply(this,arguments),this.notify("link:pointerclick",t,e,n)},contextmenu:function(t,e,n){Wa.prototype.contextmenu.apply(this,arguments),this.notify("link:contextmenu",t,e,n)},pointerdown:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragStart(t,e,n)},pointermove:function(t,e,n){var r=this._dragData;switch(r&&this.eventData(t,r),this.eventData(t).action){case"label-move":this.dragLabel(t,e,n);break;case"arrowhead-move":this.dragArrowhead(t,e,n);break;case"move":this.drag(t,e,n)}r&&Ze(r,this.eventData(t)),this.notifyPointermove(t,e,n)},pointerup:function(t,e,n){var r=this._dragData;switch(r&&(this.eventData(t,r),this._dragData=null),this.eventData(t).action){case"label-move":this.dragLabelEnd(t,e,n);break;case"arrowhead-move":this.dragArrowheadEnd(t,e,n);break;case"move":this.dragEnd(t,e,n)}this.notifyPointerup(t,e,n),this.checkMouseleave(t)},mouseover:function(t){Wa.prototype.mouseover.apply(this,arguments),this.notify("link:mouseover",t)},mouseout:function(t){Wa.prototype.mouseout.apply(this,arguments),this.notify("link:mouseout",t)},mouseenter:function(t){Wa.prototype.mouseenter.apply(this,arguments),this.notify("link:mouseenter",t)},mouseleave:function(t){Wa.prototype.mouseleave.apply(this,arguments),this.notify("link:mouseleave",t)},mousewheel:function(t,e,n,r){Wa.prototype.mousewheel.apply(this,arguments),this.notify("link:mousewheel",t,e,n,r)},onlabel:function(t,e,n){this.notifyPointerdown(t,e,n),this.dragLabelStart(t,e,n),this.eventData(t).stopPropagation&&t.stopPropagation()},dragLabelStart:function(t,e,n){if(this.can("labelMove")){if(this.isDefaultInteractionPrevented(t))return;var r=t.currentTarget,i=parseInt(r.getAttribute("label-idx"),10),o=this._getDefaultLabelPositionProperty(),s=this._normalizeLabelPosition(this._getLabelPositionProperty(i)),a=this._mergeLabelPositionProperty(s,o),u=this.getLabelCoordinates(a),c=u.x-e,l=u.y-n,h=this._getLabelPositionAngle(i),f=this._getLabelPositionArgs(i),d=this._getDefaultLabelPositionArgs(),p=this._mergeLabelPositionArgs(f,d);this.eventData(t,{action:"label-move",labelIdx:i,dx:c,dy:l,positionAngle:h,positionArgs:p,stopPropagation:!0})}else this.eventData(t,{stopPropagation:!0});this.paper.delegateDragEvents(this,t.data)},dragArrowheadStart:function(t,e,n){if(this.can("arrowheadMove")){var r=t.target.getAttribute("end"),i=this.startArrowheadMove(r,{ignoreBackwardsCompatibility:!0});this.eventData(t,i)}},dragStart:function(t,e,n){this.isDefaultInteractionPrevented(t)||this.can("linkMove")&&this.eventData(t,{action:"move",dx:e,dy:n})},dragLabel:function(t,e,n){var r=this.eventData(t),i={position:this.getLabelPosition(e+r.dx,n+r.dy,r.positionAngle,r.positionArgs)};this.paper.options.snapLabels&&delete i.position.offset;const o={ui:!0};this.paper.isAsync()&&"touchmove"===t.type&&(o.async=!1),this.model.label(r.labelIdx,i,o)},dragArrowhead:function(t,e,n){this.paper.options.snapLinks?!this._snapArrowhead(t,e,n)&&this.paper.options.snapLinksSelf&&this._snapArrowheadSelf(t,e,n):this.paper.options.snapLinksSelf?this._snapArrowheadSelf(t,e,n):this._connectArrowhead(this.getEventTarget(t),e,n,this.eventData(t))},drag:function(t,e,n){var r=this.eventData(t);this.model.translate(e-r.dx,n-r.dy,{ui:!0}),this.eventData(t,{dx:e,dy:n})},dragLabelEnd:function(){},dragArrowheadEnd:function(t,e,n){var r=this.eventData(t),i=this.paper;i.options.snapLinks?this._snapArrowheadEnd(r):this._connectArrowheadEnd(r,e,n),i.linkAllowed(this)?(this._finishEmbedding(r),this._notifyConnectEvent(r,t)):this._disallow(r),this._afterArrowheadMove(r)},dragEnd:function(){},_disallow:function(t){"remove"===t.whenNotAllowed?this.model.remove({ui:!0}):this.model.set(t.arrowhead,t.initialEnd,{ui:!0})},_finishEmbedding:function(t){this.paper.options.embeddingMode&&this.model.reparent()&&(t.z=null)},_notifyConnectEvent:function(t,e){var n=t.arrowhead,r=t.initialEnd,i=this.model.prop(n);if(i&&!Qa.endsEqual(r,i)){var o=this.paper;r.id&&this.notify("link:disconnect",e,o.findViewByModel(r.id),t.initialMagnet,n),i.id&&this.notify("link:connect",e,o.findViewByModel(i.id),t.magnetUnderPointer,n)}},_snapToPoints:function(t,e,n){let r=null,i=1/0,o=null,s=1/0,a=t.x,u=t.y;for(let n=0;n<e.length;n++){const a=Math.abs(e[n].x-t.x);a<i&&(i=a,r=e[n]);const u=Math.abs(e[n].y-t.y);u<s&&(s=u,o=e[n])}return i<n&&(a=r.x),s<n&&(u=o.y),{x:a,y:u}},_snapArrowheadSelf:function(t,e,n){const{paper:r,model:i}=this,{snapLinksSelf:o}=r.options,s=this.eventData(t),a=o.radius||20,u=[this.getEndAnchor("source"===s.arrowhead?"target":"source"),...i.vertices()],c=this._snapToPoints({x:e,y:n},u,a),l=r.localToClientPoint(c);this._connectArrowhead(document.elementFromPoint(l.x,l.y),c.x,c.y,this.eventData(t))},_snapArrowhead:function(t,e,n){const{paper:r}=this,{snapLinks:i,connectionStrategy:o}=r.options,s=this.eventData(t);let a=!1;var u=i.radius||50,c=r.findElementViewsInArea({x:e-u,y:n-u,width:2*u,height:2*u},i.findInAreaOptions),l=s.closestView||null,h=s.closestMagnet||null,f=s.magnetProxy||null;s.closestView=s.closestMagnet=s.magnetProxy=null;var d,p=Number.MAX_VALUE,g=new hr(e,n);c.forEach(function(t){const e=[];"false"!==t.el.getAttribute("magnet")&&e.push({bbox:t.model.getBBox(),magnet:t.el}),t.$("[magnet]").toArray().forEach(n=>{e.push({bbox:t.getNodeBBox(n),magnet:n})}),e.forEach(e=>{const{magnet:n,bbox:i}=e,o=i.center().squaredDistance(g);o<p&&(h===n||r.options.validateConnection.apply(r,s.validateConnectionArgs(t,t.el===n?null:n)))&&(p=o,s.closestView=t,s.closestMagnet=n)})},this);var v=null,m=s.closestView,y=s.closestMagnet;y&&(v=s.magnetProxy=m.findProxyNode(y,"highlighter"));var b=s.arrowhead,x=h!==y;if(l&&x&&l.unhighlight(f,{connecting:!0,snapping:!0}),m){const{prevEnd:t,prevX:r,prevY:i}=s;if(s.prevX=e,s.prevY=n,a=!0,!x&&("function"!=typeof o||r===e&&i===n))return a;if(d=m.getLinkEnd(y,e,n,this.model,b),!x&&an(t,d))return a;s.prevEnd=d,x&&m.highlight(v,{connecting:!0,snapping:!0})}else d={x:e,y:n};return this.model.set(b,d||{x:e,y:n},{ui:!0}),l&&this.notify("link:snap:disconnect",t,l,h,b),m&&this.notify("link:snap:connect",t,m,y,b),a},_snapArrowheadEnd:function(t){var e=t.closestView,n=t.closestMagnet;e&&n&&(e.unhighlight(t.magnetProxy,{connecting:!0,snapping:!0}),t.magnetUnderPointer=e.findMagnet(n)),t.closestView=t.closestMagnet=null},_connectArrowhead:function(t,e,n,r){const{paper:i,model:o}=this;if(r.eventTarget!==t){r.magnetProxy&&r.viewUnderPointer.unhighlight(r.magnetProxy,{connecting:!0});const e=r.viewUnderPointer=i.findView(t);if(e){const n=r.magnetUnderPointer=e.findMagnet(t),o=r.magnetProxy=e.findProxyNode(n,"highlighter");n&&this.paper.options.validateConnection.apply(i,r.validateConnectionArgs(e,n))?o&&e.highlight(o,{connecting:!0}):(r.magnetUnderPointer=null,r.magnetProxy=null)}else r.magnetUnderPointer=null,r.magnetProxy=null}r.eventTarget=t,o.set(r.arrowhead,{x:e,y:n},{ui:!0})},_connectArrowheadEnd:function(t={},e,n){const{model:r}=this,{viewUnderPointer:i,magnetUnderPointer:o,magnetProxy:s,arrowhead:a}=t;if(!o||!s||!i)return;i.unhighlight(s,{connecting:!0});const u=i.getLinkEnd(o,e,n,r,a);r.set(a,u,{ui:!0})},_beforeArrowheadMove:function(t){t.z=this.model.get("z"),this.model.toFront();var e=this.el.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets(t)},_afterArrowheadMove:function(t){null!==t.z&&(this.model.set("z",t.z,{ui:!0}),t.z=null),this.el.style.pointerEvents=t.pointerEvents,this.paper.options.markAvailable&&this._unmarkAvailableMagnets(t)},_createValidateConnectionArgs:function(t){var e,n=[];n[4]=t,n[5]=this;var r=0,i=0;"source"===t?(r=2,e="target"):(i=2,e="source");var o=this.model.get(e);if(o.id){var s=n[r]=this.paper.findViewByModel(o.id),a=s.getMagnetFromLinkEnd(o);a===s.el&&(a=void 0),n[r+1]=a}return function(t,e){return n[i]=t,n[i+1]=t.el===e?void 0:e,n}},_markAvailableMagnets:function(t){function e(t,e){var n=t.paper;return n.options.validateConnection.apply(n,this.validateConnectionArgs(t,e))}var n=this.paper,r=n.model.getCells();t.marked={};for(var i=0,o=r.length;i<o;i++){var s=r[i].findView(n);if(s){var a=Array.prototype.slice.call(s.el.querySelectorAll("[magnet]"));"false"!==s.el.getAttribute("magnet")&&a.push(s.el);var u=a.filter(e.bind(t,s));if(u.length>0){for(var c=0,l=u.length;c<l;c++)s.highlight(u[c],{magnetAvailability:!0});s.highlight(null,{elementAvailability:!0}),t.marked[s.model.id]=u}}}},_unmarkAvailableMagnets:function(t){for(var e,n,r=Object.keys(t.marked),i=0,o=r.length;i<o;i++){e=r[i],n=t.marked[e];var s=this.paper.findViewByModel(e);if(s){for(var a=0,u=n.length;a<u;a++)s.unhighlight(n[a],{magnetAvailability:!0});s.unhighlight(null,{elementAvailability:!0})}}t.marked=null},startArrowheadMove:function(t,e){e||(e={});var n={action:"arrowhead-move",arrowhead:t,whenNotAllowed:e.whenNotAllowed||"revert",initialMagnet:this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),initialEnd:rn(this.model.get(t)),validateConnectionArgs:this._createValidateConnectionArgs(t)};return this._beforeArrowheadMove(n),!0!==e.ignoreBackwardsCompatibility&&(this._dragData=n),n},onMount:function(){Wa.prototype.onMount.apply(this,arguments),this.mountLabels()},onDetach:function(){Wa.prototype.onDetach.apply(this,arguments),this.unmountLabels()},onRemove:function(){Wa.prototype.onRemove.apply(this,arguments),this.unmountLabels()}},{Flags:jc});Object.defineProperty(Dc.prototype,"sourceBBox",{enumerable:!0,get:function(){var t=this.sourceView;if(!t){var e=this.model.source();return new Cr(e.x,e.y)}var n=this.sourceMagnet;return t.isNodeConnection(n)?new Cr(this.sourceAnchor):t.getNodeBBox(n||t.el)}}),Object.defineProperty(Dc.prototype,"targetBBox",{enumerable:!0,get:function(){var t=this.targetView;if(!t){var e=this.model.target();return new Cr(e.x,e.y)}var n=this.targetMagnet;return t.isNodeConnection(n)?new Cr(this.targetAnchor):t.getNodeBBox(n||t.el)}});const Bc={GRID:"grid",CELLS:"cells",BACK:"back",FRONT:"front",TOOLS:"tools",LABELS:"labels"},Vc=Va.extend({tagName:"g",svgElement:!0,pivotNodes:null,defaultTheme:null,options:{name:""},className:function(){return ko(`${this.options.name}-layer`)},init:function(){this.pivotNodes={}},insertSortedNode:function(t,e){this.el.insertBefore(t,this.insertPivot(e))},insertNode:function(t){const{el:e}=this;t.parentNode!==e&&e.appendChild(t)},insertPivot:function(t){const{el:e,pivotNodes:n}=this;(t=+t)||(t=0);let r=n[t];if(r)return r;r=n[t]=document.createComment("z-index:"+(t+1));let i=-1/0;for(let e in n)e=+e,e<t&&e>i&&(i=e);if(i!==-1/0){const t=n[i];e.insertBefore(r,t.nextSibling)}else e.insertBefore(r,e.firstChild);return r},removePivots:function(){const{el:t,pivotNodes:e}=this;for(let n in e)t.removeChild(e[n]);this.pivotNodes={}}}),Fc=Va.extend({name:null,tagName:"g",className:"tool",svgElement:!0,_visible:!0,_visibleExplicit:!0,init:function(){var t=this.name;t&&this.vel.attr("data-tool-name",t)},configure:function(t,e){return this.relatedView=t,this.paper=t.paper,this.parentView=e,this.simulateRelatedView(this.el),this.delegateEvents(),this},simulateRelatedView:function(t){t&&t.setAttribute("model-id",this.relatedView.model.id)},getName:function(){return this.name},updateVisibility:function(){const t=this.computeVisibility();this.el.style.display=t?"":"none",this._visible=t},computeVisibility(){if(!this.isExplicitlyVisible())return!1;const{visibility:t}=this.options;return"function"!=typeof t||!!t.call(this,this.relatedView,this)},show:function(){this._visibleExplicit=!0,this.updateVisibility()},hide:function(){this._visibleExplicit=!1,this.updateVisibility()},isExplicitlyVisible:function(){return!!this._visibleExplicit},isVisible:function(){return!!this._visible},focus:function(){var t=this.options.focusOpacity;isFinite(t)&&(this.el.style.opacity=t),this.parentView.focusTool(this)},blur:function(){this.el.style.opacity="",this.parentView.blurTool(this)},update:function(){},guard:function(t){const{paper:e,relatedView:n}=this;return!e||!n||e.guard(t,n)}}),zc=Va.extend({tagName:"g",className:"tools",svgElement:!0,tools:null,isRendered:!1,options:{tools:null,relatedView:null,name:null},configure:function(t){var e=(t=Ze(this.options,t)).tools;if(!Array.isArray(e))return this;var n=t.relatedView;if(!(n instanceof Wa))return this;for(var r=this.tools=[],i=0,o=e.length;i<o;i++){var s=e[i];s instanceof Fc&&(s.configure(n,this),this.vel.append(s.el),r.push(s))}return this.isRendered=!1,n.requestUpdate(n.getFlag("TOOLS")),this},getName:function(){return this.options.name},update:function(t){t||(t={});const e=this.tools;if(!e)return this;const n=e.length,r=this.isRendered;for(let r=0;r<n;r++){const n=e[r];n.updateVisibility(),n.isVisible()&&this.ensureToolRendered(e,r)&&t.tool!==n.cid&&n.update()}return!this.isRendered&&n>0||(this.isMounted()||this.mount(),r||this.blurTool()),this},ensureToolRendered(t,e){return this.isRendered||(this.isRendered=Array(t.length).fill(!1)),!!this.isRendered[e]||(t[e].render(),this.isRendered[e]=!0,!1)},focusTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];t===i?i.show():i.hide()}return this},blurTool:function(t){var e=this.tools;if(!e)return this;for(var n=0,r=e.length;n<r;n++){var i=e[n];i===t||i.isExplicitlyVisible()||(i.show(),i.isVisible()&&this.ensureToolRendered(e,n)&&i.update())}return this},hide:function(){return this.focusTool(null)},show:function(){return this.blurTool(null),this.isMounted()||this.mount(),this},onRemove:function(){var t=this.tools;if(!t)return this;for(var e=0,n=t.length;e<n;e++)t[e].remove();this.tools=null},mount:function(){const{options:t,el:e}=this,{relatedView:n,layer:r=Bc.TOOLS,z:i}=t;return n&&(r?n.paper.getLayerView(r).insertSortedNode(e,i):n.el.appendChild(e)),this}});var Gc=Va.extend({tagName:"circle",svgElement:!0,className:"marker-vertex",events:{mousedown:"onPointerDown",touchstart:"onPointerDown",dblclick:"onDoubleClick",dbltap:"onDoubleClick"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},attributes:{r:6,fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move"},position:function(t,e){const{vel:n,options:r}=this,{scale:i}=r;let o=Ii.createSVGMatrix().translate(t,e);i&&(o=o.scale(i)),n.transform(o,{absolute:!0})},onPointerDown:function(t){this.options.guard(t)||(t.stopPropagation(),t.preventDefault(),this.options.paper.undelegateEvents(),this.delegateDocumentEvents(null,t.data),this.trigger("will-change",this,t))},onPointerMove:function(t){this.trigger("changing",this,t)},onDoubleClick:function(t){this.trigger("remove",this,t)},onPointerUp:function(t){this.trigger("changed",this,t),this.undelegateDocumentEvents(),this.options.paper.delegateEvents()}});const Uc=Fc.extend({name:"vertices",options:{handleClass:Gc,snapRadius:20,redundancyRemoval:!0,vertexAdding:!0,stopPropagation:!0,scale:null},children:[{tagName:"path",selector:"connection",className:"joint-vertices-path",attributes:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"cell"}}],handles:null,interactiveLinkNode:null,events:{"mousedown .joint-vertices-path":"onPathPointerDown","touchstart .joint-vertices-path":"onPathPointerDown"},linkEvents:{mousedown:"onLinkPointerDown",touchstart:"onLinkPointerDown"},onRender:function(){const{vertexAdding:t}=this.options;if(t){const{interactiveLinkNode:e=null}=t;e?this.delegateLinkEvents(e):(this.renderChildren(),this.updatePath())}return this.resetHandles(),this.renderHandles(),this},delegateLinkEvents:function(t){this.undelegateLinkEvents();const e=this.relatedView.findNode(t);e?(e.classList.add("joint-vertices-path"),this.interactiveLinkNode=e,this.delegateElementEvents(e,this.linkEvents)):console.warn(`Interactive link node "${t}" not found.`)},undelegateLinkEvents:function(){const t=this.interactiveLinkNode;t&&(this.undelegateElementEvents(t),t.classList.remove("joint-vertices-path"),this.interactiveLinkNode=null)},update:function(){return this.relatedView.model.vertices().length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.vertexAdding&&this.updatePath(),this},resetHandles:function(){var t=this.handles;if(this.handles=[],this.stopListening(),Array.isArray(t))for(var e=0,n=t.length;e<n;e++)t[e].remove()},renderHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var r=t[e],i=new this.options.handleClass({index:e,paper:this.paper,scale:this.options.scale,guard:t=>this.guard(t)});i.render(),i.position(r.x,r.y),this.simulateRelatedView(i.el),i.vel.appendTo(this.el),this.handles.push(i),this.startHandleListening(i)}},updateHandles:function(){for(var t=this.relatedView.model.vertices(),e=0,n=t.length;e<n;e++){var r=t[e],i=this.handles[e];if(!i)return;i.position(r.x,r.y)}},updatePath:function(){if(this.interactiveLinkNode)return;const t=this.childNodes.connection;t&&t.setAttribute("d",this.relatedView.getSerializedConnection())},startHandleListening:function(t){const{vertexRemoving:e=!0,vertexMoving:n=!0}=this.options;n&&(this.listenTo(t,"will-change",this.onHandleWillChange),this.listenTo(t,"changing",this.onHandleChanging),this.listenTo(t,"changed",this.onHandleChanged)),e&&this.listenTo(t,"remove",this.onHandleRemove)},getNeighborPoints:function(t){var e=this.relatedView,n=e.model.vertices(),r=t>0?n[t-1]:e.sourceAnchor,i=t<n.length-1?n[t+1]:e.targetAnchor;return{prev:new hr(r),next:new hr(i)}},onHandleWillChange:function(t,e){this.focus();const{relatedView:n,options:r}=this;n.model.startBatch("vertex-move",{ui:!0,tool:this.cid}),r.stopPropagation||n.notifyPointerdown(...n.paper.getPointerArgs(e))},onHandleChanging:function(t,e){const{options:n,relatedView:r}=this;var i=t.options.index,[o,s,a]=r.paper.getPointerArgs(e),u={x:s,y:a};this.snapVertex(u,i),r.model.vertex(i,u,{ui:!0,tool:this.cid}),t.position(u.x,u.y),n.stopPropagation||r.notifyPointermove(o,s,a)},onHandleChanged:function(t,e){const{options:n,relatedView:r}=this;if(n.vertexAdding&&this.updatePath(),n.redundancyRemoval){r.removeRedundantLinearVertices({ui:!0,tool:this.cid})&&this.render(),this.blur(),r.model.stopBatch("vertex-move",{ui:!0,tool:this.cid}),this.eventData(e).vertexAdded&&r.model.stopBatch("vertex-add",{ui:!0,tool:this.cid});var[i,o,s]=r.paper.getPointerArgs(e);n.stopPropagation||r.notifyPointerup(i,o,s),r.checkMouseleave(i)}else r.checkMouseleave(Mo(e))},snapVertex:function(t,e){var n=this.options.snapRadius;if(n>0){var r=this.getNeighborPoints(e),i=r.prev,o=r.next;Math.abs(t.x-i.x)<n?t.x=i.x:Math.abs(t.x-o.x)<n&&(t.x=o.x),Math.abs(t.y-i.y)<n?t.y=r.prev.y:Math.abs(t.y-o.y)<n&&(t.y=o.y)}},onHandleRemove:function(t,e){var n=t.options.index,r=this.relatedView;r.model.removeVertex(n,{ui:!0}),this.options.vertexAdding&&this.updatePath(),r.checkMouseleave(Mo(e))},onPathPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=Mo(t),n=this.paper.snapToGrid(e.clientX,e.clientY).toJSON(),r=this.relatedView;r.model.startBatch("vertex-add",{ui:!0,tool:this.cid});var i=r.getVertexIndex(n.x,n.y);this.snapVertex(n,i),r.model.insertVertex(i,n,{ui:!0,tool:this.cid}),this.update();var o=this.handles[i];this.eventData(e,{vertexAdded:!0}),o.onPointerDown(e)}},onLinkPointerDown:function(t){this.relatedView.preventDefaultInteraction(t),this.onPathPointerDown(t)},onRemove:function(){this.resetHandles(),this.undelegateLinkEvents()}},{VertexHandle:Gc});var qc=n(2543),Hc=n(22313);const $c=Fc.extend({tagName:"path",xAxisVector:new hr(1,0),events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},documentEvents:{mousemove:"onPointerMove",touchmove:"onPointerMove",mouseup:"onPointerUp",touchend:"onPointerUp",touchcancel:"onPointerUp"},options:{scale:null},onRender:function(){this.update()},update:function(){var t,e,n=this.ratio,r=this.relatedView,i=r.getTangentAtRatio(n);if(i?(t=i.start,e=i.vector().vectorAngle(this.xAxisVector)||0):(t=r.getPointAtRatio(n),e=0),!t)return this;var o=Ii.createSVGMatrix().translate(t.x,t.y).rotate(e);const{scale:s}=this.options;return s&&(o=o.scale(s)),this.vel.transform(o,{absolute:!0}),this},onPointerDown:function(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();var e=this.relatedView,n=e.paper;e.model.startBatch("arrowhead-move",{ui:!0,tool:this.cid}),e.startArrowheadMove(this.arrowheadType);const r=t.data||(t.data={});this.delegateDocumentEvents(null,r),n.undelegateEvents(),this.focus(),this.el.style.pointerEvents="none",e.notifyPointerdown(...n.getPointerArgs(t))},onPointerMove:function(t){var e=Mo(t),n=this.paper.snapToGrid(e.clientX,e.clientY);this.relatedView.pointermove(e,n.x,n.y)},onPointerUp:function(t){this.undelegateDocumentEvents();var e=this.relatedView,n=e.paper,r=Mo(t),i=n.snapToGrid(r.clientX,r.clientY);e.pointerup(r,i.x,i.y),n.delegateEvents(),this.blur(),this.el.style.pointerEvents="",e.model.stopBatch("arrowhead-move",{ui:!0,tool:this.cid})}}),Wc=$c.extend({name:"target-arrowhead",ratio:1,arrowheadType:"target",attributes:{d:"M -10 -8 10 0 -10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"target-arrowhead"}}),Xc=$c.extend({name:"source-arrowhead",ratio:0,arrowheadType:"source",attributes:{d:"M 10 -8 -10 0 10 8 Z",fill:"#33334F",stroke:"#FFFFFF","stroke-width":2,cursor:"move",class:"source-arrowhead"}}),Yc=Fc.extend({name:"button",events:{mousedown:"onPointerDown",touchstart:"onPointerDown"},options:{distance:0,offset:0,scale:null,rotate:!1},onRender:function(){this.renderChildren(this.options.markup),this.update()},update:function(){return this.position(),this},position:function(){const{vel:t}=this;t.transform(this.getCellMatrix(),{absolute:!0})},getCellMatrix(){return this.relatedView.model.isLink()?this.getLinkMatrix():this.getElementMatrix()},getElementMatrix(){const{relatedView:t,options:e}=this;let{x:n=0,y:r=0,offset:i={},useModelGeometry:o,rotate:s,scale:a}=e,u=function(t,e){const{model:n}=t;return e?n.getBBox():n.isLink()?t.getConnection().bbox():t.getNodeUnrotatedBBox(t.el)}(t,o);const c=t.model.angle();s||(u=u.bbox(c));const{x:l=0,y:h=0}=i;Bo(n)?n=parseFloat(n)/100*u.width:Cs(n)&&(n=Number(Ns(n,u))),Bo(r)?r=parseFloat(r)/100*u.height:Cs(r)&&(r=Number(Ns(r,u)));let f=Ii.createSVGMatrix().translate(u.x+u.width/2,u.y+u.height/2);return s&&(f=f.rotate(c)),f=f.translate(n+l-u.width/2,r+h-u.height/2),a&&(f=f.scale(a)),f},getLinkMatrix(){const{relatedView:t,options:e}=this,{offset:n=0,distance:r=0,rotate:i,scale:o}=e,s="function"==typeof r?r.call(this,t,this):r;let a,u,c;a=Bo(s)?t.getTangentAtRatio(parseFloat(s)/100):t.getTangentAtLength(s),a?(u=a.start,c=a.vector().vectorAngle(new hr(1,0))||0):(u=t.getConnection().start,c=0);let l=Ii.createSVGMatrix().translate(u.x,u.y).rotate(c).translate(0,n);return i||(l=l.rotate(-c)),o&&(l=l.scale(o)),l},onPointerDown:function(t){if(!this.guard(t)){t.stopPropagation(),t.preventDefault();var e=this.options.action;"function"==typeof e&&e.call(this.relatedView,t,this.relatedView,this)}}}),Zc=Yc.extend({name:"remove",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{distance:60,offset:0,action:function(t,e,n){e.model.remove({ui:!0,tool:n.cid})}}}),Jc={tagName:"circle",attributes:{r:7,fill:"black","fill-opacity":.3,stroke:"black","stroke-width":2,cursor:"move"}},Kc=Xc.extend(qc.merge({},Jc)),Qc=Wc.extend(qc.merge({},Jc)),tl=Yc.extend({update(){return this.relatedView.isShortWire()?(this.options.distance=this.options.distanceShort||this.options.distance,this.options.secondary&&this.hide()):this.options.distance=this.options.distanceLong||this.options.distance,Yc.prototype.update.apply(this,arguments)}}),el=tl.extend({name:"remove",children:Zc.prototype.children,options:Zc.prototype.options}),nl=tl.extend({name:"monitor",children:[{tagName:"circle",selector:"button",attributes:{r:7,fill:"#001DFF",cursor:"pointer"}},{tagName:"path",selector:"icon",attributes:{d:"m -2.5,-0.5 a 2,2 0 1 0 4,0 2,2 0 1 0 -4,0 M 1,1 3,3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],options:{action(t){this.notify("link:monitor")}}});var rl=n(91176);const il={wire:{stroke:"#4B4F6A",x1:0,y1:0,x2:void 0,y2:0},port:{magnet:void 0,r:7,stroke:"black",fill:"white",strokeWidth:2,strokeOpacity:.5},bits:{ref:"port",fill:"black",fontSize:"7pt"},iolabel:{textVerticalAnchor:"middle",fill:"black",fontSize:"8pt"},decor:{stroke:"black",fill:"transparent"}},ol=Ia.define("Gate",{propagation:1,label:"",size:{width:80,height:30},inputSignals:{},outputSignals:{},attrs:{".":{magnet:!1},body:{stroke:"black",strokeWidth:2},label:{refX:.5,refDy:3,textAnchor:"middle",fontSize:"8pt",fill:"black"}},ports:{groups:{in:{position:"left",attrs:qc.merge({},il,{wire:{x2:-25},port:{magnet:"passive",refX:-25},bits:{refDx:1,refY:-3,textAnchor:"start"},iolabel:{refX:5,textAnchor:"start"}})},out:{position:"right",attrs:qc.merge({},il,{wire:{x2:25},port:{magnet:!0,refX:25},bits:{refX:-1,refY:-3,textAnchor:"end"},iolabel:{refX:-5,textAnchor:"end"}})}}},z:1},{operation:()=>({}),initialize(){const t=this.get("ports");t.items&&this._preprocessPorts(t.items),Ia.prototype.initialize.apply(this,arguments),this.prepare(),this.bindAttrToProp("label/text","label"),this._unsupportedPropChanges.length>0&&this.on(this._unsupportedPropChanges.map(t=>"change:"+t).join(" "),(t,e,n)=>{if(n.init)return;const r=qc.intersection(Object.keys(this.changed),this._unsupportedPropChanges);r.forEach(t=>{this.set(t,this.previous(t),{init:!0})}),console.warn('Beta property change support: "'+r+'" changes on '+this.get("type")+" are (currently) not supported.")})},prepare(){},bindAttrToProp(t,e){this.attr(t,this.get(e)),this.on("change:"+e,(e,n)=>this.attr(t,n))},_changeOutputSignals(t){qc.chain(this.graph.getConnectedLinks(this,{outbound:!0})).groupBy(t=>t.get("source").port).forEach((e,n)=>e.forEach(e=>e.set("signal",t[n]))).value()},_setInput(t,e){const n=qc.clone(this.get("inputSignals"));n[e]=t,this.set("inputSignals",n)},_clearInput(t){const e=this.getPort(t).bits;this._setInput(Hc.Vector3vl.xes(e),t)},_preprocessPorts(t){this._resetPortsSignals(t);for(const e of t){if(e.attrs={},e.attrs.bits={text:this._getBitsText(e.bits)},e.labelled){const t={text:"portlabel"in e?e.portlabel:e.id};!1===e.polarity&&(t["text-decoration"]="overline"),e.decor&&(console.assert("in"==e.group),t.refX=10),e.attrs.iolabel=t}e.decor&&(e.attrs.decor={d:e.decor})}},_setPortsBits(t){const e=qc.cloneDeep(this.get("ports")),n=[];for(const r in t){const i=t[r],o=e.items.find(function(t){return t.id&&t.id===r});o.bits=i,o.attrs.bits.text=this._getBitsText(i),n.push(o)}this._resetPortsSignals(n),this.set("ports",e),this.graph.getConnectedLinks(this,{outbound:!0}).filter(e=>e.get("source").port in t).forEach(t=>t._changeSource(t.get("source"))),this.graph.getConnectedLinks(this,{inbound:!0}).filter(e=>e.get("target").port in t).forEach(t=>t._changeTarget(t.get("target")))},_getBitsText:t=>t>1?t:"",_resetPortValue:t=>Hc.Vector3vl.xes(t.bits),_resetPortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)console.assert(n.bits>=0),e[n.dir][n.id]=this._resetPortValue(n);this.set("inputSignals",e.in),this.set("outputSignals",e.out)},_removePortsSignals(t){const e={in:this.get("inputSignals"),out:this.get("outputSignals")};for(const n of t)delete e[n.dir][n.id];this.set("inputSignals",e.in),this.set("outputSignals",e.out)},addPort(t){this.addPorts([t])},addPorts(t){this._preprocessPorts(t),Ia.prototype.addPorts.apply(this,arguments)},removePort(t,e){this.removePorts([t])},removePorts(t,e){this._removePortsSignals(t),Ia.prototype.removePorts.apply(this,arguments)},_getStackedPosition:t=>function(e,n){const r=t.side||"left",i=t.step||16,o=t.offset||12,s="left"==r?n.topLeft().x:"right"==r?n.topRight().x:void 0,a="top"==r?n.topLeft().y:"bottom"==r?n.bottomRight().y:void 0;return void 0!==s?qc.map(e,function(t,e){return e+=t.idxOffset||0,hr({x:s,y:e*i+o})}):qc.map(e,function(t,e){return e+=t.idxOffset||0,hr({x:e*i+o,y:a})})},getLayoutSize(){return this.size()},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y})},portMarkup:[{tagName:"line",className:"wire",selector:"wire"},{tagName:"circle",className:"port",selector:"port"},{tagName:"text",className:"bits",selector:"bits"},{tagName:"text",className:"iolabel",selector:"iolabel"},{tagName:"path",className:"decor",selector:"decor"}],markup:[{tagName:"text",className:"label",selector:"label"}],getGateParams(t){return qc.cloneDeep(qc.pick(this.attributes,this._gateParams.concat(t?this._gateLayoutParams:[])))},_gateParams:["label","type","propagation","source_positions"],_gateLayoutParams:["position"],_unsupportedPropChanges:[],_operationHelpers:[],_presentationParams:[]}),sl=Ka.extend({attrs:{signal:{high:{port:{stroke:"#03c03c"}},low:{port:{stroke:"#fc7c68"}},def:{port:{stroke:"#779ecb"}},undef:{port:{stroke:"#999"}}}},presentationAttributes:Ka.addPresentationAttributes({inputSignals:"SIGNAL",outputSignals:"SIGNAL2"}),stopprop(t){t.stopPropagation()},confirmUpdate(t){this.hasFlag(t,"SIGNAL")&&this._updatePortSignals("in"),this.hasFlag(t,"SIGNAL2")&&this._updatePortSignals("out"),Ka.prototype.confirmUpdate.apply(this,arguments)},_updatePortSignals(t){const e="in"===t?this.model.get("inputSignals"):"out"===t?this.model.get("outputSignals"):qc.merge({},this.model.get("inputSignals"),this.model.get("outputSignals"));for(const t in e){const n=e[t],r=this.attrs.signal[n.isDefined?n.isHigh?"high":n.isLow?"low":"def":"undef"];this._applyPortAttrs(t,r)}},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},_applyPortAttrs(t,e){if(t in this._portElementsCache)for(const n in e){const r=this._portElementsCache[t].portSelectors[n];this.setNodeAttributes(r,e[n])}},_updatePorts(){Ka.prototype._updatePorts.apply(this,arguments),this._updatePortSignals()}}),al=ru.define("Wire",{attrs:{line:{class:"connection",targetMarker:null},wrapper:{stroke:"red"}},signal:Hc.Vector3vl.xes(1),bits:1,warning:!1,z:0},{initialize(){ru.prototype.initialize.apply(this,arguments),this.has("netname")&&this.label(0,{markup:[{tagName:"text",selector:"label"}],attrs:{label:{text:this.get("netname"),fill:"black",fontSize:"8pt"}},position:{distance:.5}})},onAdd(){this._changeSource(this.get("source")),this._was_added=!0},remove(){const t=this.get("target"),e=this.graph.getCell(t.id);e&&"port"in t&&e._clearInput(t.port),ru.prototype.remove.apply(this,arguments)},_propagateSignal(t,e){const n=this.getTargetElement();n&&(this.get("warning")?n._clearInput(t.port):n._setInput(e,t.port))},_changeSignal(t){this._propagateSignal(this.get("target"),t)},_changeSource(t){const e=this.getSourceElement();e&&"port"in t?(this.set("bits",e.getPort(t.port).bits),this._checkConnection(),this.set("signal",e.get("outputSignals")[t.port])):this.set("signal",Hc.Vector3vl.xes(this.get("bits")))},_changeTarget(t){if(this._checkConnection(),"port"in t&&this._propagateSignal(t,this.get("signal")),!this.hasChanged("target"))return;const e=this.previous("target"),n=this.graph.getCell(e.id);n&&"port"in e&&n._clearInput(e.port)},_checkConnection(){const t=this.get("target"),e=this.graph.getCell(t.id);this.set("warning",e&&e.getPort(t.port).bits!==this.get("bits")||!1,{silent:!this._was_added})},getWireParams(t){const e={from:{id:this.get("source").id,port:this.get("source").port},to:{id:this.get("target").id,port:this.get("target").port}};return this.has("netname")&&(e.name=this.get("netname")),t&&this.has("vertices")&&this.get("vertices").length>0&&(e.vertices=qc.cloneDeep(this.get("vertices"))),e},getWirePath(){const t=[];for(let e=this.graph.get("subcircuit");null!=e;e=e.graph.get("subcircuit")){if(!e.has("label"))return null;t.push(e.get("label"))}return t.reverse()}}),ul=Dc.extend({initFlag:Dc.prototype.initFlag.concat(["INIT"]),longWireLength:400,attrs:{signal:{high:{line:{stroke:"#03c03c"}},low:{line:{stroke:"#fc7c68"}},def:{line:{stroke:"#779ecb"}},undef:{line:{stroke:"#999"}}},bits:{bus:{line:{"stroke-width":"4px"}},single:{line:{"stroke-width":"2px"}}},warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}},_wireToolsView:"undefined"!=typeof window?new zc({tools:[new Uc({focusOpacity:.5}),new Kc,new Qc,new el({distanceShort:"75%",distanceLong:"50"}),new el({distance:"-50",secondary:!0}),new nl({distanceShort:"25%",distanceLong:"30"}),new nl({distance:"-30",secondary:!0})]}):null,presentationAttributes:Dc.addPresentationAttributes({signal:"SIGNAL",bits:"BITS",warning:"WARNING"}),initialize(){Dc.prototype.initialize.apply(this,arguments),this.prevModels={source:null,target:null}},confirmUpdate(t){Dc.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateSignal(),this.hasFlag(t,"BITS")&&this._updateBits(),this.hasFlag(t,"WARNING")&&this._updateWarning()},isShortWire(){return this.getConnectionLength()<this.longWireLength},_updateSignal(){const t=this.model.get("signal"),e=this.attrs.signal[t.isDefined?t.isHigh?"high":t.isLow?"low":"def":"undef"];this._applyAttrs(e)},_updateBits(){const t=this.model.get("bits"),e=this.attrs.bits[t>1?"bus":"single"];this._applyAttrs(e)},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},_applyAttrs(t){for(const e in t){const n=this.selectors[e];this.setNodeAttributes(n,t[e])}},update(){Dc.prototype.update.apply(this,arguments),this._updateSignal(),this._updateBits(),this._updateWarning()},onRemove(){Dc.prototype.onRemove.apply(this,arguments),this._removeTooltip()},mouseenter(t){Dc.prototype.mouseenter.apply(this,arguments),this.addTools(this._wireToolsView),this._addTooltip({x:t.clientX+5,y:t.clientY+5})},mouseleave(t){Dc.prototype.mouseleave.apply(this,arguments),this.removeTools(),this._removeTooltip()},_addTooltip(t){1!=this.model.get("bits")&&(this.wire_hover||(this.wire_hover=rl('<div class="wire_hover">').css("left",t.x).css("top",t.y).appendTo(rl(document.body)),this._generateTextForTooltip(),this.listenTo(this.model,"change:signal",this._generateTextForTooltip)))},_removeTooltip(){this.wire_hover&&(this.wire_hover.remove(),this.wire_hover=null,this.stopListening(this.model,"change:signal",this._generateTextForTooltip))},_generateTextForTooltip(){if(!this.wire_hover)return;const t=this.model.get("signal"),e=this.model.graph._display3vl,n=["Hex: "+e.show("hex",t)+"<br>","Dec: "+e.show("dec",t)+"<br>","Oct: "+e.show("oct",t)+"<br>","Bin: "+e.show("bin",t)].join("");this.wire_hover.html(n)},onEndModelChange(t,e,n){"object"==typeof e&&null!=e&&e==this.prevModels[t]&&Object.keys(e.changed).length>0&&!("position"in e.changed)||(Dc.prototype.onEndModelChange.apply(this,arguments),this.prevModels[t]=e)}}),cl=ol.define("Box",{attrs:{body:{refWidth:1,refHeight:1},tooltip:{refX:0,refY:-30,height:30}}},{initialize(){ol.prototype.initialize.apply(this,arguments),this.on("change:size",(t,e)=>{e.width>this.tooltipMinWidth?this.attr("tooltip",{refWidth:1,width:null}):this.attr("tooltip",{refWidth:null,width:this.tooltipMinWidth})}),this.trigger("change:size",this,this.prop("size"))},markup:ol.prototype.markup.concat([{tagName:"rect",className:"body",selector:"body"}]),markupZoom:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"a",className:"zoom",textContent:"🔍",style:{cursor:"pointer"}}]}]}],tooltipMinWidth:20,decorClock:"M"+[[0,-6],[6,0],[0,6]].map(t=>t.join(" ")).join(" L")}),ll=sl.extend({_autoResizeBox:!1,render(){sl.prototype.render.apply(this,arguments),this._autoResizeBox&&!this.model.get("box_resized")&&(this.model.set("box_resized",!0),this.model.prop("size/width",this._calculateBoxWidth()))},_calculateBoxWidth(){const t=Array.from(this.el.querySelectorAll("[port-group=in] > text.iolabel")),e=Array.from(this.el.querySelectorAll("[port-group=out] > text.iolabel")),n=Math.max(...t.map(t=>t.getBBox().width)),r=Math.max(...e.map(t=>t.getBBox().width)),i=t=>t==-1/0?-5:t;return i(n)+i(r)+25}}),hl=cl.define("NumBase",{numbase:"hex",bits:1},{initialize(){cl.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this.graph._display3vl.usableDisplays(this.numbaseType,this.get("bits")).includes(this.get("numbase"))||this.set("numbase","hex")})},tooltipMinWidth:70,markupTooltip:[{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"select",className:"numbase"}]}]}],_gateParams:cl.prototype._gateParams.concat(["numbase"])}),fl=ll.extend({presentationAttributes:ll.addPresentationAttributes({bits:"BITS",numbase:"NUMBASE"}),_autoResizeBox:!0,events:{"click select.numbase":"stopprop","mousedown select.numbase":"stopprop","touchstart select.numbase":"stopprop","change select.numbase":"_changeNumbase"},_changeNumbase(t){this.model.set("numbase",t.target.value||"bin")},_calculateBoxWidth(){const t=document.createElementNS("http://www.w3.org/2000/svg","text");rl(t).text(Array(this.model.get("bits")).fill("0").join("")).attr("class","numvalue").appendTo(this.$el);const e=t.getBBox().width+20;return t.remove(),e},confirmUpdate(t){ll.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"BITS")||this.hasFlag(t,"RENDER"))&&this._makeNumBaseSelector(),this.hasFlag(t,"NUMBASE")&&this._updateNumBaseSelector()},_makeNumBaseSelector(){this.$("select.numbase").empty();const t=this.model.get("numbase"),e=this.model.graph._display3vl;for(const n of e.usableDisplays(this.model.numbaseType,this.model.get("bits")))rl("<option>").attr("value",n).prop("selected",n==t).text(n).appendTo(this.$("select.numbase"))},_updateNumBaseSelector(){this.$("select.numbase").val(this.model.get("numbase"))}}),dl=hl.define("IO",{bits:1,net:"",propagation:0,mode:-1,attrs:{ioname:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontWeight:"bold",fontSize:"10pt"}}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:this._portDirection,group:this._portDirection,dir:this._portDirection,bits:t}],hl.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{const n={};n[this._portDirection]=e,this._setPortsBits(n),0!=this.get("mode")&&this._checkMode()}),this.bindAttrToProp("ioname/text","net")},onAdd(){this._checkMode()},_checkMode(){const t=this.graph&&this.graph.has("subcircuit"),e=this.get("bits"),n=t?0:1==e?1:2;return this.set("mode",n),this.set("box_resized",!1),this.set("markup",0==n?this.markupInSubcircuit:1==n?this.markupSingle:this.markupBus),n},_setPortsBits(t){if(hl.prototype._setPortsBits.apply(this,arguments),0!=this.get("mode"))return;const e=this.graph.get("subcircuit");console.assert(null!=e);const n={};n[this.get("net")]=t[this._portDirection],e._setPortsBits(n)},markupSingle:hl.prototype.markup,markupBus:hl.prototype.markup.concat(hl.prototype.markupTooltip),markupInSubcircuit:hl.prototype.markup.concat([{tagName:"text",className:"ioname",selector:"ioname"}]),_gateParams:hl.prototype._gateParams.concat(["bits","net","order"])}),pl=fl.extend({_calculateBoxWidth(){switch(this.model.get("mode")){case 0:const t=this.selectors.ioname;return"none"!==t.getAttribute("display")?t.getBBox().width+10:20;case 1:return 30;case 2:return fl.prototype._calculateBoxWidth.call(this)}}}),gl=dl.define("Input",{attrs:{btnface:{stroke:"black",strokeWidth:2,refX:.2,refY:.2,refHeight:.6,refWidth:.6,cursor:"pointer"},valinput:{refX:.5,refY:.5,refWidth:-10,refHeight:-10,xAlignment:"middle",yAlignment:"middle"}}},{isInput:!0,_portDirection:"out",_resetPortValue(t){if("out"==t.id&&"out"==t.dir){const t=this.get("bits");return 1==this.get("mode")?Hc.Vector3vl.zeros(t):Hc.Vector3vl.xes(t)}return dl.prototype._resetPortValue.call(this,t)},_checkMode(){dl.prototype._checkMode.call(this),this._resetPortsSignals([this.get("ports").items[0]])},setInput(t){this._setInput(t),this.trigger("userChange",this)},toggleInput(){this.setInput(this.get("outputSignals").out.not())},_setInput(t){if(t.bits!=this.get("bits"))throw new Error("setInput: wrong number of bits");this.set("outputSignals",{out:t})},markupSingle:dl.prototype.markupSingle.concat([{tagName:"rect",className:"btnface",selector:"btnface"}]),markupBus:dl.prototype.markupBus.concat([{tagName:"foreignObject",className:"valinput",selector:"valinput",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"text"}}]}]}]),numbaseType:"read"}),vl=pl.extend({attrs:qc.merge({button:{high:{btnface:{fill:"black"}},low:{btnface:{fill:"white"}}}},pl.prototype.attrs),confirmUpdate(t){pl.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL2")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateButton();break;case 2:this._updateNumEntry()}},_updateButton(){const t=this.model.get("outputSignals").out,e=this.attrs.button[t.isHigh?"high":"low"];this._applyAttrs(e)},_updateNumEntry(){const t=this.model.graph._display3vl;this.$("input").val(t.show(this.model.get("numbase"),this.model.get("outputSignals").out)),this.$("input").removeClass("invalid")},render(){pl.prototype.render.apply(this,arguments),this._updateView()},events:qc.merge({"click .btnface":"_onButton","mousedown .btnface":"stopprop","touchstart .btnface":"stopprop","click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_onNumEntry"},fl.prototype.events),_onButton(){this.model.toggleInput()},_onNumEntry(t){const e=this.model.get("numbase"),n=this.model.get("bits"),r=this.model.graph._display3vl;if(r.validate(e,t.target.value,n)){const i=r.read(e,t.target.value,n);this.model.setInput(i)}else this.$("input").addClass("invalid")}}),ml=gl,yl=vl,bl=gl,xl=vl,wl=dl.define("Output",{attrs:{led:{refX:.5,refY:.5,refR:.35},value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{isOutput:!0,_portDirection:"in",getOutput(){return this.get("inputSignals").in},markupSingle:dl.prototype.markupSingle.concat([{tagName:"circle",className:"led",selector:"led"}]),markupBus:dl.prototype.markupBus.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),numbaseType:"show"}),_l=pl.extend({attrs:qc.merge({lamp:{high:{led:{fill:"#03c03c"}},low:{led:{fill:"#fc7c68"}},undef:{led:{fill:"#bfc5c6"}}}},pl.prototype.attrs),confirmUpdate(t){pl.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"SIGNAL")||this.hasFlag(t,"NUMBASE"))&&this._updateView()},_updateView(){switch(this.model.get("mode")){case 1:this._updateLamp();break;case 2:this._updateNumDisplay()}},_updateLamp(){const t=this.model.get("inputSignals").in,e=this.attrs.lamp[t.isHigh?"high":t.isLow?"low":"undef"];this._applyAttrs(e)},_updateNumDisplay(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("inputSignals").in))},render(){pl.prototype.render.apply(this,arguments),this._updateView()}}),El=wl,Al=_l,kl=wl,Sl=_l,Tl=hl.define("Constant",{constant:"0",propagation:0,attrs:{value:{refX:.5,refY:.5,textVerticalAnchor:"middle",text:"0"}}},{initialize(){const t=this.get("constant").length;this.set("bits",t),this.get("ports").items=[{id:"out",group:"out",dir:"out",bits:t}],hl.prototype.initialize.apply(this,arguments),this.on("change:constant",(t,e)=>{const n=e.length;this._setPortsBits({out:n}),this.set("bits",n),this.set("constantCache",Hc.Vector3vl.fromBin(e,n))})},prepare(){const t=this.get("constant"),e=t.length;this.set("constantCache",Hc.Vector3vl.fromBin(t,e))},operation(){return{out:this.get("constantCache")}},markup:hl.prototype.markup.concat([{tagName:"text",className:"value numvalue",selector:"value"}]),_gateParams:hl.prototype._gateParams.concat(["constant"]),numbaseType:"show"}),Pl=fl.extend({presentationAttributes:fl.addPresentationAttributes({constantCache:"CONSTANT"}),confirmUpdate(t){fl.prototype.confirmUpdate.apply(this,arguments),(this.hasFlag(t,"CONSTANT")||this.hasFlag(t,"NUMBASE"))&&this._showText()},_showText(){const t=this.model.graph._display3vl;this.$("text.value tspan").text(t.show(this.model.get("numbase"),this.model.get("constantCache")))},update(){fl.prototype.update.apply(this,arguments),this._showText()}}),Cl=cl.define("Clock",{propagation:100,ports:{items:[{id:"out",group:"out",dir:"out",bits:1}]},size:{width:30,height:30}},{_resetPortValue:t=>"out"==t.id&&"out"==t.dir?Hc.Vector3vl.zero:cl.prototype._resetPortValue(t),operation(){return{out:this.get("outputSignals").out.not(),_clock_hack:!0}},tooltipMinWidth:55,markup:cl.prototype.markup.concat([{tagName:"path",className:"decor",attributes:{d:"M7.5 7.5 L7.5 22.5 L15 22.5 L15 7.5 L22.5 7.5 L22.5 22.5",stroke:"black"}},{tagName:"foreignObject",className:"tooltip",selector:"tooltip",children:[{tagName:"body",namespaceURI:"http://www.w3.org/1999/xhtml",children:[{tagName:"input",attributes:{type:"number",min:1,step:1}}]}]}]),_unsupportedPropChanges:cl.prototype._unsupportedPropChanges.concat(["bits"])}),Nl=ll.extend({presentationAttributes:ll.addPresentationAttributes({propagation:"SIGNAL"}),events:{"click input":"stopprop","mousedown input":"stopprop","touchstart input":"stopprop","change input":"_changePropagation","input input":"_changePropagation"},render(t){ll.prototype.render.apply(this,arguments),this.updatePropagation()},confirmUpdate(t){ll.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this.updatePropagation()},_changePropagation(t){const e=t.target.value,n=String(e)==String(Number(e));n&&this.model.set("propagation",Number(e)||1),this.$("input").toggleClass("invalid",!n)},updatePropagation(){this.$("input").val(this.model.get("propagation"))}}),Ll="M19 0v32h16c9 0 16-7 16-16S44 0 35 0H20z",Ol="M14.3 0l1.6 2s4.5 5.6 4.5 14s-4.5 14-4.5 14l-1.6 2H28c3.8 0 16.6-.5 25-16h0A28 28 0 0028 0H16.8z",Ml="M18-2v36l2-1 32-17h0L20-1z",Il={tagName:"path",selector:"xor_arc",attributes:{fill:"#000",d:"M6.8-1.2 10 2.7S14.2 8 14.2 16S10 29.3 10 29.3l-3.2 3.9H10l1.7-2.4s4.8-6 4.8-14.8c0-8.9-4.8-14.8-4.8-14.8l-1.7-2.4z"}},Rl={tagName:"circle",className:"body",selector:"neg_bubble",attributes:{stroke:"#000","stroke-width":"2px",cx:56,cy:16,r:4}};function jl(t=[]){return{tagName:"g",selector:"body",children:[{tagName:"path",className:"body gate",selector:"gate"}].concat(t)}}const Dl=ol.define("GateSVG",{bits:1,size:{width:60,height:32},ports:{groups:{in:{position:{name:"left",args:{dx:30}},attrs:{wire:{x2:-50},port:{refX:-50}},z:-1},out:{position:{name:"right",args:{dx:-30}},attrs:{wire:{x2:50},port:{refX:50}},z:-1}}}},{markup:ol.prototype.markup.concat([jl()]),_gateParams:ol.prototype._gateParams.concat(["bits"])}),Bl=Dl.define("Gate11",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:t}],Dl.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this._setPortsBits({in:e,out:e})})}}),Vl=Dl.define("GateX1",{inputs:2,attrs:{gate:{"vector-effect":"non-scaling-stroke"},xor_arc:{"vector-effect":"non-scaling-stroke"},neg_bubble:{"vector-effect":"non-scaling-stroke"}}},{initialize(){const t=this.get("bits"),e=this.get("inputs"),n=[];for(let r=1;r<=e;r++)n.push({id:"in"+r,group:"in",dir:"in",bits:t});n.push({id:"out",group:"out",dir:"out",bits:t}),this.get("ports").items=n;const r=e/2;this.set("size",{width:60*r,height:32*r}),this.attr("body/transform","translate(-4, 0) scale("+r+")"),this.prop("ports/groups/in/position/args/dx",30*r),this.prop("ports/groups/in/attrs/wire/x2",-30*r-20),this.prop("ports/groups/in/attrs/port/refX",-30*r-20),this.prop("ports/groups/out/position/args/dx",-30*r),this.prop("ports/groups/out/attrs/wire/x2",30*r+20),this.prop("ports/groups/out/attrs/port/refX",30*r+20),Dl.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{const n=this.get("inputs"),r={out:e};for(let t=1;t<=n;t++)r["in"+t]=e;this._setPortsBits(r)})},operation(t){let e=t.in1;for(let n=2;n<=this.get("inputs");n++)e=this.binoperation(e,t["in"+n]);return{out:this.finoperation(e)}},finoperation:t=>t,_gateParams:Dl.prototype._gateParams.concat(["inputs"]),_unsupportedPropChanges:Dl.prototype._unsupportedPropChanges.concat(["inputs"]),_operationHelpers:Dl.prototype._operationHelpers.concat(["binoperation","finoperation"])}),Fl=Dl.define("GateReduce",{},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t},{id:"out",group:"out",dir:"out",bits:1}],Dl.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this._setPortsBits({in:e})})}}),zl=Bl.define("Repeater",{attrs:{gate:{d:Ml}}},{operation:t=>({out:t.in})}),Gl=sl,Ul=Bl.define("Not",{attrs:{gate:{d:Ml}}},{operation:t=>({out:t.in.not()}),markup:ol.prototype.markup.concat([jl([Rl])])}),ql=sl,Hl=Vl.define("Or",{attrs:{gate:{d:Ol}}},{binoperation:(t,e)=>t.or(e)}),$l=sl,Wl=Vl.define("And",{attrs:{gate:{d:Ll}}},{binoperation:(t,e)=>t.and(e)}),Xl=sl,Yl=Vl.define("Nor",{attrs:{gate:{d:Ol}}},{binoperation:(t,e)=>t.or(e),finoperation:t=>t.not(),markup:ol.prototype.markup.concat([jl([Rl])])}),Zl=sl,Jl=Vl.define("Nand",{attrs:{gate:{d:Ll}}},{binoperation:(t,e)=>t.and(e),finoperation:t=>t.not(),markup:ol.prototype.markup.concat([jl([Rl])])}),Kl=sl,Ql=Vl.define("Xor",{attrs:{gate:{d:Ol}}},{binoperation:(t,e)=>t.xor(e),markup:ol.prototype.markup.concat([jl([Il])])}),th=sl,eh=Vl.define("Xnor",{attrs:{gate:{d:Ol}}},{binoperation:(t,e)=>t.xor(e),finoperation:t=>t.not(),markup:ol.prototype.markup.concat([jl([Il,Rl])])}),nh=sl,rh=Fl.define("OrReduce",{attrs:{gate:{d:Ol}}},{operation:t=>({out:t.in.reduceOr()})}),ih=sl,oh=Fl.define("NorReduce",{attrs:{gate:{d:Ol}}},{operation:t=>({out:t.in.reduceNor()}),markup:Fl.prototype.markup.concat([Rl])}),sh=sl,ah=Fl.define("AndReduce",{attrs:{gate:{d:Ll}}},{operation:t=>({out:t.in.reduceAnd()})}),uh=sl,ch=Fl.define("NandReduce",{attrs:{gate:{d:Ll}}},{operation:t=>({out:t.in.reduceNand()}),markup:ol.prototype.markup.concat([jl([Rl])])}),lh=sl,hh=Fl.define("XorReduce",{attrs:{gate:{d:Ol}}},{operation:t=>({out:t.in.reduceXor()}),markup:ol.prototype.markup.concat([jl([Il])])}),fh=sl,dh=Fl.define("XnorReduce",{attrs:{gate:{d:Ol}}},{operation:t=>({out:t.in.reduceXnor()}),markup:ol.prototype.markup.concat([jl([Il,Rl])])}),ph=sl;function gh(t){return t<=Number.MAX_SAFE_INTEGER&&t>=-Number.MAX_SAFE_INTEGER}const vh=ol.define("Arith",{size:{width:40,height:40},attrs:{body:{refR:.5,refCx:.5,refCy:.5},oper:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"12pt"}},ports:{groups:{in:{position:{name:"left",args:{dx:10}},attrs:{wire:{x2:-35},port:{refX:-35}},z:-1},out:{position:{name:"right",args:{dx:-10}},attrs:{wire:{x2:35},port:{refX:35}},z:-1}}}},{markup:ol.prototype.markup.concat([{tagName:"circle",className:"body",selector:"body"},{tagName:"text",className:"oper",selector:"oper"}]),_gateParams:ol.prototype._gateParams.concat(["bits","signed"]),_unsupportedPropChanges:ol.prototype._unsupportedPropChanges.concat(["signed"])}),mh=vh.define("Arith11",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],vh.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this._setPortsBits(e)})},operation(t){const e=this.get("bits");return t.in.isFullyDefined?{out:Hc.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(this.get("signed"))),e.out)}:{out:Hc.Vector3vl.xes(e.out)}},_operationHelpers:vh.prototype._operationHelpers.concat(["arithop"])}),yh=vh.define("Arith21",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],vh.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this._setPortsBits(e)})},operation(t){const e=this.get("bits"),n=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:Hc.Vector3vl.fromNumber(this.arithop(t.in1.toBigInt(n.in1&&n.in2),t.in2.toBigInt(n.in1&&n.in2)),e.out)}:{out:Hc.Vector3vl.xes(e.out)}},_operationHelpers:vh.prototype._operationHelpers.concat(["arithop"])});function bh(t,e,n,r,i,o,s){const a=t.get(t.bits-1),u=Hc.Vector3vl.make(Math.max(0,r-n),s?0:i?a:-1),c=t.concat(u);return(e<0?Hc.Vector3vl.make(-e,s?0:-1).concat(c):c.slice(e).concat(Hc.Vector3vl.make(e,s?0:o?c.get(c.bits-1):-1))).slice(0,r)}const xh=vh.define("Shift",{bits:{in1:1,in2:1,out:1},signed:{in1:!1,in2:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:t.out}],vh.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this._setPortsBits(e)})},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx");if(!t.in2.isFullyDefined)return{out:Hc.Vector3vl.xes(e.out)};const i=t.in2.toNumber(n.in2)*this.shiftdir;return{out:bh(t.in1,i,e.in1,e.out,n.in1,n.out,r)}},_gateParams:vh.prototype._gateParams.concat(["fillx"]),_unsupportedPropChanges:vh.prototype._unsupportedPropChanges.concat(["fillx"]),_operationHelpers:vh.prototype._operationHelpers.concat(["shiftdir"])}),wh=vh.define("BaseCompare",{bits:{in1:1,in2:1},signed:{in1:!1,in2:!1}},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in1",group:"in",dir:"in",bits:t.in1},{id:"in2",group:"in",dir:"in",bits:t.in2},{id:"out",group:"out",dir:"out",bits:1}],vh.prototype.initialize.apply(this,arguments),this.on("change:bits",(t,e)=>{this._setPortsBits(e)})}}),_h=wh.define("Compare",{},{operation(t){this.get("bits");const e=this.get("signed");return t.in1.isFullyDefined&&t.in2.isFullyDefined?{out:Hc.Vector3vl.fromBool(this.arithcomp(t.in1.toBigInt(e.in1&&e.in2),t.in2.toBigInt(e.in1&&e.in2)))}:{out:Hc.Vector3vl.xes(1)}},_operationHelpers:wh.prototype._operationHelpers.concat(["arithcomp"])}),Eh=wh.define("EqCompare",{},{operation(t){const e=this.get("bits"),n=this.get("signed"),r=e.in1>=e.in2?t.in1:t.in1.concat(Hc.Vector3vl.make(e.in2-e.in1,n.in1&&n.in2?t.in1.msb:-1)),i=e.in2>=e.in1?t.in2:t.in2.concat(Hc.Vector3vl.make(e.in1-e.in2,n.in1&&n.in2?t.in2.msb:-1));return{out:this.bincomp(r,i)}},_operationHelpers:wh.prototype._operationHelpers.concat(["bincomp"])}),Ah=mh.define("Negation",{attrs:{oper:{text:"-"}}},{arithop:t=>-t}),kh=sl,Sh=mh.define("UnaryPlus",{attrs:{oper:{text:"+"}}},{arithop:t=>t}),Th=sl,Ph=yh.define("Addition",{attrs:{oper:{text:"+"}}},{arithop:(t,e)=>t+e}),Ch=sl,Nh=yh.define("Subtraction",{attrs:{oper:{text:"-"}}},{arithop:(t,e)=>t-e}),Lh=sl,Oh=yh.define("Multiplication",{attrs:{oper:{text:"×"}}},{arithop:(t,e)=>t*e}),Mh=sl,Ih=yh.define("Division",{attrs:{oper:{text:"÷"}}},{arithop:(t,e)=>0n==e?t:t/e}),Rh=sl,jh=yh.define("Modulo",{attrs:{oper:{text:"%"}}},{arithop:(t,e)=>0n==e?t:t%e}),Dh=sl,Bh=yh.define("Power",{attrs:{oper:{text:"^"}}},{arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),Vh=sl,Fh=xh.define("ShiftLeft",{attrs:{oper:{text:"≪"}}},{shiftdir:-1}),zh=sl,Gh=xh.define("ShiftRight",{attrs:{oper:{text:"≫"}}},{shiftdir:1}),Uh=sl,qh=_h.define("Lt",{attrs:{oper:{text:"<"}}},{arithcomp:(t,e)=>t<e}),Hh=sl,$h=_h.define("Le",{attrs:{oper:{text:"≤"}}},{arithcomp:(t,e)=>t<=e}),Wh=sl,Xh=_h.define("Gt",{attrs:{oper:{text:">"}}},{arithcomp:(t,e)=>t>e}),Yh=sl,Zh=_h.define("Ge",{attrs:{oper:{text:"≥"}}},{arithcomp:(t,e)=>t>=e}),Jh=sl,Kh=Eh.define("Eq",{attrs:{oper:{text:"="}}},{bincomp:(t,e)=>t.xnor(e).reduceAnd()}),Qh=sl,tf=Eh.define("Ne",{attrs:{oper:{text:"≠"}}},{bincomp:(t,e)=>t.xor(e).reduceOr()}),ef=sl,nf=vh.define("OpConst",{leftOp:!1,constant:0},{initialize(){vh.prototype.initialize.apply(this,arguments);let t=this.get("constant");("string"==typeof t||t instanceof String)&&(t=BigInt(t),gh(t)&&(t=Number(t)),this.set("constant",t));const e=()=>{const t=30+10*String(this.get("constant")).length;this.prop("size",{width:t,height:t}),this.attr("oper/text",this.get("leftOp")?this.get("constant")+this.operSymbol:this.operSymbol+this.get("constant"))};e(),this.on("change:bits",(t,e)=>{this._setPortsBits(e)}),this.on("change:constant",()=>e()),this.on("change:leftOp",()=>e())},getGateParams(){const t=vh.prototype.getGateParams.apply(this,arguments);return"bigint"==typeof t.constant&&(gh(t.constant)?t.constant=Number(t.constant):t.constant=String(t.constant)),t},_gateParams:vh.prototype._gateParams.concat(["leftOp","constant"])}),rf=nf.define("ArithConst",{bits:{in:1,out:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],nf.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:Hc.Vector3vl.fromNumber(this.arithop(BigInt(r),t.in.toBigInt(n.in)),e.out)}:{out:Hc.Vector3vl.fromNumber(this.arithop(t.in.toBigInt(n.in),BigInt(r)),e.out)}:{out:Hc.Vector3vl.xes(e.out)}},_operationHelpers:nf.prototype._operationHelpers.concat(["arithop"])}),of=nf.define("ShiftConst",{bits:{in:1,out:1},signed:{in:!1,out:!1},fillx:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:t.out}],nf.prototype.initialize.apply(this,arguments)},operation(t){const e=this.get("bits"),n=this.get("signed"),r=this.get("fillx"),i=this.get("constant");if(this.get("leftOp")){if(!t.in.isFullyDefined)return{out:Hc.Vector3vl.xes(e.out)};const o=t.in.toNumber(n.in),s=Hc.Vector3vl.fromNumber(i);return{out:bh(s,o*this.shiftdir,s.bits,e.out,i<0,n.out,r)}}return console.assert(gh(i)),{out:bh(t.in,Number(i)*this.shiftdir,e.in,e.out,n.in,n.out,r)}},_gateParams:nf.prototype._gateParams.concat(["fillx"]),_operationHelpers:nf.prototype._operationHelpers.concat(["shiftdir"])}),sf=nf.define("BaseCompareConst",{bits:{in:1},signed:!1},{initialize(){const t=this.get("bits");this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in},{id:"out",group:"out",dir:"out",bits:1}],nf.prototype.initialize.apply(this,arguments)}}),af=sf.define("CompareConst",{},{operation(t){this.get("bits");const e=this.get("signed"),n=this.get("constant");return t.in.isFullyDefined?this.get("leftOp")?{out:Hc.Vector3vl.fromBool(this.arithcomp(BigInt(n),t.in.toBigInt(e.in)))}:{out:Hc.Vector3vl.fromBool(this.arithcomp(t.in.toBigInt(e.in),BigInt(n)))}:{out:Hc.Vector3vl.x}},_operationHelpers:sf.prototype._operationHelpers.concat(["arithcomp"])}),uf=sf.define("EqCompareConst",{},{operation(t){const e=this.get("bits"),n=(this.get("signed"),this.get("constant"));return this.get("leftOp")?{out:this.bincomp(Hc.Vector3vl.fromNumber(n,e.in),t.in)}:{out:this.bincomp(t.in,Hc.Vector3vl.fromNumber(n,e.in))}},_operationHelpers:sf.prototype._operationHelpers.concat(["bincomp"])}),cf=rf.define("AdditionConst",{},{operSymbol:"+",arithop:(t,e)=>t+e}),lf=sl,hf=rf.define("SubtractionConst",{},{operSymbol:"-",arithop:(t,e)=>t-e}),ff=sl,df=rf.define("MultiplicationConst",{},{operSymbol:"×",arithop:(t,e)=>t*e}),pf=sl,gf=rf.define("DivisionConst",{},{operSymbol:"÷",arithop:(t,e)=>0n==e?t:t/e}),vf=sl,mf=rf.define("ModuloConst",{},{operSymbol:"%",arithop:(t,e)=>0n==e?t:t%e}),yf=sl,bf=rf.define("PowerConst",{},{operSymbol:"^",arithop:(t,e)=>e>=0n?t**e:1n==t?1n:-1n==t?e%2n?-1n:1n:0n}),xf=sl,wf=of.define("ShiftLeftConst",{},{operSymbol:"≪",shiftdir:-1}),_f=sl,Ef=of.define("ShiftRightConst",{},{operSymbol:"≫",shiftdir:1}),Af=sl,kf=af.define("LtConst",{},{operSymbol:"<",arithcomp:(t,e)=>t<e}),Sf=sl,Tf=af.define("LeConst",{},{operSymbol:"≤",arithcomp:(t,e)=>t<=e}),Pf=sl,Cf=af.define("GtConst",{},{operSymbol:">",arithcomp:(t,e)=>t>e}),Nf=sl,Lf=af.define("GeConst",{},{operSymbol:"≥",arithcomp:(t,e)=>t>=e}),Of=sl,Mf=uf.define("EqConst",{},{operSymbol:"=",bincomp:(t,e)=>t.xnor(e).reduceAnd()}),If=sl,Rf=uf.define("NeConst",{},{operSymbol:"≠",bincomp:(t,e)=>t.xor(e).reduceOr()}),jf=sl,Df=cl.define("BitExtend",{extend:{input:1,output:1},propagation:0,attrs:{value:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle"}}},{initialize(){const t=this.get("extend");console.assert(t.input<=t.output),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.input},{id:"out",group:"out",dir:"out",bits:t.output}],cl.prototype.initialize.apply(this,arguments),this.on("change:extend",(t,e)=>{this._setPortsBits({in:e.input,out:e.output})})},operation(t){const e=this.get("extend");return{out:t.in.concat(Hc.Vector3vl.make(e.output-e.input,this._extBit(t.in)))}},markup:cl.prototype.markup.concat([{tagName:"text",className:"value",selector:"value"}]),_gateParams:cl.prototype._gateParams.concat(["extend"]),_operationHelpers:cl.prototype._operationHelpers.concat(["_extBit"])}),Bf=ll.extend({_autoResizeBox:!0,_calculateBoxWidth(){return this.el.querySelector("text.value").getBBox().width+10}}),Vf=Df.define("ZeroExtend",{attrs:{value:{text:"zero-extend"}}},{_extBit:t=>-1}),Ff=Bf,zf=Df.define("SignExtend",{attrs:{value:{text:"sign-extend"}}},{_extBit:t=>t.get(t.bits-1)}),Gf=Bf,Uf=cl.define("BusSlice",{slice:{first:0,count:1,total:2},propagation:0,size:{width:40,height:24}},{initialize(){const t=this.get("slice"),e=1==t.count?t.first:t.first+"-"+(t.first+t.count-1);this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.total},{id:"out",group:"out",dir:"out",bits:t.count,portlabel:e,labelled:!0}],cl.prototype.initialize.apply(this,arguments),this.on("change:slice",(t,e)=>{this._setPortsBits({in:e.total,out:e.count})})},operation(t){const e=this.get("slice");return{out:t.in.slice(e.first,e.first+e.count)}},_gateParams:cl.prototype._gateParams.concat(["slice"])}),qf=ll.extend({_autoResizeBox:!0}),Hf=cl.define("BusRegroup",{groups:[1],propagation:0,size:{width:40,height:void 0}},{initialize(){var t=0;const e=[],n=this.get("groups");this.get("size").height=16*n.length+8;for(const[r,i]of n.entries()){const n=t+(i>1?"-"+(t+i-1):"");t+=i,e.push({id:this.group_dir+r,group:this.group_dir,dir:this.group_dir,bits:i,portlabel:n,labelled:!0})}this.set("bits",t);const r="out"==this.group_dir?"in":"out";e.push({id:r,group:r,dir:r,bits:t}),this.get("ports").items=e,cl.prototype.initialize.apply(this,arguments)},_gateParams:cl.prototype._gateParams.concat(["groups"]),_unsupportedPropChanges:cl.prototype._unsupportedPropChanges.concat(["groups"])}),$f=ll.extend({_autoResizeBox:!0}),Wf=Hf.define("BusGroup",{},{group_dir:"in",operation(t){const e=[];for(const n of this.get("groups").keys())e.push(t["in"+n]);return{out:Hc.Vector3vl.concat(...e)}}}),Xf=$f,Yf=Hf.define("BusUngroup",{},{group_dir:"out",operation(t){const e={};let n=0;for(const[r,i]of this.get("groups").entries())e["out"+r]=t.in.slice(n,n+i),n+=i;return e}}),Zf=$f,Jf={TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",CENTER:"center"};function Kf(t,e){const n=new Cr(t);switch(e){case void 0:throw new Error("Position required");case Jf.LEFT:case"leftMiddle":return n.leftMiddle();case Jf.RIGHT:case"rightMiddle":return n.rightMiddle();case Jf.TOP:case"topMiddle":return n.topMiddle();case Jf.BOTTOM:case"bottomMiddle":return n.bottomMiddle();case Jf.TOP_LEFT:case"topLeft":case"origin":return n.topLeft();case Jf.TOP_RIGHT:case"topRight":return n.topRight();case Jf.BOTTOM_LEFT:case"bottomLeft":return n.bottomLeft();case Jf.BOTTOM_RIGHT:case"bottomRight":case"corner":return n.bottomRight();case Jf.CENTER:return n.center();default:throw new Error(`Unknown position: ${e}`)}}var Qf=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,Ze({silent:!0},e))},td={add:!0,remove:!0,merge:!0},ed={add:!0,remove:!1},nd=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};Ze(Qf.prototype,Ko,{model:fs,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){return this.set(t,Ze({merge:!1},e,ed))},remove:function(t,e){e=Ze({},e);var n=!Array.isArray(t);t=n?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),n?r[0]:r},set:function(t,e){if(null!=t){e=Ze({},td,e);var n=!Array.isArray(t);t=n?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var i,o,s=[],a=[],u=[],c=[],l={},h=e.add,f=e.merge,d=e.remove,p=!1,g=this.comparator&&null==r&&!1!==e.sort,v=Ye(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){i=t[o];var m=this.get(i);if(m){if(f&&i!==m){var y=this._isModel(i)?i.attributes:i;m.set(y,e),u.push(m),g&&!p&&(p=m.hasChanged(v))}l[m.cid]||(l[m.cid]=!0,s.push(m)),t[o]=m}else h&&(i=t[o]=this._prepareModel(i,e))&&(a.push(i),this._addReference(i,e),l[i.cid]=!0,s.push(i))}if(d){for(o=0;o<this.length;o++)l[(i=this.models[o]).cid]||c.push(i);c.length&&this._removeModels(c,e)}var b=!1,x=!g&&h&&d;if(s.length&&x?(b=this.length!==s.length||this.models.some(function(t,e){return t!==s[e]}),this.models.length=0,nd(this.models,s,0),this.length=this.models.length):a.length&&(g&&(p=!0),nd(this.models,a,null==r?this.length:r),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(o=0;o<a.length;o++)null!=r&&(e.index=r+o),(i=a[o]).trigger("add",i,this,e);(p||b)&&this.trigger("sort",this,e),(a.length||c.length||u.length)&&(e.changes={added:a,removed:c,merged:u},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?rn(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,Ze({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,Ze({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,Ze({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return Array.prototype.slice.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return un(e)&&(e=e.bind(this)),1===n||Ye(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||"id"]},values:function(){return new od(this,sd)},keys:function(){return new od(this,ad)},entries:function(){return new od(this,ud)},each:function(t,e){this.models.forEach(t,e)},filter:function(t,e){return this.models.filter(t,e)},find:function(t,e){return this.models.find(t,e)},findIndex:function(t,e){return this.models.findIndex(t,e)},first:function(){return this.models[0]},includes:function(t){return this.models.includes(t)},last:function(){return this.models[this.models.length-1]},isEmpty:function(){return!this.models.length},map:function(t,e){return this.models.map(t,e)},reduce:function(t,e=this.first()){return this.models.reduce(t,e)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?rn(e):{}).collection=this,(n=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger("invalid",this,n.validationError,e),!1):n);var n},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.models.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=o,i.trigger("remove",i,this,e)),n.push(i),this._removeReference(i,e)}}return t.length>0&&!e.silent&&delete e.index,n},_isModel:function(t){return t instanceof fs},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes,t.idAttribute);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("changeId"===t){var i=this.modelId(e.previousAttributes(),e.idAttribute),o=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e)}}this.trigger.apply(this,arguments)}});var rd="function"==typeof Symbol&&Symbol.iterator;rd&&(Qf.prototype[rd]=Qf.prototype.values);var id,od=function(t,e){this._collection=t,this._kind=e,this._index=0},sd=1,ad=2,ud=3;rd&&(od.prototype[rd]=function(){return this}),od.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===sd)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===ad?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}},function(t,e,n,r){xn(n,function(n,i){e[i]&&(t.prototype[i]=function(t,e,n,r){switch(e){case 1:return function(){return t[n](this[r])};case 2:return function(e){return t[n](this[r],e)};case 3:return function(e,i){return t[n](this[r],ls(e,this),i)};case 4:return function(e,i,o){return t[n](this[r],ls(e,this),i,o)};default:return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this[r]),t[n].apply(t,e)}}}(e,n,i,r))})}((id=[Qf,{toArray:1,sortBy:3},"models"])[0],{sortBy:hn,toArray:ln},id[1],id[2]),Qf.extend=cs;const cd={cells:function(t){return function(){var e=Array.from(arguments),n=e.length,r=n>0&&e[0]||[],i=n>1&&e[n-1]||{};return Array.isArray(r)||(i instanceof ta?r=e:r instanceof ta&&(e.length>1&&e.pop(),r=e)),i instanceof ta&&(i={}),t.call(this,r,i)}}},ld=Qf.extend({initialize:function(t,e){e.cellNamespace?this.cellNamespace=e.cellNamespace:this.cellNamespace="undefined"!=typeof joint&&vn(joint,"shapes")?joint.shapes:null,this.graph=e.graph},model:function(t,e){const n=e.collection.cellNamespace,{type:r}=t,i=Po(n,r,".");if(!i)throw new Error(`dia.Graph: Could not find cell constructor for type: '${r}'. Make sure to add the constructor to 'cellNamespace'.`);return new i(t,e)},_addReference:function(t,e){Qf.prototype._addReference.apply(this,arguments),e.dry||t.graph||(t.graph=this.graph)},_removeReference:function(t,e){Qf.prototype._removeReference.apply(this,arguments),e.dry||t.graph!==this.graph||(t.graph=null)},comparator:function(t){return t.get("z")||0}}),hd=fs.extend({initialize:function(t,e){var n=new ld([],{model:(e=e||{}).cellModel,cellNamespace:e.cellNamespace,graph:this});fs.prototype.set.call(this,"cells",n),n.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this._out={},this._in={},this._nodes={},this._edges={},this._batches={},n.on("add",this._restructureOnAdd,this),n.on("remove",this._restructureOnRemove,this),n.on("reset",this._restructureOnReset,this),n.on("change:source",this._restructureOnChangeSource,this),n.on("change:target",this._restructureOnChangeTarget,this),n.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var{source:e,target:n}=t.attributes;e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var{source:e,target:n}=t.attributes;e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],n.id&&this._in[n.id]&&this._in[n.id][t.id]&&delete this._in[n.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},t.forEach(this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var n=t.attributes.source;n.id&&((this._out[n.id]||(this._out[n.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var n=t.get("target");n.id&&((this._in[n.id]||(this._in[n.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(t={}){var e=fs.prototype.toJSON.apply(this,arguments);return e.cells=this.get("cells").toJSON(t.cellAttributes),e},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,n){var r;return"object"==typeof t?(r=t,n=e):(r={})[t]=e,r.hasOwnProperty("cells")&&(this.resetCells(r.cells,n),r=yn(r,"cells")),fs.prototype.set.call(this,r,n)},clear:function(t){t=Ze({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var n=e.sortBy(function(t){return t.isLink()?1:2});do{n.shift().remove(t)}while(n.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t){let e;if(e=t instanceof fs?t.attributes:t,!Ye(e.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},minZIndex:function(){var t=this.get("cells").first();return t&&t.get("z")||0},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return Array.isArray(t)?this.addCells(t,e):(t instanceof fs?t.has("z")||t.set("z",this.maxZIndex()+1):void 0===t.z&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return 0===t.length||(t=fn(t),e.maxPosition=e.position=t.length-1,this.startBatch("add",e),t.forEach(function(t){this.addCell(t,e),e.position--},this),this.stopBatch("add",e)),this},resetCells:function(t,e){var n=ln(t).map(function(t){return this._prepareCell(t,e)},this);return this.get("cells").reset(n,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),Qe(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,n){(n=n||{}).clear||(n.disconnectLinks?this.disconnectLinks(t,n):this.removeLinks(t,n)),this.get("cells").remove(t,{silent:!0})},transferCellEmbeds:function(t,e,n={}){const r="transfer-embeds";this.startBatch(r);const i=t.getEmbeddedCells();e.embed(i,{...n,reparent:!0}),this.stopBatch(r)},transferCellConnectedLinks:function(t,e,n={}){const r="transfer-connected-links";this.startBatch(r),this.getConnectedLinks(t,n).forEach(r=>{r.getSourceCell()===t&&r.prop(["source","id"],e.id,n),r.getTargetCell()===t&&r.prop(["target","id"],e.id,n)}),this.stopBatch(r)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return this.get("cells").toArray().filter(t=>t.isElement())},getLinks:function(){return this.get("cells").toArray().filter(t=>t.isLink())},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var n=(e=e||{}).indirect,r=e.inbound,i=e.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=[],s={};function a(t,e){if(xn(t.getOutboundEdges(e.id),function(e,c){if(!s[c]){var l=t.getCell(c);o.push(l),s[c]=!0,n&&(r&&u(t,l),i&&a(t,l))}}.bind(t)),n&&e.isLink()){var c=e.getTargetCell();c&&c.isLink()&&(s[c.id]||(o.push(c),a(t,c)))}}function u(t,e){if(xn(t.getInboundEdges(e.id),function(e,c){if(!s[c]){var l=t.getCell(c);o.push(l),s[c]=!0,n&&(r&&u(t,l),i&&a(t,l))}}.bind(t)),n&&e.isLink()){var c=e.getSourceCell();c&&c.isLink()&&(s[c.id]||(o.push(c),u(t,c)))}}if(i&&a(this,t),r&&u(this,t),e.deep){var c=t.getEmbeddedCells({deep:!0}),l={};c.forEach(function(t){t.isElement()&&(l[t.id]=!0)}),c.forEach(function(t){t.isLink()||(i&&xn(this.getOutboundEdges(t.id),function(t,n){if(!s[n]){var r=this.getCell(n),{source:i,target:a}=r.attributes,u=i.id,c=a.id;if(!e.includeEnclosed&&u&&l[u]&&c&&l[c])return;o.push(this.getCell(n)),s[n]=!0}}.bind(this)),r&&xn(this.getInboundEdges(t.id),function(t,n){if(!s[n]){var r=this.getCell(n),{source:i,target:a}=r.attributes,u=i.id,c=a.id;if(!e.includeEnclosed&&u&&l[u]&&c&&l[c])return;o.push(this.getCell(n)),s[n]=!0}}.bind(this)))},this)}return o},getNeighbors:function(t,e){e||(e={});var n=e.inbound,r=e.outbound;void 0===n&&void 0===r&&(n=r=!0);var i=this.getConnectedLinks(t,e).reduce(function(i,o){var{source:s,target:a}=o.attributes,u=o.hasLoop(e);if(n&&vn(s,"id")&&!i[s.id]){var c=this.getCell(s.id);c.isElement()&&(!u&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(i[s.id]=c))}if(r&&vn(a,"id")&&!i[a.id]){var l=this.getCell(a.id);l.isElement()&&(!u&&(!l||l===t||e.deep&&l.isEmbeddedIn(t))||(i[a.id]=l))}return i}.bind(this),{});if(t.isLink()){if(n){var o=t.getSourceCell();o&&o.isElement()&&!i[o.id]&&(i[o.id]=o)}if(r){var s=t.getTargetCell();s&&s.isElement()&&!i[s.id]&&(i[s.id]=s)}}return ln(i)},getCommonAncestor:function(){var t=Array.from(arguments).map(function(t){for(var e=[],n=t.get("parent");n;)e.push(n),n=this.getCell(n).get("parent");return e},this);t=t.sort(function(t,e){return t.length-e.length});var e=ln(t.shift()).find(function(e){return t.every(function(t){return t.includes(e)})});return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},Ze({},e,{outbound:!0})),n},cloneCells:ds,cloneSubgraph:function(t,e){var n=this.getSubgraph(t,e);return this.cloneCells(n)},getSubgraph:function(t,e){e=e||{};var n=[],r={},i=[],o=[];return ln(t).forEach(function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t)),e.deep&&t.getEmbeddedCells({deep:!0}).forEach(function(t){r[t.id]||(n.push(t),r[t.id]=t,t.isLink()?o.push(t):i.push(t))})}),o.forEach(function(t){var{source:e,target:o}=t.attributes;if(e.id&&!r[e.id]){var s=this.getCell(e.id);n.push(s),r[s.id]=s,i.push(s)}if(o.id&&!r[o.id]){var a=this.getCell(o.id);n.push(this.getCell(o.id)),r[a.id]=a,i.push(a)}},this),i.forEach(function(t){this.getConnectedLinks(t,e).forEach(function(t){var{source:e,target:i}=t.attributes;!r[t.id]&&e.id&&r[e.id]&&i.id&&r[i.id]&&(n.push(t),r[t.id]=t)})},this),n},getPredecessors:function(t,e){e=e||{};var n=[];return this.search(t,function(e){e!==t&&n.push(e)},Ze({},e,{inbound:!0})),n},search:function(t,e,n){(n=n||{}).breadthFirst?this.bfs(t,e,n):this.dfs(t,e,n)},bfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){var s=o.shift();if(r[s.id])continue;if(r[s.id]=!0,!1===e.call(this,s,i[s.id]))continue;const t=this.getNeighbors(s,n);for(let e=0,n=t.length;e<n;e++){const n=t[e];i[n.id]=i[s.id]+1,o.push(n)}}},dfs:function(t,e,n={}){const r={},i={},o=[];for(o.push(t),i[t.id]=0;o.length>0;){const t=o.pop();if(r[t.id])continue;if(r[t.id]=!0,!1===e.call(this,t,i[t.id]))continue;const s=this.getNeighbors(t,n),a=o.length;for(let e=0,n=s.length;e<n;e++){const n=s[e];i[n.id]=i[t.id]+1,o.splice(a,0,n)}}},getSources:function(){var t=[];return xn(this._nodes,function(e,n){this._in[n]&&!sn(this._in[n])||t.push(this.getCell(n))}.bind(this)),t},getSinks:function(){var t=[];return xn(this._nodes,function(e,n){this._out[n]&&!sn(this._out[n])||t.push(this.getCell(n))}.bind(this)),t},isSource:function(t){return!this._in[t.id]||sn(this._in[t.id])},isSink:function(t){return!this._out[t.id]||sn(this._out[t.id])},isSuccessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{outbound:!0}),n},isPredecessor:function(t,e){var n=!1;return this.search(t,function(r){if(r===e&&r!==t)return n=!0,!1},{inbound:!0}),n},isNeighbor:function(t,e,n){var r=(n=n||{}).inbound,i=n.outbound;void 0===r&&void 0===i&&(r=i=!0);var o=!1;return this.getConnectedLinks(t,n).forEach(function(t){var{source:n,target:s}=t.attributes;return r&&vn(n,"id")&&n.id===e.id||i&&vn(s,"id")&&s.id===e.id?(o=!0,!1):void 0}),o},disconnectLinks:function(t,e){this.getConnectedLinks(t).forEach(function(n){n.set(n.attributes.source.id===t.id?"source":"target",{x:0,y:0},e)})},removeLinks:function(t,e){Qe(this.getConnectedLinks(t),"remove",e)},findElementsAtPoint:function(t,e){return this._filterAtPoint(this.getElements(),t,e)},findLinksAtPoint:function(t,e){return this._filterAtPoint(this.getLinks(),t,e)},findCellsAtPoint:function(t,e){return this._filterAtPoint(this.getCells(),t,e)},_filterAtPoint:function(t,e,n={}){return t.filter(t=>t.getBBox({rotate:!0}).containsPoint(e,n))},findElementsInArea:function(t,e={}){return this._filterInArea(this.getElements(),t,e)},findLinksInArea:function(t,e={}){return this._filterInArea(this.getLinks(),t,e)},findCellsInArea:function(t,e={}){return this._filterInArea(this.getCells(),t,e)},_filterInArea:function(t,e,n={}){const r=new Cr(e),{strict:i=!1}=n,o=i?"containsRect":"intersect";return t.filter(t=>r[o](t.getBBox({rotate:!0})))},findElementsUnderElement:function(t,e){return this._filterCellsUnderElement(this.getElements(),t,e)},findLinksUnderElement:function(t,e){return this._filterCellsUnderElement(this.getLinks(),t,e)},findCellsUnderElement:function(t,e){return this._filterCellsUnderElement(this.getCells(),t,e)},_isValidElementUnderElement:function(t,e){return t.id!==e.id&&!t.isEmbeddedIn(e)},_isValidLinkUnderElement:function(t,e){return t.source().id!==e.id&&t.target().id!==e.id&&!t.isEmbeddedIn(e)},_validateCellsUnderElement:function(t,e){return t.filter(t=>t.isLink()?this._isValidLinkUnderElement(t,e):this._isValidElementUnderElement(t,e))},_getFindUnderElementGeometry:function(t,e="bbox"){const n=t.getBBox({rotate:!0});return"bbox"!==e?Kf(n,e):n},_filterCellsUnderElement:function(t,e,n={}){const r=this._getFindUnderElementGeometry(e,n.searchBy),i=r.type===tr.Point?this._filterAtPoint(t,r):this._filterInArea(t,r,n);return this._validateCellsUnderElement(i,e)},findModelsInArea:function(t,e){return this.findElementsInArea(t,e)},findModelsFromPoint:function(t){return this.findElementsAtPoint(t)},findModelsUnderElement:function(t,e){return this.findElementsUnderElement(t,e)},getBBox:function(){return this.getCellsBBox(this.getCells())},getCellsBBox:function(t,e={}){const{rotate:n=!0}=e;return ln(t).reduce(function(t,e){const r=e.getBBox({rotate:n});return r?t?t.union(r):r:t},null)},translate:function(t,e,n){var r=this.getCells().filter(function(t){return!t.isEmbedded()});return Qe(r,"translate",t,e,n),this},resize:function(t,e,n){return this.resizeCells(t,e,this.getCells(),n)},resizeCells:function(t,e,n,r){var i=this.getCellsBBox(n);if(i){var o=Math.max(t/i.width,0),s=Math.max(e/i.height,0);Qe(n,"scale",o,s,i.origin(),r)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",Ze({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",Ze({},e,{batchName:t}))},hasActiveBatch:function(t){const e=this._batches;let n;return n=0===arguments.length?Object.keys(e):Array.isArray(t)?t:[t],n.some(t=>e[t]>0)}},{validations:{multiLinks:function(t,e){var{source:n,target:r}=e.attributes;if(n.id&&r.id){var i=e.getSourceCell();if(i&&t.getConnectedLinks(i,{outbound:!0}).filter(function(t){var{source:e,target:i}=t.attributes;return e&&e.id===n.id&&(!e.port||e.port===n.port)&&i&&i.id===r.id&&(!i.port||i.port===r.port)}).length>1)return!1}return!0},linkPinning:function(t,e){var{source:n,target:r}=e.attributes;return n.id&&r.id}}});!function(t,e,n){if(Ye(n)){if(!cd[n])throw new Error('Unknown wrapper: "'+n+'"');n=cd[n]}if(!un(n))throw new Error("Wrapper must be a function.");ln(["resetCells","addCells","removeCells"]).forEach(function(e){t[e]=n(t[e])})}(hd.prototype,0,cd.cells);const fd=cl.define("Subcircuit",{propagation:0,warning:!1,attrs:{wrapper:{refWidth:1,refHeight:1,stroke:"red",strokeWidth:10},type:{refX:.5,refY:-10,textAnchor:"middle",textVerticalAnchor:"middle",fontSize:"8pt"}}},{initialize(){this.bindAttrToProp("type/text","celltype");const t=this.get("graph");console.assert(t instanceof hd),t.set("subcircuit",this);const e=t.getCells().filter(t=>t instanceof dl),n=e.filter(t=>t instanceof gl),r=e.filter(t=>t instanceof wl);function i(t,e){return t.has("order")||e.has("order")?t.get("order")-e.get("order"):t.get("net").localeCompare(e.get("net"))}n.sort(i),r.sort(i);const o={width:80,height:16*Math.max(n.length,r.length)+8},s=[],a={};for(const[t,e]of n.entries())s.push({id:e.get("net"),group:"in",dir:"in",bits:e.get("bits"),labelled:!0});for(const[t,e]of r.entries())s.push({id:e.get("net"),group:"out",dir:"out",bits:e.get("bits"),labelled:!0});for(const t of e)a[t.get("net")]=t.get("id");this.set("size",o),this.set("circuitIOmap",a),this.get("ports").items=s,this.set("warning",t._warnings>0),cl.prototype.initialize.apply(this,arguments)},_resetPortValue(t){const e=this.get("circuitIOmap"),n=this.get("graph");return"in"==t.dir?n.getCell(e[t.id]).get("outputSignals").out:"out"==t.dir?n.getCell(e[t.id]).get("inputSignals").in:cl.prototype._resetPortValue.call(this,t)},getLayoutSize(){const t=this.size();return t.height+=10,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+10})},getPortsPositions(){const t=cl.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+10;return e},markup:[{tagName:"rect",selector:"wrapper"}].concat(cl.prototype.markup,[{tagName:"text",className:"type",selector:"type"}],cl.prototype.markupZoom),_gateParams:cl.prototype._gateParams.concat(["celltype"]),_unsupportedPropChanges:cl.prototype._unsupportedPropChanges.concat(["celltype"])}),dd=ll.extend({attrs:qc.merge({},ll.prototype.attrs,{warning:{warn:{wrapper:{"stroke-opacity":"0.5"}},none:{wrapper:{"stroke-opacity":"0"}}}}),_autoResizeBox:!0,presentationAttributes:ll.addPresentationAttributes({warning:"WARNING"}),confirmUpdate(t){ll.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"WARNING")&&this._updateWarning()},_updateWarning(){const t=this.model.get("warning"),e=this.attrs.warning[t?"warn":"none"];this._applyAttrs(e)},update(){ll.prototype.update.apply(this,arguments),this._updateWarning()},events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"zoomInCircuit"},zoomInCircuit(t){return t.stopPropagation(),this.paper.trigger("open:subcircuit",this.model),!1}}),pd=ol.define("GenMux",{bits:{in:1,sel:1},size:{width:40,height:void 0},ports:{groups:{in2:{position:{name:"top",args:{y:5}},attrs:qc.merge({},il,{wire:{x2:0,y2:-25},port:{magnet:"passive",refY:-25},bits:{refDx:-5,refDy:2,textAnchor:"start"}}),z:-1}}},attrs:{label:{refDy:8}}},{initialize(){const t=this.get("bits"),e=[{id:"sel",group:"in2",dir:"in",bits:t.sel},{id:"out",group:"out",dir:"out",bits:t.in}],n=this.muxInputs(t.sel);this.get("size").height=16*n.length+8;const r="M"+[[2,0],[5,5],[10,-5]].map(t=>t.join(" ")).join(" L");for(const[i,o]of n.entries()){const n={id:"in"+i,group:"in",dir:"in",bits:t.in,decor:r};o&&(n.portlabel=String(o),n.labelled=!0),e.push(n)}this.get("ports").items=e,ol.prototype.initialize.apply(this,arguments);const i=t=>this.attr(["body","points"],[[0,-5],[t.width,5],[t.width,t.height-5],[0,t.height+5]].map(t=>t.join(",")).join(" "));i(this.get("size")),this.on("change:size",(t,e)=>i(e))},operation(t){const e=this.muxInput(t.sel);return void 0===e?{out:Hc.Vector3vl.xes(this.get("bits").in)}:{out:t["in"+e]}},getLayoutSize(){const t=this.size();return t.height+=30,t},setLayoutPosition(t){this.set("position",{x:t.x,y:t.y+20})},getPortsPositions(){const t=ol.prototype.getPortsPositions.apply(this,arguments),e={};for(const n in t)e[n]={...t[n]},e[n].y=e[n].y+20;return e},markup:ol.prototype.markup.concat([{tagName:"polygon",className:"body",selector:"body"}]),_gateParams:ol.prototype._gateParams.concat(["bits"]),_unsupportedPropChanges:ol.prototype._unsupportedPropChanges.concat(["bits"]),_operationHelpers:ol.prototype._operationHelpers.concat(["muxInput"])}),gd=sl.extend({initialize(){this.ins=this.model.muxInputs(this.model.get("bits").sel),sl.prototype.initialize.apply(this,arguments)},confirmUpdate(t){sl.prototype.confirmUpdate.apply(this,arguments),this.hasFlag(t,"SIGNAL")&&this._updateMux(this.model.get("inputSignals"))},render(){sl.prototype.render.apply(this,arguments),this._updateMux(this.model.get("inputSignals"))},_updateMux(t){const e=this.model.muxInput(t.sel);for(const t of this.ins.keys())this.$("[port=in"+t+"] path.decor").css("visibility",e==t?"visible":"hidden")}}),vd=pd.define("Mux",{},{muxInputs:t=>Array(1<<t),muxInput:t=>t.isFullyDefined?t.toBigInt().toString():void 0}),md=gd,yd=pd.define("Mux1Hot",{attrs:{info:{refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",text:"1Hot",transform:"rotate(90)"}}},{markup:pd.prototype.markup.concat([{tagName:"text",className:"info",selector:"info"}]),muxInputs:t=>Array(t+1),muxInput:t=>{const e=t.toArray();return t.isFullyDefined&&e.filter(t=>1==t).length<=1?String(e.indexOf(1)+1):void 0}}),bd=gd,xd=pd.define("MuxSparse",{inputs:void 0,default_input:!1},{initialize(){const t=this.get("inputs");for(let e=0;e<t.length;e++)"bigint"!=typeof t[e]&&(t[e]=BigInt(t[e]));pd.prototype.initialize.apply(this,arguments)},muxInputs(t){return this.get("default_input")?["*"].concat(this.get("inputs")):this.get("inputs")},muxInput(t){const e=this.get("default_input");if(!t.isFullyDefined)return;const n=this.get("inputs").indexOf(t.toBigInt());return n<0?e?0:void 0:e?n+1:n},_gateParams:pd.prototype._gateParams.concat(["inputs","default_input"]),_unsupportedPropChanges:pd.prototype._unsupportedPropChanges.concat(["inputs","default_input"])}),wd=gd,_d=cl.define("Dff",{bits:1,initial:"x",size:{width:80,height:void 0},ports:{groups:{in:{position:cl.prototype._getStackedPosition({side:"left"})},out:{position:cl.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=(this.get("initial"),this.get("polarity")||{}),n=[];this.get("no_data")||n.push({id:"in",group:"in",dir:"in",bits:t,portlabel:"D",labelled:!0}),n.push({id:"out",group:"out",dir:"out",bits:t,portlabel:"Q",labelled:!0}),"arst"in e&&!this.get("arst_value")&&this.set("arst_value",Array(t).fill("0").join("")),"srst"in e&&!this.get("srst_value")&&this.set("srst_value",Array(t).fill("0").join(""));let r=1;"aload"in e&&(r+=2,n.push({id:"ain",group:"in",dir:"in",bits:t,portlabel:"AD",labelled:!0}),n.push({id:"aload",group:"in",dir:"in",bits:1,polarity:e.aload,labelled:!0})),"clock"in e&&(r++,n.push({id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:cl.prototype.decorClock,labelled:!0})),"set"in e&&(r++,n.push({id:"set",group:"in",dir:"in",bits:t,polarity:e.set,portlabel:"S",labelled:!0})),"clr"in e&&(r++,n.push({id:"clr",group:"in",dir:"in",bits:t,polarity:e.clr,portlabel:"R",labelled:!0})),"srst"in e&&(r++,n.push({id:"srst",group:"in",dir:"in",bits:1,polarity:e.srst,labelled:!0})),"arst"in e&&(r++,n.push({id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0})),"enable"in e&&(r++,n.push({id:"en",group:"in",dir:"in",bits:1,polarity:e.enable,labelled:!0})),this.get("size").height=16*r+8,this.get("ports").items=n,this.last_clk=0,cl.prototype.initialize.apply(this,arguments)},_resetPortValue(t){return"out"==t.id&&"out"==t.dir?Hc.Vector3vl.fromBin(this.get("initial"),t.bits):cl.prototype._resetPortValue.call(this,t)},operation(t){const e=this.get("polarity"),n=t=>e[t]?1:-1;let r,i,o;const s=t=>({out:i?t.and(o).or(i):t});if("clock"in e&&(r=this.last_clk,this.last_clk=t.clk.get(0)),"arst"in e&&t.arst.get(0)==n("arst"))return{out:Hc.Vector3vl.fromBin(this.get("arst_value"),this.get("bits"))};if("aload"in e&&t.aload.get(0)==n("aload"))return{out:t.ain};if("set"in e&&(i=e.set?t.set:t.set.not(),o=e.set?t.set.not():t.set),"clr"in e){i=i||Hc.Vector3vl.zeros(this.get("bits"));const n=e.clr?t.clr.not():t.clr;o=o?n.and(o):n}return"enable"in e&&t.en.get(0)!=n("enable")&&this.get("enable_srst")?s(this.get("outputSignals").out):!("clock"in e)||t.clk.get(0)==n("clock")&&r==-n("clock")?"srst"in e&&t.srst.get(0)==n("srst")?s(Hc.Vector3vl.fromBin(this.get("srst_value"),this.get("bits"))):"enable"in e&&t.en.get(0)!=n("enable")&&!this.get("enable_srst")||this.get("no_data")?s(this.get("outputSignals").out):s(t.in):s(this.get("outputSignals").out)},_gateParams:cl.prototype._gateParams.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"]),_unsupportedPropChanges:cl.prototype._unsupportedPropChanges.concat(["polarity","bits","initial","arst_value","srst_value","enable_srst","no_data"])}),Ed=ll.extend({_autoResizeBox:!0});Hc.Display3vlWithRegex;const Ad=cl.define("Memory",{bits:1,abits:1,rdports:[],wrports:[],words:void 0,offset:0,attrs:{portsplit:{stroke:"black"}},ports:{groups:{in:{position:cl.prototype._getStackedPosition({side:"left"})},out:{position:cl.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("abits");this.get("rdports"),this.get("wrports");let n=0,r=0;const i=[],o=[];for(const[s,a]of this._memrdports())i.push({id:s+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0},{id:s+"data",group:"out",dir:"out",bits:t,portlabel:"data",labelled:!0,args:{idxOffset:r}}),n+=1,"srst_polarity"in a&&(n++,r++,i.push({id:s+"srst",group:"in",dir:"in",bits:1,portlabel:"srst",polarity:a.srst_polarity,labelled:!0})),"arst_polarity"in a&&(n++,r++,i.push({id:s+"arst",group:"in",dir:"in",bits:1,portlabel:"arst",polarity:a.arst_polarity,labelled:!0})),"enable_polarity"in a&&(n++,r++,i.push({id:s+"en",group:"in",dir:"in",bits:1,portlabel:"en",polarity:a.enable_polarity,labelled:!0})),"clock_polarity"in a&&(n++,r++,i.push({id:s+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:a.clock_polarity,decor:cl.prototype.decorClock,labelled:!0})),o.push(n);for(const[r,s]of this._memwrports())n+=2,i.push({id:r+"data",group:"in",dir:"in",bits:t,portlabel:"data",labelled:!0},{id:r+"addr",group:"in",dir:"in",bits:e,portlabel:"addr",labelled:!0}),"enable_polarity"in s&&(n++,i.push({id:r+"en",group:"in",dir:"in",bits:s.no_bit_enable?1:t,portlabel:"en",polarity:s.enable_polarity,labelled:!0})),"clock_polarity"in s&&(n++,i.push({id:r+"clk",group:"in",dir:"in",bits:1,portlabel:"clk",polarity:s.clock_polarity,decor:cl.prototype.decorClock,labelled:!0})),o.push(n);o.pop(),this.get("size").height=16*n+8,this.get("ports").items=i,cl.prototype.initialize.apply(this,arguments),this.removeProp("memdata"),this.on("change:size",(t,e)=>{const n=[];for(const t of o)n.push([[0,16*t+4],[e.width,16*t+4]].map(t=>t.join(" ")).join(" L "));this.attr("path.portsplit/d","M "+n.join(" M "))})},_resetPortValue(t){if("out"==t.dir){const e=/^rd([0-9]+)data$/.exec(t.id),n=e?this.get("rdports")[e[1]]:{};if("init_value"in n)return Hc.Vector3vl.fromBin(n.init_value,t.bits)}return cl.prototype._resetPortValue.call(this,t)},prepare(){const t=this.get("bits");var e=this.get("words");const n=this.get("memdata");e||(e=1<<this.get("abits"),this.prop("words",e,{init:!0})),this.memdata=n?Hc.Mem3vl.fromJSON(t,n):new Hc.Mem3vl(t,e),console.assert(this.memdata.words==e),this.last_clk={};for(const[t,e]of this._memports())"clock_polarity"in e&&(this.last_clk[t+"clk"]=0)},operation(t){const e=this.get("bits"),n={},r=(t,e)=>t[e+"_polarity"]?1:-1,i=(e,n)=>!("enable_polarity"in n&&!t[e+"en"].toArray().some(t=>t==r(n,"enable"))),o=(e,n)=>{const i=e+"clk";return!("clock_polarity"in n)||t[i].get(0)==r(n,"clock")&&this.last_clk[i]==-r(n,"clock")},s=t=>t>=0&&t<this.get("words"),a=(r,i)=>{const o=this._calcaddr(t[r+"addr"]);s(o)?n[r+"data"]=this.memdata.get(o):n[r+"data"]=Hc.Vector3vl.xes(e)},u=(e,n,r,i)=>{if(n.no_bit_enable||!("enable_polarity"in n))return i;const o=n.enable_polarity?t[e+"en"]:t[e+"en"].not();return i.and(o).or(r.and(o.not()))},c=(r,s)=>{a(r);for(const[a,c]of this.get("wrports").entries()){const l="wr"+a,h=(t,e)=>"boolean"==typeof t?t:t[e];"transparent"in s&&h(s.transparent,a)&&o(l,c)&&i(l,c)&&t[r+"addr"]==t[l+"addr"]&&(n[r+"data"]=u(l,c,n[r+"data"],t[l+"data"])),"collision"in s&&h(s.collision,a)&&o(l,c)&&i(l,c)&&t[r+"addr"]==t[l+"addr"]&&(n[r+"data"]=u(l,c,n[r+"data"],Hc.Vector3vl.xes(e)))}},l=(e,n)=>{const r=this._calcaddr(t[e+"addr"]);if(s(r)){const i=this.memdata.get(r),o=u(e,n,i,t[e+"data"]),s=!i.eq(o);this.memdata.set(r,o),s&&this.trigger("memChange",r,o)}},h=(i,o)=>{t[i+"srst"].get(0)==r(o,"srst")&&(n[i+"data"]="srst_value"in o?Hc.Vector3vl.fromBin(o.srst_value,e):Hc.Vector3vl.zeros(e))},f=(i,o)=>{t[i+"arst"].get(0)==r(o,"arst")&&(n[i+"data"]="arst_value"in o?Hc.Vector3vl.fromBin(o.arst_value,e):Hc.Vector3vl.zeros(e))},d=(e,n)=>{if("clock_polarity"in n){const n=e+"clk";this.last_clk[n]=t[n].get(0)}};for(const[t,e]of this._memrdports())n[t+"data"]=this.get("outputSignals")[t+"data"],"clock_polarity"in e&&i(t,e)&&o(t,e)&&c(t,e);for(const[t,e]of this._memwrports())i(t,e)&&o(t,e)&&l(t,e);for(const[t,e]of this._memrdports())!("clock_polarity"in e)&&i(t,e)&&a(t);for(const[t,e]of this._memrdports())"srst_polarity"in e&&(i(t,e)||!("enable_srst"in e))&&o(t,e)&&h(t,e),"arst_polarity"in e&&f(t,e);for(const[t,e]of this._memrdports())d(t,e);for(const[t,e]of this._memwrports())d(t,e);return n},_calcaddr(t){return t.isFullyDefined?t.toNumber()-this.get("offset"):-1},*_memrdports(){for(const[t,e]of this.get("rdports").entries())yield["rd"+t,e]},*_memwrports(){for(const[t,e]of this.get("wrports").entries())yield["wr"+t,e]},*_memports(){yield*this._memrdports(),yield*this._memwrports()},markup:cl.prototype.markup.concat([{tagName:"path",className:"portsplit",selector:"portsplit"}],cl.prototype.markupZoom),getGateParams(){const t=cl.prototype.getGateParams.apply(this,arguments);return t.memdata=this.memdata.toJSON(),t},_gateParams:cl.prototype._gateParams.concat(["bits","abits","rdports","wrports","words","offset"]),_unsupportedPropChanges:cl.prototype._unsupportedPropChanges.concat(["bits","abits","rdports","wrports","words","offset"]),_operationHelpers:cl.prototype._operationHelpers.concat(["_memrdports","_memwrports","_memports","_calcaddr"])}),kd=ll.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=this.model,n=e.graph._display3vl,r=rl("<div>",{title:"Memory contents: "+e.get("label")}).appendTo("html > body");r.append(rl('<div class="btn-toolbar" role="toolbar"><div class="btn-group mr-2" role="group"><button name="prev" type="button" class="btn btn-secondary" title="Previous page">←</button><button name="next" type="button" class="btn btn-secondary" title="Next page">→</button></div><div class="input-group">'+function(t,e){return'<select name="base">'+t.usableDisplays("read",e).map(t=>'<option value="'+t+'"'+("hex"==t?' selected="selected"':"")+">"+t+"</option>").join("")+"</select>"}(n,e.get("bits"))+'</div></div><table class="memeditor"></table>'));const i=e.get("words"),o=e.memdata,s=Math.ceil(e.get("abits")/4);let a,u=0;const c=()=>r.find("select[name=base]").val(),l=t=>{const e=Math.floor((t-u)/a),n=t-u-e*a;return r.find("table tr:nth-child("+(e+1)+") td:nth-child("+(n+2)+") input")},h=t=>{for(const[n,r]of e._memrdports())l(e._calcaddr(t[n+"addr"])).removeClass("isread");for(const[n,r]of e._memwrports())l(e._calcaddr(t[n+"addr"])).removeClass("iswrite")},f=t=>{for(const[n,r]of e._memrdports())l(e._calcaddr(t[n+"addr"])).addClass("isread");for(const[n,r]of e._memwrports())l(e._calcaddr(t[n+"addr"])).addClass("iswrite")},d=()=>{const t=c();r.find("button[name=prev]").prop("disabled",u<=0),r.find("button[name=next]").prop("disabled",u+8*a>=i);let o=r.find("table tr:first-child");const l=e.memdata;for(let e=0;e<8&&!(u+e*a>=i);e++,o=o.next()){const r=(u+e*a).toString(16);let c=o.find("td:first-child");c.text("0".repeat(s-r.length)+r),c=c.next();for(let r=0;r<a&&!(u+e*a+r>=i);r++,c=c.next())c.find("input").val(n.show(t,l.get(u+e*a+r))).removeClass("invalid")}f(e.get("inputSignals"))},p=()=>{const t=c(),o=n.pattern(t),s=n.size(t,e.get("bits"));a=Math.min(i,16,Math.ceil(32/s)),u=Math.max(0,Math.min(i-8*a,u));const l=r.find("table");l.empty();for(let t=0;t<8&&!(u+t*a>=i);t++){const e=rl("<tr>");rl("<td>").appendTo(e);for(let n=0;n<a&&!(u+t*a+n>=i);n++){const t=rl("<td>");rl('<input type="text">').attr("size",s).attr("maxlength",s).attr("pattern",o).appendTo(t),t.appendTo(e)}e.appendTo(l)}d()};p(),r.find("select[name=base]").on("change",p),r.find("button[name=prev]").on("click",()=>{h(e.get("inputSignals")),u=Math.max(0,u-8*a),d()}),r.find("button[name=next]").on("click",()=>{h(e.get("inputSignals")),u=Math.min(i-8*a,u+8*a),d()}),r.on("change","input",t=>{const r=c(),i=rl(t.target),s=i.closest("td").index()-1,l=i.closest("tr").index(),h=u+l*a+s,f=e.get("bits");if(n.validate(r,t.target.value,f)){const s=n.read(r,t.target.value,f);o.set(h,s),e.trigger("manualMemChange",e,h,s),i.removeClass("invalid")}else i.addClass("invalid")});const g=(t,e)=>{if(t<u||t>u+8*a)return;const r=c(),i=l(t).val(n.show(r,o.get(t))).removeClass("invalid").removeClass("flash");setTimeout(()=>{i.addClass("flash")},10)},v=(t,n)=>{h(e.previous("inputSignals")),f(n)};return e.on("memChange",g),e.on("change:inputSignals",v),this.paper.trigger("open:memorycontent",r,()=>{r.remove(),e.off("memChange",g),e.off("change:inputSignals",v)}),!1}}),Sd=za.extend({tagName:"path",className:"highlight-stroke",attributes:{"pointer-events":"none",fill:"none"},options:{padding:3,rx:0,ry:0,useFirstSubpath:!1,attrs:{"stroke-width":3,stroke:"#FEB663"}},getPathData(t,e){const{options:n}=this,{useFirstSubpath:r}=n;let i;try{const t=Ii(e);if(i=t.convertToPathData().trim(),"PATH"===t.tagName()&&r){const t=i.search(/.M/i)+1;t>0&&(i=i.substr(0,t))}}catch(r){const o=t.getNodeBoundingRect(e);i=Ii.rectToPath(Ze({},n,o.toJSON()))}return i},highlightConnection(t){this.vel.attr("d",t.getSerializedConnection())},highlightNode(t,e){const{vel:n,options:r}=this,{padding:i,layer:o}=r;let s=this.getNodeMatrix(t,e);if(i){o||e!==t.el||n.remove();let r=t.getNodeBoundingRect(e);const a=r.x+r.width/2,u=r.y+r.height/2;r=Ii.transformRect(r,s);const c=Math.max(r.width,1),l=Math.max(r.height,1),h=(c+i)/c,f=(l+i)/l,d=Ii.createSVGMatrix({a:h,b:0,c:0,d:f,e:a-h*a,f:u-f*u});s=s.multiply(d)}n.attr({d:this.getPathData(t,e),transform:Ii.matrixToTransformString(s)})},highlight(t,e){const{vel:n,options:r}=this;n.attr(r.attrs),r.nonScalingStroke&&n.attr("vector-effect","non-scaling-stroke"),t.isNodeConnection(e)?this.highlightConnection(t):this.highlightNode(t,e)}}),Td=20,Pd=za.extend({tagName:"rect",className:"highlight-mask",attributes:{"pointer-events":"none"},options:{padding:3,maskClip:Td,deep:!1,attrs:{stroke:"#FEB663","stroke-width":3,"stroke-linecap":"butt","stroke-linejoin":"miter"}},VISIBLE:"white",INVISIBLE:"black",MASK_ROOT_ATTRIBUTE_BLACKLIST:["marker-start","marker-end","marker-mid","transform","stroke-dasharray","class"],MASK_CHILD_ATTRIBUTE_BLACKLIST:["stroke","fill","stroke-width","stroke-opacity","stroke-dasharray","fill-opacity","marker-start","marker-end","marker-mid","class"],MASK_REPLACE_TAGS:["FOREIGNOBJECT","IMAGE","USE","TEXT","TSPAN","TEXTPATH"],MASK_REMOVE_TAGS:["TEXT","TSPAN","TEXTPATH"],transformMaskChild(t,e){const{MASK_CHILD_ATTRIBUTE_BLACKLIST:n,MASK_REPLACE_TAGS:r,MASK_REMOVE_TAGS:i}=this,o=e.tagName();if(!Ii.isSVGGraphicsElement(e)||i.includes(o))return e.remove(),!1;if(r.includes(o)){const n=t.vel.findOne(`#${e.id}`);if(n){const{node:r}=n;let i=t.getNodeBoundingRect(r);t.model.isElement()&&(i=Ii.transformRect(i,t.getNodeMatrix(r)));const o=Ii("rect",i.toJSON()),{x:s,y:a}=i.center(),{angle:u,cx:c=s,cy:l=a}=n.rotate();u&&o.rotate(u,c,l),e.parent().append(o)}return e.remove(),!1}return n.forEach(t=>{"fill"===t&&"none"===e.attr("fill")||e.removeAttr(t)}),!0},transformMaskRoot(t,e){const{MASK_ROOT_ATTRIBUTE_BLACKLIST:n}=this;n.forEach(t=>{e.removeAttr(t)})},getMaskShape(t,e){const{options:n,MASK_REPLACE_TAGS:r}=this,{deep:i}=n,o=e.tagName();let s;if("G"===o){if(!i)return null;s=e.clone(),function(t,e){const n=t.children();for(;n.length>0;){const t=n.shift();e(t)&&n.push(...t.children())}}(s,e=>this.transformMaskChild(t,e))}else{if(r.includes(o))return null;s=e.clone()}return this.transformMaskRoot(t,s),s},getMaskId(){return`highlight-mask-${this.cid}`},getMask(t,e){const{VISIBLE:n,INVISIBLE:r,options:i}=this,{padding:o,attrs:s}=i,a=parseFloat(Ii("g").attr(s).attr("stroke-width")),u="none"!==e.attr("fill");let c=parseFloat(e.attr("stroke-width"));isNaN(c)&&(c=1);const l=c+2*o,h=l+2*a;let f=this.getMaskShape(t,e);if(!f){const n=t.getNodeBoundingRect(e.node);n.inflate(n.width?0:.5,n.height?0:.5),f=Ii("rect",n.toJSON())}return f.attr(s),Ii("mask",{id:this.getMaskId()}).append([f.clone().attr({fill:u?n:"none",stroke:n,"stroke-width":h}),f.clone().attr({fill:u?r:"none",stroke:r,"stroke-width":l})])},removeMask(t){const e=t.svg.getElementById(this.getMaskId());e&&t.defs.removeChild(e)},addMask(t,e){t.defs.appendChild(e.node)},highlight(t,e){const{options:n,vel:r}=this,{padding:i,attrs:o,maskClip:s=Td,layer:a}=n,u="stroke"in o?o.stroke:"#000000";a||e!==t.el||r.remove();const c=t.getNodeBoundingRect(e).inflate(i+s),l=this.getNodeMatrix(t,e),h=this.getMask(t,Ii(e));this.addMask(t.paper,h),r.attr(c.toJSON()),r.attr({transform:Ii.matrixToTransformString(l),mask:`url(#${h.id})`,fill:u})},unhighlight(t){this.removeMask(t.paper)}}),Cd=za.extend({UPDATABLE:!1,MOUNTABLE:!1,highlight:function(t,e){const{alphaValue:n=.3}=this.options;e.style.opacity=n},unhighlight:function(t,e){e.style.opacity=""}}),Nd=ko("highlighted"),Ld=za.extend({UPDATABLE:!1,MOUNTABLE:!1,options:{className:Nd},highlight:function(t,e){Ii(e).addClass(this.options.className)},unhighlight:function(t,e){Ii(e).removeClass(this.options.className)}},{className:Nd}),Od={ROW:"row",COLUMN:"column"},Md=za.extend({tagName:"g",MOUNTABLE:!0,UPDATE_ATTRIBUTES:function(){return[this.options.attribute]},_prevItems:null,highlight(t,e){const n=t.model,{attribute:r,size:i=20,gap:o=5,direction:s=Od.ROW}=this.options;if(!r)throw new Error("List: attribute is required");const a="number"==typeof i?{width:i,height:i}:i,u=s===Od.ROW,c=u?a.width:a.height;let l=n.get(r);Array.isArray(l)||(l=[]);const h=this._prevItems||[],f=l.map((t,e)=>an(h[e],l[e]));if(h.length!==l.length||f.some(t=>!t)){const t=this.vel.children(),e=l.map((e,n)=>{const i=n in t?t[n].node:null;if(f[n])return i;const s=this.createListItem(e,a,i);if(!s)return null;if(!(s instanceof SVGElement))throw new Error("List: item must be an SVGElement");s.dataset.index=n,s.dataset.attribute=r;const l=n*(c+o);return s.setAttribute("transform",u?`translate(${l}, 0)`:`translate(0, ${l})`),s});this.vel.empty().append(e),this._prevItems=l}const d=l.length,p=0===d?0:d*c+(d-1)*o,g=u?{width:p,height:a.height}:{width:a.width,height:p};this.position(n,g)},position(t,e){const{vel:n,options:r}=this,{margin:i=5,position:o="top-left"}=r,{width:s,height:a}=t.size(),{left:u,right:c,top:l,bottom:h}=Uo(i),f=new Cr(u,l,s-(u+c),a-(l+h));let{x:d,y:p}=Kf(f,o);switch(o){case Jf.CENTER:case Jf.TOP:case Jf.BOTTOM:d-=e.width/2;break;case Jf.RIGHT:case Jf.BOTTOM_RIGHT:case Jf.TOP_RIGHT:d-=e.width}switch(o){case Jf.CENTER:case Jf.RIGHT:case Jf.LEFT:p-=e.height/2;break;case Jf.BOTTOM:case Jf.BOTTOM_RIGHT:case Jf.BOTTOM_LEFT:p-=e.height}n.attr("transform",`translate(${d}, ${p})`)}},{Directions:Od,Positions:Jf});function Id(t,e,n,r){var i="ratio"in r?r.ratio:.5;return t.getPointAtRatio(i)}function Rd(t,e,n,r){var i="length"in r?r.length:20;return t.getPointAtLength(i)}function jd(t){return function(e,n,r,i){if(r instanceof Element){var o,s=this.paper.findView(r);return o=s?s.isNodeConnection(r)?Dd(s,"fixedAt"in i?i.fixedAt:"50%"):s.getNodeBBox(r).center():new hr,t.call(this,e,n,o,i)}return t.apply(this,arguments)}}function Dd(t,e){var n=parseFloat(e);return Bo(e)?t.getPointAtRatio(n/100):t.getPointAtLength(n)}const Bd=jd(function(t,e,n,r){var i=1e6,o=t.getConnection(),s=t.getConnectionSubdivisions(),a=new gr(n.clone().offset(0,i),n.clone().offset(0,-i)),u=new gr(n.clone().offset(i,0),n.clone().offset(-i,0)),c=a.intersect(o,{segmentSubdivisions:s}),l=u.intersect(o,{segmentSubdivisions:s}),h=[];return c&&Array.prototype.push.apply(h,c),l&&Array.prototype.push.apply(h,l),h.length>0?n.chooseClosest(h):"fallbackAt"in r?Dd(t,r.fallbackAt):Vd(t,e,n,r)}),Vd=jd(function(t,e,n,r){return t.getClosestPoint(n)||new hr});function Fd(t,e,n){if(cn(n)){const{x:r,y:i}=n;if(isFinite(i)){const n=new gr(e,t),{start:r,end:o}=n.parallel(i);e=r,t=o}n=r}if(!isFinite(n))return t;var r=t.distance(e);return 0===n&&r>0?t:t.move(e,-Math.min(n,r-1))}function zd(t){var e=t.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}function Gd(t,e,n,r){var i=e.getNodeBBox(n);r.stroke&&i.inflate(zd(n)/2);var o=t.intersect(i);return Fd(o?t.start.chooseClosest(o):t.end,t.start,r.offset)}var Ud="segmentSubdivisons",qd="shapeBBox";const Hd=function(t,e,n,r){let{offset:i,alignOffset:o,align:s}=r;return s&&function(t,e,n=0){let r,i,o,s;const{start:a,end:u}=t;switch(e){case"left":r="x",i=u,o=a,s=-1;break;case"right":r="x",i=a,o=u,s=1;break;case"top":r="y",i=u,o=a,s=-1;break;case"bottom":r="y",i=a,o=u,s=1;break;default:return}a[r]<u[r]?i[r]=o[r]:o[r]=i[r],isFinite(n)&&(i[r]+=s*n,o[r]+=s*n)}(t,s,o),Fd(t.end,t.start,i)},$d=Gd,Wd=function(t,e,n,r){var i=e.model.angle();if(0===i)return Gd(t,e,n,r);var o=e.getNodeUnrotatedBBox(n);r.stroke&&o.inflate(zd(n)/2);var s=o.center(),a=t.clone().rotate(s,i),u=a.setLength(1e6).intersect(o);return Fd(u?a.start.chooseClosest(u).rotate(s,-i):t.end,t.start,r.offset)},Xd=function(t,e,n,r){var i,o,s=r.selector,a=t.end;if(i="string"==typeof s?e.findNode(s):!1===s?n:Array.isArray(s)?Po(n,s):function(t){if(!t)return null;var e=t;do{var n=e.tagName;if("string"!=typeof n)return null;if("G"===(n=n.toUpperCase()))e=e.firstElementChild;else{if("TITLE"!==n)break;e=e.nextElementSibling}}while(e);return e}(n),!Ii.isSVGGraphicsElement(i)){if(i===n||!Ii.isSVGGraphicsElement(n))return a;i=n}var u,c=e.getNodeShape(i),l=e.getNodeMatrix(i),h=e.getRootTranslateMatrix(),f=e.getRootRotateMatrix(),d=h.multiply(f).multiply(l),p=d.inverse(),g=Ii.transformLine(t,p),v=g.start.clone(),m=e.getNodeData(i);if(!1===r.insideout&&(m[qd]||(m[qd]=c.bbox()),m[qd].containsPoint(v)))return a;if(c instanceof Gr){var y=r.precision||2;m[Ud]||(m[Ud]=c.getSegmentSubdivisions({precision:y})),u={precision:y,segmentSubdivisions:m[Ud]}}!0===r.extrapolate&&g.setLength(1e6),(o=g.intersect(c,u))?Ii.isArray(o)&&(o=v.chooseClosest(o)):!0===r.sticky&&(o=c instanceof Cr?c.pointNearestToPoint(v):c instanceof xr?c.intersectionWithLineFromCenterToPoint(v):c.closestPoint(v,u));var b=o?Ii.transformPoint(o,d):a,x=r.offset||0;return r.stroke&&(x+=zd(i)/2),Fd(b,t.start,x)};function Yd(t){return function(e,n,r,i){var o=!!i.rotate,s=o?e.getNodeUnrotatedBBox(n):e.getNodeBBox(n),a=s[t](),u=i.dx;if(u){var c=Bo(u);u=parseFloat(u),isFinite(u)&&(c&&(u/=100,u*=s.width),a.x+=u)}var l=i.dy;if(l){var h=Bo(l);l=parseFloat(l),isFinite(l)&&(h&&(l/=100,l*=s.height),a.y+=l)}return o?a.rotate(e.model.getBBox().center(),-e.model.angle()):a}}const Zd=Yd("center"),Jd=Yd("topMiddle"),Kd=Yd("bottomMiddle"),Qd=Yd("leftMiddle"),tp=Yd("rightMiddle"),ep=Yd("origin"),np=Yd("topRight"),rp=Yd("bottomLeft"),ip=Yd("corner"),op=jd(function(t,e,n,r){var i=t.model.angle(),o=t.getNodeBBox(e),s=o.center(),a=o.origin(),u=o.corner(),c=r.padding;if(isFinite(c)||(c=0),a.y+c<=n.y&&n.y<=u.y-c){var l=n.y-s.y;s.x+=0===i||180===i?0:1*l/Math.tan($n(i)),s.y+=l}else if(a.x+c<=n.x&&n.x<=u.x-c){var h=n.x-s.x;s.y+=90===i||270===i?0:h*Math.tan($n(i)),s.x+=h}return s}),sp=jd(function(t,e,n,r){var i,o,s,a=!!r.rotate;a?(i=t.getNodeUnrotatedBBox(e),s=t.model.getBBox().center(),o=t.model.angle()):i=t.getNodeBBox(e);var u,c=r.padding;switch(isFinite(c)&&i.inflate(c),a&&n.rotate(s,o),i.sideNearestToPoint(n)){case"left":u=i.leftMiddle();break;case"right":u=i.rightMiddle();break;case"top":u=i.topMiddle();break;case"bottom":u=i.bottomMiddle()}return a?u.rotate(s,-o):u}),ap=function(t,e,n,r,i){return t.model.getPointFromConnectedLink(this.model,i).offset(r.dx,r.dy)},up=Vc.extend({style:{"pointer-events":"none"},_gridCache:null,_gridSettings:null,init(){Vc.prototype.init.apply(this,arguments);const{options:{paper:t}}=this;this._gridCache=null,this._gridSettings=[],this.listenTo(t,"transform resize",this.updateGrid)},setGrid(t){this._gridSettings=this.getGridSettings(t),this.renderGrid()},getGridSettings(t){const e=[];return t&&(Array.isArray(t)?t:[t||{}]).forEach(t=>{e.push(...this._resolveDrawGridOption(t))}),e},removeGrid(){const{_gridCache:t}=this;t&&(t.root.remove(),this._gridCache=null)},renderGrid(){const{options:{paper:t}}=this,{_gridSettings:e}=this;if(this.removeGrid(),0===e.length)return;const n=t.options.drawGridSize||t.options.gridSize;if(n<=1)return;const r=this._getGridRefs();e.forEach((e,i)=>{const o=this._getPatternId(i),s=An({},e),{scaleFactor:a=1}=s;let u;s.width=n*a||1,s.height=n*a||1,r.exist(o)?u=r.get(o):(u=Ii("pattern",{id:o,patternUnits:"userSpaceOnUse"},Ii(s.markup)),r.add(o,u)),un(s.render)&&s.render(u.node.firstChild,s,t),u.attr({width:s.width,height:s.height})}),r.root.appendTo(this.el),this.updateGrid()},updateGrid(){const{_gridCache:t,_gridSettings:e,options:{paper:n}}=this;if(!t)return;const{root:r,patterns:i}=t,{x:o,y:s,width:a,height:u}=n.getArea();r.attr({x:o,y:s,width:a,height:u});for(const t in i)i[t].attr({x:-o,y:-s});e.forEach((t,e)=>{if(un(t.update)){const r=i[this._getPatternId(e)];t.update(r.node.firstChild,t,n)}})},_getPatternId(t){return`pattern_${this.options.paper.cid}_${t}`},_getGridRefs(){let{_gridCache:t}=this;if(t)return t;const e=Ii("defs"),n=Ii("svg",{width:"100%",height:"100%"},[e]);return t=this._gridCache={root:n,patterns:{},add:function(t,r){const i=Ii("rect",{width:"100%",height:"100%",fill:`url(#${t})`});e.append(r),n.append(i),this.patterns[t]=r},get:function(t){return this.patterns[t]},exist:function(t){return void 0!==this.patterns[t]}},t},_resolveDrawGridOption(t){var e=this.options.patterns;if(Ye(t)&&Array.isArray(e[t]))return e[t].map(function(t){return Ze({},t)});var n=t||{args:[{}]},r=Array.isArray(n),i=n.name;if(r||i||n.markup||(i="dot"),i&&Array.isArray(e[i])){var o=e[i].map(function(t){return Ze({},t)}),s=Array.isArray(n.args)?n.args:[n.args||{}];Je(s[0],yn(t,"args"));for(var a=0;a<s.length;a++)o[a]&&Ze(o[a],s[a]);return o}return r?n:[n]}}),cp={NONE:"sorting-none",APPROX:"sorting-approximate",EXACT:"sorting-exact"},lp=1/0,hp=9007199254740991,fp=Wa.Highlighting,dp={[fp.DEFAULT]:{name:"stroke",options:{padding:3}},[fp.MAGNET_AVAILABILITY]:{name:"addClass",options:{className:"available-magnet"}},[fp.ELEMENT_AVAILABILITY]:{name:"addClass",options:{className:"available-cell"}}},pp=[{name:Bc.GRID},{name:Bc.BACK},{name:Bc.CELLS},{name:Bc.LABELS},{name:Bc.FRONT},{name:Bc.TOOLS}],gp=Va.extend({className:"paper",options:{width:800,height:600,gridSize:1,drawGrid:!1,drawGridSize:null,background:!1,elementView:Ka,linkView:Dc,snapLabels:!1,snapLinks:!1,snapLinksSelf:!1,labelsLayer:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:dp,preventContextMenu:!0,preventDefaultBlankAction:!0,preventDefaultViewAction:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:function(){const{cellNamespace:t}=this.model.get("cells"),e=Po(t,["standard","Link"]);if(!e)throw new Error("dia.Paper: no default link model found. Use `options.defaultLink` to specify a default link model.");return new e},defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},defaultAnchor:{name:"center"},defaultLinkAnchor:{name:"connectionRatio"},defaultConnectionPoint:{name:"boundary"},connectionStrategy:null,validateMagnet:function(t,e,n){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,n,r,i,o){return("target"===i?n:t)instanceof Ka},embeddingMode:!1,validateEmbedding:function(t,e){return!0},validateUnembedding:function(t){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,allowLink:null,clickThreshold:0,moveThreshold:0,magnetThreshold:0,sorting:cp.APPROX,frozen:!1,autoFreeze:!1,onViewUpdate:function(t,e,n,r,i){e&(t.FLAG_INSERT|t.FLAG_REMOVE)||r.mounting||r.isolate||i.requestConnectedLinksUpdate(t,n,r)},onViewPostponed:function(t,e,n){return n.forcePostponedViewUpdate(t,e)},beforeRender:null,afterRender:null,viewport:null,cellViewNamespace:null,routerNamespace:null,connectorNamespace:null,highlighterNamespace:h,anchorNamespace:p,linkAnchorNamespace:f,connectionPointNamespace:d,overflow:!1},events:{dblclick:"pointerdblclick",dbltap:"pointerdblclick",contextmenu:"contextmenu",mousedown:"pointerdown",touchstart:"pointerdown",mouseover:"mouseover",mouseout:"mouseout",mouseenter:"mouseenter",mouseleave:"mouseleave",wheel:"mousewheel","mouseenter .joint-cell":"mouseenter","mouseleave .joint-cell":"mouseleave","mouseenter .joint-tools":"mouseenter","mouseleave .joint-tools":"mouseleave","dblclick .joint-cell [magnet]":"magnetpointerdblclick","contextmenu .joint-cell [magnet]":"magnetcontextmenu","mousedown .joint-link .label":"onlabel","touchstart .joint-link .label":"onlabel","dragstart .joint-cell image":"onImageDragStart"},documentEvents:{mousemove:"pointermove",touchmove:"pointermove",mouseup:"pointerup",touchend:"pointerup",touchcancel:"pointerup"},stylesheet:"\n        .joint-element .scalable * {\n            vector-effect: non-scaling-stroke;\n        }\n    ",svg:null,viewport:null,defs:null,tools:null,layers:null,_viewportMatrix:null,_viewportTransformString:null,_updates:null,_layers:null,SORT_DELAYING_BATCHES:["add","to-front","to-back"],UPDATE_DELAYING_BATCHES:["translate"],FORM_CONTROL_TAG_NAMES:["TEXTAREA","INPUT","BUTTON","SELECT","OPTION"],GUARDED_TAG_NAMES:["SELECT"],MIN_SCALE:1e-6,DEFAULT_FIND_BUFFER:200,init:function(){const{options:t}=this;t.cellViewNamespace||(t.cellViewNamespace="undefined"!=typeof joint&&vn(joint,"shapes")?joint.shapes:null);const e=this.model=t.model||new hd;this._layers={},this.cloneOptions(),this.render(),this._setDimensions(),this.startListening(),this._views={},this._mw_evt_buffer={event:null,deltas:[]},this.resetViews(e.attributes.cells.models),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()},_resetUpdates:function(){return this._updates&&this._updates.id&&Ro(this._updates.id),this._updates={id:null,priorities:[{},{},{}],unmountedCids:[],mountedCids:[],unmounted:{},mounted:{},count:0,keyFrozen:!1,freezeKey:null,sort:!1,disabled:!1,idle:!1}},startListening:function(){var t=this.model;this.listenTo(t,"add",this.onCellAdded).listenTo(t,"remove",this.onCellRemoved).listenTo(t,"change",this.onCellChange).listenTo(t,"reset",this.onGraphReset).listenTo(t,"sort",this.onGraphSort).listenTo(t,"batch:stop",this.onGraphBatchStop),this.on("cell:highlight",this.onCellHighlight).on("cell:unhighlight",this.onCellUnhighlight).on("transform",this.update)},onCellAdded:function(t,e,n){var r=n.position;this.isAsync()||!Xe(r)?this.renderView(t,n):(n.maxPosition===r&&this.freeze({key:"addCells"}),this.renderView(t,n),0===r&&this.unfreeze({key:"addCells"}))},onCellRemoved:function(t,e,n){const r=this.findViewByModel(t);r&&this.requestViewUpdate(r,r.FLAG_REMOVE,r.UPDATE_PRIORITY,n)},onCellChange:function(t,e){if(t!==this.model.attributes.cells&&t.hasChanged("z")&&this.options.sorting===cp.APPROX){const n=this.findViewByModel(t);n&&this.requestViewUpdate(n,n.FLAG_INSERT,n.UPDATE_PRIORITY,e)}},onGraphReset:function(t,e){this.resetLayers(),this.resetViews(t.models,e)},onGraphSort:function(){this.model.hasActiveBatch(this.SORT_DELAYING_BATCHES)||this.sortViews()},onGraphBatchStop:function(t){if(!this.isFrozen()){var e=t&&t.batchName,n=this.model;if(!this.isAsync()){var r=this.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}var i=this.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}},cloneOptions:function(){const{options:t}=this,{defaultConnector:e,defaultRouter:n,defaultConnectionPoint:r,defaultAnchor:i,defaultLinkAnchor:o,highlighting:s,cellViewNamespace:a,interactive:u}=t;!a&&"undefined"!=typeof joint&&vn(joint,"shapes")&&(t.cellViewNamespace=joint.shapes),un(e)||(t.defaultConnector=on(e)),un(n)||(t.defaultRouter=on(n)),un(r)||(t.defaultConnectionPoint=on(r)),un(i)||(t.defaultAnchor=on(i)),un(o)||(t.defaultLinkAnchor=on(o)),cn(u)&&(t.interactive=Ze({},u)),cn(s)&&(t.highlighting=Ke({},s,dp))},children:function(){var t=Ii.namespace;return[{namespaceURI:t.xhtml,tagName:"div",className:ko("paper-background"),selector:"background",style:{position:"absolute",inset:0}},{namespaceURI:t.svg,tagName:"svg",attributes:{width:"100%",height:"100%","xmlns:xlink":t.xlink},selector:"svg",style:{position:"absolute",inset:0},children:[{tagName:"defs",selector:"defs"},{tagName:"g",className:ko("layers"),selector:"layers"}]}]},hasLayerView(t){return t in this._layers},getLayerView(t){const{_layers:e}=this;if(t in e)return e[t];throw new Error(`dia.Paper: Unknown layer "${t}"`)},getLayerNode(t){return this.getLayerView(t).el},render:function(){this.renderChildren();const{el:t,childNodes:e,options:n,stylesheet:r}=this,{svg:i,defs:o,layers:s}=e;return t.style.position="relative",i.style.overflow=n.overflow?"visible":"hidden",this.svg=i,this.defs=o,this.layers=s,this.renderLayers(),Ii.ensureId(i),this.addStylesheet(r),n.background&&this.drawBackground(n.background),n.drawGrid&&this.setGrid(n.drawGrid),this},addStylesheet:function(t){t&&Ii(this.svg).prepend(Ii.createSVGStyle(t))},createLayer(t){return t===Bc.GRID?new up({name:t,paper:this,patterns:this.constructor.gridPatterns}):new Vc({name:t})},renderLayers:function(t=pp){this.removeLayers(),t.forEach(({name:t,sorted:e})=>{const n=this.createLayer(t);this.layers.appendChild(n.el),this._layers[t]=n});const e=this.getLayerView(Bc.CELLS),n=this.getLayerView(Bc.TOOLS),r=this.getLayerView(Bc.LABELS);this.tools=n.el,this.cells=this.viewport=e.el,e.vel.addClass(ko("viewport")),r.vel.addClass(ko("viewport")),e.el.style.webkitUserSelect="none",e.el.style.userSelect="none",r.el.style.webkitUserSelect="none",r.el.style.userSelect="none"},removeLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].remove(),delete t[e]})},resetLayers:function(){const{_layers:t}=this;Object.keys(t).forEach(e=>{t[e].removePivots()})},update:function(){return this._background&&this.updateBackgroundImage(this._background),this},scale:function(t,e,n){const r=this.matrix();return void 0===t?Ii.matrixToScale(r):(void 0===e&&(e=t),t=Math.max(t||0,this.MIN_SCALE),e=Math.max(e||0,this.MIN_SCALE),r.a=t,r.d=e,this.matrix(r,n),this)},scaleUniformAtPoint:function(t,e,n){const{a:r,d:i,e:o,f:s}=this.matrix();if((t=Math.max(t||0,this.MIN_SCALE))===r&&t===i)return this;const a=Ii.createSVGMatrix().translate(o-e.x*(t-r),s-e.y*(t-i)).scale(t,t);return this.matrix(a,n),this},translate:function(t,e,n){const r=this.matrix();return void 0===t?Ii.matrixToTranslate(r):(t||(t=0),e||(e=0),r.e===t&&r.f===e||(r.e=t,r.f=e,this.matrix(r,n)),this)},matrix:function(t,e={}){var n=this.layers;if(void 0===t){var r=n.getAttribute("transform");return(this._viewportTransformString||null)===r?t=this._viewportMatrix:(t=n.getCTM(),this._viewportMatrix=t,this._viewportTransformString=r),Ii.createSVGMatrix(t)}const i=this.matrix(),o=Ii.createSVGMatrix(t),s=this._viewportTransformString,a=Ii.matrixToTransformString(o);if(a===s)return this;if(!s&&Ii.matrixToTransformString()===a)return this;const{a:u,d:c,e:l,f:h}=o;return n.setAttribute("transform",a),this._viewportMatrix=o,this._viewportTransformString=n.getAttribute("transform"),u===i.a&&c===i.d||this.trigger("scale",u,c,e),l===i.e&&h===i.f||this.trigger("translate",l,h,e),this.trigger("transform",o,e),this},clientMatrix:function(){return Ii.createSVGMatrix(this.cells.getScreenCTM())},requestConnectedLinksUpdate:function(t,e,n){if(t instanceof Wa)for(var r=t.model,i=this.model.getConnectedLinks(r),o=0,s=i.length;o<s;o++){var a=i[o],u=this.findViewByModel(a);if(u){var c=["UPDATE"];a.getTargetCell()===r&&c.push("TARGET"),a.getSourceCell()===r&&c.push("SOURCE");var l=Math.max(e+1,u.UPDATE_PRIORITY);this.scheduleViewUpdate(u,u.getFlag(c),l,n)}}},forcePostponedViewUpdate:function(t,e){if(!(t&&t instanceof Wa))return!1;var n=t.model;if(n.isElement())return!1;if(0===(e&t.getFlag(["SOURCE","TARGET"]))){var r={silent:!0},i=0,o=this.findViewByModel(n.getSourceCell());o&&!this.isViewMounted(o)&&(i=this.dumpView(o,r),t.updateEndMagnet("source"));var s=0,a=this.findViewByModel(n.getTargetCell());if(a&&!this.isViewMounted(a)&&(s=this.dumpView(a,r),t.updateEndMagnet("target")),0===i&&0===s)return!this.dumpView(t,r)}return!1},requestViewUpdate:function(t,e,n,r){r||(r={}),this.scheduleViewUpdate(t,e,n,r);var i=this.isAsync();if(!(this.isFrozen()||i&&!1!==r.async||this.model.hasActiveBatch(this.UPDATE_DELAYING_BATCHES))){var o=this.updateViews(r);i&&this.notifyAfterRender(o,r)}},scheduleViewUpdate:function(t,e,n,r){const{_updates:i,options:o}=this;i.idle&&o.autoFreeze&&(i.idle=!1,this.unfreeze());const{FLAG_REMOVE:s,FLAG_INSERT:a,UPDATE_PRIORITY:u,cid:c}=t;let l=i.priorities[n];if(l||(l=i.priorities[n]={}),n>u)for(let t=n-1;t>=u;t--){const e=i.priorities[t];e&&c in e&&(l[c]|=e[c],delete e[c])}let h=l[c]||0;if((h&e)===e)return;h||i.count++,e&s&&h&a?l[c]^=a:e&a&&h&s&&(l[c]^=s),l[c]|=e;const f=o.onViewUpdate;"function"==typeof f&&f.call(this,t,e,n,r||{},this)},dumpViewUpdate:function(t){if(!t)return 0;var e=this._updates,n=t.cid,r=e.priorities[t.UPDATE_PRIORITY],i=this.registerMountedView(t)|r[n];return delete r[n],i},dumpView:function(t,e={}){const n=this.dumpViewUpdate(t);if(!n)return 0;const r=!e.silent;r&&this.notifyBeforeRender(e);const i=this.updateView(t,n,e);if(r){const n={updated:1,priority:t.UPDATE_PRIORITY};this.notifyAfterRender(n,e)}return i},updateView:function(t,e,n){if(!t)return 0;const{FLAG_REMOVE:r,FLAG_INSERT:i,FLAG_INIT:o,model:s}=t;if(t instanceof Wa){if(e&r)return this.removeView(s),0;if(e&i){const n=!!(e&o);n&&(e^=o),this.insertView(t,n),e^=i}}return e?t.confirmUpdate(e,n||{}):0},requireView:function(t,e){var n=this.findViewByModel(t);return n?(this.dumpView(n,e),n):null},registerUnmountedView:function(t){var e=t.cid,n=this._updates;if(e in n.unmounted)return 0;var r=n.unmounted[e]|=t.FLAG_INSERT;return n.unmountedCids.push(e),delete n.mounted[e],r},registerMountedView:function(t){var e=t.cid,n=this._updates;if(e in n.mounted)return 0;n.mounted[e]=!0,n.mountedCids.push(e);var r=n.unmounted[e]||0;return delete n.unmounted[e],r},isViewMounted:function(t){return!!t&&t.cid in this._updates.mounted},dumpViews:function(t){var e=Je({},t,{viewport:null});this.checkViewport(e),this.updateViews(e)},updateViews:function(t){let e;this.notifyBeforeRender(t);let n=0,r=0,i=hp;do{r++,e=this.updateViewsBatch(t),n+=e.updated,i=Math.min(e.priority,i)}while(!e.empty);const o={updated:n,batches:r,priority:i};return this.notifyAfterRender(o,t),o},hasScheduledUpdates:function(){const t=this._updates.priorities,e=Object.keys(t);let n=e.length;for(;n>0&&n--;)for(let r in t[e[n]])return!0;return!1},updateViewsAsync:function(t,e){t||(t={}),e||(e={processed:0,priority:hp});const{_updates:n,options:r}=this,i=n.id;if(i){Ro(i),0===e.processed&&this.hasScheduledUpdates()&&this.notifyBeforeRender(t);const o=this.updateViewsBatch(t),s=Je({},t,{mountBatchSize:1e3-o.mounted,unmountBatchSize:1e3-o.unmounted}),a=this.checkViewport(s),u=a.unmounted,c=a.mounted;let l=e.processed;const h=n.count;o.updated>0?(l+=o.updated+o.unmounted,o.processed=l,e.priority=Math.min(o.priority,e.priority),o.empty&&0===c?(o.unmounted+=u,o.mounted+=c,o.priority=e.priority,this.notifyAfterRender(o,t),e.processed=0,e.priority=hp,n.count=0):e.processed=l):n.idle||r.autoFreeze&&(this.freeze(),n.idle=!0,this.trigger("render:idle",t));const f=t.progress;if(h&&"function"==typeof f&&f.call(this,o.empty,l,h,o,this),n.id!==i)return}if(n.disabled)throw new Error("dia.Paper: can not unfreeze the paper after it was removed");n.id=Io(this.updateViewsAsync,this,t,e)},notifyBeforeRender:function(t={}){let e=t.beforeRender;"function"!=typeof e&&(e=this.options.beforeRender,"function"!=typeof e)||e.call(this,t,this)},notifyAfterRender:function(t,e={}){let n=e.afterRender;"function"!=typeof n&&(n=this.options.afterRender),"function"==typeof n&&n.call(this,t,e,this),this.trigger("render:done",t,e)},updateViewsBatch:function(t){t||(t={});var e=t.batchSize||lp,n=this._updates,r=0,i=0,o=0,s=0,a=hp,u=!0,c=this.options,l=n.priorities,h="viewport"in t?t.viewport:c.viewport;"function"!=typeof h&&(h=null);var f=c.onViewPostponed;"function"!=typeof f&&(f=null);var d=Object.keys(l);t:for(var p=0,g=d.length;p<g;p++){var v=+d[p],m=l[v];for(var y in m){if(r>=e){u=!1;break t}var b=Ba[y];if(b){var x=m[y];if(0===(x&b.FLAG_REMOVE)){var w=y in n.unmounted;if(b.DETACHABLE&&h&&!h.call(this,b,!w,this)){w||(this.registerUnmountedView(b),this.detachView(b)),n.unmounted[y]|=x,delete m[y],o++;continue}w&&(x|=b.FLAG_INSERT,s++),x|=this.registerMountedView(b)}var _=this.updateView(b,x,t);_>0&&(m[y]=_,!f||!f.call(this,b,_,this)||m[y])?(i++,u=!1):(a>v&&(a=v),r++,delete m[y])}else delete m[y]}}return{priority:a,updated:r,postponed:i,unmounted:o,mounted:s,empty:u}},getUnmountedViews:function(){const t=this._updates,e=Object.keys(t.unmounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Ba[e[i]];return r},getMountedViews:function(){const t=this._updates,e=Object.keys(t.mounted),n=e.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=Ba[e[i]];return r},checkUnmountedViews:function(t,e){e||(e={});var n=0;"function"!=typeof t&&(t=null);for(var r=("mountBatchSize"in e?e.mountBatchSize:1/0),i=this._updates,o=i.unmountedCids,s=i.unmounted,a=0,u=Math.min(o.length,r);a<u;a++){var c=o[a];if(c in s){var l=Ba[c];if(l)if(l.DETACHABLE&&t&&!t.call(this,l,!1,this))o.push(c);else{n++;var h=this.registerMountedView(l);h&&this.scheduleViewUpdate(l,h,l.UPDATE_PRIORITY,{mounting:!0})}}}return o.splice(0,a),n},checkMountedViews:function(t,e){e||(e={});var n=0;if("function"!=typeof t)return n;for(var r=("unmountBatchSize"in e?e.unmountBatchSize:1/0),i=this._updates,o=i.mountedCids,s=i.mounted,a=0,u=Math.min(o.length,r);a<u;a++){var c=o[a];if(c in s){var l=Ba[c];l&&(l.DETACHABLE&&!t.call(this,l,!0,this)?(n++,this.registerUnmountedView(l)&&this.detachView(l)):o.push(c))}}return o.splice(0,a),n},checkViewVisibility:function(t,e={}){let n="viewport"in e?e.viewport:this.options.viewport;"function"!=typeof n&&(n=null);const r=this._updates,{mounted:i,unmounted:o}=r,s=!t.DETACHABLE||!n||n.call(this,t,!1,this);let a=!1,u=!1;if(t.cid in i&&!s){this.registerUnmountedView(t)&&this.detachView(t);const e=r.mountedCids.indexOf(t.cid);r.mountedCids.splice(e,1),a=!0}if(!a&&t.cid in o&&s){const e=r.unmountedCids.indexOf(t.cid);r.unmountedCids.splice(e,1);var c=this.registerMountedView(t);c&&this.scheduleViewUpdate(t,c,t.UPDATE_PRIORITY,{mounting:!0}),u=!0}return{mounted:u?1:0,unmounted:a?1:0}},checkViewport:function(t){var e=Je({},t,{mountBatchSize:1/0,unmountBatchSize:1/0}),n="viewport"in e?e.viewport:this.options.viewport,r=this.checkMountedViews(n,e);if(r>0){var i=this._updates.unmountedCids;e.mountBatchSize=Math.min(i.length-r,e.mountBatchSize)}return{mounted:this.checkUnmountedViews(n,e),unmounted:r}},freeze:function(t){t||(t={});var e=this._updates,n=t.key,r=this.options.frozen,i=e.freezeKey;if(n&&n!==i){if(r&&i)return;e.freezeKey=n,e.keyFrozen=r}this.options.frozen=!0;var o=e.id;e.id=null,this.isAsync()&&o&&Ro(o)},unfreeze:function(t){t||(t={});var e=this._updates,n=t.key,r=e.freezeKey;n&&r&&n!==r||(e.freezeKey=null,n&&n===r&&e.keyFrozen||(this.isAsync()?(this.freeze(),this.updateViewsAsync(t)):this.updateViews(t),this.options.frozen=e.keyFrozen=!1,e.sort&&(this.sortViews(),e.sort=!1)))},isAsync:function(){return!!this.options.async},isFrozen:function(){return!!this.options.frozen},isExactSorting:function(){return this.options.sorting===cp.EXACT},onRemove:function(){this.freeze(),this._updates.disabled=!0,this.removeLayers(),this.removeViews()},getComputedSize:function(){var t=this.options,e=t.width,n=t.height;return Xe(e)||(e=this.el.clientWidth),Xe(n)||(n=this.el.clientHeight),{width:e,height:n}},setDimensions:function(t,e,n={}){const{options:r}=this,{width:i,height:o}=r;let s=void 0===t?i:t,a=void 0===e?o:e;if(i===s&&o===a)return;r.width=s,r.height=a,this._setDimensions();const u=this.getComputedSize();this.trigger("resize",u.width,u.height,n)},_setDimensions:function(){const{options:t}=this;let e=t.width,n=t.height;Xe(e)&&(e=`${Math.round(e)}px`),Xe(n)&&(n=`${Math.round(n)}px`),this.$el.css({width:null===e?"":e,height:null===n?"":n})},fitToContent:function(t,e,n,r){r=We(t)?t:Ze({gridWidth:t,gridHeight:e,padding:n},r);const{x:i,y:o,width:s,height:a}=this.getFitToContentArea(r),{sx:u,sy:c}=this.scale();return this.translate(-i*u,-o*c,r),this.setDimensions(s*u,a*c,r),new Cr(i,o,s,a)},getFitToContentArea:function(t={}){const e=t.gridWidth||1,n=t.gridHeight||1,r=Uo(t.padding||0),i=Math.max(t.minWidth||0,e),o=Math.max(t.minHeight||0,n),s=t.maxWidth||Number.MAX_VALUE,a=t.maxHeight||Number.MAX_VALUE,u=t.allowNewOrigin,c="contentArea"in t?new Cr(t.contentArea):this.getContentArea(t),{sx:l,sy:h}=this.scale();c.x*=l,c.y*=h,c.width*=l,c.height*=h;let f=Math.ceil((c.width+c.x)/e),d=Math.ceil((c.height+c.y)/n);t.allowNegativeBottomRight||(f=Math.max(f,1),d=Math.max(d,1)),f*=e,d*=n;let p=0;("negative"===u&&c.x<0||"positive"===u&&c.x>=0||"any"===u)&&(p=Math.ceil(-c.x/e)*e,p+=r.left,f+=p);let g=0;return("negative"===u&&c.y<0||"positive"===u&&c.y>=0||"any"===u)&&(g=Math.ceil(-c.y/n)*n,g+=r.top,d+=g),f+=r.right,d+=r.bottom,f=Math.max(f,i),d=Math.max(d,o),f=Math.min(f,s),d=Math.min(d,a),new Cr(-p/l,-g/h,f/l,d/h)},transformToFitContent:function(t){let e,n;if(t||(t={}),"contentArea"in t){const r=t.contentArea;e=this.localToPaperRect(r),n=new hr(r)}else e=this.getContentBBox(t),n=this.paperToLocalPoint(e);if(!e.width||!e.height)return;Je(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE,verticalAlign:"top",horizontalAlign:"left"});const r=Uo(t.padding),i=t.minScaleX||t.minScale,o=t.maxScaleX||t.maxScale,s=t.minScaleY||t.minScale,a=t.maxScaleY||t.maxScale;let u;if(t.fittingBBox)u=t.fittingBBox;else{const t=this.translate(),e=this.getComputedSize();u={x:t.tx,y:t.ty,width:e.width,height:e.height}}u=new Cr(u).moveAndExpand({x:r.left,y:r.top,width:-r.left-r.right,height:-r.top-r.bottom});const c=this.matrix(),{a:l,d:h,e:f,f:d}=c;let p=u.width/e.width*l,g=u.height/e.height*h;if(t.preserveAspectRatio&&(p=g=Math.min(p,g)),t.scaleGrid){const e=t.scaleGrid;p=e*Math.floor(p/e),g=e*Math.floor(g/e)}p=Math.min(o,Math.max(i,p)),g=Math.min(a,Math.max(s,g));const v=p/l,m=g/h;let y=u.x-n.x*p-f,b=u.y-n.y*g-d;switch(t.verticalAlign){case"middle":b+=(u.height-e.height*m)/2;break;case"bottom":b+=u.height-e.height*m}switch(t.horizontalAlign){case"middle":y+=(u.width-e.width*v)/2;break;case"right":y+=u.width-e.width*v}c.a=p,c.d=g,c.e=y,c.f=b,this.matrix(c,t)},scaleContentToFit:function(t){this.transformToFitContent(t)},getContentArea:function(t){return t&&t.useModelGeometry?this.model.getBBox()||new Cr:Ii(this.cells).getBBox()},getContentBBox:function(t){return this.localToPaperRect(this.getContentArea(t))},getArea:function(){return this.paperToLocalRect(this.getComputedSize())},getRestrictedArea:function(...t){const{restrictTranslate:e}=this.options;let n;return n=un(e)?e.apply(this,t):!0===e?this.getArea():e?new Cr(e):null,n},createViewForModel:function(t){const{options:e}=this;var n,r,i=e.cellViewNamespace,o=t.get("type")+"View",s=Po(i,o,".");return t.isLink()?(n=e.linkView,r=Dc):(n=e.elementView,r=Ka),new(n.prototype instanceof Ra?s||n:n.call(this,t)||s||r)({model:t,interactive:e.interactive,labelsLayer:!0===e.labelsLayer?Bc.LABELS:e.labelsLayer})},removeView:function(t){const{id:e}=t,{_views:n,_updates:r}=this,i=n[e];if(i){var{cid:o}=i;const{mounted:t,unmounted:s}=r;i.remove(),delete n[e],delete t[o],delete s[o]}return i},renderView:function(t,e){const{id:n}=t,r=this._views;let i,o,s=!0;return n in r&&(i=r[n],i.model===t?(o=i.FLAG_INSERT,s=!1):this.removeView(t)),s&&(i=r[n]=this.createViewForModel(t),i.paper=this,o=this.registerUnmountedView(i)|this.FLAG_INIT|i.getFlag(mn(i,"initFlag"))),this.requestViewUpdate(i,o,i.UPDATE_PRIORITY,e),i},onImageDragStart:function(){return!1},resetViews:function(t,e){e||(e={}),t||(t=[]),this._resetUpdates(),this.removeViews();const n=this.options.autoFreeze?null:"reset";this.freeze({key:n});for(var r=0,i=t.length;r<i;r++)this.renderView(t[r],e);this.unfreeze({key:n}),this.sortViews()},removeViews:function(){Qe(this._views,"remove"),this._views={}},sortViews:function(){this.isExactSorting()&&(this.isFrozen()?this._updates.sort=!0:this.sortViewsExact())},sortViewsExact:function(){var t=Array.from(this.cells.childNodes).filter(t=>t.getAttribute("model-id")),e=this.model.get("cells");!function(t){var n=(t=Ao(t).toArray()).map(function(t){var e=t.parentNode,n=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,n),e.removeChild(n)}});t.sort(function(t,n){var r=e.get(t.getAttribute("model-id")),i=e.get(n.getAttribute("model-id")),o=r.attributes.z||0,s=i.attributes.z||0;return o===s?0:o<s?-1:1});for(var r=0;r<n.length;r++)n[r].call(t[r])}(t)},insertView:function(t,e){const n=this.getLayerView(Bc.CELLS),{el:r,model:i}=t;this.options.sorting===cp.APPROX?n.insertSortedNode(r,i.get("z")):n.insertNode(r),t.onMount(e)},detachView(t){t.unmount(),t.onDetach()},findView:function(t){var e=Ye(t)?this.cells.querySelector(t):t instanceof Ao?t[0]:t,n=this.findAttribute("model-id",e);if(n)return this._views[n]},findViewByModel:function(t){var e=Ye(t)||Xe(t)?t:t&&t.id;return this._views[e]},findViewsFromPoint:function(t){return t=new hr(t),this.model.getElements().map(this.findViewByModel,this).filter(function(e){return e&&e.vel.getBBox({target:this.cells}).containsPoint(t)},this)},findViewsInArea:function(t,e){e=Je(e||{},{strict:!1}),t=new Cr(t);var n=this.model.getElements().map(this.findViewByModel,this),r=e.strict?"containsRect":"intersect";return n.filter(function(e){return e&&t[r](e.vel.getBBox({target:this.cells}))},this)},findElementViewsInArea(t,e){return this._filterViewsInArea(t,(t,e)=>this.model.findElementsInArea(t,e),e)},findLinkViewsInArea:function(t,e){return this._filterViewsInArea(t,(t,e)=>this.model.findLinksInArea(t,e),e)},findCellViewsInArea:function(t,e){return this._filterViewsInArea(t,(t,e)=>this.model.findCellsInArea(t,e),e)},findElementViewsAtPoint:function(t,e){return this._filterViewsAtPoint(t,t=>this.model.findElementsInArea(t),e)},findLinkViewsAtPoint:function(t,e){return this._filterViewsAtPoint(t,t=>this.model.findLinksInArea(t),e)},findCellViewsAtPoint:function(t,e){return this._filterViewsAtPoint(t,t=>this.model.findCellsInArea(t),e)},_findInExtendedArea:function(t,e,n={}){const{buffer:r=this.DEFAULT_FIND_BUFFER}=n;return e(new Cr(t).inflate(r),n).map(t=>this.findViewByModel(t))},_filterViewsInArea:function(t,e,n={}){const r=new Cr(t);return this._findInExtendedArea(r,e,n).filter(t=>!!t&&t.isInArea(r,n))},_filterViewsAtPoint:function(t,e,n={}){const r=new Cr(t);return this._findInExtendedArea(r,e,n).filter(e=>!!e&&e.isAtPoint(t,n))},removeTools:function(){return this.dispatchToolsEvent("remove"),this},hideTools:function(){return this.dispatchToolsEvent("hide"),this},showTools:function(){return this.dispatchToolsEvent("show"),this},dispatchToolsEvent:function(t,...e){"string"==typeof t&&this.trigger("tools:event",t,...e)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t,e){return this.clientToLocalPoint(t,e).snapToGrid(this.options.gridSize)},localToPaperPoint:function(t,e){var n=new hr(t,e);return Ii.transformPoint(n,this.matrix())},localToPaperRect:function(t,e,n,r){var i=new Cr(t,e,n,r);return Ii.transformRect(i,this.matrix())},paperToLocalPoint:function(t,e){var n=new hr(t,e);return Ii.transformPoint(n,this.matrix().inverse())},paperToLocalRect:function(t,e,n,r){var i=new Cr(t,e,n,r);return Ii.transformRect(i,this.matrix().inverse())},localToClientPoint:function(t,e){var n=new hr(t,e);return Ii.transformPoint(n,this.clientMatrix())},localToClientRect:function(t,e,n,r){var i=new Cr(t,e,n,r);return Ii.transformRect(i,this.clientMatrix())},clientToLocalPoint:function(t,e){var n=new hr(t,e);return Ii.transformPoint(n,this.clientMatrix().inverse())},clientToLocalRect:function(t,e,n,r){var i=new Cr(t,e,n,r);return Ii.transformRect(i,this.clientMatrix().inverse())},localToPagePoint:function(t,e){return this.localToPaperPoint(t,e).offset(this.pageOffset())},localToPageRect:function(t,e,n,r){return this.localToPaperRect(t,e,n,r).offset(this.pageOffset())},pageToLocalPoint:function(t,e){var n=new hr(t,e).difference(this.pageOffset());return this.paperToLocalPoint(n)},pageToLocalRect:function(t,e,n,r){var i=this.pageOffset(),o=new Cr(t,e,n,r);return o.x-=i.x,o.y-=i.y,this.paperToLocalRect(o)},clientOffset:function(){var t=this.svg.getBoundingClientRect();return new hr(t.left,t.top)},pageOffset:function(){return this.clientOffset().offset(window.scrollX,window.scrollY)},linkAllowed:function(t){if(!(t instanceof Dc))throw new Error("Must provide a linkView.");var e=t.model,n=this.options,r=this.model,i=r.constructor.validations;return!(!n.multiLinks&&!i.multiLinks.call(this,r,e)||!n.linkPinning&&!i.linkPinning.call(this,r,e)||"function"==typeof n.allowLink&&!n.allowLink.call(this,t,this))},getDefaultLink:function(t,e){return un(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t={}){let{highlighter:e,type:n}=t;const{highlighting:r,highlighterNamespace:i}=this.options;if(void 0===e){if(!r)return!1;if(n&&(e=r[n],!1===e))return!1;e||(e=r.default)}if(!e)return!1;Ye(e)&&(e={name:e});const o=e.name,s=i[o];if(!s)throw new Error('Unknown highlighter ("'+o+'")');if("function"!=typeof s.highlight)throw new Error('Highlighter ("'+o+'") is missing required highlight() method');if("function"!=typeof s.unhighlight)throw new Error('Highlighter ("'+o+'") is missing required unhighlight() method');return{highlighter:s,options:e.options||{},name:o}},onCellHighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.highlight(t,e,o)},onCellUnhighlight:function(t,e,n){const r=this.resolveHighlighter(n);if(!r)return;const{highlighter:i,options:o}=r;i.unhighlight(t,e,o)},pointerdblclick:function(t){t.preventDefault(),t=Mo(t);var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerdblclick(t,n.x,n.y):this.trigger("blank:pointerdblclick",t,n.x,n.y)}},pointerclick:function(t){if(this.eventData(t).mousemoved<=this.options.clickThreshold){t=Mo(t);var e=this.findView(t.target);if(this.guard(t,e))return;var n=this.snapToGrid(t.clientX,t.clientY);e?e.pointerclick(t,n.x,n.y):this.trigger("blank:pointerclick",t,n.x,n.y)}},contextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.contextMenuFired?this.contextMenuFired=!1:(t=Mo(t),this.contextMenuTrigger(t))},contextMenuTrigger:function(t){var e=this.findView(t.target);if(!this.guard(t,e)){var n=this.snapToGrid(t.clientX,t.clientY);e?e.contextmenu(t,n.x,n.y):this.trigger("blank:contextmenu",t,n.x,n.y)}},pointerdown:function(t){t=Mo(t);const{target:e,button:n}=t,r=this.findView(e),i=2===n;if(r){if(!i&&this.guard(t,r))return;const n=this.FORM_CONTROL_TAG_NAMES.includes(e.tagName);this.options.preventDefaultViewAction&&!n&&t.preventDefault(),n&&r.preventDefaultInteraction(t);const o=this.customEventTrigger(t,r);if(o){if(o.isPropagationStopped())return;t.data=o.data}const s=e.closest("[magnet]");if(s&&r.el!==s&&r.el.contains(s)){const e=Mo(new Ao.Event(t.originalEvent,{data:t.data,currentTarget:s}));if(this.onmagnet(e),e.isDefaultPrevented()&&t.preventDefault(),e.isPropagationStopped()){if(i)return;return void this.delegateDragEvents(r,e.data)}t.data=e.data}}if(i){this.contextMenuFired=!0;const e=new Ao.Event(t.originalEvent,{type:"contextmenu",data:t.data});this.contextMenuTrigger(e)}else{const e=this.snapToGrid(t.clientX,t.clientY);r?r.pointerdown(t,e.x,e.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.trigger("blank:pointerdown",t,e.x,e.y)),this.delegateDragEvents(r,t.data)}},pointermove:function(t){var e=this.eventData(t);if(e.mousemoved||(e.mousemoved=0,this.undelegateEvents()),!(++e.mousemoved<=this.options.moveThreshold)){t=Mo(t);var n=this.snapToGrid(t.clientX,t.clientY),r=e.sourceView;r?r.pointermove(t,n.x,n.y):this.trigger("blank:pointermove",t,n.x,n.y),this.eventData(t,e)}},pointerup:function(t){this.undelegateDocumentEvents();var e=Mo(t),n=this.snapToGrid(e.clientX,e.clientY),r=this.eventData(t).sourceView;r?r.pointerup(e,n.x,n.y):this.trigger("blank:pointerup",e,n.x,n.y),e.isPropagationStopped()||this.pointerclick(new Ao.Event(t.originalEvent,{type:"click",data:t.data})),this.delegateEvents()},mouseover:function(t){t=Mo(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseover(t);else{if(this.el===t.target)return;this.trigger("blank:mouseover",t)}},mouseout:function(t){t=Mo(t);var e=this.findView(t.target);if(!this.guard(t,e))if(e)e.mouseout(t);else{if(this.el===t.target)return;this.trigger("blank:mouseout",t)}},mouseenter:function(t){t=Mo(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);if(i){if(o===i)return;if(i.mouseenter(t),this.el.contains(n))return}o||r===this.el&&this.trigger("paper:mouseenter",t)},mouseleave:function(t){t=Mo(t);const{target:e,relatedTarget:n,currentTarget:r}=t,i=this.findView(e);if(this.guard(t,i))return;const o=this.findView(n);if(i){if(o===i)return;if(i.mouseleave(t),this.el.contains(n))return}o||r===this.el&&this.trigger("paper:mouseleave",t)},_processMouseWheelEvtBuf:function(t,e,n){let r,i,o,s,a,u,c=0,l=!1,h=!1,f=!0;const d=!e&&0!==e&&window&&"function"==typeof window.requestAnimationFrame;function p(e){const n=r,o=i;return r=i=void 0,c=e,s=t.apply(o,n),s}function g(t,e){return d?(window.cancelAnimationFrame(a),window.requestAnimationFrame(t)):setTimeout(t,e)}function v(t){const n=t-u;return void 0===u||n>=e||n<0||h&&t-c>=o}function m(){const t=Date.now();if(v(t))return y(t);a=g(m,function(t){const n=t-c,r=e-(t-u);return h?Math.min(r,o-n):r}(t))}function y(t){return a=void 0,f&&r?p(t):(r=i=void 0,s)}function b(...t){const n=Date.now(),o=v(n);if(r=t,i=this,u=n,o){if(void 0===a)return function(t){return c=t,a=g(m,e),l?p(t):s}(u);if(h)return a=g(m,e),p(u)}return void 0===a&&(a=g(m,e)),s}return e=+e||0,We(n)&&(l=!!n.leading,h="maxWait"in n,o=h?Math.max(+n.maxWait||0,e):o,f="trailing"in n?!!n.trailing:f),b.cancel=()=>{void 0!==a&&function(t){if(d)return window.cancelAnimationFrame(t);clearTimeout(t)}(a),c=0,r=u=i=a=void 0},b.flush=()=>void 0===a?s:y(Date.now()),b.pending=()=>void 0!==a,b}(function(){const{event:t,deltas:e}=this._mw_evt_buffer,n=e.reduce((t,e)=>{return t+((n=e)>50?50:n<-50?-50:n);var n},0),r=Math.pow(.995,n),{x:i,y:o}=this.clientToLocalPoint(t.clientX,t.clientY);this.trigger("paper:pinch",t,i,o,r),this._mw_evt_buffer={event:null,deltas:[]}},20,{maxWait:20}),mousewheel:function(t){t=Mo(t);const e=this.findView(t.target);if(this.guard(t,e))return;const n=t.originalEvent,r=this.snapToGrid(n.clientX,n.clientY),{deltaX:i,deltaY:o}=function(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r="deltaX"in t?t.deltaX:10*e,i="deltaY"in t?t.deltaY:10*n,(r||i)&&t.deltaMode&&(1==t.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),0===t.deltaX&&0!==t.deltaY&&t.shiftKey&&(r=i,i=0,e=n,n=0),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,deltaX:r,deltaY:i}}(n),s=this._events["paper:pinch"];if(t.ctrlKey&&s&&s.length>0)n.preventDefault(),this._mw_evt_buffer.event=t,this._mw_evt_buffer.deltas.push(o),this._processMouseWheelEvtBuf();else{const s=Math.max(-1,Math.min(1,n.wheelDelta));e?e.mousewheel(t,r.x,r.y,s):this.trigger("blank:mousewheel",t,r.x,r.y,s),this.trigger("paper:pan",t,i,o)}},onevent:function(t){var e=t.currentTarget,n=e.getAttribute("event");if(n){var r=this.findView(e);if(r){if(t=Mo(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);r.onevent(t,n,i.x,i.y)}}},magnetEvent:function(t,e){var n=t.currentTarget;if(n.getAttribute("magnet")){var r=this.findView(n);if(r){if(t=Mo(t),this.guard(t,r))return;var i=this.snapToGrid(t.clientX,t.clientY);e.call(this,r,t,n,i.x,i.y)}}},onmagnet:function(t){if(2===t.button){this.contextMenuFired=!0,this.magnetContextMenuFired=!0;const e=new Ao.Event(t.originalEvent,{type:"contextmenu",data:t.data,currentTarget:t.currentTarget});this.magnetContextMenuTrigger(e),e.isPropagationStopped()&&t.stopPropagation()}else this.magnetEvent(t,function(t,e,n,r,i){t.onmagnet(e,r,i)})},magnetpointerdblclick:function(t){this.magnetEvent(t,function(t,e,n,r,i){t.magnetpointerdblclick(e,n,r,i)})},magnetcontextmenu:function(t){this.options.preventContextMenu&&t.preventDefault(),this.magnetContextMenuFired?this.magnetContextMenuFired=!1:this.magnetContextMenuTrigger(t)},magnetContextMenuTrigger:function(t){this.magnetEvent(t,function(t,e,n,r,i){t.magnetcontextmenu(e,n,r,i)})},onlabel:function(t){var e=t.currentTarget,n=this.findView(e);if(!n)return;if(t=Mo(t),this.guard(t,n))return;const r=this.customEventTrigger(t,n,e);if(r){if(r.isPropagationStopped())return;t.data=r.data}var i=this.snapToGrid(t.clientX,t.clientY);n.onlabel(t,i.x,i.y)},getPointerArgs(t){const e=Mo(t),{x:n,y:r}=this.snapToGrid(e.clientX,e.clientY);return[e,n,r]},delegateDragEvents:function(t,e){e||(e={}),this.eventData({data:e},{sourceView:t||null,mousemoved:0}),this.delegateDocumentEvents(null,e)},guard:function(t,e){if("mousedown"===t.type&&2===t.button)return!0;if(this.options.guard&&this.options.guard(t,e))return!0;if(t.data&&void 0!==t.data.guarded)return t.data.guarded;const{target:n}=t;return!!this.GUARDED_TAG_NAMES.includes(n.tagName)||!(e&&e.model&&e.model instanceof ta)&&this.el!==n&&!this.svg.contains(n)},setGridSize:function(t){const{options:e}=this;return e.gridSize=t,e.drawGrid&&!e.drawGridSize&&this.getLayerView(Bc.GRID).renderGrid(),this},setGrid:function(t){return this.getLayerView(Bc.GRID).setGrid(t),this},updateBackgroundImage:function(t){var e=(t=t||{}).position||"center",n=t.size||"auto auto",r=this.scale(),i=this.translate();We(e)&&(e=i.tx+r.sx*(e.x||0)+"px "+(i.ty+r.sy*(e.y||0))+"px"),We(n)&&(n=(n=new Cr(n).scale(r.sx,r.sy)).width+"px "+n.height+"px");const{background:o}=this.childNodes;o.style.backgroundSize=n,o.style.backgroundPosition=e},drawBackgroundImage:function(t,e){if(t instanceof HTMLImageElement){if(this._background&&this._background.id===e.id){var n,r=(e=e||{}).size,i=e.repeat||"no-repeat",o=e.opacity||1,s=Math.abs(e.quality)||1,a=this.constructor.backgroundPatterns[wn(i)];if(un(a)){t.width*=s,t.height*=s;var u=a(t,e);if(!(u instanceof HTMLCanvasElement))throw new Error("dia.Paper: background pattern must return an HTML Canvas instance");n=u.toDataURL("image/png"),i="repeat",We(r)?(r.width*=u.width/t.width,r.height*=u.height/t.height):void 0===r&&(e.size={width:u.width/s,height:u.height/s})}else n=t.src,void 0===r&&(e.size={width:t.width,height:t.height});this.childNodes.background.style.opacity=o,this.childNodes.background.style.backgroundRepeat=i,this.childNodes.background.style.backgroundImage=`url(${n})`,this.updateBackgroundImage(e)}}else this.childNodes.background.style.backgroundImage=""},updateBackgroundColor:function(t){this.$el.css("backgroundColor",t||"")},drawBackground:function(t){if(t=t||{},this.updateBackgroundColor(t.color),t.image){t=this._background=on(t),Oo(t);var e=document.createElement("img");e.onload=this.drawBackgroundImage.bind(this,e,t),e.src=t.image}else this.drawBackgroundImage(null),this._background=null;return this},setInteractivity:function(t){this.options.interactive=t,Qe(this._views,"setInteractivity",t)},isDefined:function(t){return!!this.svg.getElementById(t)},defineFilter:function(t){if(!We(t))throw new TypeError("dia.Paper: defineFilter() requires 1. argument to be an object.");var e=t.id,n=t.name;if(e||(e=n+this.svg.id+To(JSON.stringify(t))),!this.isDefined(e)){var r=$o,i=r[n]&&r[n](t.args||{});if(!i)throw new Error("Non-existing filter "+n);var o=Ze({filterUnits:"userSpaceOnUse"},t.attrs,{id:e});Ii(i,o).appendTo(this.defs)}return e},defineGradient:function(t){if(!We(t))throw new TypeError("dia.Paper: defineGradient() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{type:r,id:i=r+e.id+To(JSON.stringify(t)),stops:o,attrs:s={}}=t;if(this.isDefined(i))return i;const a=ln(o).map(({offset:t,color:e,opacity:n})=>Ii("stop").attr({offset:t,"stop-color":e,"stop-opacity":Number.isFinite(n)?n:1})),u=Ii(r,s,a);return u.id=i,u.appendTo(n),i},definePattern:function(t){if(!We(t))throw new TypeError("dia.Paper: definePattern() requires 1. argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+To(JSON.stringify(t)),markup:i,attrs:o={}}=t;if(!i)throw new TypeError("dia.Paper: definePattern() requires markup.");if(this.isDefined(r))return r;const s=Ii("pattern",{patternUnits:"userSpaceOnUse"});if(s.id=r,s.attr(o),"string"==typeof i)s.append(Ii(i));else{const{fragment:t}=So(i);s.append(t)}return s.appendTo(n),r},defineMarker:function(t){if(!We(t))throw new TypeError("dia.Paper: defineMarker() requires the first argument to be an object.");const{svg:e,defs:n}=this,{id:r=e.id+To(JSON.stringify(t)),markup:i,attrs:o={},markerUnits:s="userSpaceOnUse"}=t;if(this.isDefined(r))return r;const a=Ii("marker",{orient:"auto",overflow:"visible",markerUnits:s});let u;if(a.id=r,a.attr(o),i){let t;if("string"==typeof i)t=Ii(i),t=Array.isArray(t)?t:[t];else{const{fragment:e}=So(i);t=Ii(e).children()}u=t.length>1?Ii("g").append(t):t[0]}else{const{type:e="path"}=t;u=Ii(e)}const c=yn(t,"type","id","markup","attrs","markerUnits");return Object.keys(c).forEach(t=>{const e=c[t],n=u.attr(t);null==n?u.attr(t,e):"transform"===t&&u.attr(t,e+" "+n)}),u.appendTo(a),a.appendTo(n),r},customEventTrigger:function(t,e,n=e.el){const r=t.target.closest("[event]");if(r&&n!==r&&e.el.contains(r)){const e=Mo(new Ao.Event(t.originalEvent,{data:t.data,currentTarget:r}));return this.onevent(e),e.isDefaultPrevented()&&t.preventDefault(),e}return null}},{sorting:cp,Layers:Bc,backgroundPatterns:{flipXy:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(t,0,0,n,r),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(t,0,0,n,r),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(t,0,0,n,r),e},flipX:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=2*n,e.height=r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(t,0,0,n,r),e},flipY:function(t){var e=document.createElement("canvas"),n=t.width,r=t.height;e.width=n,e.height=2*r;var i=e.getContext("2d");return i.drawImage(t,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(t,0,0,n,r),e},watermark:function(t,e){e=e||{};var n=t.width,r=t.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;for(var o=i.getContext("2d"),s=Xe(e.watermarkAngle)?-e.watermarkAngle:-20,a=$n(s),u=i.width/4,c=i.height/4,l=0;l<4;l++)for(var h=0;h<4;h++)(l+h)%2>0&&(o.setTransform(1,0,0,1,(2*l-1)*u,(2*h-1)*c),o.rotate(a),o.drawImage(t,-n/2,-r/2,n,r));return i}},gridPatterns:{dot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(t,e){Ii(t).attr({width:e.thickness,height:e.thickness,fill:e.color})}}],fixedDot:[{color:"#AAAAAA",thickness:1,markup:"rect",render:function(t,e){Ii(t).attr({fill:e.color})},update:function(t,e,n){const{sx:r,sy:i}=n.scale(),o=r<=1?e.thickness:e.thickness/r,s=i<=1?e.thickness:e.thickness/i;Ii(t).attr({width:o,height:s})}}],mesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",Ii(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}],doubleMesh:[{color:"#AAAAAA",thickness:1,markup:"path",render:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",Ii(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}},{color:"#000000",thickness:3,scaleFactor:4,markup:"path",render:function(t,e){var n,r=e.width,i=e.height,o=e.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",Ii(t).attr({d:n,stroke:e.color,"stroke-width":e.thickness})}}]}});var vp=n(28057),mp=n(96743);const yp={exportElement:function(t){return t.size()},exportLink:function(t){var e=t.get("labelSize")||{};return{minLen:t.get("minLen")||1,weight:t.get("weight")||1,labelpos:t.get("labelPosition")||"c",labeloffset:t.get("labelOffset")||0,width:e.width||0,height:e.height||0}},importElement:function(t,e,n,r){var i=n.getCell(t),o=e.node(t);r.setPosition?r.setPosition(i,o):i.set("position",{x:o.x-o.width/2,y:o.y-o.height/2})},importLink:function(t,e,n,r){const i=n.getCell(t.name),o=e.edge(t),s=o.points||[],a=new Ir(s);if(r.setVertices||r.setLinkVertices)if(un(r.setVertices))r.setVertices(i,s);else{a.simplify({threshold:.001});const t=a.points.map(t=>t.toJSON()),e=t.length;i.set("vertices",t.slice(1,e-1))}if(r.setLabels&&"x"in o&&"y"in o){const t={x:o.x,y:o.y};if(un(r.setLabels))r.setLabels(i,t,s);else{const e=a.closestPointLength(t),n=a.pointAtLength(e),r=e/a.length(),o=new hr(t).difference(n).toJSON();i.label(0,{position:{distance:r,offset:o}})}}},layout:function(t,e){var n;n=t instanceof hd?t:(new hd).resetCells(t,{dry:!0,sort:!1}),t=null,e=Je(e||{},{resizeClusters:!0,clusterPadding:10,exportElement:this.exportElement,exportLink:this.exportLink});var r=yp.toGraphLib(n,{directed:!0,multigraph:!0,compound:!0,setNodeLabel:e.exportElement,setEdgeLabel:e.exportLink,setEdgeName:function(t){return t.id}}),i={},o=Xe(e.marginX)?e.marginX:0,s=Xe(e.marginY)?e.marginY:0;if(e.rankDir&&(i.rankdir=e.rankDir),e.align&&(i.align=e.align),Xe(e.nodeSep)&&(i.nodesep=e.nodeSep),Xe(e.edgeSep)&&(i.edgesep=e.edgeSep),Xe(e.rankSep)&&(i.ranksep=e.rankSep),e.ranker&&(i.ranker=e.ranker),i.marginx=o,i.marginy=s,r.setGraph(i),vp.layout(r,{debugTiming:!!e.debugTiming}),n.startBatch("layout"),yp.fromGraphLib(r,{importNode:this.importElement,importEdge:this.importLink,...e,graph:n}),e.resizeClusters){const t=r.nodes().filter(t=>!r.parent(t)&&r.children(t).length>0).map(n.getCell.bind(n));Qe(t,"fitToChildren",{padding:e.clusterPadding,deep:!0})}n.stopBatch("layout");var a=r.graph();return new Cr(o,s,Math.abs(a.width-2*o),Math.abs(a.height-2*s))},fromGraphLib:function(t,e){var n=(e=e||{}).importNode||Zo,r=e.importEdge||Zo,i=e.graph;return i||(i=this instanceof hd?this:new hd),t.nodes().forEach(function(r){n.call(i,r,t,i,e)}),t.edges().forEach(function(n){r.call(i,n,t,i,e)}),i},toGraphLib:function(t,e){for(var n=bn(e=e||{},"directed","compound","multigraph"),r=new mp.Graph(n),i=e.setNodeLabel||Zo,o=e.setEdgeLabel||Zo,s=e.setEdgeName||Zo,a=t.get("cells"),u=0,c=a.length;u<c;u++){var l=a.at(u);if(l.isLink()){var h=l.get("source"),f=l.get("target");if(!h.id||!f.id)break;r.setEdge(h.id,f.id,o(l),s(l))}else if(r.setNode(l.id,i(l)),r.isCompound()&&l.has("parent")){var d=l.get("parent");a.has(d)&&r.setParent(l.id,d)}}return r}};var bp=n(76246),xp=n(38362);const wp=cl.define("FSM",{bits:{in:1,out:1},polarity:{clock:!0},init_state:0,states:1,trans_table:[],size:{width:80,height:56},ports:{groups:{in:{position:cl.prototype._getStackedPosition({side:"left"})},out:{position:cl.prototype._getStackedPosition({side:"right"})}}}},{initialize(){const t=this.get("bits"),e=this.get("polarity"),n=this.get("init_state"),r=this.get("states");this.get("trans_table"),this.get("ports").items=[{id:"in",group:"in",dir:"in",bits:t.in,labelled:!0},{id:"clk",group:"in",dir:"in",bits:1,polarity:e.clock,decor:cl.prototype.decorClock,labelled:!0},{id:"arst",group:"in",dir:"in",bits:1,polarity:e.arst,labelled:!0},{id:"out",group:"out",dir:"out",bits:t.out,labelled:!0}],cl.prototype.initialize.apply(this,arguments);const i=this.get("current_state");this.fsmgraph=new hd;const o=[];for(let t=0;t<r;t++){const e=new eu({stateNo:t,id:"state"+t,isInit:t==n});e.attr("label/text",String(t)),e.resize(50,50),t==n&&e.attr("body/strokeWidth",3),t==i&&e.attr("body/class","current_state"),e.addTo(this.fsmgraph),o.push(e)}for(const[t,e]of this.transitions)for(const n of e){const e=new ru({id:n.id,ctrlIn:n.ctrlIn,ctrlOut:n.ctrlOut});e.appendLabel({attrs:{text:{text:e.get("ctrlIn").toBin()+"/"+e.get("ctrlOut").toBin()}}}),e.source({id:"state"+t}),e.target({id:"state"+n.stateOut}),e.addTo(this.fsmgraph)}this.listenTo(this,"change:current_state",(t,e)=>{const n=t.previous("current_state");this.fsmgraph.getCell("state"+n).removeAttr("body/class"),this.fsmgraph.getCell("state"+e).attr("body/class","current_state")}),this.listenTo(this,"change:next_trans",(t,e)=>{const n=t.previous("next_trans");if(n){const t=this.fsmgraph.getCell(n);t.removeAttr("line/class"),t.removeAttr("line/targetMarker/class")}e&&this.fsmgraph.getCell(e).attr({line:{class:"next_trans",targetMarker:{class:"next_trans"}}})})},prepare(){const t=this.get("bits");this.transitions=new Map;var e=0;for(const n of this.get("trans_table"))this.transitions.has(n.state_in)||this.transitions.set(n.state_in,[]),this.transitions.get(n.state_in).push({id:"tr"+e,stateOut:n.state_out,ctrlIn:Hc.Vector3vl.fromBin(n.ctrl_in,t.in),ctrlOut:Hc.Vector3vl.fromBin(n.ctrl_out,t.out)}),e++;var n=this.get("current_state");void 0===n&&(n=this.get("init_state"),this.set("current_state",n)),this.last_clk=0},operation(t){const e=this.get("bits"),n=this.get("polarity"),r=()=>{const e=this.transitions.get(this.get("current_state"))||[];for(const n of e){const e=n.ctrlIn,r=e.xmask();if(t.in.or(r).eq(e.or(r)))return n}},i=t=>n[t]?1:-1;if(t.arst.get(0)==i("arst"))this.set("current_state",this.get("init_state"));else{const e=this.last_clk;if(t.clk.get(0)==i("clock")&&e==-i("clock")){const t=r();this.set("current_state",t?t.stateOut:this.get("init_state"))}}this.last_clk=t.clk.get(0);const o=r();return o?this.set("next_trans",o.id):this.set("next_trans",void 0),{out:(()=>{const n=this.transitions.get(this.get("current_state"))||[],r=t.in.xmask(),i=[];for(const e of n){const n=e.ctrlIn,o=n.xmask().or(r);t.in.or(o).eq(n.or(o))&&i.push(e.ctrlOut)}const o=Hc.Vector3vl.xes(e.out);if(0==i.length)return o;for(;i.length>1;){const t=i.pop(),e=i[0].xnor(t).or(o);i[0]=i[0].and(e).or(o.and(e.xmask()))}return i[0]})()}},markup:cl.prototype.markup.concat(cl.prototype.markupZoom),_gateParams:cl.prototype._gateParams.concat(["bits","polarity","states","init_state","trans_table"]),_unsupportedPropChanges:cl.prototype._unsupportedPropChanges.concat(["bits","polarity","states","init_state","trans_table"]),_presentationParams:cl.prototype._presentationParams.concat(["current_state","next_trans"])}),_p=ll.extend({_autoResizeBox:!0,events:{"click foreignObject.tooltip":"stopprop","mousedown foreignObject.tooltip":"stopprop","touchstart foreignObject.tooltip":"stopprop","click a.zoom":"_displayEditor"},_displayEditor(t){t.stopPropagation();const e=rl("<div>",{title:"FSM: "+this.model.get("label")}).appendTo("html > body"),n=rl("<div>").appendTo(e),r=this.model.fsmgraph,i=new gp({el:n,model:r});return r.resetCells(r.getCells()),r.get("laid_out")||(yp.layout(r,{dagre:bp,graphlib:xp}),r.set("laid_out",!0)),i.listenTo(r,"change:position",t=>{i.fitToContent({padding:30,allowNewOrigin:"any"})}),i.fitToContent({padding:30,allowNewOrigin:"any"}),this.paper.trigger("open:fsm",e,()=>{i.remove(),e.remove()}),!1}}),Ep="#03c03c",Ap="#3c3c3c",kp=dl.define("Display7",{bits:8,size:{width:76.5,height:110},attrs:{LEDs:{fill:Ap,transform:"translate(1,1),scale(6)"},a:{points:"1, 1  2, 0  8, 0  9, 1  8, 2  2, 2"},b:{points:"9, 1 10, 2 10, 8  9, 9  8, 8  8, 2"},c:{points:"9, 9 10,10 10,16  9,17  8,16  8,10"},d:{points:"9,17  8,18  2,18  1,17  2,16  8,16"},e:{points:"1,17  0,16  0,10  1, 9  2,10  2,16"},f:{points:"1, 9  0, 8  0, 2  1, 1  2, 2  2, 8"},g:{points:"1, 9  2, 8  8, 8  9, 9  8,10  2,10"},dp:{cx:"11.3",cy:"16.9",r:"1.1"},body:{height:"calc(h)",width:"calc(w)",stroke:"#222222",fill:"#333333"}}},{isOutput:!0,_portDirection:"in",bits:8,getOutput(){return this.get("inputSignals").in},markupBus:hl.prototype.markup.concat([{tagName:"rect",selector:"display"},{tagName:"polygon",selector:"a",groupSelector:"LEDs"},{tagName:"polygon",selector:"b",groupSelector:"LEDs"},{tagName:"polygon",selector:"c",groupSelector:"LEDs"},{tagName:"polygon",selector:"d",groupSelector:"LEDs"},{tagName:"polygon",selector:"e",groupSelector:"LEDs"},{tagName:"polygon",selector:"f",groupSelector:"LEDs"},{tagName:"polygon",selector:"g",groupSelector:"LEDs"},{tagName:"circle",selector:"dp",groupSelector:"LEDs"}])}),Sp=pl.extend({_autoResizeBox:!1,confirmUpdate(t){ll.prototype.confirmUpdate.apply(this,arguments),this._updateDisplay()},_updateDisplay(){const t=this.model.getOutput(),e={dp:{fill:1===t.get(7)?Ep:Ap},a:{fill:1===t.get(6)?Ep:Ap},b:{fill:1===t.get(5)?Ep:Ap},c:{fill:1===t.get(4)?Ep:Ap},d:{fill:1===t.get(3)?Ep:Ap},e:{fill:1===t.get(2)?Ep:Ap},f:{fill:1===t.get(1)?Ep:Ap},g:{fill:1===t.get(0)?Ep:Ap}};this._applyAttrs(e)}});var Tp=n(71451);const Pp=new Set(["Subcircuit","Input","Output","Button","Lamp","NumEntry","NumDisplay"]);class Cp{constructor(t,e){this.source=t,this.target=e}}class Np{constructor(t,e,n,r,i,o){this.id=t,this.graph=e,this.special=Pp.has(n.type),this.isSubcircuit="Subcircuit"==n.type,this.isOutput="Output"==n.type;const s=g[n.type].prototype;this.operation=s.operation;for(const t of s._operationHelpers)this[t]=s[t];this.links=new Set,this._links_to=Object.create(null),this._params=n,this._params.inputSignals=Object.create(null),this._params.outputSignals=Object.create(null),this._presentationParams=s._presentationParams,this._presentationParamChanged=Object.create(null),this._monitors=Object.create(null),this._ports=Object.create(null);for(const t of r)this._ports[t.id]=t,this._monitors[t.id]=new Set,"in"==t.dir&&(this._params.inputSignals[t.id]=Hc.Vector3vl.fromClonable(i[t.id])),"out"==t.dir&&(this._params.outputSignals[t.id]=Hc.Vector3vl.fromClonable(o[t.id]),this._links_to[t.id]=new Set);s.prepare.call(this)}get(t){return this._params[t]}set(t,e){this._params[t]=e,this._presentationParams.includes(t)&&Op._markPresentationParam(this,t)}addLinkTo(t,e){this._links_to[t].add(e)}removeLinkTo(t,e){this._links_to[t].delete(e)}addLink(t){this.links.add(t)}removeLink(t){this.links.delete(t)}targets(t){return this._links_to[t]}getPort(t){return this._ports[t]}getPorts(){return Object.values(this._ports)}trigger(t,...e){postMessage({type:"gateTrigger",args:[this.graph.id,this.id,t,e]})}monitor(t,e){this._monitors[t].add(e)}unmonitor(t,e){this._monitors[t].delete(Number(e))}getMonitors(t){return this._monitors[t]}}class Lp{constructor(t){this.id=t,this._gates={},this._links={},this._observed=!1,this._subcircuit=null}addLink(t,e,n){this._links[t]=new Cp(e,n),this._gates[e.id].addLinkTo(e.port,n),this._gates[e.id].addLink(t),this._gates[n.id].addLink(t)}addGate(t,e,n,r,i){this._gates[t]=new Np(t,this,e,n,r,i)}removeLink(t){const e=this._links[t];this._gates[e.source.id].removeLinkTo(e.source.port,e.target),this._gates[e.source.id].removeLink(t),this._gates[e.target.id].removeLink(t),delete this._links[t]}removeGate(t){for(const e of this._gates[t].links)this.removeLink(e);this._gates[t].graph=null,delete this._gates[t]}getGate(t){return this._gates[t]}getLink(t){return this._links[t]}getGates(){return Object.values(this._gates)}observe(){this._observed=!0}unobserve(){this._observed=!1}get observed(){return this._observed}setSubcircuit(t){this._subcircuit=t}get subcircuit(){return this._subcircuit}}const Op=new class{constructor(){this._interval=10,this._graphs=Object.create(null),this._monitors=Object.create(null),this._monitorChecks=Object.create(null),this._alarms=Object.create(null),this._alarmQueue=new Map,this._queue=new Map,this._pq=new Tp,this._toUpdate=new Map,this._toUpdateParam=new Map,this._tick=0,this._sender=setInterval(()=>{this._sendUpdates()},25),this._updater=null}interval(t){this._interval=t}updateGates(t,e){const n=this._updateGates();e&&this._sendUpdates(),this._postMonitors(),this._sendAck(t,n)}_updateGates(){if(this._pq.peek()==this._tick)return this._updateGatesNext();{const t=0|this._tick;return this._tick=t+1|0,0}}updateGatesNext(t,e){const n=this._updateGatesNext();e&&this._sendUpdates(),this._postMonitors(),this._sendAck(t,n)}_updateGatesNext(){const t=0|this._pq.poll();console.assert(t>=this._tick),this._tick=t;const e=this._queue.get(t);let n=0;for(;e.size;){const[t,r]=e.entries().next().value;if(e.delete(t),t.special)continue;if(!t.graph)continue;const i=t.operation(r);"_clock_hack"in i&&(delete i._clock_hack,this._enqueue(t)),this._setGateOutputSignals(t,i),n++}return this._queue.delete(t),this._tick=t+1|0,n}ping(t,e){e&&this._sendUpdates(),this._sendAck(t)}start(){this._stop(),this._updater=setInterval(()=>{this._updateGates(),this._postMonitors()},this._interval)}startFast(){this._stop(),this._updater=setInterval(()=>{const t=Date.now();for(;Date.now()-t<10&&this._hasPendingEvents()&&this._updater;)this._updateGatesNext(),this._postMonitors()},10)}stop(t,e){this._stop(),e&&this._sendUpdates(),this._sendAck(t)}_stop(){this._updater&&(clearInterval(this._updater),this._updater=null)}addGraph(t){console.assert(!(t in this._graphs)),this._graphs[t]=new Lp(t)}addLink(t,e,n,r){const i=this._graphs[t];i.addLink(e,n,r);const o=i.getGate(n.id),s=i.getGate(r.id),a=o.get("outputSignals")[n.port];this._setGateInputSignal(s,r.port,a)}addGate(t,e,n,r,i,o){const s=this._graphs[t];s.addGate(e,n,r,i,o),this._enqueue(s.getGate(e))}addSubcircuit(t,e,n,r){const i=this._graphs[t].getGate(e),o=this._graphs[n];i.set("subgraph",o),i.set("circuitIOmap",r),o.setSubcircuit(i);for(const[t,e]of Object.entries(r)){const n=o.getGate(e);"in"==i.getPort(t).dir&&this._setGateOutputSignal(n,"out",i.get("inputSignals")[t]),"out"==i.getPort(t).dir&&this._setGateOutputSignal(i,t,n.get("inputSignals").in)}}removeLink(t,e){const n=this._graphs[t],r=n.getLink(e);n.removeLink(e);const i=n.getGate(r.target.id),o=Hc.Vector3vl.xes(i.getPort(r.target.port).bits);this._setGateInputSignal(i,r.target.port,o)}removeGate(t,e){this._graphs[t].removeGate(e)}observeGraph(t){const e=this._graphs[t];e.observe();for(const t of e.getGates())for(const e of t.getPorts())"out"==e.dir&&this._markUpdate(t,e.id)}unobserveGraph(t){this._graphs[t].unobserve()}changeInput(t,e,n){const r=this._graphs[t].getGate(e);this._setGateOutputSignals(r,{out:Hc.Vector3vl.fromClonable(n)})}changeParam(t,e,n,r){this._graphs[t].getGate(e).set(n,r)}manualMemChange(t,e,n,r){const i=this._graphs[t].getGate(e);i.memdata.set(n,Hc.Vector3vl.fromClonable(r)),this._enqueue(i)}monitor(t,e,n,r,{triggerValues:i,stopOnTrigger:o,oneShot:s,synchronous:a}){if(null!=i)for(const t of i.keys())i[t]=Hc.Vector3vl.fromClonable(i[t]);const u=this._graphs[t].getGate(e);this._monitors[r]={gate:u,port:n,triggerValues:i,stopOnTrigger:o,oneShot:s,synchronous:a},u.monitor(n,r),null==i&&postMessage({type:"monitorValue",args:[r,this._tick,u.get("outputSignals")[n]]})}unmonitor(t){const e=this._monitors[t];null!=e&&(e.gate.unmonitor(e.port,t),delete this._monitors[t],delete this._monitorChecks[t])}alarm(t,e,{stopOnAlarm:n,synchronous:r}){t<=this._tick||(this._alarms[e]={tick:t,stopOnAlarm:n,synchronous:r},this._alarmQueue.has(t)||this._alarmQueue.set(t,new Set),this._alarmQueue.get(t).add(e),this._pq.add(t-1),this._queue.has(t-1)||this._queue.set(t-1,new Map))}unalarm(t){const e=this._alarms[t];if(null==e)return;const n=e.tick;this._alarmQueue.get(n).delete(t),0==this._alarmQueue.get(n).size&&this._alarmQueue.delete(n),delete this._alarms[t]}_enqueue(t){const e=this._tick+t.get("propagation")|0;(()=>{const t=this._queue.get(e);if(void 0!==t)return t;const n=new Map;return this._queue.set(e,n),this._pq.add(e),n})().set(t,Object.assign({},t.get("inputSignals")))}_postMonitors(){for(const[t,e]of Object.entries(this._monitorChecks)){const{triggerValues:n,stopOnTrigger:r,oneShot:i,synchronous:o}=this._monitors[t];let s=!0;n&&(s=n.some(t=>e.eq(t))),s&&(i&&this.unmonitor(t),o&&this._sendUpdates(),postMessage({type:"monitorValue",args:[t,this._tick,e,r,i]}),r&&this._stop())}if(this._monitorChecks=Object.create(null),this._alarmQueue.get(this._tick)){for(const t of this._alarmQueue.get(this._tick)){const{stopOnAlarm:e,synchronous:n}=this._alarms[t];n&&this._sendUpdates(),delete this._alarms[t],postMessage({type:"alarmReached",args:[t,this._tick,e]}),e&&this._stop()}this._alarmQueue.delete(this._tick)}}_setGateOutputSignals(t,e){for(const[n,r]of Object.entries(e))this._setGateOutputSignal(t,n,r)}_setGateOutputSignal(t,e,n){const r=t.get("outputSignals"),i=r[e];if(n.eq(i))return;r[e]=n,this._markUpdate(t,e);for(const r of t.targets(e)){const e=t.graph.getGate(r.id);this._setGateInputSignal(e,r.port,n)}const o=t.getMonitors(e);for(const t of o)this._monitorChecks[t]=n}_setGateInputSignal(t,e,n){const r=t.get("inputSignals"),i=r[e];if(!n.eq(i))if(r[e]=n,t.isSubcircuit){const r=t.get("subgraph");if(!r)return;const i=t.get("circuitIOmap"),o=r.getGate(i[e]);if(!o)return;this._setGateOutputSignals(o,{out:n})}else if(t.isOutput){const e=t.graph.subcircuit;if(!e)return;const r=t.get("net");this._setGateOutputSignal(e,r,n)}else this._enqueue(t)}_markUpdate(t,e){t.graph.observed&&(()=>{const e=this._toUpdate.get(t);if(void 0!==e)return e;const n=new Set;return this._toUpdate.set(t,n),n})().add(e)}_markPresentationParam(t,e){t.graph.observed&&(()=>{const e=this._toUpdateParam.get(t);if(void 0!==e)return e;const n=new Set;return this._toUpdateParam.set(t,n),n})().add(e)}_sendUpdates(){const t=[];for(const[e,n]of this._toUpdate){const r=e.get("outputSignals"),i={};for(const t of n)i[t]=r[t];t.push([e.graph.id,e.id,i])}this._toUpdate=new Map;const e=this._hasPendingEvents();if(postMessage({type:"update",args:[this._tick,e,t]}),this._toUpdateParam.size>0){for(const[t,e]of this._toUpdateParam)for(const n of e)postMessage({type:"gateSet",args:[t.graph.id,t.id,n,t.get(n)]});this._toUpdateParam=new Map}}_sendAck(t,e){postMessage({type:"ack",args:[t,e]})}_hasPendingEvents(){return this._queue.size>0}};self.onmessage=t=>{const e=t.data;"arg"in e?Op[e.type](e.arg):"args"in e?Op[e.type].apply(Op,e.args):Op[e.type]()};
//# sourceMappingURL=649.bundle.js.map